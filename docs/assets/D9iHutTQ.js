import{y as r,A as c,C as s,B as z,a4 as O,a5 as x,a6 as F,a7 as w,z as h,E as _,a2 as U,a8 as K,a9 as Q,aa as B,ab as V,ac as A,J as p,V as M,ad as C,K as D,ae as H,af as J}from"#entry";import{u as R}from"./B1-yQkzy.js";const Y={class:"header"},P={__name:"WikiHeader",setup(a){const v=()=>{location.href="/wiki"},n=()=>{window.open("/","_blank")};return(l,i)=>(c(),r("header",Y,[s("h1",null,[s("button",{class:"logo",onClick:v},"íƒ€ë¡œ Wiki")]),s("button",{class:"btn_back",onClick:n},"numerologyTarotâ†’")]))}},X={class:"search"},Z=["value"],ee={class:"nav"},te=["onClick"],se={class:"nav_category"},ae={class:"nav_category_arrow"},oe={class:"nav_list"},ne=["onClick"],le={key:0,class:"nav_empty"},re={__name:"WikiSidebar",props:{filteredGroupedList:{type:Object,required:!0},selectedItem:{type:Object,default:null},openCategories:{type:Set,required:!0},searchQuery:{type:String,default:""},isMenuOpen:{type:Boolean,default:!1}},emits:["update:search-query","select-item","toggle-category","toggle-menu","close-menu"],setup(a){const v=n=>({basic:"íƒ€ë¡œ ê¸°ì´ˆ",majors:"ë©”ì´ì € ì•„ë¥´ì¹´ë‚˜",wands:"ë§ˆì´ë„ˆ - ì™„ë“œ",cups:"ë§ˆì´ë„ˆ - ì»µ",swords:"ë§ˆì´ë„ˆ - ì†Œë“œ",pentacles:"ë§ˆì´ë„ˆ - ë™ì „ or íœíƒ€í´"})[n]||n;return(n,l)=>(c(),r("aside",{class:w(["sidebar",{on:a.isMenuOpen}])},[s("button",{class:"btn_toggle",onClick:l[0]||(l[0]=i=>n.$emit("toggle-menu"))}),s("div",X,[s("input",{type:"text",value:a.searchQuery,onInput:l[1]||(l[1]=i=>n.$emit("update:search-query",i.target.value)),placeholder:"ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”",class:"ipt_search"},null,40,Z)]),s("nav",ee,[(c(!0),r(x,null,F(a.filteredGroupedList,(i,o)=>(c(),r("div",{key:o,class:"nav_group"},[s("div",{class:"nav_category_header",onClick:g=>n.$emit("toggle-category",o)},[s("span",se,_(v(o)),1),s("span",ae,_(a.openCategories.has(o)?"â–¼":"â–¶"),1)],8,te),h(B,{name:"slide"},{default:U(()=>[K(s("ul",oe,[(c(!0),r(x,null,F(i,g=>(c(),r("li",{key:g.id,class:w({active:a.selectedItem?.id===g.id}),onClick:y=>n.$emit("select-item",g)},_(g.title),11,ne))),128))],512),[[Q,a.openCategories.has(o)]])]),_:2},1024)]))),128)),Object.keys(a.filteredGroupedList).length===0?(c(),r("p",le," ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤. ")):O("",!0)])],2))}},ce=z(re,[["__scopeId","data-v-82677130"]]),ie={class:"bx_navigation"},ue={class:"txt_cate"},de={class:"contents"},ge=["innerHTML"],ve={key:1,class:"contents empty"},me={__name:"WikiContent",props:{selectedItem:{type:Object,default:null},formatContent:{type:Function,required:!0}},setup(a){const v=n=>({basic:"íƒ€ë¡œ ê¸°ì´ˆ",majors:"ë©”ì´ì € ì•„ë¥´ì¹´ë‚˜",wands:"ë§ˆì´ë„ˆ - ì™„ë“œ",cups:"ë§ˆì´ë„ˆ - ì»µ",swords:"ë§ˆì´ë„ˆ - ì†Œë“œ",pentacles:"ë§ˆì´ë„ˆ - ë™ì „ or íœíƒ€í´"})[n]||n;return(n,l)=>(c(),r("main",{class:w("wrap_wiki "+(a.selectedItem?.category||""))},[h(B,{name:"fade",mode:"out-in"},{default:U(()=>[a.selectedItem?(c(),r("div",{key:a.selectedItem.id,class:"container"},[s("div",ie,[s("span",ue,_(v(a.selectedItem.category)),1)]),s("h2",null,_(a.selectedItem.title),1),s("div",de,[a.selectedItem.card_num!==-1?(c(),r("div",{key:0,class:"bx_img",style:V({background:"url('/img/card/"+(a.selectedItem?.category||"")+"/"+a.selectedItem.card_num+".jpg') no-repeat 50% -4px"})},null,4)):O("",!0),s("div",{class:"content",innerHTML:a.formatContent(a.selectedItem.content)},null,8,ge)])])):(c(),r("div",ve,[...l[0]||(l[0]=[s("p",{class:"icon"},"ğŸ“–",-1),s("p",{class:"txt"},"ì™¼ìª½ ëª©ë¡ì—ì„œ í•­ëª©ì„ ì„ íƒí•´ì£¼ì„¸ìš”",-1)])]))]),_:1})],2))}},fe={class:"wiki"},ye={key:0,class:"denied"},pe={class:"body"},ke={__name:"index",setup(a){const v=A(),n=H(),l=J(),i=p([]),o=p(null),g=p(""),y=p(!1),d=p(new Set),k=M(()=>["ë§ˆìŠ¤í„°","í”„ë¡œ"].includes(v.userGrade)),j=M(()=>{const e={};return i.value.forEach(t=>{e[t.category]||(e[t.category]=[]),e[t.category].push(t)}),e}),S=M(()=>{if(!g.value.trim())return j.value;const e=g.value.toLowerCase(),t={};return Object.entries(j.value).forEach(([u,f])=>{const m=f.filter(L=>L.title.toLowerCase().includes(e)||L.content.toLowerCase().includes(e)||L.category.toLowerCase().includes(e));m.length>0&&(t[u]=m)}),t}),T=()=>{const e=n.params.slug;if(!e||!Array.isArray(e)||e.length<2)return null;const t=e[0],u=parseInt(e[1],10);if(!t||isNaN(u))return null;let f;return t.toLowerCase()==="basic"?f=i.value.find(m=>m.category.toLowerCase()===t.toLowerCase()&&m.id===u):f=i.value.find(m=>m.category.toLowerCase()===t.toLowerCase()&&m.card_num===u),f},I=e=>{e&&(e.category.toLowerCase()==="basic"?l.push(`/wiki/${e.category.toLowerCase()}/${e.id}`):e.card_num===-1?l.push("/wiki"):l.push(`/wiki/${e.category.toLowerCase()}/${e.card_num}`))},N=e=>{o.value=e,I(e),e&&e.category&&d.value.add(e.category),b()},W=e=>{d.value.has(e)?d.value.delete(e):d.value.add(e)},E=()=>{y.value=!y.value},b=()=>{y.value=!1},G=e=>e.replace(/\n/g,"<br>"),q=()=>{l.push("/")},$=async()=>{if(k.value)try{const{data:e}=await R("/data/wiki.json","$4qzYT1EKJc");if(e.value){i.value=e.value;const t=T();if(t)o.value=t;else{const u=e.value.find(f=>f.id===1);u?(o.value=u,I(u)):e.value.length>0&&(o.value=e.value[0],I(e.value[0]))}o.value&&d.value.add(o.value.category)}}catch{}};return C(()=>n.params,()=>{if(i.value.length>0){const e=T();e&&e.id!==o.value?.id&&(o.value=e,e&&e.category&&d.value.add(e.category))}}),C(g,e=>{if(e.trim()){const t=Object.keys(S.value);d.value.clear(),t.forEach(u=>{d.value.add(u)})}else if(o.value&&o.value.category){const t=o.value.category;d.value.clear(),d.value.add(t)}else d.value.clear()}),C(()=>v.authChecked,e=>{e&&k.value&&i.value.length===0&&$()}),C(k,e=>{e&&i.value.length===0&&$()}),D(()=>{$()}),(e,t)=>(c(),r("div",fe,[k.value?(c(),r(x,{key:1},[h(P,{onGoBack:q}),s("div",pe,[s("div",{class:w(["overlay",{on:y.value}]),onClick:b},null,2),h(ce,{"filtered-grouped-list":S.value,"selected-item":o.value,"open-categories":d.value,"search-query":g.value,"is-menu-open":y.value,"onUpdate:searchQuery":t[0]||(t[0]=u=>g.value=u),onSelectItem:N,onToggleCategory:W,onToggleMenu:E,onCloseMenu:b},null,8,["filtered-grouped-list","selected-item","open-categories","search-query","is-menu-open"]),h(me,{"selected-item":o.value,"format-content":G},null,8,["selected-item"])])],64)):(c(),r("div",ye,[t[1]||(t[1]=s("p",{class:"icon"},"ğŸ”’",-1)),t[2]||(t[2]=s("p",{class:"tit"},"ì ‘ê·¼ ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤",-1)),t[3]||(t[3]=s("p",{class:"txt"},"ì´ í˜ì´ì§€ëŠ” ë§ˆìŠ¤í„° íšŒì›ë§Œ ì—´ëŒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.",-1)),s("button",{class:"btn_back",onClick:q},"ëŒì•„ê°€ê¸°")]))]))}};export{ke as default};
