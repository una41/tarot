const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./DFM1gfdC.js","./B1-yQkzy.js","./D9iHutTQ.js","./index.Cz9iidzY.css","./CwBEJMz7.js","./CPFSa93W.js","./B6Eib1H_.js","./error-404.2GhCpCfF.css","./B2lCovt2.js","./error-500.DqdIhFrl.css"])))=>i.map(i=>d[i]);
var KP=Object.defineProperty;var WP=(t,e,n)=>e in t?KP(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ns=(t,e,n)=>WP(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Zp(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const Ke={},vo=[],sr=()=>{},kT=()=>!1,fl=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),em=t=>t.startsWith("onUpdate:"),Lt=Object.assign,tm=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},zP=Object.prototype.hasOwnProperty,Me=(t,e)=>zP.call(t,e),fe=Array.isArray,Ao=t=>_a(t)==="[object Map]",ga=t=>_a(t)==="[object Set]",J_=t=>_a(t)==="[object Date]",QP=t=>_a(t)==="[object RegExp]",Ie=t=>typeof t=="function",et=t=>typeof t=="string",cr=t=>typeof t=="symbol",qe=t=>t!==null&&typeof t=="object",nm=t=>(qe(t)||Ie(t))&&Ie(t.then)&&Ie(t.catch),NT=Object.prototype.toString,_a=t=>NT.call(t),JP=t=>_a(t).slice(8,-1),DT=t=>_a(t)==="[object Object]",Sh=t=>et(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,bo=Zp(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Ph=t=>{const e=Object.create(null);return(n=>e[n]||(e[n]=t(n)))},YP=/-\w/g,kn=Ph(t=>t.replace(YP,e=>e.slice(1).toUpperCase())),XP=/\B([A-Z])/g,js=Ph(t=>t.replace(XP,"-$1").toLowerCase()),Ch=Ph(t=>t.charAt(0).toUpperCase()+t.slice(1)),Hd=Ph(t=>t?`on${Ch(t)}`:""),Is=(t,e)=>!Object.is(t,e),Ro=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},VT=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},kh=t=>{const e=parseFloat(t);return isNaN(e)?t:e},xT=t=>{const e=et(t)?Number(t):NaN;return isNaN(e)?t:e};let Y_;const Nh=()=>Y_||(Y_=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Dh(t){if(fe(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],s=et(r)?nC(r):Dh(r);if(s)for(const i in s)e[i]=s[i]}return e}else if(et(t)||qe(t))return t}const ZP=/;(?![^(]*\))/g,eC=/:([^]+)/,tC=/\/\*[^]*?\*\//g;function nC(t){const e={};return t.replace(tC,"").split(ZP).forEach(n=>{if(n){const r=n.split(eC);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Ci(t){let e="";if(et(t))e=t;else if(fe(t))for(let n=0;n<t.length;n++){const r=Ci(t[n]);r&&(e+=r+" ")}else if(qe(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}function rC(t){if(!t)return null;let{class:e,style:n}=t;return e&&!et(e)&&(t.class=Ci(e)),n&&(t.style=Dh(n)),t}const sC="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",iC=Zp(sC);function OT(t){return!!t||t===""}function oC(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=ki(t[r],e[r]);return n}function ki(t,e){if(t===e)return!0;let n=J_(t),r=J_(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=cr(t),r=cr(e),n||r)return t===e;if(n=fe(t),r=fe(e),n||r)return n&&r?oC(t,e):!1;if(n=qe(t),r=qe(e),n||r){if(!n||!r)return!1;const s=Object.keys(t).length,i=Object.keys(e).length;if(s!==i)return!1;for(const o in t){const a=t.hasOwnProperty(o),c=e.hasOwnProperty(o);if(a&&!c||!a&&c||!ki(t[o],e[o]))return!1}}return String(t)===String(e)}function rm(t,e){return t.findIndex(n=>ki(n,e))}const LT=t=>!!(t&&t.__v_isRef===!0),Mn=t=>et(t)?t:t==null?"":fe(t)||qe(t)&&(t.toString===NT||!Ie(t.toString))?LT(t)?Mn(t.value):JSON.stringify(t,MT,2):String(t),MT=(t,e)=>LT(e)?MT(t,e.value):Ao(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,s],i)=>(n[$d(r,i)+" =>"]=s,n),{})}:ga(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>$d(n))}:cr(e)?$d(e):qe(e)&&!fe(e)&&!DT(e)?String(e):e,$d=(t,e="")=>{var n;return cr(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};let Ht;class FT{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Ht,!e&&Ht&&(this.index=(Ht.scopes||(Ht.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=Ht;try{return Ht=this,e()}finally{Ht=n}}}on(){++this._on===1&&(this.prevScope=Ht,Ht=this)}off(){this._on>0&&--this._on===0&&(Ht=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function sm(t){return new FT(t)}function im(){return Ht}function aC(t,e=!1){Ht&&Ht.cleanups.push(t)}let We;const Gd=new WeakSet;class UT{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Ht&&Ht.active&&Ht.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Gd.has(this)&&(Gd.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||jT(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,X_(this),qT(this);const e=We,n=Bn;We=this,Bn=!0;try{return this.fn()}finally{HT(this),We=e,Bn=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)cm(e);this.deps=this.depsTail=void 0,X_(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Gd.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){xf(this)&&this.run()}get dirty(){return xf(this)}}let BT=0,Ic,Ec;function jT(t,e=!1){if(t.flags|=8,e){t.next=Ec,Ec=t;return}t.next=Ic,Ic=t}function om(){BT++}function am(){if(--BT>0)return;if(Ec){let e=Ec;for(Ec=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;Ic;){let e=Ic;for(Ic=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=n}}if(t)throw t}function qT(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function HT(t){let e,n=t.depsTail,r=n;for(;r;){const s=r.prevDep;r.version===-1?(r===n&&(n=s),cm(r),cC(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s}t.deps=e,t.depsTail=n}function xf(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&($T(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function $T(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===qc)||(t.globalVersion=qc,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!xf(t))))return;t.flags|=2;const e=t.dep,n=We,r=Bn;We=t,Bn=!0;try{qT(t);const s=t.fn(t._value);(e.version===0||Is(s,t._value))&&(t.flags|=128,t._value=s,e.version++)}catch(s){throw e.version++,s}finally{We=n,Bn=r,HT(t),t.flags&=-3}}function cm(t,e=!1){const{dep:n,prevSub:r,nextSub:s}=t;if(r&&(r.nextSub=s,t.prevSub=void 0),s&&(s.prevSub=r,t.nextSub=void 0),n.subs===t&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)cm(i,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function cC(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let Bn=!0;const GT=[];function Dr(){GT.push(Bn),Bn=!1}function Vr(){const t=GT.pop();Bn=t===void 0?!0:t}function X_(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=We;We=void 0;try{e()}finally{We=n}}}let qc=0;class lC{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class lm{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!We||!Bn||We===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==We)n=this.activeLink=new lC(We,this),We.deps?(n.prevDep=We.depsTail,We.depsTail.nextDep=n,We.depsTail=n):We.deps=We.depsTail=n,KT(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=We.depsTail,n.nextDep=void 0,We.depsTail.nextDep=n,We.depsTail=n,We.deps===n&&(We.deps=r)}return n}trigger(e){this.version++,qc++,this.notify(e)}notify(e){om();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{am()}}}function KT(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)KT(r)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const Fu=new WeakMap,Ti=Symbol(""),Of=Symbol(""),Hc=Symbol("");function Gt(t,e,n){if(Bn&&We){let r=Fu.get(t);r||Fu.set(t,r=new Map);let s=r.get(n);s||(r.set(n,s=new lm),s.map=r,s.key=n),s.track()}}function Ir(t,e,n,r,s,i){const o=Fu.get(t);if(!o){qc++;return}const a=c=>{c&&c.trigger()};if(om(),e==="clear")o.forEach(a);else{const c=fe(t),u=c&&Sh(n);if(c&&n==="length"){const h=Number(r);o.forEach((d,f)=>{(f==="length"||f===Hc||!cr(f)&&f>=h)&&a(d)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),u&&a(o.get(Hc)),e){case"add":c?u&&a(o.get("length")):(a(o.get(Ti)),Ao(t)&&a(o.get(Of)));break;case"delete":c||(a(o.get(Ti)),Ao(t)&&a(o.get(Of)));break;case"set":Ao(t)&&a(o.get(Ti));break}}am()}function uC(t,e){const n=Fu.get(t);return n&&n.get(e)}function so(t){const e=Ne(t);return e===t?e:(Gt(e,"iterate",Hc),Tn(t)?e:e.map(Hn))}function Vh(t){return Gt(t=Ne(t),"iterate",Hc),t}function us(t,e){return lr(t)?ir(t)?Lo(Hn(e)):Lo(e):Hn(e)}const hC={__proto__:null,[Symbol.iterator](){return Kd(this,Symbol.iterator,t=>us(this,t))},concat(...t){return so(this).concat(...t.map(e=>fe(e)?so(e):e))},entries(){return Kd(this,"entries",t=>(t[1]=us(this,t[1]),t))},every(t,e){return pr(this,"every",t,e,void 0,arguments)},filter(t,e){return pr(this,"filter",t,e,n=>n.map(r=>us(this,r)),arguments)},find(t,e){return pr(this,"find",t,e,n=>us(this,n),arguments)},findIndex(t,e){return pr(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return pr(this,"findLast",t,e,n=>us(this,n),arguments)},findLastIndex(t,e){return pr(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return pr(this,"forEach",t,e,void 0,arguments)},includes(...t){return Wd(this,"includes",t)},indexOf(...t){return Wd(this,"indexOf",t)},join(t){return so(this).join(t)},lastIndexOf(...t){return Wd(this,"lastIndexOf",t)},map(t,e){return pr(this,"map",t,e,void 0,arguments)},pop(){return Xa(this,"pop")},push(...t){return Xa(this,"push",t)},reduce(t,...e){return Z_(this,"reduce",t,e)},reduceRight(t,...e){return Z_(this,"reduceRight",t,e)},shift(){return Xa(this,"shift")},some(t,e){return pr(this,"some",t,e,void 0,arguments)},splice(...t){return Xa(this,"splice",t)},toReversed(){return so(this).toReversed()},toSorted(t){return so(this).toSorted(t)},toSpliced(...t){return so(this).toSpliced(...t)},unshift(...t){return Xa(this,"unshift",t)},values(){return Kd(this,"values",t=>us(this,t))}};function Kd(t,e,n){const r=Vh(t),s=r[e]();return r!==t&&!Tn(t)&&(s._next=s.next,s.next=()=>{const i=s._next();return i.done||(i.value=n(i.value)),i}),s}const dC=Array.prototype;function pr(t,e,n,r,s,i){const o=Vh(t),a=o!==t&&!Tn(t),c=o[e];if(c!==dC[e]){const d=c.apply(t,i);return a?Hn(d):d}let u=n;o!==t&&(a?u=function(d,f){return n.call(this,us(t,d),f,t)}:n.length>2&&(u=function(d,f){return n.call(this,d,f,t)}));const h=c.call(o,u,r);return a&&s?s(h):h}function Z_(t,e,n,r){const s=Vh(t);let i=n;return s!==t&&(Tn(t)?n.length>3&&(i=function(o,a,c){return n.call(this,o,a,c,t)}):i=function(o,a,c){return n.call(this,o,us(t,a),c,t)}),s[e](i,...r)}function Wd(t,e,n){const r=Ne(t);Gt(r,"iterate",Hc);const s=r[e](...n);return(s===-1||s===!1)&&xh(n[0])?(n[0]=Ne(n[0]),r[e](...n)):s}function Xa(t,e,n=[]){Dr(),om();const r=Ne(t)[e].apply(t,n);return am(),Vr(),r}const fC=Zp("__proto__,__v_isRef,__isVue"),WT=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(cr));function pC(t){cr(t)||(t=String(t));const e=Ne(this);return Gt(e,"has",t),e.hasOwnProperty(t)}class zT{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){if(n==="__v_skip")return e.__v_skip;const s=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(s?i?AC:XT:i?YT:JT).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=fe(e);if(!s){let c;if(o&&(c=hC[n]))return c;if(n==="hasOwnProperty")return pC}const a=Reflect.get(e,n,it(e)?e:r);if((cr(n)?WT.has(n):fC(n))||(s||Gt(e,"get",n),i))return a;if(it(a)){const c=o&&Sh(n)?a:a.value;return s&&qe(c)?Mf(c):c}return qe(a)?s?Mf(a):jr(a):a}}class QT extends zT{constructor(e=!1){super(!1,e)}set(e,n,r,s){let i=e[n];const o=fe(e)&&Sh(n);if(!this._isShallow){const u=lr(i);if(!Tn(r)&&!lr(r)&&(i=Ne(i),r=Ne(r)),!o&&it(i)&&!it(r))return u||(i.value=r),!0}const a=o?Number(n)<e.length:Me(e,n),c=Reflect.set(e,n,r,it(e)?e:s);return e===Ne(s)&&(a?Is(r,i)&&Ir(e,"set",n,r):Ir(e,"add",n,r)),c}deleteProperty(e,n){const r=Me(e,n);e[n];const s=Reflect.deleteProperty(e,n);return s&&r&&Ir(e,"delete",n,void 0),s}has(e,n){const r=Reflect.has(e,n);return(!cr(n)||!WT.has(n))&&Gt(e,"has",n),r}ownKeys(e){return Gt(e,"iterate",fe(e)?"length":Ti),Reflect.ownKeys(e)}}class mC extends zT{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const gC=new QT,_C=new mC,yC=new QT(!0);const Lf=t=>t,Ql=t=>Reflect.getPrototypeOf(t);function IC(t,e,n){return function(...r){const s=this.__v_raw,i=Ne(s),o=Ao(i),a=t==="entries"||t===Symbol.iterator&&o,c=t==="keys"&&o,u=s[t](...r),h=n?Lf:e?Lo:Hn;return!e&&Gt(i,"iterate",c?Of:Ti),{next(){const{value:d,done:f}=u.next();return f?{value:d,done:f}:{value:a?[h(d[0]),h(d[1])]:h(d),done:f}},[Symbol.iterator](){return this}}}}function Jl(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function EC(t,e){const n={get(s){const i=this.__v_raw,o=Ne(i),a=Ne(s);t||(Is(s,a)&&Gt(o,"get",s),Gt(o,"get",a));const{has:c}=Ql(o),u=e?Lf:t?Lo:Hn;if(c.call(o,s))return u(i.get(s));if(c.call(o,a))return u(i.get(a));i!==o&&i.get(s)},get size(){const s=this.__v_raw;return!t&&Gt(Ne(s),"iterate",Ti),s.size},has(s){const i=this.__v_raw,o=Ne(i),a=Ne(s);return t||(Is(s,a)&&Gt(o,"has",s),Gt(o,"has",a)),s===a?i.has(s):i.has(s)||i.has(a)},forEach(s,i){const o=this,a=o.__v_raw,c=Ne(a),u=e?Lf:t?Lo:Hn;return!t&&Gt(c,"iterate",Ti),a.forEach((h,d)=>s.call(i,u(h),u(d),o))}};return Lt(n,t?{add:Jl("add"),set:Jl("set"),delete:Jl("delete"),clear:Jl("clear")}:{add(s){!e&&!Tn(s)&&!lr(s)&&(s=Ne(s));const i=Ne(this);return Ql(i).has.call(i,s)||(i.add(s),Ir(i,"add",s,s)),this},set(s,i){!e&&!Tn(i)&&!lr(i)&&(i=Ne(i));const o=Ne(this),{has:a,get:c}=Ql(o);let u=a.call(o,s);u||(s=Ne(s),u=a.call(o,s));const h=c.call(o,s);return o.set(s,i),u?Is(i,h)&&Ir(o,"set",s,i):Ir(o,"add",s,i),this},delete(s){const i=Ne(this),{has:o,get:a}=Ql(i);let c=o.call(i,s);c||(s=Ne(s),c=o.call(i,s)),a&&a.call(i,s);const u=i.delete(s);return c&&Ir(i,"delete",s,void 0),u},clear(){const s=Ne(this),i=s.size!==0,o=s.clear();return i&&Ir(s,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=IC(s,t,e)}),n}function um(t,e){const n=EC(t,e);return(r,s,i)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?r:Reflect.get(Me(n,s)&&s in r?n:r,s,i)}const TC={get:um(!1,!1)},wC={get:um(!1,!0)},vC={get:um(!0,!1)};const JT=new WeakMap,YT=new WeakMap,XT=new WeakMap,AC=new WeakMap;function bC(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function RC(t){return t.__v_skip||!Object.isExtensible(t)?0:bC(JP(t))}function jr(t){return lr(t)?t:hm(t,!1,gC,TC,JT)}function er(t){return hm(t,!1,yC,wC,YT)}function Mf(t){return hm(t,!0,_C,vC,XT)}function hm(t,e,n,r,s){if(!qe(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=RC(t);if(i===0)return t;const o=s.get(t);if(o)return o;const a=new Proxy(t,i===2?r:n);return s.set(t,a),a}function ir(t){return lr(t)?ir(t.__v_raw):!!(t&&t.__v_isReactive)}function lr(t){return!!(t&&t.__v_isReadonly)}function Tn(t){return!!(t&&t.__v_isShallow)}function xh(t){return t?!!t.__v_raw:!1}function Ne(t){const e=t&&t.__v_raw;return e?Ne(e):t}function dm(t){return!Me(t,"__v_skip")&&Object.isExtensible(t)&&VT(t,"__v_skip",!0),t}const Hn=t=>qe(t)?jr(t):t,Lo=t=>qe(t)?Mf(t):t;function it(t){return t?t.__v_isRef===!0:!1}function ft(t){return ZT(t,!1)}function Mo(t){return ZT(t,!0)}function ZT(t,e){return it(t)?t:new SC(t,e)}class SC{constructor(e,n){this.dep=new lm,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:Ne(e),this._value=n?e:Hn(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||Tn(e)||lr(e);e=r?e:Ne(e),Is(e,n)&&(this._rawValue=e,this._value=r?e:Hn(e),this.dep.trigger())}}function me(t){return it(t)?t.value:t}function PC(t){return Ie(t)?t():me(t)}const CC={get:(t,e,n)=>e==="__v_raw"?t:me(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const s=t[e];return it(s)&&!it(n)?(s.value=n,!0):Reflect.set(t,e,n,r)}};function ew(t){return ir(t)?t:new Proxy(t,CC)}function kC(t){const e=fe(t)?new Array(t.length):{};for(const n in t)e[n]=tw(t,n);return e}class NC{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0,this._raw=Ne(e);let s=!0,i=e;if(!fe(e)||!Sh(String(n)))do s=!xh(i)||Tn(i);while(s&&(i=i.__v_raw));this._shallow=s}get value(){let e=this._object[this._key];return this._shallow&&(e=me(e)),this._value=e===void 0?this._defaultValue:e}set value(e){if(this._shallow&&it(this._raw[this._key])){const n=this._object[this._key];if(it(n)){n.value=e;return}}this._object[this._key]=e}get dep(){return uC(this._raw,this._key)}}class DC{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function VC(t,e,n){return it(t)?t:Ie(t)?new DC(t):qe(t)&&arguments.length>1?tw(t,e,n):ft(t)}function tw(t,e,n){return new NC(t,e,n)}class xC{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new lm(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=qc-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&We!==this)return jT(this,!0),!0}get value(){const e=this.dep.track();return $T(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function OC(t,e,n=!1){let r,s;return Ie(t)?r=t:(r=t.get,s=t.set),new xC(r,s,n)}const Yl={},Uu=new WeakMap;let ai;function LC(t,e=!1,n=ai){if(n){let r=Uu.get(n);r||Uu.set(n,r=[]),r.push(t)}}function MC(t,e,n=Ke){const{immediate:r,deep:s,once:i,scheduler:o,augmentJob:a,call:c}=n,u=C=>s?C:Tn(C)||s===!1||s===0?Er(C,1):Er(C);let h,d,f,m,I=!1,T=!1;if(it(t)?(d=()=>t.value,I=Tn(t)):ir(t)?(d=()=>u(t),I=!0):fe(t)?(T=!0,I=t.some(C=>ir(C)||Tn(C)),d=()=>t.map(C=>{if(it(C))return C.value;if(ir(C))return u(C);if(Ie(C))return c?c(C,2):C()})):Ie(t)?e?d=c?()=>c(t,2):t:d=()=>{if(f){Dr();try{f()}finally{Vr()}}const C=ai;ai=h;try{return c?c(t,3,[m]):t(m)}finally{ai=C}}:d=sr,e&&s){const C=d,x=s===!0?1/0:s;d=()=>Er(C(),x)}const k=im(),V=()=>{h.stop(),k&&k.active&&tm(k.effects,h)};if(i&&e){const C=e;e=(...x)=>{C(...x),V()}}let N=T?new Array(t.length).fill(Yl):Yl;const _=C=>{if(!(!(h.flags&1)||!h.dirty&&!C))if(e){const x=h.run();if(s||I||(T?x.some((U,v)=>Is(U,N[v])):Is(x,N))){f&&f();const U=ai;ai=h;try{const v=[x,N===Yl?void 0:T&&N[0]===Yl?[]:N,m];N=x,c?c(e,3,v):e(...v)}finally{ai=U}}}else h.run()};return a&&a(_),h=new UT(d),h.scheduler=o?()=>o(_,!1):_,m=C=>LC(C,!1,h),f=h.onStop=()=>{const C=Uu.get(h);if(C){if(c)c(C,4);else for(const x of C)x();Uu.delete(h)}},e?r?_(!0):N=h.run():o?o(_.bind(null,!0),!0):h.run(),V.pause=h.pause.bind(h),V.resume=h.resume.bind(h),V.stop=V,V}function Er(t,e=1/0,n){if(e<=0||!qe(t)||t.__v_skip||(n=n||new Map,(n.get(t)||0)>=e))return t;if(n.set(t,e),e--,it(t))Er(t.value,e,n);else if(fe(t))for(let r=0;r<t.length;r++)Er(t[r],e,n);else if(ga(t)||Ao(t))t.forEach(r=>{Er(r,e,n)});else if(DT(t)){for(const r in t)Er(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&Er(t[r],e,n)}return t}function pl(t,e,n,r){try{return r?t(...r):t()}catch(s){ya(s,e,n)}}function $n(t,e,n,r){if(Ie(t)){const s=pl(t,e,n,r);return s&&nm(s)&&s.catch(i=>{ya(i,e,n)}),s}if(fe(t)){const s=[];for(let i=0;i<t.length;i++)s.push($n(t[i],e,n,r));return s}}function ya(t,e,n,r=!0){const s=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||Ke;if(e){let a=e.parent;const c=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const h=a.ec;if(h){for(let d=0;d<h.length;d++)if(h[d](t,c,u)===!1)return}a=a.parent}if(i){Dr(),pl(i,null,10,[t,c,u]),Vr();return}}FC(t,n,s,r,o)}function FC(t,e,n,r=!0,s=!1){if(s)throw t}const en=[];let Jn=-1;const So=[];let hs=null,mo=0;const nw=Promise.resolve();let Bu=null;function ks(t){const e=Bu||nw;return t?e.then(this?t.bind(this):t):e}function UC(t){let e=Jn+1,n=en.length;for(;e<n;){const r=e+n>>>1,s=en[r],i=$c(s);i<t||i===t&&s.flags&2?e=r+1:n=r}return e}function fm(t){if(!(t.flags&1)){const e=$c(t),n=en[en.length-1];!n||!(t.flags&2)&&e>=$c(n)?en.push(t):en.splice(UC(e),0,t),t.flags|=1,rw()}}function rw(){Bu||(Bu=nw.then(sw))}function Ff(t){fe(t)?So.push(...t):hs&&t.id===-1?hs.splice(mo+1,0,t):t.flags&1||(So.push(t),t.flags|=1),rw()}function ey(t,e,n=Jn+1){for(;n<en.length;n++){const r=en[n];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;en.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function ju(t){if(So.length){const e=[...new Set(So)].sort((n,r)=>$c(n)-$c(r));if(So.length=0,hs){hs.push(...e);return}for(hs=e,mo=0;mo<hs.length;mo++){const n=hs[mo];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}hs=null,mo=0}}const $c=t=>t.id==null?t.flags&2?-1:1/0:t.id;function sw(t){try{for(Jn=0;Jn<en.length;Jn++){const e=en[Jn];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),pl(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Jn<en.length;Jn++){const e=en[Jn];e&&(e.flags&=-2)}Jn=-1,en.length=0,ju(),Bu=null,(en.length||So.length)&&sw()}}let En=null,iw=null;function qu(t){const e=En;return En=t,iw=t&&t.type.__scopeId||null,e}function Ns(t,e=En,n){if(!e||t._n)return t;const r=(...s)=>{r._d&&Wu(-1);const i=qu(e);let o;try{o=t(...s)}finally{qu(i),r._d&&Wu(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function ci(t,e){if(En===null)return t;const n=jh(En),r=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[i,o,a,c=Ke]=e[s];i&&(Ie(i)&&(i={mounted:i,updated:i}),i.deep&&Er(o),r.push({dir:i,instance:n,value:o,oldValue:void 0,arg:a,modifiers:c}))}return t}function Yn(t,e,n,r){const s=t.dirs,i=e&&e.dirs;for(let o=0;o<s.length;o++){const a=s[o];i&&(a.oldValue=i[o].value);let c=a.dir[r];c&&(Dr(),$n(c,n,8,[t.el,a,t,e]),Vr())}}function Es(t,e){if(Ut){let n=Ut.provides;const r=Ut.parent&&Ut.parent.provides;r===n&&(n=Ut.provides=Object.create(r)),n[t]=e}}function Vt(t,e,n=!1){const r=$i();if(r||wi){let s=wi?wi._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&t in s)return s[t];if(arguments.length>1)return n&&Ie(e)?e.call(r&&r.proxy):e}}function Oh(){return!!($i()||wi)}const BC=Symbol.for("v-scx"),jC=()=>Vt(BC);function qC(t,e){return pm(t,null,e)}function kr(t,e,n){return pm(t,e,n)}function pm(t,e,n=Ke){const{immediate:r,deep:s,flush:i,once:o}=n,a=Lt({},n),c=e&&r||!e&&i!=="post";let u;if(jo){if(i==="sync"){const m=jC();u=m.__watcherHandles||(m.__watcherHandles=[])}else if(!c){const m=()=>{};return m.stop=sr,m.resume=sr,m.pause=sr,m}}const h=Ut;a.call=(m,I,T)=>$n(m,h,I,T);let d=!1;i==="post"?a.scheduler=m=>{_t(m,h&&h.suspense)}:i!=="sync"&&(d=!0,a.scheduler=(m,I)=>{I?m():fm(m)}),a.augmentJob=m=>{e&&(m.flags|=4),d&&(m.flags|=2,h&&(m.id=h.uid,m.i=h))};const f=MC(t,e,a);return jo&&(u?u.push(f):c&&f()),f}function HC(t,e,n){const r=this.proxy,s=et(t)?t.includes(".")?ow(r,t):()=>r[t]:t.bind(r,r);let i;Ie(e)?i=e:(i=e.handler,n=e);const o=Ni(this),a=pm(s,i.bind(r),n);return o(),a}function ow(t,e){const n=e.split(".");return()=>{let r=t;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}const aw=Symbol("_vte"),cw=t=>t.__isTeleport,Tc=t=>t&&(t.disabled||t.disabled===""),ty=t=>t&&(t.defer||t.defer===""),ny=t=>typeof SVGElement<"u"&&t instanceof SVGElement,ry=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,Uf=(t,e)=>{const n=t&&t.to;return et(n)?e?e(n):null:n},lw={name:"Teleport",__isTeleport:!0,process(t,e,n,r,s,i,o,a,c,u){const{mc:h,pc:d,pbc:f,o:{insert:m,querySelector:I,createText:T,createComment:k}}=u,V=Tc(e.props);let{shapeFlag:N,children:_,dynamicChildren:C}=e;if(t==null){const x=e.el=T(""),U=e.anchor=T("");m(x,n,r),m(U,n,r);const v=(y,A)=>{N&16&&h(_,y,A,s,i,o,a,c)},E=()=>{const y=e.target=Uf(e.props,I),A=uw(y,e,T,m);y&&(o!=="svg"&&ny(y)?o="svg":o!=="mathml"&&ry(y)&&(o="mathml"),s&&s.isCE&&(s.ce._teleportTargets||(s.ce._teleportTargets=new Set)).add(y),V||(v(y,A),Iu(e,!1)))};V&&(v(n,U),Iu(e,!0)),ty(e.props)?(e.el.__isMounted=!1,_t(()=>{E(),delete e.el.__isMounted},i)):E()}else{if(ty(e.props)&&t.el.__isMounted===!1){_t(()=>{lw.process(t,e,n,r,s,i,o,a,c,u)},i);return}e.el=t.el,e.targetStart=t.targetStart;const x=e.anchor=t.anchor,U=e.target=t.target,v=e.targetAnchor=t.targetAnchor,E=Tc(t.props),y=E?n:U,A=E?x:v;if(o==="svg"||ny(U)?o="svg":(o==="mathml"||ry(U))&&(o="mathml"),C?(f(t.dynamicChildren,C,y,s,i,o,a),ym(t,e,!0)):c||d(t,e,y,A,s,i,o,a,!1),V)E?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):Xl(e,n,x,u,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const P=e.target=Uf(e.props,I);P&&Xl(e,P,null,u,0)}else E&&Xl(e,U,v,u,1);Iu(e,V)}},remove(t,e,n,{um:r,o:{remove:s}},i){const{shapeFlag:o,children:a,anchor:c,targetStart:u,targetAnchor:h,target:d,props:f}=t;if(d&&(s(u),s(h)),i&&s(c),o&16){const m=i||!Tc(f);for(let I=0;I<a.length;I++){const T=a[I];r(T,e,n,m,!!T.dynamicChildren)}}},move:Xl,hydrate:$C};function Xl(t,e,n,{o:{insert:r},m:s},i=2){i===0&&r(t.targetAnchor,e,n);const{el:o,anchor:a,shapeFlag:c,children:u,props:h}=t,d=i===2;if(d&&r(o,e,n),(!d||Tc(h))&&c&16)for(let f=0;f<u.length;f++)s(u[f],e,n,2);d&&r(a,e,n)}function $C(t,e,n,r,s,i,{o:{nextSibling:o,parentNode:a,querySelector:c,insert:u,createText:h}},d){function f(T,k,V,N){k.anchor=d(o(T),k,a(T),n,r,s,i),k.targetStart=V,k.targetAnchor=N}const m=e.target=Uf(e.props,c),I=Tc(e.props);if(m){const T=m._lpa||m.firstChild;if(e.shapeFlag&16)if(I)f(t,e,T,T&&o(T));else{e.anchor=o(t);let k=T;for(;k;){if(k&&k.nodeType===8){if(k.data==="teleport start anchor")e.targetStart=k;else if(k.data==="teleport anchor"){e.targetAnchor=k,m._lpa=e.targetAnchor&&o(e.targetAnchor);break}}k=o(k)}e.targetAnchor||uw(m,e,h,u),d(T&&o(T),e,m,n,r,s,i)}Iu(e,I)}else I&&e.shapeFlag&16&&f(t,e,t,o(t));return e.anchor&&o(e.anchor)}const GC=lw;function Iu(t,e){const n=t.ctx;if(n&&n.ut){let r,s;for(e?(r=t.el,s=t.anchor):(r=t.targetStart,s=t.targetAnchor);r&&r!==s;)r.nodeType===1&&r.setAttribute("data-v-owner",n.uid),r=r.nextSibling;n.ut()}}function uw(t,e,n,r){const s=e.targetStart=n(""),i=e.targetAnchor=n("");return s[aw]=i,t&&(r(s,t),r(i,t)),i}const yr=Symbol("_leaveCb"),Zl=Symbol("_enterCb");function KC(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Mh(()=>{t.isMounted=!0}),gl(()=>{t.isUnmounting=!0}),t}const Sn=[Function,Array],hw={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Sn,onEnter:Sn,onAfterEnter:Sn,onEnterCancelled:Sn,onBeforeLeave:Sn,onLeave:Sn,onAfterLeave:Sn,onLeaveCancelled:Sn,onBeforeAppear:Sn,onAppear:Sn,onAfterAppear:Sn,onAppearCancelled:Sn},dw=t=>{const e=t.subTree;return e.component?dw(e.component):e},WC={name:"BaseTransition",props:hw,setup(t,{slots:e}){const n=$i(),r=KC();return()=>{const s=e.default&&mw(e.default(),!0);if(!s||!s.length)return;const i=fw(s),o=Ne(t),{mode:a}=o;if(r.isLeaving)return zd(i);const c=sy(i);if(!c)return zd(i);let u=Bf(c,o,r,n,d=>u=d);c.type!==bt&&Fo(c,u);let h=n.subTree&&sy(n.subTree);if(h&&h.type!==bt&&!Ln(h,c)&&dw(n).type!==bt){let d=Bf(h,o,r,n);if(Fo(h,d),a==="out-in"&&c.type!==bt)return r.isLeaving=!0,d.afterLeave=()=>{r.isLeaving=!1,n.job.flags&8||n.update(),delete d.afterLeave,h=void 0},zd(i);a==="in-out"&&c.type!==bt?d.delayLeave=(f,m,I)=>{const T=pw(r,h);T[String(h.key)]=h,f[yr]=()=>{m(),f[yr]=void 0,delete u.delayedLeave,h=void 0},u.delayedLeave=()=>{I(),delete u.delayedLeave,h=void 0}}:h=void 0}else h&&(h=void 0);return i}}};function fw(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==bt){e=n;break}}return e}const zC=WC;function pw(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function Bf(t,e,n,r,s){const{appear:i,mode:o,persisted:a=!1,onBeforeEnter:c,onEnter:u,onAfterEnter:h,onEnterCancelled:d,onBeforeLeave:f,onLeave:m,onAfterLeave:I,onLeaveCancelled:T,onBeforeAppear:k,onAppear:V,onAfterAppear:N,onAppearCancelled:_}=e,C=String(t.key),x=pw(n,t),U=(y,A)=>{y&&$n(y,r,9,A)},v=(y,A)=>{const P=A[1];U(y,A),fe(y)?y.every(S=>S.length<=1)&&P():y.length<=1&&P()},E={mode:o,persisted:a,beforeEnter(y){let A=c;if(!n.isMounted)if(i)A=k||c;else return;y[yr]&&y[yr](!0);const P=x[C];P&&Ln(t,P)&&P.el[yr]&&P.el[yr](),U(A,[y])},enter(y){let A=u,P=h,S=d;if(!n.isMounted)if(i)A=V||u,P=N||h,S=_||d;else return;let b=!1;const ge=y[Zl]=Ae=>{b||(b=!0,Ae?U(S,[y]):U(P,[y]),E.delayedLeave&&E.delayedLeave(),y[Zl]=void 0)};A?v(A,[y,ge]):ge()},leave(y,A){const P=String(t.key);if(y[Zl]&&y[Zl](!0),n.isUnmounting)return A();U(f,[y]);let S=!1;const b=y[yr]=ge=>{S||(S=!0,A(),ge?U(T,[y]):U(I,[y]),y[yr]=void 0,x[P]===t&&delete x[P])};x[P]=t,m?v(m,[y,b]):b()},clone(y){const A=Bf(y,e,n,r,s);return s&&s(A),A}};return E}function zd(t){if(ml(t))return t=xr(t),t.children=null,t}function sy(t){if(!ml(t))return cw(t.type)&&t.children?fw(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&Ie(n.default))return n.default()}}function Fo(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Fo(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function mw(t,e=!1,n){let r=[],s=0;for(let i=0;i<t.length;i++){let o=t[i];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:i);o.type===sn?(o.patchFlag&128&&s++,r=r.concat(mw(o.children,e,a))):(e||o.type!==bt)&&r.push(a!=null?xr(o,{key:a}):o)}if(s>1)for(let i=0;i<r.length;i++)r[i].patchFlag=-2;return r}function qs(t,e){return Ie(t)?Lt({name:t.name},e,{setup:t}):t}function mm(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}const Hu=new WeakMap;function Po(t,e,n,r,s=!1){if(fe(t)){t.forEach((I,T)=>Po(I,e&&(fe(e)?e[T]:e),n,r,s));return}if(Ts(r)&&!s){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&Po(t,e,n,r.component.subTree);return}const i=r.shapeFlag&4?jh(r.component):r.el,o=s?null:i,{i:a,r:c}=t,u=e&&e.r,h=a.refs===Ke?a.refs={}:a.refs,d=a.setupState,f=Ne(d),m=d===Ke?kT:I=>Me(f,I);if(u!=null&&u!==c){if(iy(e),et(u))h[u]=null,m(u)&&(d[u]=null);else if(it(u)){u.value=null;const I=e;I.k&&(h[I.k]=null)}}if(Ie(c))pl(c,a,12,[o,h]);else{const I=et(c),T=it(c);if(I||T){const k=()=>{if(t.f){const V=I?m(c)?d[c]:h[c]:c.value;if(s)fe(V)&&tm(V,i);else if(fe(V))V.includes(i)||V.push(i);else if(I)h[c]=[i],m(c)&&(d[c]=h[c]);else{const N=[i];c.value=N,t.k&&(h[t.k]=N)}}else I?(h[c]=o,m(c)&&(d[c]=o)):T&&(c.value=o,t.k&&(h[t.k]=o))};if(o){const V=()=>{k(),Hu.delete(t)};V.id=-1,Hu.set(t,V),_t(V,n)}else iy(t),k()}}}function iy(t){const e=Hu.get(t);e&&(e.flags|=8,Hu.delete(t))}let oy=!1;const io=()=>{oy||(oy=!0)},QC=t=>t.namespaceURI.includes("svg")&&t.tagName!=="foreignObject",JC=t=>t.namespaceURI.includes("MathML"),eu=t=>{if(t.nodeType===1){if(QC(t))return"svg";if(JC(t))return"mathml"}},To=t=>t.nodeType===8;function YC(t){const{mt:e,p:n,o:{patchProp:r,createText:s,nextSibling:i,parentNode:o,remove:a,insert:c,createComment:u}}=t,h=(_,C)=>{if(!C.hasChildNodes()){n(null,_,C),ju(),C._vnode=_;return}d(C.firstChild,_,null,null,null),ju(),C._vnode=_},d=(_,C,x,U,v,E=!1)=>{E=E||!!C.dynamicChildren;const y=To(_)&&_.data==="[",A=()=>T(_,C,x,U,v,y),{type:P,ref:S,shapeFlag:b,patchFlag:ge}=C;let Ae=_.nodeType;C.el=_,ge===-2&&(E=!1,C.dynamicChildren=null);let se=null;switch(P){case vi:Ae!==3?C.children===""?(c(C.el=s(""),o(_),_),se=_):se=A():(_.data!==C.children&&(io(),_.data=C.children),se=i(_));break;case bt:N(_)?(se=i(_),V(C.el=_.content.firstChild,_,x)):Ae!==8||y?se=A():se=i(_);break;case Eu:if(y&&(_=i(_),Ae=_.nodeType),Ae===1||Ae===3){se=_;const le=!C.children.length;for(let ie=0;ie<C.staticCount;ie++)le&&(C.children+=se.nodeType===1?se.outerHTML:se.data),ie===C.staticCount-1&&(C.anchor=se),se=i(se);return y?i(se):se}else A();break;case sn:y?se=I(_,C,x,U,v,E):se=A();break;default:if(b&1)(Ae!==1||C.type.toLowerCase()!==_.tagName.toLowerCase())&&!N(_)?se=A():se=f(_,C,x,U,v,E);else if(b&6){C.slotScopeIds=v;const le=o(_);if(y?se=k(_):To(_)&&_.data==="teleport start"?se=k(_,_.data,"teleport end"):se=i(_),e(C,le,null,x,U,eu(le),E),Ts(C)&&!C.type.__asyncResolved){let ie;y?(ie=Ze(sn),ie.anchor=se?se.previousSibling:le.lastChild):ie=_.nodeType===3?zu(""):Ze("div"),ie.el=_,C.component.subTree=ie}}else b&64?Ae!==8?se=A():se=C.type.hydrate(_,C,x,U,v,E,t,m):b&128&&(se=C.type.hydrate(_,C,x,U,eu(o(_)),v,E,t,d))}return S!=null&&Po(S,null,U,C),se},f=(_,C,x,U,v,E)=>{E=E||!!C.dynamicChildren;const{type:y,props:A,patchFlag:P,shapeFlag:S,dirs:b,transition:ge}=C,Ae=y==="input"||y==="option";if(Ae||P!==-1){b&&Yn(C,null,x,"created");let se=!1;if(N(_)){se=Mw(null,ge)&&x&&x.vnode.props&&x.vnode.props.appear;const ie=_.content.firstChild;if(se){const xe=ie.getAttribute("class");xe&&(ie.$cls=xe),ge.beforeEnter(ie)}V(ie,_,x),C.el=_=ie}if(S&16&&!(A&&(A.innerHTML||A.textContent))){let ie=m(_.firstChild,C,_,x,U,v,E);for(;ie;){tu(_,1)||io();const xe=ie;ie=ie.nextSibling,a(xe)}}else if(S&8){let ie=C.children;ie[0]===`
`&&(_.tagName==="PRE"||_.tagName==="TEXTAREA")&&(ie=ie.slice(1));const{textContent:xe}=_;xe!==ie&&xe!==ie.replace(/\r\n|\r/g,`
`)&&(tu(_,0)||io(),_.textContent=C.children)}if(A){if(Ae||!E||P&48){const ie=_.tagName.includes("-");for(const xe in A)(Ae&&(xe.endsWith("value")||xe==="indeterminate")||fl(xe)&&!bo(xe)||xe[0]==="."||ie)&&r(_,xe,null,A[xe],void 0,x)}else if(A.onClick)r(_,"onClick",null,A.onClick,void 0,x);else if(P&4&&ir(A.style))for(const ie in A.style)A.style[ie]}let le;(le=A&&A.onVnodeBeforeMount)&&rn(le,x,C),b&&Yn(C,null,x,"beforeMount"),((le=A&&A.onVnodeMounted)||b||se)&&jw(()=>{le&&rn(le,x,C),se&&ge.enter(_),b&&Yn(C,null,x,"mounted")},U)}return _.nextSibling},m=(_,C,x,U,v,E,y)=>{y=y||!!C.dynamicChildren;const A=C.children,P=A.length;for(let S=0;S<P;S++){const b=y?A[S]:A[S]=yn(A[S]),ge=b.type===vi;_?(ge&&!y&&S+1<P&&yn(A[S+1]).type===vi&&(c(s(_.data.slice(b.children.length)),x,i(_)),_.data=b.children),_=d(_,b,U,v,E,y)):ge&&!b.children?c(b.el=s(""),x):(tu(x,1)||io(),n(null,b,x,null,U,v,eu(x),E))}return _},I=(_,C,x,U,v,E)=>{const{slotScopeIds:y}=C;y&&(v=v?v.concat(y):y);const A=o(_),P=m(i(_),C,A,x,U,v,E);return P&&To(P)&&P.data==="]"?i(C.anchor=P):(io(),c(C.anchor=u("]"),A,P),P)},T=(_,C,x,U,v,E)=>{if(tu(_.parentElement,1)||io(),C.el=null,E){const P=k(_);for(;;){const S=i(_);if(S&&S!==P)a(S);else break}}const y=i(_),A=o(_);return a(_),n(null,C,A,y,x,U,eu(A),v),x&&(x.vnode.el=C.el,Bh(x,C.el)),y},k=(_,C="[",x="]")=>{let U=0;for(;_;)if(_=i(_),_&&To(_)&&(_.data===C&&U++,_.data===x)){if(U===0)return i(_);U--}return _},V=(_,C,x)=>{const U=C.parentNode;U&&U.replaceChild(_,C);let v=x;for(;v;)v.vnode.el===C&&(v.vnode.el=v.subTree.el=_),v=v.parent},N=_=>_.nodeType===1&&_.tagName==="TEMPLATE";return[h,d]}const ay="data-allow-mismatch",XC={0:"text",1:"children",2:"class",3:"style",4:"attribute"};function tu(t,e){if(e===0||e===1)for(;t&&!t.hasAttribute(ay);)t=t.parentElement;const n=t&&t.getAttribute(ay);if(n==null)return!1;if(n==="")return!0;{const r=n.split(",");return e===0&&r.includes("children")?!0:r.includes(XC[e])}}Nh().requestIdleCallback;Nh().cancelIdleCallback;function ZC(t,e){if(To(t)&&t.data==="["){let n=1,r=t.nextSibling;for(;r;){if(r.nodeType===1){if(e(r)===!1)break}else if(To(r))if(r.data==="]"){if(--n===0)break}else r.data==="["&&n++;r=r.nextSibling}}else e(t)}const Ts=t=>!!t.type.__asyncLoader;function cy(t){Ie(t)&&(t={loader:t});const{loader:e,loadingComponent:n,errorComponent:r,delay:s=200,hydrate:i,timeout:o,suspensible:a=!0,onError:c}=t;let u=null,h,d=0;const f=()=>(d++,u=null,m()),m=()=>{let I;return u||(I=u=e().catch(T=>{if(T=T instanceof Error?T:new Error(String(T)),c)return new Promise((k,V)=>{c(T,()=>k(f()),()=>V(T),d+1)});throw T}).then(T=>I!==u&&u?u:(T&&(T.__esModule||T[Symbol.toStringTag]==="Module")&&(T=T.default),h=T,T)))};return qs({name:"AsyncComponentWrapper",__asyncLoader:m,__asyncHydrate(I,T,k){let V=!1;(T.bu||(T.bu=[])).push(()=>V=!0);const N=()=>{V||k()},_=i?()=>{const C=i(N,x=>ZC(I,x));C&&(T.bum||(T.bum=[])).push(C)}:N;h?_():m().then(()=>!T.isUnmounted&&_())},get __asyncResolved(){return h},setup(){const I=Ut;if(mm(I),h)return()=>nu(h,I);const T=_=>{u=null,ya(_,I,13,!r)};if(a&&I.suspense||jo)return m().then(_=>()=>nu(_,I)).catch(_=>(T(_),()=>r?Ze(r,{error:_}):null));const k=ft(!1),V=ft(),N=ft(!!s);return s&&setTimeout(()=>{N.value=!1},s),o!=null&&setTimeout(()=>{if(!k.value&&!V.value){const _=new Error(`Async component timed out after ${o}ms.`);T(_),V.value=_}},o),m().then(()=>{k.value=!0,I.parent&&ml(I.parent.vnode)&&I.parent.update()}).catch(_=>{T(_),V.value=_}),()=>{if(k.value&&h)return nu(h,I);if(V.value&&r)return Ze(r,{error:V.value});if(n&&!N.value)return nu(n,I)}}})}function nu(t,e){const{ref:n,props:r,children:s,ce:i}=e.vnode,o=Ze(t,r,s);return o.ref=n,o.ce=i,delete e.vnode.ce,o}const ml=t=>t.type.__isKeepAlive,e0={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(t,{slots:e}){const n=$i(),r=n.ctx;if(!r.renderer)return()=>{const N=e.default&&e.default();return N&&N.length===1?N[0]:N};const s=new Map,i=new Set;let o=null;const a=n.suspense,{renderer:{p:c,m:u,um:h,o:{createElement:d}}}=r,f=d("div");r.activate=(N,_,C,x,U)=>{const v=N.component;u(N,_,C,0,a),c(v.vnode,N,_,C,v,a,x,N.slotScopeIds,U),_t(()=>{v.isDeactivated=!1,v.a&&Ro(v.a);const E=N.props&&N.props.onVnodeMounted;E&&rn(E,v.parent,N)},a)},r.deactivate=N=>{const _=N.component;Gu(_.m),Gu(_.a),u(N,f,null,1,a),_t(()=>{_.da&&Ro(_.da);const C=N.props&&N.props.onVnodeUnmounted;C&&rn(C,_.parent,N),_.isDeactivated=!0},a)};function m(N){Qd(N),h(N,n,a,!0)}function I(N){s.forEach((_,C)=>{const x=Qf(Ts(_)?_.type.__asyncResolved||{}:_.type);x&&!N(x)&&T(C)})}function T(N){const _=s.get(N);_&&(!o||!Ln(_,o))?m(_):o&&Qd(o),s.delete(N),i.delete(N)}kr(()=>[t.include,t.exclude],([N,_])=>{N&&I(C=>uc(N,C)),_&&I(C=>!uc(_,C))},{flush:"post",deep:!0});let k=null;const V=()=>{k!=null&&(Ku(n.subTree.type)?_t(()=>{s.set(k,ru(n.subTree))},n.subTree.suspense):s.set(k,ru(n.subTree)))};return Mh(V),Iw(V),gl(()=>{s.forEach(N=>{const{subTree:_,suspense:C}=n,x=ru(_);if(N.type===x.type&&N.key===x.key){Qd(x);const U=x.component.da;U&&_t(U,C);return}m(N)})}),()=>{if(k=null,!e.default)return o=null;const N=e.default(),_=N[0];if(N.length>1)return o=null,N;if(!Bo(_)||!(_.shapeFlag&4)&&!(_.shapeFlag&128))return o=null,_;let C=ru(_);if(C.type===bt)return o=null,C;const x=C.type,U=Qf(Ts(C)?C.type.__asyncResolved||{}:x),{include:v,exclude:E,max:y}=t;if(v&&(!U||!uc(v,U))||E&&U&&uc(E,U))return C.shapeFlag&=-257,o=C,_;const A=C.key==null?x:C.key,P=s.get(A);return C.el&&(C=xr(C),_.shapeFlag&128&&(_.ssContent=C)),k=A,P?(C.el=P.el,C.component=P.component,C.transition&&Fo(C,C.transition),C.shapeFlag|=512,i.delete(A),i.add(A)):(i.add(A),y&&i.size>parseInt(y,10)&&T(i.values().next().value)),C.shapeFlag|=256,o=C,Ku(_.type)?_:C}}},t0=e0;function uc(t,e){return fe(t)?t.some(n=>uc(n,e)):et(t)?t.split(",").includes(e):QP(t)?(t.lastIndex=0,t.test(e)):!1}function gw(t,e){yw(t,"a",e)}function _w(t,e){yw(t,"da",e)}function yw(t,e,n=Ut){const r=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(Lh(e,r,n),n){let s=n.parent;for(;s&&s.parent;)ml(s.parent.vnode)&&n0(r,e,n,s),s=s.parent}}function n0(t,e,n,r){const s=Lh(e,t,r,!0);Fh(()=>{tm(r[e],s)},n)}function Qd(t){t.shapeFlag&=-257,t.shapeFlag&=-513}function ru(t){return t.shapeFlag&128?t.ssContent:t}function Lh(t,e,n=Ut,r=!1){if(n){const s=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{Dr();const a=Ni(n),c=$n(e,n,t,o);return a(),Vr(),c});return r?s.unshift(i):s.push(i),i}}const qr=t=>(e,n=Ut)=>{(!jo||t==="sp")&&Lh(t,(...r)=>e(...r),n)},r0=qr("bm"),Mh=qr("m"),s0=qr("bu"),Iw=qr("u"),gl=qr("bum"),Fh=qr("um"),i0=qr("sp"),o0=qr("rtg"),a0=qr("rtc");function Ew(t,e=Ut){Lh("ec",t,e)}const Tw="components";function Bj(t,e){return vw(Tw,t,!0,e)||t}const ww=Symbol.for("v-ndc");function c0(t){return et(t)?vw(Tw,t,!1)||t:t||ww}function vw(t,e,n=!0,r=!1){const s=En||Ut;if(s){const i=s.type;{const a=Qf(i,!1);if(a&&(a===e||a===kn(e)||a===Ch(kn(e))))return i}const o=ly(s[t]||i[t],e)||ly(s.appContext[t],e);return!o&&r?i:o}}function ly(t,e){return t&&(t[e]||t[kn(e)]||t[Ch(kn(e))])}function jj(t,e,n,r){let s;const i=n,o=fe(t);if(o||et(t)){const a=o&&ir(t);let c=!1,u=!1;a&&(c=!Tn(t),u=lr(t),t=Vh(t)),s=new Array(t.length);for(let h=0,d=t.length;h<d;h++)s[h]=e(c?u?Lo(Hn(t[h])):Hn(t[h]):t[h],h,void 0,i)}else if(typeof t=="number"){s=new Array(t);for(let a=0;a<t;a++)s[a]=e(a+1,a,void 0,i)}else if(qe(t))if(t[Symbol.iterator])s=Array.from(t,(a,c)=>e(a,c,void 0,i));else{const a=Object.keys(t);s=new Array(a.length);for(let c=0,u=a.length;c<u;c++){const h=a[c];s[c]=e(t[h],h,c,i)}}else s=[];return s}const jf=t=>t?Ww(t)?jh(t):jf(t.parent):null,wc=Lt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>jf(t.parent),$root:t=>jf(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>bw(t),$forceUpdate:t=>t.f||(t.f=()=>{fm(t.update)}),$nextTick:t=>t.n||(t.n=ks.bind(t.proxy)),$watch:t=>HC.bind(t)}),Jd=(t,e)=>t!==Ke&&!t.__isScriptSetup&&Me(t,e),l0={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:s,props:i,accessCache:o,type:a,appContext:c}=t;if(e[0]!=="$"){const f=o[e];if(f!==void 0)switch(f){case 1:return r[e];case 2:return s[e];case 4:return n[e];case 3:return i[e]}else{if(Jd(r,e))return o[e]=1,r[e];if(s!==Ke&&Me(s,e))return o[e]=2,s[e];if(Me(i,e))return o[e]=3,i[e];if(n!==Ke&&Me(n,e))return o[e]=4,n[e];qf&&(o[e]=0)}}const u=wc[e];let h,d;if(u)return e==="$attrs"&&Gt(t.attrs,"get",""),u(t);if((h=a.__cssModules)&&(h=h[e]))return h;if(n!==Ke&&Me(n,e))return o[e]=4,n[e];if(d=c.config.globalProperties,Me(d,e))return d[e]},set({_:t},e,n){const{data:r,setupState:s,ctx:i}=t;return Jd(s,e)?(s[e]=n,!0):r!==Ke&&Me(r,e)?(r[e]=n,!0):Me(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:s,props:i,type:o}},a){let c;return!!(n[a]||t!==Ke&&a[0]!=="$"&&Me(t,a)||Jd(e,a)||Me(i,a)||Me(r,a)||Me(wc,a)||Me(s.config.globalProperties,a)||(c=o.__cssModules)&&c[a])},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Me(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function uy(t){return fe(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}function qj(t){const e=$i();let n=t();return Wf(),nm(n)&&(n=n.catch(r=>{throw Ni(e),r})),[n,()=>Ni(e)]}let qf=!0;function u0(t){const e=bw(t),n=t.proxy,r=t.ctx;qf=!1,e.beforeCreate&&hy(e.beforeCreate,t,"bc");const{data:s,computed:i,methods:o,watch:a,provide:c,inject:u,created:h,beforeMount:d,mounted:f,beforeUpdate:m,updated:I,activated:T,deactivated:k,beforeDestroy:V,beforeUnmount:N,destroyed:_,unmounted:C,render:x,renderTracked:U,renderTriggered:v,errorCaptured:E,serverPrefetch:y,expose:A,inheritAttrs:P,components:S,directives:b,filters:ge}=e;if(u&&h0(u,r,null),o)for(const le in o){const ie=o[le];Ie(ie)&&(r[le]=ie.bind(n))}if(s){const le=s.call(n,n);qe(le)&&(t.data=jr(le))}if(qf=!0,i)for(const le in i){const ie=i[le],xe=Ie(ie)?ie.bind(n,n):Ie(ie.get)?ie.get.bind(n,n):sr,Wn=!Ie(ie)&&Ie(ie.set)?ie.set.bind(n):sr,pn=Kt({get:xe,set:Wn});Object.defineProperty(r,le,{enumerable:!0,configurable:!0,get:()=>pn.value,set:Mt=>pn.value=Mt})}if(a)for(const le in a)Aw(a[le],r,n,le);if(c){const le=Ie(c)?c.call(n):c;Reflect.ownKeys(le).forEach(ie=>{Es(ie,le[ie])})}h&&hy(h,t,"c");function se(le,ie){fe(ie)?ie.forEach(xe=>le(xe.bind(n))):ie&&le(ie.bind(n))}if(se(r0,d),se(Mh,f),se(s0,m),se(Iw,I),se(gw,T),se(_w,k),se(Ew,E),se(a0,U),se(o0,v),se(gl,N),se(Fh,C),se(i0,y),fe(A))if(A.length){const le=t.exposed||(t.exposed={});A.forEach(ie=>{Object.defineProperty(le,ie,{get:()=>n[ie],set:xe=>n[ie]=xe,enumerable:!0})})}else t.exposed||(t.exposed={});x&&t.render===sr&&(t.render=x),P!=null&&(t.inheritAttrs=P),S&&(t.components=S),b&&(t.directives=b),y&&mm(t)}function h0(t,e,n=sr){fe(t)&&(t=Hf(t));for(const r in t){const s=t[r];let i;qe(s)?"default"in s?i=Vt(s.from||r,s.default,!0):i=Vt(s.from||r):i=Vt(s),it(i)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[r]=i}}function hy(t,e,n){$n(fe(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function Aw(t,e,n,r){let s=r.includes(".")?ow(n,r):()=>n[r];if(et(t)){const i=e[t];Ie(i)&&kr(s,i)}else if(Ie(t))kr(s,t.bind(n));else if(qe(t))if(fe(t))t.forEach(i=>Aw(i,e,n,r));else{const i=Ie(t.handler)?t.handler.bind(n):e[t.handler];Ie(i)&&kr(s,i,t)}}function bw(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,a=i.get(e);let c;return a?c=a:!s.length&&!n&&!r?c=e:(c={},s.length&&s.forEach(u=>$u(c,u,o,!0)),$u(c,e,o)),qe(e)&&i.set(e,c),c}function $u(t,e,n,r=!1){const{mixins:s,extends:i}=e;i&&$u(t,i,n,!0),s&&s.forEach(o=>$u(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const a=d0[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const d0={data:dy,props:fy,emits:fy,methods:hc,computed:hc,beforeCreate:Xt,created:Xt,beforeMount:Xt,mounted:Xt,beforeUpdate:Xt,updated:Xt,beforeDestroy:Xt,beforeUnmount:Xt,destroyed:Xt,unmounted:Xt,activated:Xt,deactivated:Xt,errorCaptured:Xt,serverPrefetch:Xt,components:hc,directives:hc,watch:p0,provide:dy,inject:f0};function dy(t,e){return e?t?function(){return Lt(Ie(t)?t.call(this,this):t,Ie(e)?e.call(this,this):e)}:e:t}function f0(t,e){return hc(Hf(t),Hf(e))}function Hf(t){if(fe(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Xt(t,e){return t?[...new Set([].concat(t,e))]:e}function hc(t,e){return t?Lt(Object.create(null),t,e):e}function fy(t,e){return t?fe(t)&&fe(e)?[...new Set([...t,...e])]:Lt(Object.create(null),uy(t),uy(e??{})):e}function p0(t,e){if(!t)return e;if(!e)return t;const n=Lt(Object.create(null),t);for(const r in e)n[r]=Xt(t[r],e[r]);return n}function Rw(){return{app:null,config:{isNativeTag:kT,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let m0=0;function g0(t,e){return function(r,s=null){Ie(r)||(r=Lt({},r)),s!=null&&!qe(s)&&(s=null);const i=Rw(),o=new WeakSet,a=[];let c=!1;const u=i.app={_uid:m0++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:z0,get config(){return i.config},set config(h){},use(h,...d){return o.has(h)||(h&&Ie(h.install)?(o.add(h),h.install(u,...d)):Ie(h)&&(o.add(h),h(u,...d))),u},mixin(h){return i.mixins.includes(h)||i.mixins.push(h),u},component(h,d){return d?(i.components[h]=d,u):i.components[h]},directive(h,d){return d?(i.directives[h]=d,u):i.directives[h]},mount(h,d,f){if(!c){const m=u._ceVNode||Ze(r,s);return m.appContext=i,f===!0?f="svg":f===!1&&(f=void 0),d&&e?e(m,h):t(m,h,f),c=!0,u._container=h,h.__vue_app__=u,jh(m.component)}},onUnmount(h){a.push(h)},unmount(){c&&($n(a,u._instance,16),t(null,u._container),delete u._container.__vue_app__)},provide(h,d){return i.provides[h]=d,u},runWithContext(h){const d=wi;wi=u;try{return h()}finally{wi=d}}};return u}}let wi=null;const _0=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${kn(e)}Modifiers`]||t[`${js(e)}Modifiers`];function y0(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||Ke;let s=n;const i=e.startsWith("update:"),o=i&&_0(r,e.slice(7));o&&(o.trim&&(s=n.map(h=>et(h)?h.trim():h)),o.number&&(s=n.map(kh)));let a,c=r[a=Hd(e)]||r[a=Hd(kn(e))];!c&&i&&(c=r[a=Hd(js(e))]),c&&$n(c,t,6,s);const u=r[a+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,$n(u,t,6,s)}}const I0=new WeakMap;function Sw(t,e,n=!1){const r=n?I0:e.emitsCache,s=r.get(t);if(s!==void 0)return s;const i=t.emits;let o={},a=!1;if(!Ie(t)){const c=u=>{const h=Sw(u,e,!0);h&&(a=!0,Lt(o,h))};!n&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}return!i&&!a?(qe(t)&&r.set(t,null),null):(fe(i)?i.forEach(c=>o[c]=null):Lt(o,i),qe(t)&&r.set(t,o),o)}function Uh(t,e){return!t||!fl(e)?!1:(e=e.slice(2).replace(/Once$/,""),Me(t,e[0].toLowerCase()+e.slice(1))||Me(t,js(e))||Me(t,e))}function Yd(t){const{type:e,vnode:n,proxy:r,withProxy:s,propsOptions:[i],slots:o,attrs:a,emit:c,render:u,renderCache:h,props:d,data:f,setupState:m,ctx:I,inheritAttrs:T}=t,k=qu(t);let V,N;try{if(n.shapeFlag&4){const C=s||r,x=C;V=yn(u.call(x,C,h,d,m,f,I)),N=a}else{const C=e;V=yn(C.length>1?C(d,{attrs:a,slots:o,emit:c}):C(d,null)),N=e.props?a:T0(a)}}catch(C){vc.length=0,ya(C,t,1),V=Ze(bt)}let _=V;if(N&&T!==!1){const C=Object.keys(N),{shapeFlag:x}=_;C.length&&x&7&&(i&&C.some(em)&&(N=w0(N,i)),_=xr(_,N,!1,!0))}return n.dirs&&(_=xr(_,null,!1,!0),_.dirs=_.dirs?_.dirs.concat(n.dirs):n.dirs),n.transition&&Fo(_,n.transition),V=_,qu(k),V}function E0(t,e=!0){let n;for(let r=0;r<t.length;r++){const s=t[r];if(Bo(s)){if(s.type!==bt||s.children==="v-if"){if(n)return;n=s}}else return}return n}const T0=t=>{let e;for(const n in t)(n==="class"||n==="style"||fl(n))&&((e||(e={}))[n]=t[n]);return e},w0=(t,e)=>{const n={};for(const r in t)(!em(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function v0(t,e,n){const{props:r,children:s,component:i}=t,{props:o,children:a,patchFlag:c}=e,u=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return r?py(r,o,u):!!o;if(c&8){const h=e.dynamicProps;for(let d=0;d<h.length;d++){const f=h[d];if(o[f]!==r[f]&&!Uh(u,f))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?py(r,o,u):!0:!!o;return!1}function py(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(e[i]!==t[i]&&!Uh(n,i))return!0}return!1}function Bh({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const Pw={},Cw=()=>Object.create(Pw),kw=t=>Object.getPrototypeOf(t)===Pw;function A0(t,e,n,r=!1){const s={},i=Cw();t.propsDefaults=Object.create(null),Nw(t,e,s,i);for(const o in t.propsOptions[0])o in s||(s[o]=void 0);n?t.props=r?s:er(s):t.type.props?t.props=s:t.props=i,t.attrs=i}function b0(t,e,n,r){const{props:s,attrs:i,vnode:{patchFlag:o}}=t,a=Ne(s),[c]=t.propsOptions;let u=!1;if((r||o>0)&&!(o&16)){if(o&8){const h=t.vnode.dynamicProps;for(let d=0;d<h.length;d++){let f=h[d];if(Uh(t.emitsOptions,f))continue;const m=e[f];if(c)if(Me(i,f))m!==i[f]&&(i[f]=m,u=!0);else{const I=kn(f);s[I]=$f(c,a,I,m,t,!1)}else m!==i[f]&&(i[f]=m,u=!0)}}}else{Nw(t,e,s,i)&&(u=!0);let h;for(const d in a)(!e||!Me(e,d)&&((h=js(d))===d||!Me(e,h)))&&(c?n&&(n[d]!==void 0||n[h]!==void 0)&&(s[d]=$f(c,a,d,void 0,t,!0)):delete s[d]);if(i!==a)for(const d in i)(!e||!Me(e,d))&&(delete i[d],u=!0)}u&&Ir(t.attrs,"set","")}function Nw(t,e,n,r){const[s,i]=t.propsOptions;let o=!1,a;if(e)for(let c in e){if(bo(c))continue;const u=e[c];let h;s&&Me(s,h=kn(c))?!i||!i.includes(h)?n[h]=u:(a||(a={}))[h]=u:Uh(t.emitsOptions,c)||(!(c in r)||u!==r[c])&&(r[c]=u,o=!0)}if(i){const c=Ne(n),u=a||Ke;for(let h=0;h<i.length;h++){const d=i[h];n[d]=$f(s,c,d,u[d],t,!Me(u,d))}}return o}function $f(t,e,n,r,s,i){const o=t[n];if(o!=null){const a=Me(o,"default");if(a&&r===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&Ie(c)){const{propsDefaults:u}=s;if(n in u)r=u[n];else{const h=Ni(s);r=u[n]=c.call(null,e),h()}}else r=c;s.ce&&s.ce._setProp(n,r)}o[0]&&(i&&!a?r=!1:o[1]&&(r===""||r===js(n))&&(r=!0))}return r}const R0=new WeakMap;function Dw(t,e,n=!1){const r=n?R0:e.propsCache,s=r.get(t);if(s)return s;const i=t.props,o={},a=[];let c=!1;if(!Ie(t)){const h=d=>{c=!0;const[f,m]=Dw(d,e,!0);Lt(o,f),m&&a.push(...m)};!n&&e.mixins.length&&e.mixins.forEach(h),t.extends&&h(t.extends),t.mixins&&t.mixins.forEach(h)}if(!i&&!c)return qe(t)&&r.set(t,vo),vo;if(fe(i))for(let h=0;h<i.length;h++){const d=kn(i[h]);my(d)&&(o[d]=Ke)}else if(i)for(const h in i){const d=kn(h);if(my(d)){const f=i[h],m=o[d]=fe(f)||Ie(f)?{type:f}:Lt({},f),I=m.type;let T=!1,k=!0;if(fe(I))for(let V=0;V<I.length;++V){const N=I[V],_=Ie(N)&&N.name;if(_==="Boolean"){T=!0;break}else _==="String"&&(k=!1)}else T=Ie(I)&&I.name==="Boolean";m[0]=T,m[1]=k,(T||Me(m,"default"))&&a.push(d)}}const u=[o,a];return qe(t)&&r.set(t,u),u}function my(t){return t[0]!=="$"&&!bo(t)}const gm=t=>t==="_"||t==="_ctx"||t==="$stable",_m=t=>fe(t)?t.map(yn):[yn(t)],S0=(t,e,n)=>{if(e._n)return e;const r=Ns((...s)=>_m(e(...s)),n);return r._c=!1,r},Vw=(t,e,n)=>{const r=t._ctx;for(const s in t){if(gm(s))continue;const i=t[s];if(Ie(i))e[s]=S0(s,i,r);else if(i!=null){const o=_m(i);e[s]=()=>o}}},xw=(t,e)=>{const n=_m(e);t.slots.default=()=>n},Ow=(t,e,n)=>{for(const r in e)(n||!gm(r))&&(t[r]=e[r])},P0=(t,e,n)=>{const r=t.slots=Cw();if(t.vnode.shapeFlag&32){const s=e._;s?(Ow(r,e,n),n&&VT(r,"_",s,!0)):Vw(e,r)}else e&&xw(t,e)},C0=(t,e,n)=>{const{vnode:r,slots:s}=t;let i=!0,o=Ke;if(r.shapeFlag&32){const a=e._;a?n&&a===1?i=!1:Ow(s,e,n):(i=!e.$stable,Vw(e,s)),o=e}else e&&(xw(t,e),o={default:1});if(i)for(const a in s)!gm(a)&&o[a]==null&&delete s[a]},_t=jw;function k0(t){return Lw(t)}function N0(t){return Lw(t,YC)}function Lw(t,e){const n=Nh();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:o,createText:a,createComment:c,setText:u,setElementText:h,parentNode:d,nextSibling:f,setScopeId:m=sr,insertStaticContent:I}=t,T=(R,D,F,$=null,j=null,K=null,J=void 0,z=null,Y=!!D.dynamicChildren)=>{if(R===D)return;R&&!Ln(R,D)&&($=H(R),Mt(R,j,K,!0),R=null),D.patchFlag===-2&&(Y=!1,D.dynamicChildren=null);const{type:W,ref:pe,shapeFlag:ne}=D;switch(W){case vi:k(R,D,F,$);break;case bt:V(R,D,F,$);break;case Eu:R==null&&N(D,F,$,J);break;case sn:S(R,D,F,$,j,K,J,z,Y);break;default:ne&1?x(R,D,F,$,j,K,J,z,Y):ne&6?b(R,D,F,$,j,K,J,z,Y):(ne&64||ne&128)&&W.process(R,D,F,$,j,K,J,z,Y,de)}pe!=null&&j?Po(pe,R&&R.ref,K,D||R,!D):pe==null&&R&&R.ref!=null&&Po(R.ref,null,K,R,!0)},k=(R,D,F,$)=>{if(R==null)r(D.el=a(D.children),F,$);else{const j=D.el=R.el;D.children!==R.children&&u(j,D.children)}},V=(R,D,F,$)=>{R==null?r(D.el=c(D.children||""),F,$):D.el=R.el},N=(R,D,F,$)=>{[R.el,R.anchor]=I(R.children,D,F,$,R.el,R.anchor)},_=({el:R,anchor:D},F,$)=>{let j;for(;R&&R!==D;)j=f(R),r(R,F,$),R=j;r(D,F,$)},C=({el:R,anchor:D})=>{let F;for(;R&&R!==D;)F=f(R),s(R),R=F;s(D)},x=(R,D,F,$,j,K,J,z,Y)=>{if(D.type==="svg"?J="svg":D.type==="math"&&(J="mathml"),R==null)U(D,F,$,j,K,J,z,Y);else{const W=R.el&&R.el._isVueCE?R.el:null;try{W&&W._beginPatch(),y(R,D,j,K,J,z,Y)}finally{W&&W._endPatch()}}},U=(R,D,F,$,j,K,J,z)=>{let Y,W;const{props:pe,shapeFlag:ne,transition:ce,dirs:Ee}=R;if(Y=R.el=o(R.type,K,pe&&pe.is,pe),ne&8?h(Y,R.children):ne&16&&E(R.children,Y,null,$,j,Xd(R,K),J,z),Ee&&Yn(R,null,$,"created"),v(Y,R,R.scopeId,J,$),pe){for(const Oe in pe)Oe!=="value"&&!bo(Oe)&&i(Y,Oe,null,pe[Oe],K,$);"value"in pe&&i(Y,"value",null,pe.value,K),(W=pe.onVnodeBeforeMount)&&rn(W,$,R)}Ee&&Yn(R,null,$,"beforeMount");const Se=Mw(j,ce);Se&&ce.beforeEnter(Y),r(Y,D,F),((W=pe&&pe.onVnodeMounted)||Se||Ee)&&_t(()=>{W&&rn(W,$,R),Se&&ce.enter(Y),Ee&&Yn(R,null,$,"mounted")},j)},v=(R,D,F,$,j)=>{if(F&&m(R,F),$)for(let K=0;K<$.length;K++)m(R,$[K]);if(j){let K=j.subTree;if(D===K||Ku(K.type)&&(K.ssContent===D||K.ssFallback===D)){const J=j.vnode;v(R,J,J.scopeId,J.slotScopeIds,j.parent)}}},E=(R,D,F,$,j,K,J,z,Y=0)=>{for(let W=Y;W<R.length;W++){const pe=R[W]=z?ds(R[W]):yn(R[W]);T(null,pe,D,F,$,j,K,J,z)}},y=(R,D,F,$,j,K,J)=>{const z=D.el=R.el;let{patchFlag:Y,dynamicChildren:W,dirs:pe}=D;Y|=R.patchFlag&16;const ne=R.props||Ke,ce=D.props||Ke;let Ee;if(F&&ni(F,!1),(Ee=ce.onVnodeBeforeUpdate)&&rn(Ee,F,D,R),pe&&Yn(D,R,F,"beforeUpdate"),F&&ni(F,!0),(ne.innerHTML&&ce.innerHTML==null||ne.textContent&&ce.textContent==null)&&h(z,""),W?A(R.dynamicChildren,W,z,F,$,Xd(D,j),K):J||ie(R,D,z,null,F,$,Xd(D,j),K,!1),Y>0){if(Y&16)P(z,ne,ce,F,j);else if(Y&2&&ne.class!==ce.class&&i(z,"class",null,ce.class,j),Y&4&&i(z,"style",ne.style,ce.style,j),Y&8){const Se=D.dynamicProps;for(let Oe=0;Oe<Se.length;Oe++){const Ve=Se[Oe],jt=ne[Ve],Tt=ce[Ve];(Tt!==jt||Ve==="value")&&i(z,Ve,jt,Tt,j,F)}}Y&1&&R.children!==D.children&&h(z,D.children)}else!J&&W==null&&P(z,ne,ce,F,j);((Ee=ce.onVnodeUpdated)||pe)&&_t(()=>{Ee&&rn(Ee,F,D,R),pe&&Yn(D,R,F,"updated")},$)},A=(R,D,F,$,j,K,J)=>{for(let z=0;z<D.length;z++){const Y=R[z],W=D[z],pe=Y.el&&(Y.type===sn||!Ln(Y,W)||Y.shapeFlag&198)?d(Y.el):F;T(Y,W,pe,null,$,j,K,J,!0)}},P=(R,D,F,$,j)=>{if(D!==F){if(D!==Ke)for(const K in D)!bo(K)&&!(K in F)&&i(R,K,D[K],null,j,$);for(const K in F){if(bo(K))continue;const J=F[K],z=D[K];J!==z&&K!=="value"&&i(R,K,z,J,j,$)}"value"in F&&i(R,"value",D.value,F.value,j)}},S=(R,D,F,$,j,K,J,z,Y)=>{const W=D.el=R?R.el:a(""),pe=D.anchor=R?R.anchor:a("");let{patchFlag:ne,dynamicChildren:ce,slotScopeIds:Ee}=D;Ee&&(z=z?z.concat(Ee):Ee),R==null?(r(W,F,$),r(pe,F,$),E(D.children||[],F,pe,j,K,J,z,Y)):ne>0&&ne&64&&ce&&R.dynamicChildren&&R.dynamicChildren.length===ce.length?(A(R.dynamicChildren,ce,F,j,K,J,z),(D.key!=null||j&&D===j.subTree)&&ym(R,D,!0)):ie(R,D,F,pe,j,K,J,z,Y)},b=(R,D,F,$,j,K,J,z,Y)=>{D.slotScopeIds=z,R==null?D.shapeFlag&512?j.ctx.activate(D,F,$,J,Y):ge(D,F,$,j,K,J,Y):Ae(R,D,Y)},ge=(R,D,F,$,j,K,J)=>{const z=R.component=q0(R,$,j);if(ml(R)&&(z.ctx.renderer=de),H0(z,!1,J),z.asyncDep){if(j&&j.registerDep(z,se,J),!R.el){const Y=z.subTree=Ze(bt);V(null,Y,D,F),R.placeholder=Y.el}}else se(z,R,D,F,j,K,J)},Ae=(R,D,F)=>{const $=D.component=R.component;if(v0(R,D,F))if($.asyncDep&&!$.asyncResolved){le($,D,F);return}else $.next=D,$.update();else D.el=R.el,$.vnode=D},se=(R,D,F,$,j,K,J)=>{const z=()=>{if(R.isMounted){let{next:ne,bu:ce,u:Ee,parent:Se,vnode:Oe}=R;{const wt=Fw(R);if(wt){ne&&(ne.el=Oe.el,le(R,ne,J)),wt.asyncDep.then(()=>{R.isUnmounted||z()});return}}let Ve=ne,jt;ni(R,!1),ne?(ne.el=Oe.el,le(R,ne,J)):ne=Oe,ce&&Ro(ce),(jt=ne.props&&ne.props.onVnodeBeforeUpdate)&&rn(jt,Se,ne,Oe),ni(R,!0);const Tt=Yd(R),nn=R.subTree;R.subTree=Tt,T(nn,Tt,d(nn.el),H(nn),R,j,K),ne.el=Tt.el,Ve===null&&Bh(R,Tt.el),Ee&&_t(Ee,j),(jt=ne.props&&ne.props.onVnodeUpdated)&&_t(()=>rn(jt,Se,ne,Oe),j)}else{let ne;const{el:ce,props:Ee}=D,{bm:Se,m:Oe,parent:Ve,root:jt,type:Tt}=R,nn=Ts(D);if(ni(R,!1),Se&&Ro(Se),!nn&&(ne=Ee&&Ee.onVnodeBeforeMount)&&rn(ne,Ve,D),ni(R,!0),ce&&$e){const wt=()=>{R.subTree=Yd(R),$e(ce,R.subTree,R,j,null)};nn&&Tt.__asyncHydrate?Tt.__asyncHydrate(ce,R,wt):wt()}else{jt.ce&&jt.ce._def.shadowRoot!==!1&&jt.ce._injectChildStyle(Tt);const wt=R.subTree=Yd(R);T(null,wt,F,$,R,j,K),D.el=wt.el}if(Oe&&_t(Oe,j),!nn&&(ne=Ee&&Ee.onVnodeMounted)){const wt=D;_t(()=>rn(ne,Ve,wt),j)}(D.shapeFlag&256||Ve&&Ts(Ve.vnode)&&Ve.vnode.shapeFlag&256)&&R.a&&_t(R.a,j),R.isMounted=!0,D=F=$=null}};R.scope.on();const Y=R.effect=new UT(z);R.scope.off();const W=R.update=Y.run.bind(Y),pe=R.job=Y.runIfDirty.bind(Y);pe.i=R,pe.id=R.uid,Y.scheduler=()=>fm(pe),ni(R,!0),W()},le=(R,D,F)=>{D.component=R;const $=R.vnode.props;R.vnode=D,R.next=null,b0(R,D.props,$,F),C0(R,D.children,F),Dr(),ey(R),Vr()},ie=(R,D,F,$,j,K,J,z,Y=!1)=>{const W=R&&R.children,pe=R?R.shapeFlag:0,ne=D.children,{patchFlag:ce,shapeFlag:Ee}=D;if(ce>0){if(ce&128){Wn(W,ne,F,$,j,K,J,z,Y);return}else if(ce&256){xe(W,ne,F,$,j,K,J,z,Y);return}}Ee&8?(pe&16&&Bt(W,j,K),ne!==W&&h(F,ne)):pe&16?Ee&16?Wn(W,ne,F,$,j,K,J,z,Y):Bt(W,j,K,!0):(pe&8&&h(F,""),Ee&16&&E(ne,F,$,j,K,J,z,Y))},xe=(R,D,F,$,j,K,J,z,Y)=>{R=R||vo,D=D||vo;const W=R.length,pe=D.length,ne=Math.min(W,pe);let ce;for(ce=0;ce<ne;ce++){const Ee=D[ce]=Y?ds(D[ce]):yn(D[ce]);T(R[ce],Ee,F,null,j,K,J,z,Y)}W>pe?Bt(R,j,K,!0,!1,ne):E(D,F,$,j,K,J,z,Y,ne)},Wn=(R,D,F,$,j,K,J,z,Y)=>{let W=0;const pe=D.length;let ne=R.length-1,ce=pe-1;for(;W<=ne&&W<=ce;){const Ee=R[W],Se=D[W]=Y?ds(D[W]):yn(D[W]);if(Ln(Ee,Se))T(Ee,Se,F,null,j,K,J,z,Y);else break;W++}for(;W<=ne&&W<=ce;){const Ee=R[ne],Se=D[ce]=Y?ds(D[ce]):yn(D[ce]);if(Ln(Ee,Se))T(Ee,Se,F,null,j,K,J,z,Y);else break;ne--,ce--}if(W>ne){if(W<=ce){const Ee=ce+1,Se=Ee<pe?D[Ee].el:$;for(;W<=ce;)T(null,D[W]=Y?ds(D[W]):yn(D[W]),F,Se,j,K,J,z,Y),W++}}else if(W>ce)for(;W<=ne;)Mt(R[W],j,K,!0),W++;else{const Ee=W,Se=W,Oe=new Map;for(W=Se;W<=ce;W++){const dt=D[W]=Y?ds(D[W]):yn(D[W]);dt.key!=null&&Oe.set(dt.key,W)}let Ve,jt=0;const Tt=ce-Se+1;let nn=!1,wt=0;const fr=new Array(Tt);for(W=0;W<Tt;W++)fr[W]=0;for(W=Ee;W<=ne;W++){const dt=R[W];if(jt>=Tt){Mt(dt,j,K,!0);continue}let mn;if(dt.key!=null)mn=Oe.get(dt.key);else for(Ve=Se;Ve<=ce;Ve++)if(fr[Ve-Se]===0&&Ln(dt,D[Ve])){mn=Ve;break}mn===void 0?Mt(dt,j,K,!0):(fr[mn-Se]=W+1,mn>=wt?wt=mn:nn=!0,T(dt,D[mn],F,null,j,K,J,z,Y),jt++)}const eo=nn?D0(fr):vo;for(Ve=eo.length-1,W=Tt-1;W>=0;W--){const dt=Se+W,mn=D[dt],Ys=D[dt+1],Ma=dt+1<pe?Ys.el||Uw(Ys):$;fr[W]===0?T(null,mn,F,Ma,j,K,J,z,Y):nn&&(Ve<0||W!==eo[Ve]?pn(mn,F,Ma,2):Ve--)}}},pn=(R,D,F,$,j=null)=>{const{el:K,type:J,transition:z,children:Y,shapeFlag:W}=R;if(W&6){pn(R.component.subTree,D,F,$);return}if(W&128){R.suspense.move(D,F,$);return}if(W&64){J.move(R,D,F,de);return}if(J===sn){r(K,D,F);for(let ne=0;ne<Y.length;ne++)pn(Y[ne],D,F,$);r(R.anchor,D,F);return}if(J===Eu){_(R,D,F);return}if($!==2&&W&1&&z)if($===0)z.beforeEnter(K),r(K,D,F),_t(()=>z.enter(K),j);else{const{leave:ne,delayLeave:ce,afterLeave:Ee}=z,Se=()=>{R.ctx.isUnmounted?s(K):r(K,D,F)},Oe=()=>{K._isLeaving&&K[yr](!0),ne(K,()=>{Se(),Ee&&Ee()})};ce?ce(K,Se,Oe):Oe()}else r(K,D,F)},Mt=(R,D,F,$=!1,j=!1)=>{const{type:K,props:J,ref:z,children:Y,dynamicChildren:W,shapeFlag:pe,patchFlag:ne,dirs:ce,cacheIndex:Ee}=R;if(ne===-2&&(j=!1),z!=null&&(Dr(),Po(z,null,F,R,!0),Vr()),Ee!=null&&(D.renderCache[Ee]=void 0),pe&256){D.ctx.deactivate(R);return}const Se=pe&1&&ce,Oe=!Ts(R);let Ve;if(Oe&&(Ve=J&&J.onVnodeBeforeUnmount)&&rn(Ve,D,R),pe&6)xn(R.component,F,$);else{if(pe&128){R.suspense.unmount(F,$);return}Se&&Yn(R,null,D,"beforeUnmount"),pe&64?R.type.remove(R,D,F,de,$):W&&!W.hasOnce&&(K!==sn||ne>0&&ne&64)?Bt(W,D,F,!1,!0):(K===sn&&ne&384||!j&&pe&16)&&Bt(Y,D,F),$&&dr(R)}(Oe&&(Ve=J&&J.onVnodeUnmounted)||Se)&&_t(()=>{Ve&&rn(Ve,D,R),Se&&Yn(R,null,D,"unmounted")},F)},dr=R=>{const{type:D,el:F,anchor:$,transition:j}=R;if(D===sn){Vn(F,$);return}if(D===Eu){C(R);return}const K=()=>{s(F),j&&!j.persisted&&j.afterLeave&&j.afterLeave()};if(R.shapeFlag&1&&j&&!j.persisted){const{leave:J,delayLeave:z}=j,Y=()=>J(F,K);z?z(R.el,K,Y):Y()}else K()},Vn=(R,D)=>{let F;for(;R!==D;)F=f(R),s(R),R=F;s(D)},xn=(R,D,F)=>{const{bum:$,scope:j,job:K,subTree:J,um:z,m:Y,a:W}=R;Gu(Y),Gu(W),$&&Ro($),j.stop(),K&&(K.flags|=8,Mt(J,R,D,F)),z&&_t(z,D),_t(()=>{R.isUnmounted=!0},D)},Bt=(R,D,F,$=!1,j=!1,K=0)=>{for(let J=K;J<R.length;J++)Mt(R[J],D,F,$,j)},H=R=>{if(R.shapeFlag&6)return H(R.component.subTree);if(R.shapeFlag&128)return R.suspense.next();const D=f(R.anchor||R.el),F=D&&D[aw];return F?f(F):D};let oe=!1;const te=(R,D,F)=>{let $;R==null?D._vnode&&(Mt(D._vnode,null,null,!0),$=D._vnode.component):T(D._vnode||null,R,D,null,null,null,F),D._vnode=R,oe||(oe=!0,ey($),ju(),oe=!1)},de={p:T,um:Mt,m:pn,r:dr,mt:ge,mc:E,pc:ie,pbc:A,n:H,o:t};let ve,$e;return e&&([ve,$e]=e(de)),{render:te,hydrate:ve,createApp:g0(te,ve)}}function Xd({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function ni({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function Mw(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function ym(t,e,n=!1){const r=t.children,s=e.children;if(fe(r)&&fe(s))for(let i=0;i<r.length;i++){const o=r[i];let a=s[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[i]=ds(s[i]),a.el=o.el),!n&&a.patchFlag!==-2&&ym(o,a)),a.type===vi&&(a.patchFlag!==-1?a.el=o.el:a.__elIndex=i+(t.type===sn?1:0)),a.type===bt&&!a.el&&(a.el=o.el)}}function D0(t){const e=t.slice(),n=[0];let r,s,i,o,a;const c=t.length;for(r=0;r<c;r++){const u=t[r];if(u!==0){if(s=n[n.length-1],t[s]<u){e[r]=s,n.push(r);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,t[n[a]]<u?i=a+1:o=a;u<t[n[i]]&&(i>0&&(e[r]=n[i-1]),n[i]=r)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function Fw(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Fw(e)}function Gu(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}function Uw(t){if(t.placeholder)return t.placeholder;const e=t.component;return e?Uw(e.subTree):null}const Ku=t=>t.__isSuspense;let Gf=0;const V0={name:"Suspense",__isSuspense:!0,process(t,e,n,r,s,i,o,a,c,u){if(t==null)x0(e,n,r,s,i,o,a,c,u);else{if(i&&i.deps>0&&!t.suspense.isInFallback){e.suspense=t.suspense,e.suspense.vnode=e,e.el=t.el;return}O0(t,e,n,r,s,o,a,c,u)}},hydrate:L0,normalize:M0},Im=V0;function Gc(t,e){const n=t.props&&t.props[e];Ie(n)&&n()}function x0(t,e,n,r,s,i,o,a,c){const{p:u,o:{createElement:h}}=c,d=h("div"),f=t.suspense=Bw(t,s,r,e,d,n,i,o,a,c);u(null,f.pendingBranch=t.ssContent,d,null,r,f,i,o),f.deps>0?(Gc(t,"onPending"),Gc(t,"onFallback"),u(null,t.ssFallback,e,n,r,null,i,o),Co(f,t.ssFallback)):f.resolve(!1,!0)}function O0(t,e,n,r,s,i,o,a,{p:c,um:u,o:{createElement:h}}){const d=e.suspense=t.suspense;d.vnode=e,e.el=t.el;const f=e.ssContent,m=e.ssFallback,{activeBranch:I,pendingBranch:T,isInFallback:k,isHydrating:V}=d;if(T)d.pendingBranch=f,Ln(T,f)?(c(T,f,d.hiddenContainer,null,s,d,i,o,a),d.deps<=0?d.resolve():k&&(V||(c(I,m,n,r,s,null,i,o,a),Co(d,m)))):(d.pendingId=Gf++,V?(d.isHydrating=!1,d.activeBranch=T):u(T,s,d),d.deps=0,d.effects.length=0,d.hiddenContainer=h("div"),k?(c(null,f,d.hiddenContainer,null,s,d,i,o,a),d.deps<=0?d.resolve():(c(I,m,n,r,s,null,i,o,a),Co(d,m))):I&&Ln(I,f)?(c(I,f,n,r,s,d,i,o,a),d.resolve(!0)):(c(null,f,d.hiddenContainer,null,s,d,i,o,a),d.deps<=0&&d.resolve()));else if(I&&Ln(I,f))c(I,f,n,r,s,d,i,o,a),Co(d,f);else if(Gc(e,"onPending"),d.pendingBranch=f,f.shapeFlag&512?d.pendingId=f.component.suspenseId:d.pendingId=Gf++,c(null,f,d.hiddenContainer,null,s,d,i,o,a),d.deps<=0)d.resolve();else{const{timeout:N,pendingId:_}=d;N>0?setTimeout(()=>{d.pendingId===_&&d.fallback(m)},N):N===0&&d.fallback(m)}}function Bw(t,e,n,r,s,i,o,a,c,u,h=!1){const{p:d,m:f,um:m,n:I,o:{parentNode:T,remove:k}}=u;let V;const N=F0(t);N&&e&&e.pendingBranch&&(V=e.pendingId,e.deps++);const _=t.props?xT(t.props.timeout):void 0,C=i,x={vnode:t,parent:e,parentComponent:n,namespace:o,container:r,hiddenContainer:s,deps:0,pendingId:Gf++,timeout:typeof _=="number"?_:-1,activeBranch:null,pendingBranch:null,isInFallback:!h,isHydrating:h,isUnmounted:!1,effects:[],resolve(U=!1,v=!1){const{vnode:E,activeBranch:y,pendingBranch:A,pendingId:P,effects:S,parentComponent:b,container:ge,isInFallback:Ae}=x;let se=!1;x.isHydrating?x.isHydrating=!1:U||(se=y&&A.transition&&A.transition.mode==="out-in",se&&(y.transition.afterLeave=()=>{P===x.pendingId&&(f(A,ge,i===C?I(y):i,0),Ff(S),Ae&&E.ssFallback&&(E.ssFallback.el=null))}),y&&(T(y.el)===ge&&(i=I(y)),m(y,b,x,!0),!se&&Ae&&E.ssFallback&&_t(()=>E.ssFallback.el=null,x)),se||f(A,ge,i,0)),Co(x,A),x.pendingBranch=null,x.isInFallback=!1;let le=x.parent,ie=!1;for(;le;){if(le.pendingBranch){le.effects.push(...S),ie=!0;break}le=le.parent}!ie&&!se&&Ff(S),x.effects=[],N&&e&&e.pendingBranch&&V===e.pendingId&&(e.deps--,e.deps===0&&!v&&e.resolve()),Gc(E,"onResolve")},fallback(U){if(!x.pendingBranch)return;const{vnode:v,activeBranch:E,parentComponent:y,container:A,namespace:P}=x;Gc(v,"onFallback");const S=I(E),b=()=>{x.isInFallback&&(d(null,U,A,S,y,null,P,a,c),Co(x,U))},ge=U.transition&&U.transition.mode==="out-in";ge&&(E.transition.afterLeave=b),x.isInFallback=!0,m(E,y,null,!0),ge||b()},move(U,v,E){x.activeBranch&&f(x.activeBranch,U,v,E),x.container=U},next(){return x.activeBranch&&I(x.activeBranch)},registerDep(U,v,E){const y=!!x.pendingBranch;y&&x.deps++;const A=U.vnode.el;U.asyncDep.catch(P=>{ya(P,U,0)}).then(P=>{if(U.isUnmounted||x.isUnmounted||x.pendingId!==U.suspenseId)return;U.asyncResolved=!0;const{vnode:S}=U;zf(U,P),A&&(S.el=A);const b=!A&&U.subTree.el;v(U,S,T(A||U.subTree.el),A?null:I(U.subTree),x,o,E),b&&(S.placeholder=null,k(b)),Bh(U,S.el),y&&--x.deps===0&&x.resolve()})},unmount(U,v){x.isUnmounted=!0,x.activeBranch&&m(x.activeBranch,n,U,v),x.pendingBranch&&m(x.pendingBranch,n,U,v)}};return x}function L0(t,e,n,r,s,i,o,a,c){const u=e.suspense=Bw(e,r,n,t.parentNode,document.createElement("div"),null,s,i,o,a,!0),h=c(t,u.pendingBranch=e.ssContent,n,u,i,o);return u.deps===0&&u.resolve(!1,!0),h}function M0(t){const{shapeFlag:e,children:n}=t,r=e&32;t.ssContent=gy(r?n.default:n),t.ssFallback=r?gy(n.fallback):Ze(bt)}function gy(t){let e;if(Ie(t)){const n=Uo&&t._c;n&&(t._d=!1,De()),t=t(),n&&(t._d=!0,e=an,qw())}return fe(t)&&(t=E0(t)),t=yn(t),e&&!t.dynamicChildren&&(t.dynamicChildren=e.filter(n=>n!==t)),t}function jw(t,e){e&&e.pendingBranch?fe(t)?e.effects.push(...t):e.effects.push(t):Ff(t)}function Co(t,e){t.activeBranch=e;const{vnode:n,parentComponent:r}=t;let s=e.el;for(;!s&&e.component;)e=e.component.subTree,s=e.el;n.el=s,r&&r.subTree===n&&(r.vnode.el=s,Bh(r,s))}function F0(t){const e=t.props&&t.props.suspensible;return e!=null&&e!==!1}const sn=Symbol.for("v-fgt"),vi=Symbol.for("v-txt"),bt=Symbol.for("v-cmt"),Eu=Symbol.for("v-stc"),vc=[];let an=null;function De(t=!1){vc.push(an=t?null:[])}function qw(){vc.pop(),an=vc[vc.length-1]||null}let Uo=1;function Wu(t,e=!1){Uo+=t,t<0&&an&&e&&(an.hasOnce=!0)}function Hw(t){return t.dynamicChildren=Uo>0?an||vo:null,qw(),Uo>0&&an&&an.push(t),t}function yt(t,e,n,r,s,i){return Hw(_e(t,e,n,r,s,i,!0))}function In(t,e,n,r,s){return Hw(Ze(t,e,n,r,s,!0))}function Bo(t){return t?t.__v_isVNode===!0:!1}function Ln(t,e){return t.type===e.type&&t.key===e.key}const $w=({key:t})=>t??null,Tu=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?et(t)||it(t)||Ie(t)?{i:En,r:t,k:e,f:!!n}:t:null);function _e(t,e=null,n=null,r=0,s=null,i=t===sn?0:1,o=!1,a=!1){const c={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&$w(e),ref:e&&Tu(e),scopeId:iw,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:En};return a?(Em(c,n),i&128&&t.normalize(c)):n&&(c.shapeFlag|=et(n)?8:16),Uo>0&&!o&&an&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&an.push(c),c}const Ze=U0;function U0(t,e=null,n=null,r=0,s=null,i=!1){if((!t||t===ww)&&(t=bt),Bo(t)){const a=xr(t,e,!0);return n&&Em(a,n),Uo>0&&!i&&an&&(a.shapeFlag&6?an[an.indexOf(t)]=a:an.push(a)),a.patchFlag=-2,a}if(W0(t)&&(t=t.__vccOpts),e){e=Gw(e);let{class:a,style:c}=e;a&&!et(a)&&(e.class=Ci(a)),qe(c)&&(xh(c)&&!fe(c)&&(c=Lt({},c)),e.style=Dh(c))}const o=et(t)?1:Ku(t)?128:cw(t)?64:qe(t)?4:Ie(t)?2:0;return _e(t,e,n,r,s,o,i,!0)}function Gw(t){return t?xh(t)||kw(t)?Lt({},t):t:null}function xr(t,e,n=!1,r=!1){const{props:s,ref:i,patchFlag:o,children:a,transition:c}=t,u=e?Kw(s||{},e):s,h={__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&$w(u),ref:e&&e.ref?n&&i?fe(i)?i.concat(Tu(e)):[i,Tu(e)]:Tu(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==sn?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:c,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&xr(t.ssContent),ssFallback:t.ssFallback&&xr(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return c&&r&&Fo(h,c.clone(h)),h}function zu(t=" ",e=0){return Ze(vi,null,t,e)}function Fn(t="",e=!1){return e?(De(),In(bt,null,t)):Ze(bt,null,t)}function yn(t){return t==null||typeof t=="boolean"?Ze(bt):fe(t)?Ze(sn,null,t.slice()):Bo(t)?ds(t):Ze(vi,null,String(t))}function ds(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:xr(t)}function Em(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(fe(e))n=16;else if(typeof e=="object")if(r&65){const s=e.default;s&&(s._c&&(s._d=!1),Em(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!kw(e)?e._ctx=En:s===3&&En&&(En.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Ie(e)?(e={default:e,_ctx:En},n=32):(e=String(e),r&64?(n=16,e=[zu(e)]):n=8);t.children=e,t.shapeFlag|=n}function Kw(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const s in r)if(s==="class")e.class!==r.class&&(e.class=Ci([e.class,r.class]));else if(s==="style")e.style=Dh([e.style,r.style]);else if(fl(s)){const i=e[s],o=r[s];o&&i!==o&&!(fe(i)&&i.includes(o))&&(e[s]=i?[].concat(i,o):o)}else s!==""&&(e[s]=r[s])}return e}function rn(t,e,n,r=null){$n(t,e,7,[n,r])}const B0=Rw();let j0=0;function q0(t,e,n){const r=t.type,s=(e?e.appContext:t.appContext)||B0,i={uid:j0++,vnode:t,type:r,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new FT(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Dw(r,s),emitsOptions:Sw(r,s),emit:null,emitted:null,propsDefaults:Ke,inheritAttrs:r.inheritAttrs,ctx:Ke,data:Ke,props:Ke,attrs:Ke,slots:Ke,refs:Ke,setupState:Ke,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=y0.bind(null,i),t.ce&&t.ce(i),i}let Ut=null;const $i=()=>Ut||En;let Qu,Kf;{const t=Nh(),e=(n,r)=>{let s;return(s=t[n])||(s=t[n]=[]),s.push(r),i=>{s.length>1?s.forEach(o=>o(i)):s[0](i)}};Qu=e("__VUE_INSTANCE_SETTERS__",n=>Ut=n),Kf=e("__VUE_SSR_SETTERS__",n=>jo=n)}const Ni=t=>{const e=Ut;return Qu(t),t.scope.on(),()=>{t.scope.off(),Qu(e)}},Wf=()=>{Ut&&Ut.scope.off(),Qu(null)};function Ww(t){return t.vnode.shapeFlag&4}let jo=!1;function H0(t,e=!1,n=!1){e&&Kf(e);const{props:r,children:s}=t.vnode,i=Ww(t);A0(t,r,i,e),P0(t,s,n||e);const o=i?$0(t,e):void 0;return e&&Kf(!1),o}function $0(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,l0);const{setup:r}=n;if(r){Dr();const s=t.setupContext=r.length>1?K0(t):null,i=Ni(t),o=pl(r,t,0,[t.props,s]),a=nm(o);if(Vr(),i(),(a||t.sp)&&!Ts(t)&&mm(t),a){if(o.then(Wf,Wf),e)return o.then(c=>{zf(t,c)}).catch(c=>{ya(c,t,0)});t.asyncDep=o}else zf(t,o)}else zw(t)}function zf(t,e,n){Ie(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:qe(e)&&(t.setupState=ew(e)),zw(t)}function zw(t,e,n){const r=t.type;t.render||(t.render=r.render||sr);{const s=Ni(t);Dr();try{u0(t)}finally{Vr(),s()}}}const G0={get(t,e){return Gt(t,"get",""),t[e]}};function K0(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,G0),slots:t.slots,emit:t.emit,expose:e}}function jh(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(ew(dm(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in wc)return wc[n](t)},has(e,n){return n in e||n in wc}})):t.proxy}function Qf(t,e=!0){return Ie(t)?t.displayName||t.name:t.name||e&&t.__name}function W0(t){return Ie(t)&&"__vccOpts"in t}const Kt=(t,e)=>OC(t,e,jo);function Wt(t,e,n){try{Wu(-1);const r=arguments.length;return r===2?qe(e)&&!fe(e)?Bo(e)?Ze(t,null,[e]):Ze(t,e):Ze(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&Bo(n)&&(n=[n]),Ze(t,e,n))}finally{Wu(1)}}const z0="3.5.26";let Jf;const _y=typeof window<"u"&&window.trustedTypes;if(_y)try{Jf=_y.createPolicy("vue",{createHTML:t=>t})}catch{}const Qw=Jf?t=>Jf.createHTML(t):t=>t,Q0="http://www.w3.org/2000/svg",J0="http://www.w3.org/1998/Math/MathML",_r=typeof document<"u"?document:null,yy=_r&&_r.createElement("template"),Y0={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const s=e==="svg"?_r.createElementNS(Q0,t):e==="mathml"?_r.createElementNS(J0,t):n?_r.createElement(t,{is:n}):_r.createElement(t);return t==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:t=>_r.createTextNode(t),createComment:t=>_r.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>_r.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,s,i){const o=n?n.previousSibling:e.lastChild;if(s&&(s===i||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{yy.innerHTML=Qw(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const a=yy.content;if(r==="svg"||r==="mathml"){const c=a.firstChild;for(;c.firstChild;)a.appendChild(c.firstChild);a.removeChild(c)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},rs="transition",Za="animation",Kc=Symbol("_vtc"),Jw={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},X0=Lt({},hw,Jw),Z0=t=>(t.displayName="Transition",t.props=X0,t),qo=Z0((t,{slots:e})=>Wt(zC,ek(t),e)),ri=(t,e=[])=>{fe(t)?t.forEach(n=>n(...e)):t&&t(...e)},Iy=t=>t?fe(t)?t.some(e=>e.length>1):t.length>1:!1;function ek(t){const e={};for(const S in t)S in Jw||(e[S]=t[S]);if(t.css===!1)return e;const{name:n="v",type:r,duration:s,enterFromClass:i=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:c=i,appearActiveClass:u=o,appearToClass:h=a,leaveFromClass:d=`${n}-leave-from`,leaveActiveClass:f=`${n}-leave-active`,leaveToClass:m=`${n}-leave-to`}=t,I=tk(s),T=I&&I[0],k=I&&I[1],{onBeforeEnter:V,onEnter:N,onEnterCancelled:_,onLeave:C,onLeaveCancelled:x,onBeforeAppear:U=V,onAppear:v=N,onAppearCancelled:E=_}=e,y=(S,b,ge,Ae)=>{S._enterCancelled=Ae,si(S,b?h:a),si(S,b?u:o),ge&&ge()},A=(S,b)=>{S._isLeaving=!1,si(S,d),si(S,m),si(S,f),b&&b()},P=S=>(b,ge)=>{const Ae=S?v:N,se=()=>y(b,S,ge);ri(Ae,[b,se]),Ey(()=>{si(b,S?c:i),mr(b,S?h:a),Iy(Ae)||Ty(b,r,T,se)})};return Lt(e,{onBeforeEnter(S){ri(V,[S]),mr(S,i),mr(S,o)},onBeforeAppear(S){ri(U,[S]),mr(S,c),mr(S,u)},onEnter:P(!1),onAppear:P(!0),onLeave(S,b){S._isLeaving=!0;const ge=()=>A(S,b);mr(S,d),S._enterCancelled?(mr(S,f),Ay(S)):(Ay(S),mr(S,f)),Ey(()=>{S._isLeaving&&(si(S,d),mr(S,m),Iy(C)||Ty(S,r,k,ge))}),ri(C,[S,ge])},onEnterCancelled(S){y(S,!1,void 0,!0),ri(_,[S])},onAppearCancelled(S){y(S,!0,void 0,!0),ri(E,[S])},onLeaveCancelled(S){A(S),ri(x,[S])}})}function tk(t){if(t==null)return null;if(qe(t))return[Zd(t.enter),Zd(t.leave)];{const e=Zd(t);return[e,e]}}function Zd(t){return xT(t)}function mr(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[Kc]||(t[Kc]=new Set)).add(e)}function si(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const n=t[Kc];n&&(n.delete(e),n.size||(t[Kc]=void 0))}function Ey(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let nk=0;function Ty(t,e,n,r){const s=t._endId=++nk,i=()=>{s===t._endId&&r()};if(n!=null)return setTimeout(i,n);const{type:o,timeout:a,propCount:c}=rk(t,e);if(!o)return r();const u=o+"end";let h=0;const d=()=>{t.removeEventListener(u,f),i()},f=m=>{m.target===t&&++h>=c&&d()};setTimeout(()=>{h<c&&d()},a+1),t.addEventListener(u,f)}function rk(t,e){const n=window.getComputedStyle(t),r=I=>(n[I]||"").split(", "),s=r(`${rs}Delay`),i=r(`${rs}Duration`),o=wy(s,i),a=r(`${Za}Delay`),c=r(`${Za}Duration`),u=wy(a,c);let h=null,d=0,f=0;e===rs?o>0&&(h=rs,d=o,f=i.length):e===Za?u>0&&(h=Za,d=u,f=c.length):(d=Math.max(o,u),h=d>0?o>u?rs:Za:null,f=h?h===rs?i.length:c.length:0);const m=h===rs&&/\b(?:transform|all)(?:,|$)/.test(r(`${rs}Property`).toString());return{type:h,timeout:d,propCount:f,hasTransform:m}}function wy(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>vy(n)+vy(t[r])))}function vy(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function Ay(t){return(t?t.ownerDocument:document).body.offsetHeight}function sk(t,e,n){const r=t[Kc];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const Ju=Symbol("_vod"),Yw=Symbol("_vsh"),ik={name:"show",beforeMount(t,{value:e},{transition:n}){t[Ju]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):ec(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:r}){!e!=!n&&(r?e?(r.beforeEnter(t),ec(t,!0),r.enter(t)):r.leave(t,()=>{ec(t,!1)}):ec(t,e))},beforeUnmount(t,{value:e}){ec(t,e)}};function ec(t,e){t.style.display=e?t[Ju]:"none",t[Yw]=!e}const ok=Symbol(""),ak=/(?:^|;)\s*display\s*:/;function ck(t,e,n){const r=t.style,s=et(n);let i=!1;if(n&&!s){if(e)if(et(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&wu(r,a,"")}else for(const o in e)n[o]==null&&wu(r,o,"");for(const o in n)o==="display"&&(i=!0),wu(r,o,n[o])}else if(s){if(e!==n){const o=r[ok];o&&(n+=";"+o),r.cssText=n,i=ak.test(n)}}else e&&t.removeAttribute("style");Ju in t&&(t[Ju]=i?r.display:"",t[Yw]&&(r.display="none"))}const by=/\s*!important$/;function wu(t,e,n){if(fe(n))n.forEach(r=>wu(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=lk(t,e);by.test(n)?t.setProperty(js(r),n.replace(by,""),"important"):t[r]=n}}const Ry=["Webkit","Moz","ms"],ef={};function lk(t,e){const n=ef[e];if(n)return n;let r=kn(e);if(r!=="filter"&&r in t)return ef[e]=r;r=Ch(r);for(let s=0;s<Ry.length;s++){const i=Ry[s]+r;if(i in t)return ef[e]=i}return e}const Sy="http://www.w3.org/1999/xlink";function Py(t,e,n,r,s,i=iC(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(Sy,e.slice(6,e.length)):t.setAttributeNS(Sy,e,n):n==null||i&&!OT(n)?t.removeAttribute(e):t.setAttribute(e,i?"":cr(n)?String(n):n)}function Cy(t,e,n,r,s){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?Qw(n):n);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const a=i==="OPTION"?t.getAttribute("value")||"":t.value,c=n==null?t.type==="checkbox"?"on":"":String(n);(a!==c||!("_value"in t))&&(t.value=c),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const a=typeof t[e];a==="boolean"?n=OT(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(s||e)}function Tr(t,e,n,r){t.addEventListener(e,n,r)}function uk(t,e,n,r){t.removeEventListener(e,n,r)}const ky=Symbol("_vei");function hk(t,e,n,r,s=null){const i=t[ky]||(t[ky]={}),o=i[e];if(r&&o)o.value=r;else{const[a,c]=dk(e);if(r){const u=i[e]=mk(r,s);Tr(t,a,u,c)}else o&&(uk(t,a,o,c),i[e]=void 0)}}const Ny=/(?:Once|Passive|Capture)$/;function dk(t){let e;if(Ny.test(t)){e={};let r;for(;r=t.match(Ny);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):js(t.slice(2)),e]}let tf=0;const fk=Promise.resolve(),pk=()=>tf||(fk.then(()=>tf=0),tf=Date.now());function mk(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;$n(gk(r,n.value),e,5,[r])};return n.value=t,n.attached=pk(),n}function gk(t,e){if(fe(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>s=>!s._stopped&&r&&r(s))}else return e}const Dy=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,_k=(t,e,n,r,s,i)=>{const o=s==="svg";e==="class"?sk(t,r,o):e==="style"?ck(t,n,r):fl(e)?em(e)||hk(t,e,n,r,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):yk(t,e,r,o))?(Cy(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Py(t,e,r,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!et(r))?Cy(t,kn(e),r,i,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),Py(t,e,r,o))};function yk(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&Dy(e)&&Ie(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="sandbox"&&t.tagName==="IFRAME"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return Dy(e)&&et(n)?!1:e in t}const Ds=t=>{const e=t.props["onUpdate:modelValue"]||!1;return fe(e)?n=>Ro(e,n):e};function Ik(t){t.target.composing=!0}function Vy(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Cn=Symbol("_assign");function xy(t,e,n){return e&&(t=t.trim()),n&&(t=kh(t)),t}const wo={created(t,{modifiers:{lazy:e,trim:n,number:r}},s){t[Cn]=Ds(s);const i=r||s.props&&s.props.type==="number";Tr(t,e?"change":"input",o=>{o.target.composing||t[Cn](xy(t.value,n,i))}),(n||i)&&Tr(t,"change",()=>{t.value=xy(t.value,n,i)}),e||(Tr(t,"compositionstart",Ik),Tr(t,"compositionend",Vy),Tr(t,"change",Vy))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:r,trim:s,number:i}},o){if(t[Cn]=Ds(o),t.composing)return;const a=(i||t.type==="number")&&!/^0\d/.test(t.value)?kh(t.value):t.value,c=e??"";a!==c&&(document.activeElement===t&&t.type!=="range"&&(r&&e===n||s&&t.value.trim()===c)||(t.value=c))}},Ek={deep:!0,created(t,e,n){t[Cn]=Ds(n),Tr(t,"change",()=>{const r=t._modelValue,s=Ho(t),i=t.checked,o=t[Cn];if(fe(r)){const a=rm(r,s),c=a!==-1;if(i&&!c)o(r.concat(s));else if(!i&&c){const u=[...r];u.splice(a,1),o(u)}}else if(ga(r)){const a=new Set(r);i?a.add(s):a.delete(s),o(a)}else o(Xw(t,i))})},mounted:Oy,beforeUpdate(t,e,n){t[Cn]=Ds(n),Oy(t,e,n)}};function Oy(t,{value:e,oldValue:n},r){t._modelValue=e;let s;if(fe(e))s=rm(e,r.props.value)>-1;else if(ga(e))s=e.has(r.props.value);else{if(e===n)return;s=ki(e,Xw(t,!0))}t.checked!==s&&(t.checked=s)}const Tk={created(t,{value:e},n){t.checked=ki(e,n.props.value),t[Cn]=Ds(n),Tr(t,"change",()=>{t[Cn](Ho(t))})},beforeUpdate(t,{value:e,oldValue:n},r){t[Cn]=Ds(r),e!==n&&(t.checked=ki(e,r.props.value))}},wk={deep:!0,created(t,{value:e,modifiers:{number:n}},r){const s=ga(e);Tr(t,"change",()=>{const i=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>n?kh(Ho(o)):Ho(o));t[Cn](t.multiple?s?new Set(i):i:i[0]),t._assigning=!0,ks(()=>{t._assigning=!1})}),t[Cn]=Ds(r)},mounted(t,{value:e}){Ly(t,e)},beforeUpdate(t,e,n){t[Cn]=Ds(n)},updated(t,{value:e}){t._assigning||Ly(t,e)}};function Ly(t,e){const n=t.multiple,r=fe(e);if(!(n&&!r&&!ga(e))){for(let s=0,i=t.options.length;s<i;s++){const o=t.options[s],a=Ho(o);if(n)if(r){const c=typeof a;c==="string"||c==="number"?o.selected=e.some(u=>String(u)===String(a)):o.selected=rm(e,a)>-1}else o.selected=e.has(a);else if(ki(Ho(o),e)){t.selectedIndex!==s&&(t.selectedIndex=s);return}}!n&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function Ho(t){return"_value"in t?t._value:t.value}function Xw(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const My={created(t,e,n){su(t,e,n,null,"created")},mounted(t,e,n){su(t,e,n,null,"mounted")},beforeUpdate(t,e,n,r){su(t,e,n,r,"beforeUpdate")},updated(t,e,n,r){su(t,e,n,r,"updated")}};function vk(t,e){switch(t){case"SELECT":return wk;case"TEXTAREA":return wo;default:switch(e){case"checkbox":return Ek;case"radio":return Tk;default:return wo}}}function su(t,e,n,r,s){const o=vk(t.tagName,n.props&&n.props.type)[s];o&&o(t,e,n,r)}const Ak=["ctrl","shift","alt","meta"],bk={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>Ak.some(n=>t[`${n}Key`]&&!e.includes(n))},Zw=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=((s,...i)=>{for(let o=0;o<e.length;o++){const a=bk[e[o]];if(a&&a(s,e))return}return t(s,...i)}))},Rk={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},oo=(t,e)=>{const n=t._withKeys||(t._withKeys={}),r=e.join(".");return n[r]||(n[r]=(s=>{if(!("key"in s))return;const i=js(s.key);if(e.some(o=>o===i||Rk[o]===i))return t(s)}))},ev=Lt({patchProp:_k},Y0);let Ac,Fy=!1;function Sk(){return Ac||(Ac=k0(ev))}function Pk(){return Ac=Fy?Ac:N0(ev),Fy=!0,Ac}const Ck=((...t)=>{const e=Sk().createApp(...t),{mount:n}=e;return e.mount=r=>{const s=nv(r);if(!s)return;const i=e._component;!Ie(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const o=n(s,!1,tv(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e}),kk=((...t)=>{const e=Pk().createApp(...t),{mount:n}=e;return e.mount=r=>{const s=nv(r);if(s)return n(s,!0,tv(s))},e});function tv(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function nv(t){return et(t)?document.querySelector(t):t}const Nk=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,Dk=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,Vk=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function xk(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){return}return e}function Yu(t,e={}){if(typeof t!="string")return t;if(t[0]==='"'&&t[t.length-1]==='"'&&t.indexOf("\\")===-1)return t.slice(1,-1);const n=t.trim();if(n.length<=9)switch(n.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!Vk.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(Nk.test(t)||Dk.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,xk)}return JSON.parse(t)}catch(r){if(e.strict)throw r;return t}}const Ok=/#/g,Lk=/&/g,Mk=/\//g,Fk=/=/g,Tm=/\+/g,Uk=/%5e/gi,Bk=/%60/gi,jk=/%7c/gi,qk=/%20/gi;function Hk(t){return encodeURI(""+t).replace(jk,"|")}function Yf(t){return Hk(typeof t=="string"?t:JSON.stringify(t)).replace(Tm,"%2B").replace(qk,"+").replace(Ok,"%23").replace(Lk,"%26").replace(Bk,"`").replace(Uk,"^").replace(Mk,"%2F")}function nf(t){return Yf(t).replace(Fk,"%3D")}function Xu(t=""){try{return decodeURIComponent(""+t)}catch{return""+t}}function $k(t){return Xu(t.replace(Tm," "))}function Gk(t){return Xu(t.replace(Tm," "))}function rv(t=""){const e=Object.create(null);t[0]==="?"&&(t=t.slice(1));for(const n of t.split("&")){const r=n.match(/([^=]+)=?(.*)/)||[];if(r.length<2)continue;const s=$k(r[1]);if(s==="__proto__"||s==="constructor")continue;const i=Gk(r[2]||"");e[s]===void 0?e[s]=i:Array.isArray(e[s])?e[s].push(i):e[s]=[e[s],i]}return e}function Kk(t,e){return(typeof e=="number"||typeof e=="boolean")&&(e=String(e)),e?Array.isArray(e)?e.map(n=>`${nf(t)}=${Yf(n)}`).join("&"):`${nf(t)}=${Yf(e)}`:nf(t)}function Wk(t){return Object.keys(t).filter(e=>t[e]!==void 0).map(e=>Kk(e,t[e])).filter(Boolean).join("&")}const zk=/^[\s\w\0+.-]{2,}:([/\\]{1,2})/,Qk=/^[\s\w\0+.-]{2,}:([/\\]{2})?/,Jk=/^([/\\]\s*){2,}[^/\\]/,Yk=/^[\s\0]*(blob|data|javascript|vbscript):$/i,Xk=/\/$|\/\?|\/#/,Zk=/^\.?\//;function Gi(t,e={}){return typeof e=="boolean"&&(e={acceptRelative:e}),e.strict?zk.test(t):Qk.test(t)||(e.acceptRelative?Jk.test(t):!1)}function eN(t){return!!t&&Yk.test(t)}function Xf(t="",e){return e?Xk.test(t):t.endsWith("/")}function Zu(t="",e){if(!e)return(Xf(t)?t.slice(0,-1):t)||"/";if(!Xf(t,!0))return t||"/";let n=t,r="";const s=t.indexOf("#");s!==-1&&(n=t.slice(0,s),r=t.slice(s));const[i,...o]=n.split("?");return((i.endsWith("/")?i.slice(0,-1):i)||"/")+(o.length>0?`?${o.join("?")}`:"")+r}function tN(t="",e){if(!e)return t.endsWith("/")?t:t+"/";if(Xf(t,!0))return t||"/";let n=t,r="";const s=t.indexOf("#");if(s!==-1&&(n=t.slice(0,s),r=t.slice(s),!n))return r;const[i,...o]=n.split("?");return i+"/"+(o.length>0?`?${o.join("?")}`:"")+r}function nN(t,e){if(iv(e)||Gi(t))return t;const n=Zu(e);return t.startsWith(n)?t:wm(n,t)}function Uy(t,e){if(iv(e))return t;const n=Zu(e);if(!t.startsWith(n))return t;const r=t.slice(n.length);return r[0]==="/"?r:"/"+r}function sv(t,e){const n=cv(t),r={...rv(n.search),...e};return n.search=Wk(r),iN(n)}function iv(t){return!t||t==="/"}function rN(t){return t&&t!=="/"}function wm(t,...e){let n=t||"";for(const r of e.filter(s=>rN(s)))if(n){const s=r.replace(Zk,"");n=tN(n)+s}else n=r;return n}function ov(...t){const e=/\/(?!\/)/,n=t.filter(Boolean),r=[];let s=0;for(const o of n)if(!(!o||o==="/")){for(const[a,c]of o.split(e).entries())if(!(!c||c===".")){if(c===".."){if(r.length===1&&Gi(r[0]))continue;r.pop(),s--;continue}if(a===1&&r[r.length-1]?.endsWith(":/")){r[r.length-1]+="/"+c;continue}r.push(c),s++}}let i=r.join("/");return s>=0?n[0]?.startsWith("/")&&!i.startsWith("/")?i="/"+i:n[0]?.startsWith("./")&&!i.startsWith("./")&&(i="./"+i):i="../".repeat(-1*s)+i,n[n.length-1]?.endsWith("/")&&!i.endsWith("/")&&(i+="/"),i}function sN(t,e){return Xu(Zu(t))===Xu(Zu(e))}const av=Symbol.for("ufo:protocolRelative");function cv(t="",e){const n=t.match(/^[\s\0]*(blob:|data:|javascript:|vbscript:)(.*)/i);if(n){const[,d,f=""]=n;return{protocol:d.toLowerCase(),pathname:f,href:d+f,auth:"",host:"",search:"",hash:""}}if(!Gi(t,{acceptRelative:!0}))return By(t);const[,r="",s,i=""]=t.replace(/\\/g,"/").match(/^[\s\0]*([\w+.-]{2,}:)?\/\/([^/@]+@)?(.*)/)||[];let[,o="",a=""]=i.match(/([^#/?]*)(.*)?/)||[];r==="file:"&&(a=a.replace(/\/(?=[A-Za-z]:)/,""));const{pathname:c,search:u,hash:h}=By(a);return{protocol:r.toLowerCase(),auth:s?s.slice(0,Math.max(0,s.length-1)):"",host:o,pathname:c,search:u,hash:h,[av]:!r}}function By(t=""){const[e="",n="",r=""]=(t.match(/([^#?]*)(\?[^#]*)?(#.*)?/)||[]).splice(1);return{pathname:e,search:n,hash:r}}function iN(t){const e=t.pathname||"",n=t.search?(t.search.startsWith("?")?"":"?")+t.search:"",r=t.hash||"",s=t.auth?t.auth+"@":"",i=t.host||"";return(t.protocol||t[av]?(t.protocol||"")+"//":"")+s+i+e+n+r}class oN extends Error{constructor(e,n){super(e,n),this.name="FetchError",n?.cause&&!this.cause&&(this.cause=n.cause)}}function aN(t){const e=t.error?.message||t.error?.toString()||"",n=t.request?.method||t.options?.method||"GET",r=t.request?.url||String(t.request)||"/",s=`[${n}] ${JSON.stringify(r)}`,i=t.response?`${t.response.status} ${t.response.statusText}`:"<no response>",o=`${s}: ${i}${e?` ${e}`:""}`,a=new oN(o,t.error?{cause:t.error}:void 0);for(const c of["request","options","response"])Object.defineProperty(a,c,{get(){return t[c]}});for(const[c,u]of[["data","_data"],["status","status"],["statusCode","status"],["statusText","statusText"],["statusMessage","statusText"]])Object.defineProperty(a,c,{get(){return t.response&&t.response[u]}});return a}const cN=new Set(Object.freeze(["PATCH","POST","PUT","DELETE"]));function jy(t="GET"){return cN.has(t.toUpperCase())}function lN(t){if(t===void 0)return!1;const e=typeof t;return e==="string"||e==="number"||e==="boolean"||e===null?!0:e!=="object"?!1:Array.isArray(t)?!0:t.buffer||t instanceof FormData||t instanceof URLSearchParams?!1:t.constructor&&t.constructor.name==="Object"||typeof t.toJSON=="function"}const uN=new Set(["image/svg","application/xml","application/xhtml","application/html"]),hN=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function dN(t=""){if(!t)return"json";const e=t.split(";").shift()||"";return hN.test(e)?"json":e==="text/event-stream"?"stream":uN.has(e)||e.startsWith("text/")?"text":"blob"}function fN(t,e,n,r){const s=pN(e?.headers??t?.headers,n?.headers,r);let i;return(n?.query||n?.params||e?.params||e?.query)&&(i={...n?.params,...n?.query,...e?.params,...e?.query}),{...n,...e,query:i,params:i,headers:s}}function pN(t,e,n){if(!e)return new n(t);const r=new n(e);if(t)for(const[s,i]of Symbol.iterator in t||Array.isArray(t)?t:new n(t))r.set(s,i);return r}async function iu(t,e){if(e)if(Array.isArray(e))for(const n of e)await n(t);else await e(t)}const mN=new Set([408,409,425,429,500,502,503,504]),gN=new Set([101,204,205,304]);function lv(t={}){const{fetch:e=globalThis.fetch,Headers:n=globalThis.Headers,AbortController:r=globalThis.AbortController}=t;async function s(a){const c=a.error&&a.error.name==="AbortError"&&!a.options.timeout||!1;if(a.options.retry!==!1&&!c){let h;typeof a.options.retry=="number"?h=a.options.retry:h=jy(a.options.method)?0:1;const d=a.response&&a.response.status||500;if(h>0&&(Array.isArray(a.options.retryStatusCodes)?a.options.retryStatusCodes.includes(d):mN.has(d))){const f=typeof a.options.retryDelay=="function"?a.options.retryDelay(a):a.options.retryDelay||0;return f>0&&await new Promise(m=>setTimeout(m,f)),i(a.request,{...a.options,retry:h-1})}}const u=aN(a);throw Error.captureStackTrace&&Error.captureStackTrace(u,i),u}const i=async function(c,u={}){const h={request:c,options:fN(c,u,t.defaults,n),response:void 0,error:void 0};if(h.options.method&&(h.options.method=h.options.method.toUpperCase()),h.options.onRequest&&(await iu(h,h.options.onRequest),h.options.headers instanceof n||(h.options.headers=new n(h.options.headers||{}))),typeof h.request=="string"&&(h.options.baseURL&&(h.request=nN(h.request,h.options.baseURL)),h.options.query&&(h.request=sv(h.request,h.options.query),delete h.options.query),"query"in h.options&&delete h.options.query,"params"in h.options&&delete h.options.params),h.options.body&&jy(h.options.method))if(lN(h.options.body)){const m=h.options.headers.get("content-type");typeof h.options.body!="string"&&(h.options.body=m==="application/x-www-form-urlencoded"?new URLSearchParams(h.options.body).toString():JSON.stringify(h.options.body)),m||h.options.headers.set("content-type","application/json"),h.options.headers.has("accept")||h.options.headers.set("accept","application/json")}else("pipeTo"in h.options.body&&typeof h.options.body.pipeTo=="function"||typeof h.options.body.pipe=="function")&&("duplex"in h.options||(h.options.duplex="half"));let d;if(!h.options.signal&&h.options.timeout){const m=new r;d=setTimeout(()=>{const I=new Error("[TimeoutError]: The operation was aborted due to timeout");I.name="TimeoutError",I.code=23,m.abort(I)},h.options.timeout),h.options.signal=m.signal}try{h.response=await e(h.request,h.options)}catch(m){return h.error=m,h.options.onRequestError&&await iu(h,h.options.onRequestError),await s(h)}finally{d&&clearTimeout(d)}if((h.response.body||h.response._bodyInit)&&!gN.has(h.response.status)&&h.options.method!=="HEAD"){const m=(h.options.parseResponse?"json":h.options.responseType)||dN(h.response.headers.get("content-type")||"");switch(m){case"json":{const I=await h.response.text(),T=h.options.parseResponse||Yu;h.response._data=T(I);break}case"stream":{h.response._data=h.response.body||h.response._bodyInit;break}default:h.response._data=await h.response[m]()}}return h.options.onResponse&&await iu(h,h.options.onResponse),!h.options.ignoreResponseError&&h.response.status>=400&&h.response.status<600?(h.options.onResponseError&&await iu(h,h.options.onResponseError),await s(h)):h.response},o=async function(c,u){return(await i(c,u))._data};return o.raw=i,o.native=(...a)=>e(...a),o.create=(a={},c={})=>lv({...t,...c,defaults:{...t.defaults,...c.defaults,...a}}),o}const eh=(function(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")})(),_N=eh.fetch?(...t)=>eh.fetch(...t):()=>Promise.reject(new Error("[ofetch] global.fetch is not supported!")),yN=eh.Headers,IN=eh.AbortController,EN=lv({fetch:_N,Headers:yN,AbortController:IN}),TN=EN,wN=()=>window?.__NUXT__?.config||window?.useNuxtApp?.().payload?.config,vm=()=>wN().app,vN=()=>vm().baseURL,AN=()=>vm().buildAssetsDir,Am=(...t)=>ov(uv(),AN(),...t),uv=(...t)=>{const e=vm(),n=e.cdnURL||e.baseURL;return t.length?ov(n,...t):n};globalThis.__buildAssetsURL=Am,globalThis.__publicAssetsURL=uv;globalThis.$fetch||(globalThis.$fetch=TN.create({baseURL:vN()}));"global"in globalThis||(globalThis.global=globalThis);function Zf(t,e={},n){for(const r in t){const s=t[r],i=n?`${n}:${r}`:r;typeof s=="object"&&s!==null?Zf(s,e,i):typeof s=="function"&&(e[i]=s)}return e}const bN={run:t=>t()},RN=()=>bN,hv=typeof console.createTask<"u"?console.createTask:RN;function SN(t,e){const n=e.shift(),r=hv(n);return t.reduce((s,i)=>s.then(()=>r.run(()=>i(...e))),Promise.resolve())}function PN(t,e){const n=e.shift(),r=hv(n);return Promise.all(t.map(s=>r.run(()=>s(...e))))}function rf(t,e){for(const n of[...t])n(e)}class CN{constructor(){this._hooks={},this._before=void 0,this._after=void 0,this._deprecatedMessages=void 0,this._deprecatedHooks={},this.hook=this.hook.bind(this),this.callHook=this.callHook.bind(this),this.callHookWith=this.callHookWith.bind(this)}hook(e,n,r={}){if(!e||typeof n!="function")return()=>{};const s=e;let i;for(;this._deprecatedHooks[e];)i=this._deprecatedHooks[e],e=i.to;if(i&&!r.allowDeprecated){let o=i.message;o||(o=`${s} hook has been deprecated`+(i.to?`, please use ${i.to}`:"")),this._deprecatedMessages||(this._deprecatedMessages=new Set),this._deprecatedMessages.has(o)||this._deprecatedMessages.add(o)}if(!n.name)try{Object.defineProperty(n,"name",{get:()=>"_"+e.replace(/\W+/g,"_")+"_hook_cb",configurable:!0})}catch{}return this._hooks[e]=this._hooks[e]||[],this._hooks[e].push(n),()=>{n&&(this.removeHook(e,n),n=void 0)}}hookOnce(e,n){let r,s=(...i)=>(typeof r=="function"&&r(),r=void 0,s=void 0,n(...i));return r=this.hook(e,s),r}removeHook(e,n){if(this._hooks[e]){const r=this._hooks[e].indexOf(n);r!==-1&&this._hooks[e].splice(r,1),this._hooks[e].length===0&&delete this._hooks[e]}}deprecateHook(e,n){this._deprecatedHooks[e]=typeof n=="string"?{to:n}:n;const r=this._hooks[e]||[];delete this._hooks[e];for(const s of r)this.hook(e,s)}deprecateHooks(e){Object.assign(this._deprecatedHooks,e);for(const n in e)this.deprecateHook(n,e[n])}addHooks(e){const n=Zf(e),r=Object.keys(n).map(s=>this.hook(s,n[s]));return()=>{for(const s of r.splice(0,r.length))s()}}removeHooks(e){const n=Zf(e);for(const r in n)this.removeHook(r,n[r])}removeAllHooks(){for(const e in this._hooks)delete this._hooks[e]}callHook(e,...n){return n.unshift(e),this.callHookWith(SN,e,...n)}callHookParallel(e,...n){return n.unshift(e),this.callHookWith(PN,e,...n)}callHookWith(e,n,...r){const s=this._before||this._after?{name:n,args:r,context:{}}:void 0;this._before&&rf(this._before,s);const i=e(n in this._hooks?[...this._hooks[n]]:[],r);return i instanceof Promise?i.finally(()=>{this._after&&s&&rf(this._after,s)}):(this._after&&s&&rf(this._after,s),i)}beforeEach(e){return this._before=this._before||[],this._before.push(e),()=>{if(this._before!==void 0){const n=this._before.indexOf(e);n!==-1&&this._before.splice(n,1)}}}afterEach(e){return this._after=this._after||[],this._after.push(e),()=>{if(this._after!==void 0){const n=this._after.indexOf(e);n!==-1&&this._after.splice(n,1)}}}}function dv(){return new CN}function kN(t={}){let e,n=!1;const r=o=>{if(e&&e!==o)throw new Error("Context conflict")};let s;if(t.asyncContext){const o=t.AsyncLocalStorage||globalThis.AsyncLocalStorage;o&&(s=new o)}const i=()=>{if(s){const o=s.getStore();if(o!==void 0)return o}return e};return{use:()=>{const o=i();if(o===void 0)throw new Error("Context is not available");return o},tryUse:()=>i(),set:(o,a)=>{a||r(o),e=o,n=!0},unset:()=>{e=void 0,n=!1},call:(o,a)=>{r(o),e=o;try{return s?s.run(o,a):a()}finally{n||(e=void 0)}},async callAsync(o,a){e=o;const c=()=>{e=o},u=()=>e===o?c:void 0;ep.add(u);try{const h=s?s.run(o,a):a();return n||(e=void 0),await h}finally{ep.delete(u)}}}}function NN(t={}){const e={};return{get(n,r={}){return e[n]||(e[n]=kN({...t,...r})),e[n]}}}const th=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof global<"u"?global:typeof window<"u"?window:{},qy="__unctx__",DN=th[qy]||(th[qy]=NN()),VN=(t,e={})=>DN.get(t,e),Hy="__unctx_async_handlers__",ep=th[Hy]||(th[Hy]=new Set);function ws(t){const e=[];for(const s of ep){const i=s();i&&e.push(i)}const n=()=>{for(const s of e)s()};let r=t();return r&&typeof r=="object"&&"catch"in r&&(r=r.catch(s=>{throw n(),s})),[r,n]}const xN=!1,$y=!1,ON=!1,Gy={id:"__nuxt-loader"},Hj={componentName:"NuxtLink",prefetch:!0,prefetchOn:{visibility:!0}},$j={deep:!1},Gj={},LN="#__nuxt",fv="nuxt-app",Ky=36e5,MN="vite:preloadError";function pv(t=fv){return VN(t,{asyncContext:!1})}const FN="__nuxt_plugin";function UN(t){let e=0;const n={_id:t.id||fv||"nuxt-app",_scope:sm(),provide:void 0,versions:{get nuxt(){return"4.2.2"},get vue(){return n.vueApp.version}},payload:er({...t.ssrContext?.payload||{},data:er({}),state:jr({}),once:new Set,_errors:er({})}),static:{data:{}},runWithContext(s){return n._scope.active&&!im()?n._scope.run(()=>Wy(n,s)):Wy(n,s)},isHydrating:!0,deferHydration(){if(!n.isHydrating)return()=>{};e++;let s=!1;return()=>{if(!s&&(s=!0,e--,e===0))return n.isHydrating=!1,n.callHook("app:suspense:resolve")}},_asyncDataPromises:{},_asyncData:er({}),_payloadRevivers:{},...t};{const s=window.__NUXT__;if(s)for(const i in s)switch(i){case"data":case"state":case"_errors":Object.assign(n.payload[i],s[i]);break;default:n.payload[i]=s[i]}}n.hooks=dv(),n.hook=n.hooks.hook,n.callHook=n.hooks.callHook,n.provide=(s,i)=>{const o="$"+s;ou(n,o,i),ou(n.vueApp.config.globalProperties,o,i)},ou(n.vueApp,"$nuxt",n),ou(n.vueApp.config.globalProperties,"$nuxt",n);{window.addEventListener(MN,i=>{n.callHook("app:chunkError",{error:i.payload}),i.payload.message.includes("Unable to preload CSS")&&i.preventDefault()}),window.useNuxtApp||(window.useNuxtApp=ze);const s=n.hook("app:error",(...i)=>{});n.hook("app:mounted",s)}const r=n.payload.config;return n.provide("config",r),n}function BN(t,e){e.hooks&&t.hooks.addHooks(e.hooks)}async function jN(t,e){if(typeof e=="function"){const{provide:n}=await t.runWithContext(()=>e(t))||{};if(n&&typeof n=="object")for(const r in n)t.provide(r,n[r])}}async function qN(t,e){const n=new Set,r=[],s=[];let i,o=0;async function a(c){const u=c.dependsOn?.filter(h=>e.some(d=>d._name===h)&&!n.has(h))??[];if(u.length>0)r.push([new Set(u),c]);else{const h=jN(t,c).then(async()=>{c._name&&(n.add(c._name),await Promise.all(r.map(async([d,f])=>{d.has(c._name)&&(d.delete(c._name),d.size===0&&(o++,await a(f)))})))}).catch(d=>{if(!c.parallel&&!t.payload.error)throw d;i||(i=d)});c.parallel?s.push(h):await h}}for(const c of e)BN(t,c);for(const c of e)await a(c);if(await Promise.all(s),o)for(let c=0;c<o;c++)await Promise.all(s);if(i)throw t.payload.error||i}function Dn(t){if(typeof t=="function")return t;const e=t._name||t.name;return delete t.name,Object.assign(t.setup||(()=>{}),t,{[FN]:!0,_name:e})}const HN=Dn;function Wy(t,e,n){const r=()=>e();return pv(t._id).set(t),t.vueApp.runWithContext(r)}function $N(t){let e;return Oh()&&(e=$i()?.appContext.app.$nuxt),e||(e=pv(t).tryUse()),e||null}function ze(t){const e=$N(t);if(!e)throw new Error("[nuxt] instance unavailable");return e}function _l(t){return ze().$config}function ou(t,e,n){Object.defineProperty(t,e,{get:()=>n})}function GN(t,e){return{ctx:{table:t},matchAll:n=>gv(n,t)}}function mv(t){const e={};for(const n in t)e[n]=n==="dynamic"?new Map(Object.entries(t[n]).map(([r,s])=>[r,mv(s)])):new Map(Object.entries(t[n]));return e}function KN(t){return GN(mv(t))}function gv(t,e,n){t.endsWith("/")&&(t=t.slice(0,-1)||"/");const r=[];for(const[i,o]of zy(e.wildcard))(t===i||t.startsWith(i+"/"))&&r.push(o);for(const[i,o]of zy(e.dynamic))if(t.startsWith(i+"/")){const a="/"+t.slice(i.length).split("/").splice(2).join("/");r.push(...gv(a,o))}const s=e.static.get(t);return s&&r.push(s),r.filter(Boolean)}function zy(t){return[...t.entries()].sort((e,n)=>e[0].length-n[0].length)}function sf(t){if(t===null||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e!==null&&e!==Object.prototype&&Object.getPrototypeOf(e)!==null||Symbol.iterator in t?!1:Symbol.toStringTag in t?Object.prototype.toString.call(t)==="[object Module]":!0}function tp(t,e,n=".",r){if(!sf(e))return tp(t,{},n,r);const s=Object.assign({},e);for(const i in t){if(i==="__proto__"||i==="constructor")continue;const o=t[i];o!=null&&(r&&r(s,i,o,n)||(Array.isArray(o)&&Array.isArray(s[i])?s[i]=[...o,...s[i]]:sf(o)&&sf(s[i])?s[i]=tp(o,s[i],(n?`${n}.`:"")+i.toString(),r):s[i]=o))}return s}function WN(t){return(...e)=>e.reduce((n,r)=>tp(n,r,"",t),{})}const _v=WN();function zN(t,e){try{return e in t}catch{return!1}}class np extends Error{constructor(n,r={}){super(n,r);ns(this,"statusCode",500);ns(this,"fatal",!1);ns(this,"unhandled",!1);ns(this,"statusMessage");ns(this,"data");ns(this,"cause");r.cause&&!this.cause&&(this.cause=r.cause)}toJSON(){const n={message:this.message,statusCode:rp(this.statusCode,500)};return this.statusMessage&&(n.statusMessage=yv(this.statusMessage)),this.data!==void 0&&(n.data=this.data),n}}ns(np,"__h3_error__",!0);function QN(t){if(typeof t=="string")return new np(t);if(JN(t))return t;const e=new np(t.message??t.statusMessage??"",{cause:t.cause||t});if(zN(t,"stack"))try{Object.defineProperty(e,"stack",{get(){return t.stack}})}catch{try{e.stack=t.stack}catch{}}if(t.data&&(e.data=t.data),t.statusCode?e.statusCode=rp(t.statusCode,e.statusCode):t.status&&(e.statusCode=rp(t.status,e.statusCode)),t.statusMessage?e.statusMessage=t.statusMessage:t.statusText&&(e.statusMessage=t.statusText),e.statusMessage){const n=e.statusMessage,r=yv(e.statusMessage)}return t.fatal!==void 0&&(e.fatal=t.fatal),t.unhandled!==void 0&&(e.unhandled=t.unhandled),e}function JN(t){return t?.constructor?.__h3_error__===!0}const YN=/[^\u0009\u0020-\u007E]/g;function yv(t=""){return t.replace(YN,"")}function rp(t,e=200){return!t||(typeof t=="string"&&(t=Number.parseInt(t,10)),t<100||t>999)?e:t}const Iv=Symbol("layout-meta"),Di=Symbol("route");import.meta.url.replace(/\/app\/.*$/,"/");const An=()=>ze()?.$router,qh=()=>Oh()?Vt(Di,ze()._route):ze()._route;const XN=()=>{try{if(ze()._processingMiddleware)return!0}catch{return!1}return!1},Kj=(t,e)=>{t||(t="/");const n=typeof t=="string"?t:"path"in t?ZN(t):An().resolve(t).href;if(e?.open){const{target:c="_blank",windowFeatures:u={}}=e.open,h=[];for(const[d,f]of Object.entries(u))f!==void 0&&h.push(`${d.toLowerCase()}=${f}`);return open(n,c,h.join(", ")),Promise.resolve()}const r=Gi(n,{acceptRelative:!0}),s=e?.external||r;if(s){if(!e?.external)throw new Error("Navigating to an external URL is not allowed by default. Use `navigateTo(url, { external: true })`.");const{protocol:c}=new URL(n,window.location.href);if(c&&eN(c))throw new Error(`Cannot navigate to a URL with '${c}' protocol.`)}const i=XN();if(!s&&i){if(e?.replace){if(typeof t=="string"){const{pathname:c,search:u,hash:h}=cv(t);return{path:c,...u&&{query:rv(u)},...h&&{hash:h},replace:!0}}return{...t,replace:!0}}return t}const o=An(),a=ze();return s?(a._scope.stop(),e?.replace?location.replace(n):location.href=n,i?a.isHydrating?new Promise(()=>{}):!1:Promise.resolve()):e?.replace?o.replace(t):o.push(t)};function ZN(t){return sv(t.path||"",t.query||{})+(t.hash||"")}const Ev="__nuxt_error",Hh=()=>VC(ze().payload,"error"),li=t=>{const e=Ai(t);try{const n=Hh();ze().hooks.callHook("app:error",e),n.value||(n.value=e)}catch{throw e}return e},eD=async(t={})=>{const e=ze(),n=Hh();e.callHook("app:error:cleared",t),t.redirect&&await An().replace(t.redirect),n.value=void 0},Tv=t=>!!t&&typeof t=="object"&&Ev in t,Ai=t=>{const e=QN(t);return Object.defineProperty(e,Ev,{value:!0,configurable:!1,writable:!1}),e};let wv;const $o=t=>wv=t,vv=Symbol();function sp(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var bc;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(bc||(bc={}));function tD(){const t=sm(!0),e=t.run(()=>ft({}));let n=[],r=[];const s=dm({install(i){$o(s),s._a=i,i.provide(vv,s),i.config.globalProperties.$pinia=s,r.forEach(o=>n.push(o)),r=[]},use(i){return this._a?n.push(i):r.push(i),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return s}const Av=()=>{};function Qy(t,e,n,r=Av){t.add(e);const s=()=>{t.delete(e)&&r()};return!n&&im()&&aC(s),s}function ao(t,...e){t.forEach(n=>{n(...e)})}const nD=t=>t(),Jy=Symbol(),of=Symbol();function ip(t,e){t instanceof Map&&e instanceof Map?e.forEach((n,r)=>t.set(r,n)):t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const r=e[n],s=t[n];sp(s)&&sp(r)&&t.hasOwnProperty(n)&&!it(r)&&!ir(r)?t[n]=ip(s,r):t[n]=r}return t}const rD=Symbol();function sD(t){return!sp(t)||!Object.prototype.hasOwnProperty.call(t,rD)}const{assign:ls}=Object;function iD(t){return!!(it(t)&&t.effect)}function oD(t,e,n,r){const{state:s,actions:i,getters:o}=e,a=n.state.value[t];let c;function u(){a||(n.state.value[t]=s?s():{});const h=kC(n.state.value[t]);return ls(h,i,Object.keys(o||{}).reduce((d,f)=>(d[f]=dm(Kt(()=>{$o(n);const m=n._s.get(t);return o[f].call(m,m)})),d),{}))}return c=bv(t,u,e,n,r,!0),c}function bv(t,e,n={},r,s,i){let o;const a=ls({actions:{}},n),c={deep:!0};let u,h,d=new Set,f=new Set,m;const I=r.state.value[t];!i&&!I&&(r.state.value[t]={}),ft({});let T;function k(E){let y;u=h=!1,typeof E=="function"?(E(r.state.value[t]),y={type:bc.patchFunction,storeId:t,events:m}):(ip(r.state.value[t],E),y={type:bc.patchObject,payload:E,storeId:t,events:m});const A=T=Symbol();ks().then(()=>{T===A&&(u=!0)}),h=!0,ao(d,y,r.state.value[t])}const V=i?function(){const{state:y}=n,A=y?y():{};this.$patch(P=>{ls(P,A)})}:Av;function N(){o.stop(),d.clear(),f.clear(),r._s.delete(t)}const _=(E,y="")=>{if(Jy in E)return E[of]=y,E;const A=function(){$o(r);const P=Array.from(arguments),S=new Set,b=new Set;function ge(le){S.add(le)}function Ae(le){b.add(le)}ao(f,{args:P,name:A[of],store:x,after:ge,onError:Ae});let se;try{se=E.apply(this&&this.$id===t?this:x,P)}catch(le){throw ao(b,le),le}return se instanceof Promise?se.then(le=>(ao(S,le),le)).catch(le=>(ao(b,le),Promise.reject(le))):(ao(S,se),se)};return A[Jy]=!0,A[of]=y,A},C={_p:r,$id:t,$onAction:Qy.bind(null,f),$patch:k,$reset:V,$subscribe(E,y={}){const A=Qy(d,E,y.detached,()=>P()),P=o.run(()=>kr(()=>r.state.value[t],S=>{(y.flush==="sync"?h:u)&&E({storeId:t,type:bc.direct,events:m},S)},ls({},c,y)));return A},$dispose:N},x=jr(C);r._s.set(t,x);const v=(r._a&&r._a.runWithContext||nD)(()=>r._e.run(()=>(o=sm()).run(()=>e({action:_}))));for(const E in v){const y=v[E];if(it(y)&&!iD(y)||ir(y))i||(I&&sD(y)&&(it(y)?y.value=I[E]:ip(y,I[E])),r.state.value[t][E]=y);else if(typeof y=="function"){const A=_(y,E);v[E]=A,a.actions[E]=y}}return ls(x,v),ls(Ne(x),v),Object.defineProperty(x,"$state",{get:()=>r.state.value[t],set:E=>{k(y=>{ls(y,E)})}}),r._p.forEach(E=>{ls(x,o.run(()=>E({store:x,app:r._a,pinia:r,options:a})))}),I&&i&&n.hydrate&&n.hydrate(x.$state,I),u=!0,h=!0,x}function aD(t,e,n){let r;const s=typeof e=="function";r=s?n:e;function i(o,a){const c=Oh();return o=o||(c?Vt(vv,null):null),o&&$o(o),o=wv,o._s.has(t)||(s?bv(t,e,r,o):oD(t,r,o)),o._s.get(t)}return i.$id=t,i}function cD(t){const e=uD(t),n=new ArrayBuffer(e.length),r=new DataView(n);for(let s=0;s<n.byteLength;s++)r.setUint8(s,e.charCodeAt(s));return n}const lD="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function uD(t){t.length%4===0&&(t=t.replace(/==?$/,""));let e="",n=0,r=0;for(let s=0;s<t.length;s++)n<<=6,n|=lD.indexOf(t[s]),r+=6,r===24&&(e+=String.fromCharCode((n&16711680)>>16),e+=String.fromCharCode((n&65280)>>8),e+=String.fromCharCode(n&255),n=r=0);return r===12?(n>>=4,e+=String.fromCharCode(n)):r===18&&(n>>=2,e+=String.fromCharCode((n&65280)>>8),e+=String.fromCharCode(n&255)),e}const hD=-1,dD=-2,fD=-3,pD=-4,mD=-5,gD=-6;function _D(t,e){return yD(JSON.parse(t),e)}function yD(t,e){if(typeof t=="number")return s(t,!0);if(!Array.isArray(t)||t.length===0)throw new Error("Invalid input");const n=t,r=Array(n.length);function s(i,o=!1){if(i===hD)return;if(i===fD)return NaN;if(i===pD)return 1/0;if(i===mD)return-1/0;if(i===gD)return-0;if(o||typeof i!="number")throw new Error("Invalid input");if(i in r)return r[i];const a=n[i];if(!a||typeof a!="object")r[i]=a;else if(Array.isArray(a))if(typeof a[0]=="string"){const c=a[0],u=e&&Object.hasOwn(e,c)?e[c]:void 0;if(u){let h=a[1];return typeof h!="number"&&(h=n.push(a[1])-1),r[i]=u(s(h))}switch(c){case"Date":r[i]=new Date(a[1]);break;case"Set":const h=new Set;r[i]=h;for(let m=1;m<a.length;m+=1)h.add(s(a[m]));break;case"Map":const d=new Map;r[i]=d;for(let m=1;m<a.length;m+=2)d.set(s(a[m]),s(a[m+1]));break;case"RegExp":r[i]=new RegExp(a[1],a[2]);break;case"Object":r[i]=Object(a[1]);break;case"BigInt":r[i]=BigInt(a[1]);break;case"null":const f=Object.create(null);r[i]=f;for(let m=1;m<a.length;m+=2)f[a[m]]=s(a[m+1]);break;case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":{const m=globalThis[c],I=new m(s(a[1]));r[i]=a[2]!==void 0?I.subarray(a[2],a[3]):I;break}case"ArrayBuffer":{const m=a[1],I=cD(m);r[i]=I;break}case"Temporal.Duration":case"Temporal.Instant":case"Temporal.PlainDate":case"Temporal.PlainTime":case"Temporal.PlainDateTime":case"Temporal.PlainMonthDay":case"Temporal.PlainYearMonth":case"Temporal.ZonedDateTime":{const m=c.slice(9);r[i]=Temporal[m].from(a[1]);break}case"URL":{const m=new URL(a[1]);r[i]=m;break}case"URLSearchParams":{const m=new URLSearchParams(a[1]);r[i]=m;break}default:throw new Error(`Unknown type ${c}`)}}else{const c=new Array(a.length);r[i]=c;for(let u=0;u<a.length;u+=1){const h=a[u];h!==dD&&(c[u]=s(h))}}else{const c={};r[i]=c;for(const u in a){if(u==="__proto__")throw new Error("Cannot parse an object with a `__proto__` property");const h=a[u];c[u]=s(h)}}return r[i]}return s(0)}const ID=new Set(["link","style","script","noscript"]),ED=new Set(["title","titleTemplate","script","style","noscript"]),Yy=new Set(["base","meta","link","style","script","noscript"]),TD=new Set(["title","base","htmlAttrs","bodyAttrs","meta","link","style","script","noscript"]),wD=new Set(["base","title","titleTemplate","bodyAttrs","htmlAttrs","templateParams"]),vD=new Set(["key","tagPosition","tagPriority","tagDuplicateStrategy","innerHTML","textContent","processTemplateParams"]),AD=new Set(["templateParams","htmlAttrs","bodyAttrs"]),bD=new Set(["theme-color","google-site-verification","og","article","book","profile","twitter","author"]),RD=["name","property","http-equiv"],SD=new Set(["viewport","description","keywords","robots"]);function Rv(t){const e=t.split(":");return e.length?bD.has(e[1]):!1}function op(t){const{props:e,tag:n}=t;if(wD.has(n))return n;if(n==="link"&&e.rel==="canonical")return"canonical";if(e.charset)return"charset";if(t.tag==="meta"){for(const r of RD)if(e[r]!==void 0){const s=e[r],i=s&&typeof s=="string"&&s.includes(":"),o=s&&SD.has(s),c=!(i||o)&&t.key?`:key:${t.key}`:"";return`${n}:${s}${c}`}}if(t.key)return`${n}:key:${t.key}`;if(e.id)return`${n}:id:${e.id}`;if(ED.has(n)){const r=t.textContent||t.innerHTML;if(r)return`${n}:content:${r}`}}function Xy(t){const e=t._h||t._d;if(e)return e;const n=t.textContent||t.innerHTML;return n||`${t.tag}:${Object.entries(t.props).map(([r,s])=>`${r}:${String(s)}`).join(",")}`}function nh(t,e,n){typeof t==="function"&&(!n||n!=="titleTemplate"&&!(n[0]==="o"&&n[1]==="n"))&&(t=t());const s=e?e(n,t):t;if(Array.isArray(s))return s.map(i=>nh(i,e));if(s?.constructor===Object){const i={};for(const o of Object.keys(s))i[o]=nh(s[o],e,o);return i}return s}function PD(t,e){const n=t==="style"?new Map:new Set;function r(s){if(s==null||s===void 0)return;const i=String(s).trim();if(i)if(t==="style"){const[o,...a]=i.split(":").map(c=>c?c.trim():"");o&&a.length&&n.set(o,a.join(":"))}else i.split(" ").filter(Boolean).forEach(o=>n.add(o))}return typeof e=="string"?t==="style"?e.split(";").forEach(r):r(e):Array.isArray(e)?e.forEach(s=>r(s)):e&&typeof e=="object"&&Object.entries(e).forEach(([s,i])=>{i&&i!=="false"&&(t==="style"?n.set(String(s).trim(),String(i)):r(s))}),n}function Sv(t,e){return t.props=t.props||{},e?t.tag==="templateParams"?(t.props=e,t):(Object.entries(e).forEach(([n,r])=>{if(r===null){t.props[n]=null;return}if(n==="class"||n==="style"){t.props[n]=PD(n,r);return}if(vD.has(n)){if(["textContent","innerHTML"].includes(n)&&typeof r=="object"){let a=e.type;if(e.type||(a="application/json"),!a?.endsWith("json")&&a!=="speculationrules")return;e.type=a,t.props.type=a,t[n]=JSON.stringify(r)}else t[n]=r;return}const s=String(r),i=n.startsWith("data-"),o=t.tag==="meta"&&n==="content";s==="true"||s===""?t.props[n]=i||o?s:!0:!r&&i&&s==="false"?t.props[n]="false":r!==void 0&&(t.props[n]=r)}),t):t}function CD(t,e){const n=typeof e=="object"&&typeof e!="function"?e:{[t==="script"||t==="noscript"||t==="style"?"innerHTML":"textContent"]:e},r=Sv({tag:t,props:{}},n);return r.key&&ID.has(r.tag)&&(r.props["data-hid"]=r._h=r.key),r.tag==="script"&&typeof r.innerHTML=="object"&&(r.innerHTML=JSON.stringify(r.innerHTML),r.props.type=r.props.type||"application/json"),Array.isArray(r.props.content)?r.props.content.map(s=>({...r,props:{...r.props,content:s}})):r}function kD(t,e){if(!t)return[];typeof t=="function"&&(t=t());const n=(s,i)=>{for(let o=0;o<e.length;o++)i=e[o](s,i);return i};t=n(void 0,t);const r=[];return t=nh(t,n),Object.entries(t||{}).forEach(([s,i])=>{if(i!==void 0)for(const o of Array.isArray(i)?i:[i])r.push(CD(s,o))}),r.flat()}const Zy=(t,e)=>t._w===e._w?t._p-e._p:t._w-e._w,eI={base:-10,title:10},ND={critical:-8,high:-1,low:2},tI={meta:{"content-security-policy":-30,charset:-20,viewport:-15},link:{preconnect:20,stylesheet:60,preload:70,modulepreload:70,prefetch:90,"dns-prefetch":90,prerender:90},script:{async:30,defer:80,sync:50},style:{imported:40,sync:60}},DD=/@import/,tc=t=>t===""||t===!0;function VD(t,e){if(typeof e.tagPriority=="number")return e.tagPriority;let n=100;const r=ND[e.tagPriority]||0,s=t.resolvedOptions.disableCapoSorting?{link:{},script:{},style:{}}:tI;if(e.tag in eI)n=eI[e.tag];else if(e.tag==="meta"){const i=e.props["http-equiv"]==="content-security-policy"?"content-security-policy":e.props.charset?"charset":e.props.name==="viewport"?"viewport":null;i&&(n=tI.meta[i])}else if(e.tag==="link"&&e.props.rel)n=s.link[e.props.rel];else if(e.tag==="script"){const i=String(e.props.type);tc(e.props.async)?n=s.script.async:e.props.src&&!tc(e.props.defer)&&!tc(e.props.async)&&i!=="module"&&!i.endsWith("json")||e.innerHTML&&!i.endsWith("json")?n=s.script.sync:(tc(e.props.defer)&&e.props.src&&!tc(e.props.async)||i==="module")&&(n=s.script.defer)}else e.tag==="style"&&(n=e.innerHTML&&DD.test(e.innerHTML)?s.style.imported:s.style.sync);return(n||100)+r}function nI(t,e){const n=typeof e=="function"?e(t):e,r=n.key||String(t.plugins.size+1);t.plugins.get(r)||(t.plugins.set(r,n),t.hooks.addHooks(n.hooks||{}))}function xD(t={}){const e=dv();e.addHooks(t.hooks||{});const n=!t.document,r=new Map,s=new Map,i=new Set,o={_entryCount:1,plugins:s,dirty:!1,resolvedOptions:t,hooks:e,ssr:n,entries:r,headEntries(){return[...r.values()]},use:a=>nI(o,a),push(a,c){const u={...c||{}};delete u.head;const h=u._index??o._entryCount++,d={_i:h,input:a,options:u},f={_poll(m=!1){o.dirty=!0,!m&&i.add(h),e.callHook("entries:updated",o)},dispose(){r.delete(h)&&o.invalidate()},patch(m){(!u.mode||u.mode==="server"&&n||u.mode==="client"&&!n)&&(d.input=m,r.set(h,d),f._poll())}};return f.patch(a),f},async resolveTags(){const a={tagMap:new Map,tags:[],entries:[...o.entries.values()]};for(await e.callHook("entries:resolve",a);i.size;){const f=i.values().next().value;i.delete(f);const m=r.get(f);if(m){const I={tags:kD(m.input,t.propResolvers||[]).map(T=>Object.assign(T,m.options)),entry:m};await e.callHook("entries:normalize",I),m._tags=I.tags.map((T,k)=>(T._w=VD(o,T),T._p=(m._i<<10)+k,T._d=op(T),T))}}let c=!1;a.entries.flatMap(f=>(f._tags||[]).map(m=>({...m,props:{...m.props}}))).sort(Zy).reduce((f,m)=>{const I=String(m._d||m._p);if(!f.has(I))return f.set(I,m);const T=f.get(I);if((m?.tagDuplicateStrategy||(AD.has(m.tag)?"merge":null)||(m.key&&m.key===T.key?"merge":null))==="merge"){const V={...T.props};Object.entries(m.props).forEach(([N,_])=>V[N]=N==="style"?new Map([...T.props.style||new Map,..._]):N==="class"?new Set([...T.props.class||new Set,..._]):_),f.set(I,{...m,props:V})}else m._p>>10===T._p>>10&&m.tag==="meta"&&Rv(I)?(f.set(I,Object.assign([...Array.isArray(T)?T:[T],m],m)),c=!0):(m._w===T._w?m._p>T._p:m?._w<T?._w)&&f.set(I,m);return f},a.tagMap);const u=a.tagMap.get("title"),h=a.tagMap.get("titleTemplate");if(o._title=u?.textContent,h){const f=h?.textContent;if(o._titleTemplate=f,f){let m=typeof f=="function"?f(u?.textContent):f;typeof m=="string"&&!o.plugins.has("template-params")&&(m=m.replace("%s",u?.textContent||"")),u?m===null?a.tagMap.delete("title"):a.tagMap.set("title",{...u,textContent:m}):(h.tag="title",h.textContent=m)}}a.tags=Array.from(a.tagMap.values()),c&&(a.tags=a.tags.flat().sort(Zy)),await e.callHook("tags:beforeResolve",a),await e.callHook("tags:resolve",a),await e.callHook("tags:afterResolve",a);const d=[];for(const f of a.tags){const{innerHTML:m,tag:I,props:T}=f;if(TD.has(I)&&!(Object.keys(T).length===0&&!f.innerHTML&&!f.textContent)&&!(I==="meta"&&!T.content&&!T["http-equiv"]&&!T.charset)){if(I==="script"&&m){if(String(T.type).endsWith("json")){const k=typeof m=="string"?m:JSON.stringify(m);f.innerHTML=k.replace(/</g,"\\u003C")}else typeof m=="string"&&(f.innerHTML=m.replace(new RegExp(`</${I}`,"g"),`<\\/${I}`));f._d=op(f)}d.push(f)}}return d},invalidate(){for(const a of r.values())i.add(a._i);o.dirty=!0,e.callHook("entries:updated",o)}};return(t?.plugins||[]).forEach(a=>nI(o,a)),o.hooks.callHook("init",o),t.init?.forEach(a=>a&&o.push(a)),o}const OD=(t,e)=>it(e)?PC(e):e,Pv="usehead";function LD(t){return{install(n){n.config.globalProperties.$unhead=t,n.config.globalProperties.$head=t,n.provide(Pv,t)}}.install}function MD(){if(Oh()){const t=Vt(Pv);if(!t)throw new Error("useHead() was called without provide context, ensure you call it through the setup() function.");return t}throw new Error("useHead() was called without provide context, ensure you call it through the setup() function.")}function Wj(t,e={}){const n=e.head||MD();return n.ssr?n.push(t||{},e):FD(n,t,e)}function FD(t,e,n={}){const r=ft(!1);let s;return qC(()=>{const o=r.value?{}:nh(e,OD);s?s.patch(o):s=t.push(o,n)}),$i()&&(gl(()=>{s.dispose()}),_w(()=>{r.value=!0}),gw(()=>{r.value=!1})),s}let vu,ap;function UD(){return vu=$fetch(Am(`builds/meta/${_l().app.buildId}.json`),{responseType:"json"}),vu.then(t=>{ap=KN(t.matcher)}).catch(t=>{}),vu}function $h(){return vu||UD()}async function bm(t){const e=typeof t=="string"?t:t.path;if(await $h(),!ap)return{};try{return _v({},...ap.matchAll(e).reverse())}catch{return{}}}async function rI(t,e={}){if(!await kv(t))return null;const r=await jD(t,e);return await Cv(r)||null}const BD="_payload.json";async function jD(t,e={}){const n=new URL(t,"http://localhost");if(n.host!=="localhost"||Gi(n.pathname,{acceptRelative:!0}))throw new Error("Payload URL must not include hostname: "+t);const r=_l(),s=e.hash||(e.fresh?Date.now():r.app.buildId),i=r.app.cdnURL,o=i&&await kv(t)?i:r.app.baseURL;return wm(o,n.pathname,BD+(s?`?${s}`:""))}async function Cv(t){const e=fetch(t,{cache:"force-cache"}).then(n=>n.text().then(Nv));try{return await e}catch{}return null}async function kv(t=qh().path){const e=ze();return t=t==="/"?t:t.replace(/\/$/,""),(await $h()).prerendered.includes(t)?!0:e.runWithContext(async()=>{const r=await bm({path:t});return!!r.prerender&&!r.redirect})}let ii=null;async function qD(){if(ii)return ii;const t=document.getElementById("__NUXT_DATA__");if(!t)return{};const e=await Nv(t.textContent||""),n=t.dataset.src?await Cv(t.dataset.src):void 0;return ii={...e,...n,...window.__NUXT__},ii.config?.public&&(ii.config.public=jr(ii.config.public)),ii}async function Nv(t){return await _D(t,ze()._payloadRevivers)}function Dv(t,e){ze()._payloadRevivers[t]=e}const HD=HN(()=>{Dv("skipHydrate",t=>{})}),$D=[["NuxtError",t=>Ai(t)],["EmptyShallowRef",t=>Mo(t==="_"?void 0:t==="0n"?BigInt(0):Yu(t))],["EmptyRef",t=>ft(t==="_"?void 0:t==="0n"?BigInt(0):Yu(t))],["ShallowRef",t=>Mo(t)],["ShallowReactive",t=>er(t)],["Ref",t=>ft(t)],["Reactive",t=>jr(t)]],GD=Dn({name:"nuxt:revive-payload:client",order:-30,async setup(t){let e,n;for(const[r,s]of $D)Dv(r,s);Object.assign(t.payload,([e,n]=ws(()=>t.runWithContext(qD)),e=await e,n(),e)),delete window.__NUXT__}});async function Rm(t,e={}){const n=e.document||t.resolvedOptions.document;if(!n||!t.dirty)return;const r={shouldRender:!0,tags:[]};if(await t.hooks.callHook("dom:beforeRender",r),!!r.shouldRender)return t._domUpdatePromise||(t._domUpdatePromise=new Promise(async s=>{const i=new Map,o=new Promise(m=>{t.resolveTags().then(I=>{m(I.map(T=>{const k=i.get(T._d)||0,V={tag:T,id:(k?`${T._d}:${k}`:T._d)||Xy(T),shouldRender:!0};return T._d&&Rv(T._d)&&i.set(T._d,k+1),V}))})});let a=t._dom;if(!a){a={title:n.title,elMap:new Map().set("htmlAttrs",n.documentElement).set("bodyAttrs",n.body)};for(const m of["body","head"]){const I=n[m]?.children;for(const T of I){const k=T.tagName.toLowerCase();if(!Yy.has(k))continue;const V=Sv({tag:k,props:{}},{innerHTML:T.innerHTML,...T.getAttributeNames().reduce((N,_)=>(N[_]=T.getAttribute(_),N),{})||{}});if(V.key=T.getAttribute("data-hid")||void 0,V._d=op(V)||Xy(V),a.elMap.has(V._d)){let N=1,_=V._d;for(;a.elMap.has(_);)_=`${V._d}:${N++}`;a.elMap.set(_,T)}else a.elMap.set(V._d,T)}}}a.pendingSideEffects={...a.sideEffects},a.sideEffects={};function c(m,I,T){const k=`${m}:${I}`;a.sideEffects[k]=T,delete a.pendingSideEffects[k]}function u({id:m,$el:I,tag:T}){const k=T.tag.endsWith("Attrs");a.elMap.set(m,I),k||(T.textContent&&T.textContent!==I.textContent&&(I.textContent=T.textContent),T.innerHTML&&T.innerHTML!==I.innerHTML&&(I.innerHTML=T.innerHTML),c(m,"el",()=>{I?.remove(),a.elMap.delete(m)}));for(const V in T.props){if(!Object.prototype.hasOwnProperty.call(T.props,V))continue;const N=T.props[V];if(V.startsWith("on")&&typeof N=="function"){const C=I?.dataset;if(C&&C[`${V}fired`]){const x=V.slice(0,-5);N.call(I,new Event(x.substring(2)))}I.getAttribute(`data-${V}`)!==""&&((T.tag==="bodyAttrs"?n.defaultView:I).addEventListener(V.substring(2),N.bind(I)),I.setAttribute(`data-${V}`,""));continue}const _=`attr:${V}`;if(V==="class"){if(!N)continue;for(const C of N)k&&c(m,`${_}:${C}`,()=>I.classList.remove(C)),!I.classList.contains(C)&&I.classList.add(C)}else if(V==="style"){if(!N)continue;for(const[C,x]of N)c(m,`${_}:${C}`,()=>{I.style.removeProperty(C)}),I.style.setProperty(C,x)}else N!==!1&&N!==null&&(I.getAttribute(V)!==N&&I.setAttribute(V,N===!0?"":String(N)),k&&c(m,_,()=>I.removeAttribute(V)))}}const h=[],d={bodyClose:void 0,bodyOpen:void 0,head:void 0},f=await o;for(const m of f){const{tag:I,shouldRender:T,id:k}=m;if(T){if(I.tag==="title"){n.title=I.textContent,c("title","",()=>n.title=a.title);continue}m.$el=m.$el||a.elMap.get(k),m.$el?u(m):Yy.has(I.tag)&&h.push(m)}}for(const m of h){const I=m.tag.tagPosition||"head";m.$el=n.createElement(m.tag.tag),u(m),d[I]=d[I]||n.createDocumentFragment(),d[I].appendChild(m.$el)}for(const m of f)await t.hooks.callHook("dom:renderTag",m,n,c);d.head&&n.head.appendChild(d.head),d.bodyOpen&&n.body.insertBefore(d.bodyOpen,n.body.firstChild),d.bodyClose&&n.body.appendChild(d.bodyClose);for(const m in a.pendingSideEffects)a.pendingSideEffects[m]();t._dom=a,await t.hooks.callHook("dom:rendered",{renders:f}),s()}).finally(()=>{t._domUpdatePromise=void 0,t.dirty=!1})),t._domUpdatePromise}function KD(t={}){const e=t.domOptions?.render||Rm;t.document=t.document||(typeof window<"u"?document:void 0);const n=t.document?.head.querySelector('script[id="unhead:payload"]')?.innerHTML||!1;return xD({...t,plugins:[...t.plugins||[],{key:"client",hooks:{"entries:updated":e}}],init:[n?JSON.parse(n):!1,...t.init||[]]})}function WD(t,e){let n=0;return()=>{const r=++n;e(()=>{n===r&&t()})}}function zD(t={}){const e=KD({domOptions:{render:WD(()=>Rm(e),n=>setTimeout(n,0))},...t});return e.install=LD(e),e}const QD={disableDefaults:!0},JD=Dn({name:"nuxt:head",enforce:"pre",setup(t){const e=zD(QD);t.vueApp.use(e);{let n=!0;const r=async()=>{n=!1,await Rm(e)};e.hooks.hook("dom:beforeRender",s=>{s.shouldRender=!n}),t.hooks.hook("page:start",()=>{n=!0}),t.hooks.hook("page:finish",()=>{t.isHydrating||r()}),t.hooks.hook("app:error",r),t.hooks.hook("app:suspense:resolve",r)}}});const go=typeof document<"u";function Vv(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function YD(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&Vv(t.default)}const Le=Object.assign;function af(t,e){const n={};for(const r in e){const s=e[r];n[r]=Gn(s)?s.map(t):t(s)}return n}const Rc=()=>{},Gn=Array.isArray;function sI(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}const xv=/#/g,XD=/&/g,ZD=/\//g,eV=/=/g,tV=/\?/g,Ov=/\+/g,nV=/%5B/g,rV=/%5D/g,Lv=/%5E/g,sV=/%60/g,Mv=/%7B/g,iV=/%7C/g,Fv=/%7D/g,oV=/%20/g;function Sm(t){return t==null?"":encodeURI(""+t).replace(iV,"|").replace(nV,"[").replace(rV,"]")}function aV(t){return Sm(t).replace(Mv,"{").replace(Fv,"}").replace(Lv,"^")}function cp(t){return Sm(t).replace(Ov,"%2B").replace(oV,"+").replace(xv,"%23").replace(XD,"%26").replace(sV,"`").replace(Mv,"{").replace(Fv,"}").replace(Lv,"^")}function cV(t){return cp(t).replace(eV,"%3D")}function lV(t){return Sm(t).replace(xv,"%23").replace(tV,"%3F")}function uV(t){return lV(t).replace(ZD,"%2F")}function Wc(t){if(t==null)return null;try{return decodeURIComponent(""+t)}catch{}return""+t}const hV=/\/$/,dV=t=>t.replace(hV,"");function cf(t,e,n="/"){let r,s={},i="",o="";const a=e.indexOf("#");let c=e.indexOf("?");return c=a>=0&&c>a?-1:c,c>=0&&(r=e.slice(0,c),i=e.slice(c,a>0?a:e.length),s=t(i.slice(1))),a>=0&&(r=r||e.slice(0,a),o=e.slice(a,e.length)),r=gV(r??e,n),{fullPath:r+i+o,path:r,query:s,hash:Wc(o)}}function fV(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function iI(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function pV(t,e,n){const r=e.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&Go(e.matched[r],n.matched[s])&&Uv(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function Go(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function Uv(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var n in t)if(!mV(t[n],e[n]))return!1;return!0}function mV(t,e){return Gn(t)?oI(t,e):Gn(e)?oI(e,t):t?.valueOf()===e?.valueOf()}function oI(t,e){return Gn(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function gV(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),s=r[r.length-1];(s===".."||s===".")&&r.push("");let i=n.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+r.slice(o).join("/")}const Pn={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let lp=(function(t){return t.pop="pop",t.push="push",t})({}),lf=(function(t){return t.back="back",t.forward="forward",t.unknown="",t})({});function _V(t){if(!t)if(go){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),dV(t)}const yV=/^[^#]+#/;function IV(t,e){return t.replace(yV,"#")+e}function EV(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const Gh=()=>({left:window.scrollX,top:window.scrollY});function TV(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;e=EV(s,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function aI(t,e){return(history.state?history.state.position-e:-1)+t}const up=new Map;function wV(t,e){up.set(t,e)}function vV(t){const e=up.get(t);return up.delete(t),e}function AV(t){return typeof t=="string"||t&&typeof t=="object"}function Bv(t){return typeof t=="string"||typeof t=="symbol"}let ut=(function(t){return t[t.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",t[t.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",t[t.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",t[t.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",t[t.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",t})({});const jv=Symbol("");ut.MATCHER_NOT_FOUND+"",ut.NAVIGATION_GUARD_REDIRECT+"",ut.NAVIGATION_ABORTED+"",ut.NAVIGATION_CANCELLED+"",ut.NAVIGATION_DUPLICATED+"";function Ko(t,e){return Le(new Error,{type:t,[jv]:!0},e)}function gr(t,e){return t instanceof Error&&jv in t&&(e==null||!!(t.type&e))}const bV=["params","query","hash"];function RV(t){if(typeof t=="string")return t;if(t.path!=null)return t.path;const e={};for(const n of bV)n in t&&(e[n]=t[n]);return JSON.stringify(e,null,2)}function SV(t){const e={};if(t===""||t==="?")return e;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let r=0;r<n.length;++r){const s=n[r].replace(Ov," "),i=s.indexOf("="),o=Wc(i<0?s:s.slice(0,i)),a=i<0?null:Wc(s.slice(i+1));if(o in e){let c=e[o];Gn(c)||(c=e[o]=[c]),c.push(a)}else e[o]=a}return e}function cI(t){let e="";for(let n in t){const r=t[n];if(n=cV(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(Gn(r)?r.map(s=>s&&cp(s)):[r&&cp(r)]).forEach(s=>{s!==void 0&&(e+=(e.length?"&":"")+n,s!=null&&(e+="="+s))})}return e}function PV(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=Gn(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return e}const CV=Symbol(""),lI=Symbol(""),Kh=Symbol(""),Pm=Symbol(""),hp=Symbol("");function nc(){let t=[];function e(r){return t.push(r),()=>{const s=t.indexOf(r);s>-1&&t.splice(s,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function fs(t,e,n,r,s,i=o=>o()){const o=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((a,c)=>{const u=f=>{f===!1?c(Ko(ut.NAVIGATION_ABORTED,{from:n,to:e})):f instanceof Error?c(f):AV(f)?c(Ko(ut.NAVIGATION_GUARD_REDIRECT,{from:e,to:f})):(o&&r.enterCallbacks[s]===o&&typeof f=="function"&&o.push(f),a())},h=i(()=>t.call(r&&r.instances[s],e,n,u));let d=Promise.resolve(h);t.length<3&&(d=d.then(u)),d.catch(f=>c(f))})}function uf(t,e,n,r,s=i=>i()){const i=[];for(const o of t)for(const a in o.components){let c=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(Vv(c)){const u=(c.__vccOpts||c)[e];u&&i.push(fs(u,n,r,o,a,s))}else{let u=c();i.push(()=>u.then(h=>{if(!h)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const d=YD(h)?h.default:h;o.mods[a]=h,o.components[a]=d;const f=(d.__vccOpts||d)[e];return f&&fs(f,n,r,o,a,s)()}))}}return i}function kV(t,e){const n=[],r=[],s=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const a=e.matched[o];a&&(t.matched.find(u=>Go(u,a))?r.push(a):n.push(a));const c=t.matched[o];c&&(e.matched.find(u=>Go(u,c))||s.push(c))}return[n,r,s]}let NV=()=>location.protocol+"//"+location.host;function qv(t,e){const{pathname:n,search:r,hash:s}=e,i=t.indexOf("#");if(i>-1){let o=s.includes(t.slice(i))?t.slice(i).length:1,a=s.slice(o);return a[0]!=="/"&&(a="/"+a),iI(a,"")}return iI(n,t)+r+s}function DV(t,e,n,r){let s=[],i=[],o=null;const a=({state:f})=>{const m=qv(t,location),I=n.value,T=e.value;let k=0;if(f){if(n.value=m,e.value=f,o&&o===I){o=null;return}k=T?f.position-T.position:0}else r(m);s.forEach(V=>{V(n.value,I,{delta:k,type:lp.pop,direction:k?k>0?lf.forward:lf.back:lf.unknown})})};function c(){o=n.value}function u(f){s.push(f);const m=()=>{const I=s.indexOf(f);I>-1&&s.splice(I,1)};return i.push(m),m}function h(){if(document.visibilityState==="hidden"){const{history:f}=window;if(!f.state)return;f.replaceState(Le({},f.state,{scroll:Gh()}),"")}}function d(){for(const f of i)f();i=[],window.removeEventListener("popstate",a),window.removeEventListener("pagehide",h),document.removeEventListener("visibilitychange",h)}return window.addEventListener("popstate",a),window.addEventListener("pagehide",h),document.addEventListener("visibilitychange",h),{pauseListeners:c,listen:u,destroy:d}}function uI(t,e,n,r=!1,s=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:s?Gh():null}}function VV(t){const{history:e,location:n}=window,r={value:qv(t,n)},s={value:e.state};s.value||i(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(c,u,h){const d=t.indexOf("#"),f=d>-1?(n.host&&document.querySelector("base")?t:t.slice(d))+c:NV()+t+c;try{e[h?"replaceState":"pushState"](u,"",f),s.value=u}catch{n[h?"replace":"assign"](f)}}function o(c,u){i(c,Le({},e.state,uI(s.value.back,c,s.value.forward,!0),u,{position:s.value.position}),!0),r.value=c}function a(c,u){const h=Le({},s.value,e.state,{forward:c,scroll:Gh()});i(h.current,h,!0),i(c,Le({},uI(r.value,c,null),{position:h.position+1},u),!1),r.value=c}return{location:r,state:s,push:a,replace:o}}function xV(t){t=_V(t);const e=VV(t),n=DV(t,e.state,e.location,e.replace);function r(i,o=!0){o||n.pauseListeners(),history.go(i)}const s=Le({location:"",base:t,go:r,createHref:IV.bind(null,t)},e,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}let yi=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.Group=2]="Group",t})({});var At=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.ParamRegExp=2]="ParamRegExp",t[t.ParamRegExpEnd=3]="ParamRegExpEnd",t[t.EscapeNext=4]="EscapeNext",t})(At||{});const OV={type:yi.Static,value:""},LV=/[a-zA-Z0-9_]/;function MV(t){if(!t)return[[]];if(t==="/")return[[OV]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(m){throw new Error(`ERR (${n})/"${u}": ${m}`)}let n=At.Static,r=n;const s=[];let i;function o(){i&&s.push(i),i=[]}let a=0,c,u="",h="";function d(){u&&(n===At.Static?i.push({type:yi.Static,value:u}):n===At.Param||n===At.ParamRegExp||n===At.ParamRegExpEnd?(i.length>1&&(c==="*"||c==="+")&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),i.push({type:yi.Param,value:u,regexp:h,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):e("Invalid state to consume buffer"),u="")}function f(){u+=c}for(;a<t.length;){if(c=t[a++],c==="\\"&&n!==At.ParamRegExp){r=n,n=At.EscapeNext;continue}switch(n){case At.Static:c==="/"?(u&&d(),o()):c===":"?(d(),n=At.Param):f();break;case At.EscapeNext:f(),n=r;break;case At.Param:c==="("?n=At.ParamRegExp:LV.test(c)?f():(d(),n=At.Static,c!=="*"&&c!=="?"&&c!=="+"&&a--);break;case At.ParamRegExp:c===")"?h[h.length-1]=="\\"?h=h.slice(0,-1)+c:n=At.ParamRegExpEnd:h+=c;break;case At.ParamRegExpEnd:d(),n=At.Static,c!=="*"&&c!=="?"&&c!=="+"&&a--,h="";break;default:e("Unknown state");break}}return n===At.ParamRegExp&&e(`Unfinished custom RegExp for param "${u}"`),d(),o(),s}const hI="[^/]+?",FV={sensitive:!1,strict:!1,start:!0,end:!0};var Zt=(function(t){return t[t._multiplier=10]="_multiplier",t[t.Root=90]="Root",t[t.Segment=40]="Segment",t[t.SubSegment=30]="SubSegment",t[t.Static=40]="Static",t[t.Dynamic=20]="Dynamic",t[t.BonusCustomRegExp=10]="BonusCustomRegExp",t[t.BonusWildcard=-50]="BonusWildcard",t[t.BonusRepeatable=-20]="BonusRepeatable",t[t.BonusOptional=-8]="BonusOptional",t[t.BonusStrict=.7000000000000001]="BonusStrict",t[t.BonusCaseSensitive=.25]="BonusCaseSensitive",t})(Zt||{});const UV=/[.+*?^${}()[\]/\\]/g;function BV(t,e){const n=Le({},FV,e),r=[];let s=n.start?"^":"";const i=[];for(const u of t){const h=u.length?[]:[Zt.Root];n.strict&&!u.length&&(s+="/");for(let d=0;d<u.length;d++){const f=u[d];let m=Zt.Segment+(n.sensitive?Zt.BonusCaseSensitive:0);if(f.type===yi.Static)d||(s+="/"),s+=f.value.replace(UV,"\\$&"),m+=Zt.Static;else if(f.type===yi.Param){const{value:I,repeatable:T,optional:k,regexp:V}=f;i.push({name:I,repeatable:T,optional:k});const N=V||hI;if(N!==hI){m+=Zt.BonusCustomRegExp;try{`${N}`}catch(C){throw new Error(`Invalid custom RegExp for param "${I}" (${N}): `+C.message)}}let _=T?`((?:${N})(?:/(?:${N}))*)`:`(${N})`;d||(_=k&&u.length<2?`(?:/${_})`:"/"+_),k&&(_+="?"),s+=_,m+=Zt.Dynamic,k&&(m+=Zt.BonusOptional),T&&(m+=Zt.BonusRepeatable),N===".*"&&(m+=Zt.BonusWildcard)}h.push(m)}r.push(h)}if(n.strict&&n.end){const u=r.length-1;r[u][r[u].length-1]+=Zt.BonusStrict}n.strict||(s+="/?"),n.end?s+="$":n.strict&&!s.endsWith("/")&&(s+="(?:/|$)");const o=new RegExp(s,n.sensitive?"":"i");function a(u){const h=u.match(o),d={};if(!h)return null;for(let f=1;f<h.length;f++){const m=h[f]||"",I=i[f-1];d[I.name]=m&&I.repeatable?m.split("/"):m}return d}function c(u){let h="",d=!1;for(const f of t){(!d||!h.endsWith("/"))&&(h+="/"),d=!1;for(const m of f)if(m.type===yi.Static)h+=m.value;else if(m.type===yi.Param){const{value:I,repeatable:T,optional:k}=m,V=I in u?u[I]:"";if(Gn(V)&&!T)throw new Error(`Provided param "${I}" is an array but it is not repeatable (* or + modifiers)`);const N=Gn(V)?V.join("/"):V;if(!N)if(k)f.length<2&&(h.endsWith("/")?h=h.slice(0,-1):d=!0);else throw new Error(`Missing required param "${I}"`);h+=N}}return h||"/"}return{re:o,score:r,keys:i,parse:a,stringify:c}}function jV(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===Zt.Static+Zt.Segment?-1:1:t.length>e.length?e.length===1&&e[0]===Zt.Static+Zt.Segment?1:-1:0}function Hv(t,e){let n=0;const r=t.score,s=e.score;for(;n<r.length&&n<s.length;){const i=jV(r[n],s[n]);if(i)return i;n++}if(Math.abs(s.length-r.length)===1){if(dI(r))return 1;if(dI(s))return-1}return s.length-r.length}function dI(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const qV={strict:!1,end:!0,sensitive:!1};function HV(t,e,n){const r=BV(MV(t.path),n),s=Le(r,{record:t,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function $V(t,e){const n=[],r=new Map;e=sI(qV,e);function s(d){return r.get(d)}function i(d,f,m){const I=!m,T=pI(d);T.aliasOf=m&&m.record;const k=sI(e,d),V=[T];if("alias"in d){const C=typeof d.alias=="string"?[d.alias]:d.alias;for(const x of C)V.push(pI(Le({},T,{components:m?m.record.components:T.components,path:x,aliasOf:m?m.record:T})))}let N,_;for(const C of V){const{path:x}=C;if(f&&x[0]!=="/"){const U=f.record.path,v=U[U.length-1]==="/"?"":"/";C.path=f.record.path+(x&&v+x)}if(N=HV(C,f,k),m?m.alias.push(N):(_=_||N,_!==N&&_.alias.push(N),I&&d.name&&!mI(N)&&o(d.name)),$v(N)&&c(N),T.children){const U=T.children;for(let v=0;v<U.length;v++)i(U[v],N,m&&m.children[v])}m=m||N}return _?()=>{o(_)}:Rc}function o(d){if(Bv(d)){const f=r.get(d);f&&(r.delete(d),n.splice(n.indexOf(f),1),f.children.forEach(o),f.alias.forEach(o))}else{const f=n.indexOf(d);f>-1&&(n.splice(f,1),d.record.name&&r.delete(d.record.name),d.children.forEach(o),d.alias.forEach(o))}}function a(){return n}function c(d){const f=WV(d,n);n.splice(f,0,d),d.record.name&&!mI(d)&&r.set(d.record.name,d)}function u(d,f){let m,I={},T,k;if("name"in d&&d.name){if(m=r.get(d.name),!m)throw Ko(ut.MATCHER_NOT_FOUND,{location:d});k=m.record.name,I=Le(fI(f.params,m.keys.filter(_=>!_.optional).concat(m.parent?m.parent.keys.filter(_=>_.optional):[]).map(_=>_.name)),d.params&&fI(d.params,m.keys.map(_=>_.name))),T=m.stringify(I)}else if(d.path!=null)T=d.path,m=n.find(_=>_.re.test(T)),m&&(I=m.parse(T),k=m.record.name);else{if(m=f.name?r.get(f.name):n.find(_=>_.re.test(f.path)),!m)throw Ko(ut.MATCHER_NOT_FOUND,{location:d,currentLocation:f});k=m.record.name,I=Le({},f.params,d.params),T=m.stringify(I)}const V=[];let N=m;for(;N;)V.unshift(N.record),N=N.parent;return{name:k,path:T,params:I,matched:V,meta:KV(V)}}t.forEach(d=>i(d));function h(){n.length=0,r.clear()}return{addRoute:i,resolve:u,removeRoute:o,clearRoutes:h,getRoutes:a,getRecordMatcher:s}}function fI(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function pI(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:GV(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function GV(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function mI(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function KV(t){return t.reduce((e,n)=>Le(e,n.meta),{})}function WV(t,e){let n=0,r=e.length;for(;n!==r;){const i=n+r>>1;Hv(t,e[i])<0?r=i:n=i+1}const s=zV(t);return s&&(r=e.lastIndexOf(s,r-1)),r}function zV(t){let e=t;for(;e=e.parent;)if($v(e)&&Hv(t,e)===0)return e}function $v({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function gI(t){const e=Vt(Kh),n=Vt(Pm),r=Kt(()=>{const c=me(t.to);return e.resolve(c)}),s=Kt(()=>{const{matched:c}=r.value,{length:u}=c,h=c[u-1],d=n.matched;if(!h||!d.length)return-1;const f=d.findIndex(Go.bind(null,h));if(f>-1)return f;const m=_I(c[u-2]);return u>1&&_I(h)===m&&d[d.length-1].path!==m?d.findIndex(Go.bind(null,c[u-2])):f}),i=Kt(()=>s.value>-1&&ZV(n.params,r.value.params)),o=Kt(()=>s.value>-1&&s.value===n.matched.length-1&&Uv(n.params,r.value.params));function a(c={}){if(XV(c)){const u=e[me(t.replace)?"replace":"push"](me(t.to)).catch(Rc);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:r,href:Kt(()=>r.value.href),isActive:i,isExactActive:o,navigate:a}}function QV(t){return t.length===1?t[0]:t}const JV=qs({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:gI,setup(t,{slots:e}){const n=jr(gI(t)),{options:r}=Vt(Kh),s=Kt(()=>({[yI(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[yI(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&QV(e.default(n));return t.custom?i:Wt("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},i)}}}),YV=JV;function XV(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function ZV(t,e){for(const n in e){const r=e[n],s=t[n];if(typeof r=="string"){if(r!==s)return!1}else if(!Gn(s)||s.length!==r.length||r.some((i,o)=>i.valueOf()!==s[o].valueOf()))return!1}return!0}function _I(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const yI=(t,e,n)=>t??e??n,ex=qs({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=Vt(hp),s=Kt(()=>t.route||r.value),i=Vt(lI,0),o=Kt(()=>{let u=me(i);const{matched:h}=s.value;let d;for(;(d=h[u])&&!d.components;)u++;return u}),a=Kt(()=>s.value.matched[o.value]);Es(lI,Kt(()=>o.value+1)),Es(CV,a),Es(hp,s);const c=ft();return kr(()=>[c.value,a.value,t.name],([u,h,d],[f,m,I])=>{h&&(h.instances[d]=u,m&&m!==h&&u&&u===f&&(h.leaveGuards.size||(h.leaveGuards=m.leaveGuards),h.updateGuards.size||(h.updateGuards=m.updateGuards))),u&&h&&(!m||!Go(h,m)||!f)&&(h.enterCallbacks[d]||[]).forEach(T=>T(u))},{flush:"post"}),()=>{const u=s.value,h=t.name,d=a.value,f=d&&d.components[h];if(!f)return II(n.default,{Component:f,route:u});const m=d.props[h],I=m?m===!0?u.params:typeof m=="function"?m(u):m:null,k=Wt(f,Le({},I,e,{onVnodeUnmounted:V=>{V.component.isUnmounted&&(d.instances[h]=null)},ref:c}));return II(n.default,{Component:k,route:u})||k}}});function II(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const Gv=ex;function tx(t){const e=$V(t.routes,t),n=t.parseQuery||SV,r=t.stringifyQuery||cI,s=t.history,i=nc(),o=nc(),a=nc(),c=Mo(Pn);let u=Pn;go&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const h=af.bind(null,H=>""+H),d=af.bind(null,uV),f=af.bind(null,Wc);function m(H,oe){let te,de;return Bv(H)?(te=e.getRecordMatcher(H),de=oe):de=H,e.addRoute(de,te)}function I(H){const oe=e.getRecordMatcher(H);oe&&e.removeRoute(oe)}function T(){return e.getRoutes().map(H=>H.record)}function k(H){return!!e.getRecordMatcher(H)}function V(H,oe){if(oe=Le({},oe||c.value),typeof H=="string"){const D=cf(n,H,oe.path),F=e.resolve({path:D.path},oe),$=s.createHref(D.fullPath);return Le(D,F,{params:f(F.params),hash:Wc(D.hash),redirectedFrom:void 0,href:$})}let te;if(H.path!=null)te=Le({},H,{path:cf(n,H.path,oe.path).path});else{const D=Le({},H.params);for(const F in D)D[F]==null&&delete D[F];te=Le({},H,{params:d(D)}),oe.params=d(oe.params)}const de=e.resolve(te,oe),ve=H.hash||"";de.params=h(f(de.params));const $e=fV(r,Le({},H,{hash:aV(ve),path:de.path})),R=s.createHref($e);return Le({fullPath:$e,hash:ve,query:r===cI?PV(H.query):H.query||{}},de,{redirectedFrom:void 0,href:R})}function N(H){return typeof H=="string"?cf(n,H,c.value.path):Le({},H)}function _(H,oe){if(u!==H)return Ko(ut.NAVIGATION_CANCELLED,{from:oe,to:H})}function C(H){return v(H)}function x(H){return C(Le(N(H),{replace:!0}))}function U(H,oe){const te=H.matched[H.matched.length-1];if(te&&te.redirect){const{redirect:de}=te;let ve=typeof de=="function"?de(H,oe):de;return typeof ve=="string"&&(ve=ve.includes("?")||ve.includes("#")?ve=N(ve):{path:ve},ve.params={}),Le({query:H.query,hash:H.hash,params:ve.path!=null?{}:H.params},ve)}}function v(H,oe){const te=u=V(H),de=c.value,ve=H.state,$e=H.force,R=H.replace===!0,D=U(te,de);if(D)return v(Le(N(D),{state:typeof D=="object"?Le({},ve,D.state):ve,force:$e,replace:R}),oe||te);const F=te;F.redirectedFrom=oe;let $;return!$e&&pV(r,de,te)&&($=Ko(ut.NAVIGATION_DUPLICATED,{to:F,from:de}),pn(de,de,!0,!1)),($?Promise.resolve($):A(F,de)).catch(j=>gr(j)?gr(j,ut.NAVIGATION_GUARD_REDIRECT)?j:Wn(j):ie(j,F,de)).then(j=>{if(j){if(gr(j,ut.NAVIGATION_GUARD_REDIRECT))return v(Le({replace:R},N(j.to),{state:typeof j.to=="object"?Le({},ve,j.to.state):ve,force:$e}),oe||F)}else j=S(F,de,!0,R,ve);return P(F,de,j),j})}function E(H,oe){const te=_(H,oe);return te?Promise.reject(te):Promise.resolve()}function y(H){const oe=Vn.values().next().value;return oe&&typeof oe.runWithContext=="function"?oe.runWithContext(H):H()}function A(H,oe){let te;const[de,ve,$e]=kV(H,oe);te=uf(de.reverse(),"beforeRouteLeave",H,oe);for(const D of de)D.leaveGuards.forEach(F=>{te.push(fs(F,H,oe))});const R=E.bind(null,H,oe);return te.push(R),Bt(te).then(()=>{te=[];for(const D of i.list())te.push(fs(D,H,oe));return te.push(R),Bt(te)}).then(()=>{te=uf(ve,"beforeRouteUpdate",H,oe);for(const D of ve)D.updateGuards.forEach(F=>{te.push(fs(F,H,oe))});return te.push(R),Bt(te)}).then(()=>{te=[];for(const D of $e)if(D.beforeEnter)if(Gn(D.beforeEnter))for(const F of D.beforeEnter)te.push(fs(F,H,oe));else te.push(fs(D.beforeEnter,H,oe));return te.push(R),Bt(te)}).then(()=>(H.matched.forEach(D=>D.enterCallbacks={}),te=uf($e,"beforeRouteEnter",H,oe,y),te.push(R),Bt(te))).then(()=>{te=[];for(const D of o.list())te.push(fs(D,H,oe));return te.push(R),Bt(te)}).catch(D=>gr(D,ut.NAVIGATION_CANCELLED)?D:Promise.reject(D))}function P(H,oe,te){a.list().forEach(de=>y(()=>de(H,oe,te)))}function S(H,oe,te,de,ve){const $e=_(H,oe);if($e)return $e;const R=oe===Pn,D=go?history.state:{};te&&(de||R?s.replace(H.fullPath,Le({scroll:R&&D&&D.scroll},ve)):s.push(H.fullPath,ve)),c.value=H,pn(H,oe,te,R),Wn()}let b;function ge(){b||(b=s.listen((H,oe,te)=>{if(!xn.listening)return;const de=V(H),ve=U(de,xn.currentRoute.value);if(ve){v(Le(ve,{replace:!0,force:!0}),de).catch(Rc);return}u=de;const $e=c.value;go&&wV(aI($e.fullPath,te.delta),Gh()),A(de,$e).catch(R=>gr(R,ut.NAVIGATION_ABORTED|ut.NAVIGATION_CANCELLED)?R:gr(R,ut.NAVIGATION_GUARD_REDIRECT)?(v(Le(N(R.to),{force:!0}),de).then(D=>{gr(D,ut.NAVIGATION_ABORTED|ut.NAVIGATION_DUPLICATED)&&!te.delta&&te.type===lp.pop&&s.go(-1,!1)}).catch(Rc),Promise.reject()):(te.delta&&s.go(-te.delta,!1),ie(R,de,$e))).then(R=>{R=R||S(de,$e,!1),R&&(te.delta&&!gr(R,ut.NAVIGATION_CANCELLED)?s.go(-te.delta,!1):te.type===lp.pop&&gr(R,ut.NAVIGATION_ABORTED|ut.NAVIGATION_DUPLICATED)&&s.go(-1,!1)),P(de,$e,R)}).catch(Rc)}))}let Ae=nc(),se=nc(),le;function ie(H,oe,te){Wn(H);const de=se.list();return de.length&&de.forEach(ve=>ve(H,oe,te)),Promise.reject(H)}function xe(){return le&&c.value!==Pn?Promise.resolve():new Promise((H,oe)=>{Ae.add([H,oe])})}function Wn(H){return le||(le=!H,ge(),Ae.list().forEach(([oe,te])=>H?te(H):oe()),Ae.reset()),H}function pn(H,oe,te,de){const{scrollBehavior:ve}=t;if(!go||!ve)return Promise.resolve();const $e=!te&&vV(aI(H.fullPath,0))||(de||!te)&&history.state&&history.state.scroll||null;return ks().then(()=>ve(H,oe,$e)).then(R=>R&&TV(R)).catch(R=>ie(R,H,oe))}const Mt=H=>s.go(H);let dr;const Vn=new Set,xn={currentRoute:c,listening:!0,addRoute:m,removeRoute:I,clearRoutes:e.clearRoutes,hasRoute:k,getRoutes:T,resolve:V,options:t,push:C,replace:x,go:Mt,back:()=>Mt(-1),forward:()=>Mt(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:se.add,isReady:xe,install(H){H.component("RouterLink",YV),H.component("RouterView",Gv),H.config.globalProperties.$router=xn,Object.defineProperty(H.config.globalProperties,"$route",{enumerable:!0,get:()=>me(c)}),go&&!dr&&c.value===Pn&&(dr=!0,C(s.location).catch(de=>{}));const oe={};for(const de in Pn)Object.defineProperty(oe,de,{get:()=>c.value[de],enumerable:!0});H.provide(Kh,xn),H.provide(Pm,er(oe)),H.provide(hp,c);const te=H.unmount;Vn.add(H),H.unmount=function(){Vn.delete(H),Vn.size<1&&(u=Pn,b&&b(),b=null,c.value=Pn,dr=!1,le=!1),te()}}};function Bt(H){return H.reduce((oe,te)=>oe.then(()=>y(te)),Promise.resolve())}return xn}function zj(){return Vt(Kh)}function Kv(t){return Vt(Pm)}const nx=/(:\w+)\([^)]+\)/g,rx=/(:\w+)[?+*]/g,sx=/:\w+/g,ix=(t,e)=>e.path.replace(nx,"$1").replace(rx,"$1").replace(sx,n=>t.params[n.slice(1)]?.toString()||""),dp=(t,e)=>{const n=t.route.matched.find(s=>s.components?.default===t.Component.type),r=e??n?.meta.key??(n&&ix(t.route,n));return typeof r=="function"?r(t.route):r},ox=(t,e)=>({default:()=>t?Wt(t0,t===!0?{}:t,e):e});function Cm(t){return Array.isArray(t)?t:[t]}const ax="modulepreload",cx=function(t,e){return new URL(t,e).href},EI={},vs=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){let u=function(h){return Promise.all(h.map(d=>Promise.resolve(d).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};const o=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),c=a?.nonce||a?.getAttribute("nonce");s=u(n.map(h=>{if(h=cx(h,r),h in EI)return;EI[h]=!0;const d=h.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(r)for(let I=o.length-1;I>=0;I--){const T=o[I];if(T.href===h&&(!d||T.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${h}"]${f}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":ax,d||(m.as="script"),m.crossOrigin="",m.href=h,c&&m.setAttribute("nonce",c),document.head.appendChild(m),d)return new Promise((I,T)=>{m.addEventListener("load",I),m.addEventListener("error",()=>T(new Error(`Unable to preload CSS for ${h}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},hf=[{name:"index",path:"/",component:()=>vs(()=>import("./DFM1gfdC.js"),__vite__mapDeps([0,1]),import.meta.url)},{name:"wiki",path:"/wiki",component:()=>vs(()=>import("./D9iHutTQ.js"),__vite__mapDeps([2,1,3]),import.meta.url)},{name:"wiki-slug",path:"/wiki/:slug(.*)*",component:()=>vs(()=>import("./CwBEJMz7.js"),__vite__mapDeps([4,2,1,3]),import.meta.url)}],Wv=(t,e)=>({default:()=>t?Wt(qo,t===!0?{}:t,e):e.default?.()}),lx=/(:\w+)\([^)]+\)/g,ux=/(:\w+)[?+*]/g,hx=/:\w+/g;function TI(t){const e=t?.meta.key??t.path.replace(lx,"$1").replace(ux,"$1").replace(hx,n=>t.params[n.slice(1)]?.toString()||"");return typeof e=="function"?e(t):e}function dx(t,e){return t===e||e===Pn?!1:TI(t)!==TI(e)?!0:!t.matched.every((r,s)=>r.components&&r.components.default===e.matched[s]?.components?.default)}const fx={scrollBehavior(t,e,n){const r=ze(),s=An().options?.scrollBehaviorType??"auto";if(t.path.replace(/\/$/,"")===e.path.replace(/\/$/,""))return e.hash&&!t.hash?{left:0,top:0}:t.hash?{el:t.hash,top:zv(t.hash),behavior:s}:!1;if((typeof t.meta.scrollToTop=="function"?t.meta.scrollToTop(t,e):t.meta.scrollToTop)===!1)return!1;const o=r._runningTransition?"page:transition:finish":"page:loading:end";return new Promise(a=>{if(e===Pn){a(wI(t,e,n,s));return}r.hooks.hookOnce(o,()=>{requestAnimationFrame(()=>a(wI(t,e,n,s)))})})}};function zv(t){try{const e=document.querySelector(t);if(e)return(Number.parseFloat(getComputedStyle(e).scrollMarginTop)||0)+(Number.parseFloat(getComputedStyle(document.documentElement).scrollPaddingTop)||0)}catch{}return 0}function wI(t,e,n,r){if(n)return n;const s=dx(t,e);return t.hash?{el:t.hash,top:zv(t.hash),behavior:s?r:"instant"}:{left:0,top:0}}const px={hashMode:!1,scrollBehaviorType:"auto"},ss={...px,...fx},mx=async(t,e)=>{let n,r;if(!t.meta?.validate)return;const s=([n,r]=ws(()=>Promise.resolve(t.meta.validate(t))),n=await n,r(),n);if(s===!0)return;const i=Ai({fatal:!0,statusCode:s&&s.statusCode||404,statusMessage:s&&s.statusMessage||`Page Not Found: ${t.fullPath}`,data:{path:t.fullPath}});return typeof window<"u"&&window.history.pushState({},"",e.fullPath),i},gx=async t=>{let e,n;const r=([e,n]=ws(()=>bm({path:t.path})),e=await e,n(),e);if(r.redirect){const s=r.redirect.includes("#")?r.redirect:r.redirect+t.hash;return Gi(s,{acceptRelative:!0})?(window.location.href=s,!1):s}},_x=[mx,gx],fp={};function yx(t,e,n){const{pathname:r,search:s,hash:i}=e,o=t.indexOf("#");if(o>-1){const u=i.includes(t.slice(o))?t.slice(o).length:1;let h=i.slice(u);return h[0]!=="/"&&(h="/"+h),Uy(h,"")}const a=Uy(r,t),c=!n||sN(a,n)?a:n;return c+(c.includes("?")?"":s)+i}const Ix=Dn({name:"nuxt:router",enforce:"pre",async setup(t){let e,n,r=_l().app.baseURL;const s=ss.history?.(r)??xV(r),i=ss.routes?([e,n]=ws(()=>ss.routes(hf)),e=await e,n(),e??hf):hf;let o;const a=tx({...ss,scrollBehavior:(k,V,N)=>{if(V===Pn){o=N;return}if(ss.scrollBehavior){if(a.options.scrollBehavior=ss.scrollBehavior,"scrollRestoration"in window.history){const _=a.beforeEach(()=>{_(),window.history.scrollRestoration="manual"})}return ss.scrollBehavior(k,Pn,o||N)}},history:s,routes:i});"scrollRestoration"in window.history&&(window.history.scrollRestoration="auto"),t.vueApp.use(a);const c=Mo(a.currentRoute.value);a.afterEach((k,V)=>{c.value=V}),Object.defineProperty(t.vueApp.config.globalProperties,"previousRoute",{get:()=>c.value});const u=yx(r,window.location,t.payload.path),h=Mo(a.currentRoute.value),d=()=>{h.value=a.currentRoute.value};a.afterEach((k,V)=>{k.matched.at(-1)?.components?.default===V.matched.at(-1)?.components?.default&&d()});const f={sync:d};for(const k in h.value)Object.defineProperty(f,k,{get:()=>h.value[k],enumerable:!0});t._route=er(f),t._middleware||(t._middleware={global:[],named:{}});const m=Hh();a.afterEach(async(k,V,N)=>{delete t._processingMiddleware,!t.isHydrating&&m.value&&await t.runWithContext(eD),N&&await t.callHook("page:loading:end")});try{[e,n]=ws(()=>a.isReady()),await e,n()}catch(k){[e,n]=ws(()=>t.runWithContext(()=>li(k))),await e,n()}const I=u!==a.currentRoute.value.fullPath?a.resolve(u):a.currentRoute.value;d();const T=t.payload.state._layout;return a.beforeEach(async(k,V)=>{await t.callHook("page:loading:start"),k.meta=jr(k.meta),t.isHydrating&&T&&!lr(k.meta.layout)&&(k.meta.layout=T),t._processingMiddleware=!0;{const N=new Set([..._x,...t._middleware.global]);for(const _ of k.matched){const C=_.meta.middleware;if(C)for(const x of Cm(C))N.add(x)}{const _=await t.runWithContext(()=>bm({path:k.path}));if(_.appMiddleware)for(const C in _.appMiddleware)_.appMiddleware[C]?N.add(C):N.delete(C)}for(const _ of N){const C=typeof _=="string"?t._middleware.named[_]||await fp[_]?.().then(x=>x.default||x):_;if(!C)throw new Error(`Unknown route middleware: '${_}'.`);try{const x=await t.runWithContext(()=>C(k,V));if(!t.payload.serverRendered&&t.isHydrating&&(x===!1||x instanceof Error)){const U=x||Ai({statusCode:404,statusMessage:`Page Not Found: ${u}`});return await t.runWithContext(()=>li(U)),!1}if(x===!0)continue;if(x===!1)return x;if(x)return Tv(x)&&x.fatal&&await t.runWithContext(()=>li(x)),x}catch(x){const U=Ai(x);return U.fatal&&await t.runWithContext(()=>li(U)),U}}}}),a.onError(async()=>{delete t._processingMiddleware,await t.callHook("page:loading:end")}),a.afterEach(k=>{if(k.matched.length===0)return t.runWithContext(()=>li(Ai({statusCode:404,fatal:!1,statusMessage:`Page not found: ${k.fullPath}`,data:{path:k.fullPath}})))}),t.hooks.hookOnce("app:created",async()=>{try{"name"in I&&(I.name=void 0),await a.replace({...I,force:!0}),a.options.scrollBehavior=ss.scrollBehavior}catch(k){await t.runWithContext(()=>li(k))}}),{provide:{router:a}}}}),vI=globalThis.requestIdleCallback||(t=>{const e=Date.now(),n={didTimeout:!1,timeRemaining:()=>Math.max(0,50-(Date.now()-e))};return setTimeout(()=>{t(n)},1)}),Qj=globalThis.cancelIdleCallback||(t=>{clearTimeout(t)}),km=t=>{const e=ze();e.isHydrating?e.hooks.hookOnce("app:suspense:resolve",()=>{vI(()=>t())}):vI(()=>t())},Ex=Dn({name:"nuxt:payload",setup(t){const e=new Set;An().beforeResolve(async(n,r)=>{if(n.path===r.path)return;const s=await rI(n.path);if(s){for(const i of e)delete t.static.data[i];for(const i in s.data)i in t.static.data||e.add(i),t.static.data[i]=s.data[i]}}),km(()=>{t.hooks.hook("link:prefetch",async n=>{const{hostname:r}=new URL(n,window.location.href);r===window.location.hostname&&await rI(n).catch(()=>{})}),navigator.connection?.effectiveType!=="slow-2g"&&setTimeout($h,1e3)})}}),Tx=Dn(()=>{const t=An();km(()=>{t.beforeResolve(async()=>{await new Promise(e=>{setTimeout(e,100),requestAnimationFrame(()=>{setTimeout(e,0)})})})})}),wx=Dn(t=>{let e;async function n(){let r;try{r=await $h()}catch(s){const i=s;if(!("status"in i&&(i.status===404||i.status===403)))throw i}e&&clearTimeout(e),e=setTimeout(n,Ky);try{const s=await $fetch(Am("builds/latest.json")+`?${Date.now()}`);s.id!==r?.id&&(t.hooks.callHook("app:manifest:update",s),e&&clearTimeout(e))}catch{}}km(()=>{e=setTimeout(n,Ky)})});function vx(t={}){const e=t.path||window.location.pathname;let n={};try{n=Yu(sessionStorage.getItem("nuxt:reload")||"{}")}catch{}if(t.force||n?.path!==e||n?.expires<Date.now()){try{sessionStorage.setItem("nuxt:reload",JSON.stringify({path:e,expires:Date.now()+(t.ttl??1e4)}))}catch{}if(t.persistState)try{sessionStorage.setItem("nuxt:reload:state",JSON.stringify({state:ze().payload.state}))}catch{}window.location.pathname!==e?window.location.href=e:window.location.reload()}}const Ax=Dn({name:"nuxt:chunk-reload",setup(t){const e=An(),n=_l(),r=new Set;e.beforeEach(()=>{r.clear()}),t.hook("app:chunkError",({error:i})=>{r.add(i)});function s(i){const o=wm(n.app.baseURL,i.fullPath);vx({path:o,persistState:!0})}t.hook("app:manifest:update",()=>{e.beforeResolve(s)}),e.onError((i,o)=>{r.has(i)&&s(o)})}});function bx(t){if(t?.__asyncLoader&&!t.__asyncResolved)return t.__asyncLoader()}async function Rx(t,e=An()){const{path:n,matched:r}=e.resolve(t);if(!r.length||(e._routePreloaded||(e._routePreloaded=new Set),e._routePreloaded.has(n)))return;const s=e._preloadPromises||(e._preloadPromises=[]);if(s.length>4)return Promise.all(s).then(()=>Rx(t,e));e._routePreloaded.add(n);for(const i of r){const o=i.components?.default;if(typeof o!="function")continue;const a=Promise.resolve(o()).catch(()=>{}).finally(()=>s.splice(s.indexOf(a)));s.push(a)}await Promise.all(s)}const Sx=Dn({name:"pinia",setup(t){const e=tD();return t.vueApp.use(e),$o(e),t.payload&&t.payload.pinia&&(e.state.value=t.payload.pinia),{provide:{pinia:e}}},hooks:{"app:rendered"(){const t=ze();t.payload.pinia=Ne(t.$pinia).state.value,$o(void 0)}}}),Px=Dn({name:"nuxt:global-components"}),gs={},Cx=Dn({name:"nuxt:prefetch",setup(t){const e=An();t.hooks.hook("app:mounted",()=>{e.beforeEach(async n=>{const r=n?.meta?.layout;r&&typeof gs[r]=="function"&&await gs[r]()})}),t.hooks.hook("link:prefetch",n=>{if(Gi(n))return;const r=e.resolve(n);if(!r)return;const s=r.meta.layout;let i=Cm(r.meta.middleware);i=i.filter(o=>typeof o=="string");for(const o of i)typeof fp[o]=="function"&&fp[o]();typeof s=="string"&&s in gs&&bx(gs[s])})}});let df,AI,au;const kx=Dn(async t=>{let e,n;const r=_l(),s={apiKey:r.public.firebaseApiKey,authDomain:r.public.firebaseAuthDomain,projectId:r.public.firebaseProjectId,storageBucket:r.public.firebaseStorageBucket,messagingSenderId:r.public.firebaseMessagingSenderId,appId:r.public.firebaseAppId},[{initializeApp:i},{getAuth:o,browserSessionPersistence:a,setPersistence:c},{getFirestore:u}]=([e,n]=ws(()=>Promise.all([vs(()=>import("./DJKi_S9w.js"),[],import.meta.url),vs(()=>Promise.resolve().then(()=>jF),void 0,import.meta.url),vs(()=>Promise.resolve().then(()=>G6),void 0,import.meta.url)])),e=await e,n(),e);return au=i(s),df=o(au),[e,n]=ws(()=>c(df,a)),await e,n(),AI=u(au),{provide:{auth:df,db:AI,firebaseApp:au}}}),Nx=[HD,GD,JD,Ix,Ex,Tx,wx,Ax,Sx,Px,Cx,kx];function cu(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}var Dx={read:function(t){return t[0]==='"'&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(t){return encodeURIComponent(t).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function pp(t,e){function n(s,i,o){if(!(typeof document>"u")){o=cu({},e,o),typeof o.expires=="number"&&(o.expires=new Date(Date.now()+o.expires*864e5)),o.expires&&(o.expires=o.expires.toUTCString()),s=encodeURIComponent(s).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var a="";for(var c in o)o[c]&&(a+="; "+c,o[c]!==!0&&(a+="="+o[c].split(";")[0]));return document.cookie=s+"="+t.write(i,s)+a}}function r(s){if(!(typeof document>"u"||arguments.length&&!s)){for(var i=document.cookie?document.cookie.split("; "):[],o={},a=0;a<i.length;a++){var c=i[a].split("="),u=c.slice(1).join("=");try{var h=decodeURIComponent(c[0]);if(o[h]=t.read(u,h),s===h)break}catch{}}return s?o[s]:o}}return Object.create({set:n,get:r,remove:function(s,i){n(s,"",cu({},i,{expires:-1}))},withAttributes:function(s){return pp(this.converter,cu({},this.attributes,s))},withConverter:function(s){return pp(cu({},this.converter,s),this.attributes)}},{attributes:{value:Object.freeze(e)},converter:{value:Object.freeze(t)}})}var Yt=pp(Dx,{path:"/"});const Vx=()=>{};var bI={};const Qv=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},xx=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Jv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,c=s+2<t.length,u=c?t[s+2]:0,h=i>>2,d=(i&3)<<4|a>>4;let f=(a&15)<<2|u>>6,m=u&63;c||(m=64,o||(f=64)),r.push(n[h],n[d],n[f],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Qv(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):xx(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const d=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||u==null||d==null)throw new Ox;const f=i<<2|a>>4;if(r.push(f),u!==64){const m=a<<4&240|u>>2;if(r.push(m),d!==64){const I=u<<6&192|d;r.push(I)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Ox extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Lx=function(t){const e=Qv(t);return Jv.encodeByteArray(e,!0)},rh=function(t){return Lx(t).replace(/\./g,"")},Nm=function(t){try{return Jv.decodeString(t,!0)}catch{}return null};function Yv(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const Mx=()=>Yv().__FIREBASE_DEFAULTS__,Fx=()=>{if(typeof process>"u"||typeof bI>"u")return;const t=bI.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Ux=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Nm(t[1]);return e&&JSON.parse(e)},Wh=()=>{try{return Vx()||Mx()||Fx()||Ux()}catch{return}},Xv=t=>Wh()?.emulatorHosts?.[t],Bx=t=>{const e=Xv(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Dm=()=>Wh()?.config,Zv=t=>Wh()?.[`_${t}`];class jx{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}function Ki(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Vm(t){return(await fetch(t,{credentials:"include"})).ok}function qx(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[rh(JSON.stringify(n)),rh(JSON.stringify(o)),""].join(".")}const Sc={};function Hx(){const t={prod:[],emulator:[]};for(const e of Object.keys(Sc))Sc[e]?t.emulator.push(e):t.prod.push(e);return t}function $x(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let RI=!1;function eA(t,e){if(typeof window>"u"||typeof document>"u"||!Ki(window.location.host)||Sc[t]===e||Sc[t]||RI)return;Sc[t]=e;function n(f){return`__firebase__banner__${f}`}const r="__firebase__banner",i=Hx().prod.length>0;function o(){const f=document.getElementById(r);f&&f.remove()}function a(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function c(f,m){f.setAttribute("width","24"),f.setAttribute("id",m),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function u(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{RI=!0,o()},f}function h(f,m){f.setAttribute("id",m),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function d(){const f=$x(r),m=n("text"),I=document.getElementById(m)||document.createElement("span"),T=n("learnmore"),k=document.getElementById(T)||document.createElement("a"),V=n("preprendIcon"),N=document.getElementById(V)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const _=f.element;a(_),h(k,T);const C=u();c(N,V),_.append(N,I,k,C),document.body.appendChild(_)}i?(I.innerText="Preview backend disconnected.",N.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(N.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,I.innerText="Preview backend running in this workspace."),I.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}function Rt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Gx(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Rt())}function tA(){const t=Wh()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Kx(){return typeof window<"u"||nA()}function nA(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Wx(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function zx(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Qx(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Jx(){const t=Rt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function rA(){return!tA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function sA(){return!tA()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function iA(){try{return typeof indexedDB=="object"}catch{return!1}}function Yx(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{e(s.error?.message||"")}}catch(n){e(n)}})}const Xx="FirebaseError";class Hr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Xx,Object.setPrototypeOf(this,Hr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,yl.prototype.create)}}class yl{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?Zx(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Hr(s,a,r)}}function Zx(t,e){return t.replace(eO,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const eO=/\{\$([^}]+)}/g;function tO(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Kn(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(SI(i)&&SI(o)){if(!Kn(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function SI(t){return t!==null&&typeof t=="object"}function Ia(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function dc(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function fc(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function nO(t,e){const n=new rO(t,e);return n.subscribe.bind(n)}class rO{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");sO(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=ff),s.error===void 0&&(s.error=ff),s.complete===void 0&&(s.complete=ff);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch{}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function sO(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function ff(){}function ue(t){return t&&t._delegate?t._delegate:t}class Vi{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const ui="[DEFAULT]";class iO{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new jx;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(aO(e))try{this.getOrInitializeService({instanceIdentifier:ui})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=ui){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ui){return this.instances.has(e)}getOptions(e=ui){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:oO(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ui){return this.component?this.component.multipleInstances?e:ui:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function oO(t){return t===ui?void 0:t}function aO(t){return t.instantiationMode==="EAGER"}class oA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new iO(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}const xm=[];var Pe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Pe||(Pe={}));const aA={debug:Pe.DEBUG,verbose:Pe.VERBOSE,info:Pe.INFO,warn:Pe.WARN,error:Pe.ERROR,silent:Pe.SILENT},cO=Pe.INFO,lO={[Pe.DEBUG]:"log",[Pe.VERBOSE]:"log",[Pe.INFO]:"info",[Pe.WARN]:"warn",[Pe.ERROR]:"error"},uO=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=lO[e];if(!s)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Om{constructor(e){this.name=e,this._logLevel=cO,this._logHandler=uO,this._userLogHandler=null,xm.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?aA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Pe.DEBUG,...e),this._logHandler(this,Pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Pe.VERBOSE,...e),this._logHandler(this,Pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Pe.INFO,...e),this._logHandler(this,Pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Pe.WARN,...e),this._logHandler(this,Pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Pe.ERROR,...e),this._logHandler(this,Pe.ERROR,...e)}}function hO(t){xm.forEach(e=>{e.setLogLevel(t)})}function dO(t,e){for(const n of xm){let r=null;e&&e.level&&(r=aA[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(s,i,...o)=>{const a=o.map(c=>{if(c==null)return null;if(typeof c=="string")return c;if(typeof c=="number"||typeof c=="boolean")return c.toString();if(c instanceof Error)return c.message;try{return JSON.stringify(c)}catch{return null}}).filter(c=>c).join(" ");i>=(r??s.logLevel)&&t({level:Pe[i].toLowerCase(),message:a,args:o,type:s.name})}}}const fO=(t,e)=>e.some(n=>t instanceof n);let PI,CI;function pO(){return PI||(PI=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function mO(){return CI||(CI=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const cA=new WeakMap,mp=new WeakMap,lA=new WeakMap,pf=new WeakMap,Lm=new WeakMap;function gO(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(As(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&cA.set(n,t)}).catch(()=>{}),Lm.set(e,t),e}function _O(t){if(mp.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});mp.set(t,e)}let gp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return mp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||lA.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return As(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function yO(t){gp=t(gp)}function IO(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(mf(this),e,...n);return lA.set(r,e.sort?e.sort():[e]),As(r)}:mO().includes(t)?function(...e){return t.apply(mf(this),e),As(cA.get(this))}:function(...e){return As(t.apply(mf(this),e))}}function EO(t){return typeof t=="function"?IO(t):(t instanceof IDBTransaction&&_O(t),fO(t,pO())?new Proxy(t,gp):t)}function As(t){if(t instanceof IDBRequest)return gO(t);if(pf.has(t))return pf.get(t);const e=EO(t);return e!==t&&(pf.set(t,e),Lm.set(e,t)),e}const mf=t=>Lm.get(t);function TO(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=As(o);return r&&o.addEventListener("upgradeneeded",c=>{r(As(o.result),c.oldVersion,c.newVersion,As(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const wO=["get","getKey","getAll","getAllKeys","count"],vO=["put","add","delete","clear"],gf=new Map;function kI(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(gf.get(e))return gf.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=vO.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||wO.includes(n)))return;const i=async function(o,...a){const c=this.transaction(o,s?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),s&&c.done]))[0]};return gf.set(e,i),i}yO(t=>({...t,get:(e,n,r)=>kI(e,n)||t.get(e,n,r),has:(e,n)=>!!kI(e,n)||t.has(e,n)}));class AO{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(bO(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function bO(t){return t.getComponent()?.type==="VERSION"}const sh="@firebase/app",_p="0.14.7";const Or=new Om("@firebase/app"),RO="@firebase/app-compat",SO="@firebase/analytics-compat",PO="@firebase/analytics",CO="@firebase/app-check-compat",kO="@firebase/app-check",NO="@firebase/auth",DO="@firebase/auth-compat",VO="@firebase/database",xO="@firebase/data-connect",OO="@firebase/database-compat",LO="@firebase/functions",MO="@firebase/functions-compat",FO="@firebase/installations",UO="@firebase/installations-compat",BO="@firebase/messaging",jO="@firebase/messaging-compat",qO="@firebase/performance",HO="@firebase/performance-compat",$O="@firebase/remote-config",GO="@firebase/remote-config-compat",KO="@firebase/storage",WO="@firebase/storage-compat",zO="@firebase/firestore",QO="@firebase/ai",JO="@firebase/firestore-compat",YO="firebase",XO="12.8.0";const ih="[DEFAULT]",ZO={[sh]:"fire-core",[RO]:"fire-core-compat",[PO]:"fire-analytics",[SO]:"fire-analytics-compat",[kO]:"fire-app-check",[CO]:"fire-app-check-compat",[NO]:"fire-auth",[DO]:"fire-auth-compat",[VO]:"fire-rtdb",[xO]:"fire-data-connect",[OO]:"fire-rtdb-compat",[LO]:"fire-fn",[MO]:"fire-fn-compat",[FO]:"fire-iid",[UO]:"fire-iid-compat",[BO]:"fire-fcm",[jO]:"fire-fcm-compat",[qO]:"fire-perf",[HO]:"fire-perf-compat",[$O]:"fire-rc",[GO]:"fire-rc-compat",[KO]:"fire-gcs",[WO]:"fire-gcs-compat",[zO]:"fire-fst",[JO]:"fire-fst-compat",[QO]:"fire-vertex","fire-js":"fire-js",[YO]:"fire-js-all"};const xi=new Map,zc=new Map,Qc=new Map;function NI(t,e){try{t.container.addComponent(e)}catch(n){Or.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Jj(t,e){t.container.addOrOverwriteComponent(e)}function Wo(t){const e=t.name;if(Qc.has(e))return Or.debug(`There were multiple attempts to register component ${e}.`),!1;Qc.set(e,t);for(const n of xi.values())NI(n,t);for(const n of zc.values())NI(n,t);return!0}function Il(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function e1(t,e,n=ih){Il(t,e).clearInstance(n)}function uA(t){return t.options!==void 0}function t1(t){return uA(t)?!1:"authIdToken"in t||"appCheckToken"in t||"releaseOnDeref"in t||"automaticDataCollectionEnabled"in t}function at(t){return t==null?!1:t.settings!==void 0}function Yj(){Qc.clear()}const n1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},wn=new yl("app","Firebase",n1);class hA{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Vi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw wn.create("app-deleted",{appName:this._name})}}function DI(t,e){const n=Nm(t.split(".")[1]);if(n===null||JSON.parse(n).exp===void 0)return;const s=JSON.parse(n).exp*1e3,i=new Date().getTime();s-i<=0}class r1 extends hA{constructor(e,n,r,s){const i=n.automaticDataCollectionEnabled!==void 0?n.automaticDataCollectionEnabled:!0,o={name:r,automaticDataCollectionEnabled:i};if(e.apiKey!==void 0)super(e,o,s);else{const a=e;super(a.options,o,s)}this._serverConfig={automaticDataCollectionEnabled:i,...n},this._serverConfig.authIdToken&&DI(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&DI(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,n.releaseOnDeref=void 0,bs(sh,_p,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){i1(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw wn.create("server-app-deleted")}}const Ea=XO;function s1(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:ih,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw wn.create("bad-app-name",{appName:String(s)});if(n||(n=Dm()),!n)throw wn.create("no-options");const i=xi.get(s);if(i){if(Kn(n,i.options)&&Kn(r,i.config))return i;throw wn.create("duplicate-app",{appName:s})}const o=new oA(s);for(const c of Qc.values())o.addComponent(c);const a=new hA(n,r,o);return xi.set(s,a),a}function Xj(t,e={}){if(Kx()&&!nA())throw wn.create("invalid-server-app-environment");let n,r=e||{};if(t&&(uA(t)?n=t.options:t1(t)?r=t:n=t),r.automaticDataCollectionEnabled===void 0&&(r.automaticDataCollectionEnabled=!0),n||(n=Dm()),!n)throw wn.create("no-options");const s={...r,...n};s.releaseOnDeref!==void 0&&delete s.releaseOnDeref;const i=h=>[...h].reduce((d,f)=>Math.imul(31,d)+f.charCodeAt(0)|0,0);if(r.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw wn.create("finalization-registry-not-supported",{});const o=""+i(JSON.stringify(s)),a=zc.get(o);if(a)return a.incRefCount(r.releaseOnDeref),a;const c=new oA(o);for(const h of Qc.values())c.addComponent(h);const u=new r1(n,r,o,c);return zc.set(o,u),u}function dA(t=ih){const e=xi.get(t);if(!e&&t===ih&&Dm())return s1();if(!e)throw wn.create("no-app",{appName:t});return e}function Zj(){return Array.from(xi.values())}async function i1(t){let e=!1;const n=t.name;xi.has(n)?(e=!0,xi.delete(n)):zc.has(n)&&t.decRefCount()<=0&&(zc.delete(n),e=!0),e&&(await Promise.all(t.container.getProviders().map(r=>r.delete())),t.isDeleted=!0)}function bs(t,e,n){let r=ZO[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Or.warn(o.join(" "));return}Wo(new Vi(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}function eq(t,e){if(t!==null&&typeof t!="function")throw wn.create("invalid-log-argument");dO(t,e)}function tq(t){hO(t)}const o1="firebase-heartbeat-database",a1=1,Jc="firebase-heartbeat-store";let _f=null;function fA(){return _f||(_f=TO(o1,a1,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Jc)}catch{}}}}).catch(t=>{throw wn.create("idb-open",{originalErrorMessage:t.message})})),_f}async function c1(t){try{const n=(await fA()).transaction(Jc),r=await n.objectStore(Jc).get(pA(t));return await n.done,r}catch(e){if(e instanceof Hr)Or.warn(e.message);else{const n=wn.create("idb-get",{originalErrorMessage:e?.message});Or.warn(n.message)}}}async function VI(t,e){try{const r=(await fA()).transaction(Jc,"readwrite");await r.objectStore(Jc).put(e,pA(t)),await r.done}catch(n){if(n instanceof Hr)Or.warn(n.message);else{const r=wn.create("idb-set",{originalErrorMessage:n?.message});Or.warn(r.message)}}}function pA(t){return`${t.name}!${t.options.appId}`}const l1=1024,u1=30;class h1{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new f1(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=xI();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>u1){const s=p1(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Or.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=xI(),{heartbeatsToSend:n,unsentEntries:r}=d1(this._heartbeatsCache.heartbeats),s=rh(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return Or.warn(e),""}}}function xI(){return new Date().toISOString().substring(0,10)}function d1(t,e=l1){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),OI(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),OI(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class f1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return iA()?Yx().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await c1(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return VI(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return VI(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function OI(t){return rh(JSON.stringify({version:2,heartbeats:t})).length}function p1(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function m1(t){Wo(new Vi("platform-logger",e=>new AO(e),"PRIVATE")),Wo(new Vi("heartbeat",e=>new h1(e),"PRIVATE")),bs(sh,_p,t),bs(sh,_p,"esm2020"),bs("fire-js","")}m1("");const g1={PHONE:"phone",TOTP:"totp"},_1={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},y1={EMAIL_LINK:"emailLink",EMAIL_PASSWORD:"password",FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PHONE:"phone",TWITTER:"twitter.com"},I1={LINK:"link",REAUTHENTICATE:"reauthenticate",SIGN_IN:"signIn"},E1={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};function T1(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements.","invalid-hosting-link-domain":"The provided Hosting link domain is not configured in Firebase Hosting or is not owned by the current project. This cannot be a default Hosting domain (`web.app` or `firebaseapp.com`)."}}function mA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const w1=T1,gA=mA,_A=new yl("auth","Firebase",mA()),v1={ADMIN_ONLY_OPERATION:"auth/admin-restricted-operation",ARGUMENT_ERROR:"auth/argument-error",APP_NOT_AUTHORIZED:"auth/app-not-authorized",APP_NOT_INSTALLED:"auth/app-not-installed",CAPTCHA_CHECK_FAILED:"auth/captcha-check-failed",CODE_EXPIRED:"auth/code-expired",CORDOVA_NOT_READY:"auth/cordova-not-ready",CORS_UNSUPPORTED:"auth/cors-unsupported",CREDENTIAL_ALREADY_IN_USE:"auth/credential-already-in-use",CREDENTIAL_MISMATCH:"auth/custom-token-mismatch",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"auth/requires-recent-login",DEPENDENT_SDK_INIT_BEFORE_AUTH:"auth/dependent-sdk-initialized-before-auth",DYNAMIC_LINK_NOT_ACTIVATED:"auth/dynamic-link-not-activated",EMAIL_CHANGE_NEEDS_VERIFICATION:"auth/email-change-needs-verification",EMAIL_EXISTS:"auth/email-already-in-use",EMULATOR_CONFIG_FAILED:"auth/emulator-config-failed",EXPIRED_OOB_CODE:"auth/expired-action-code",EXPIRED_POPUP_REQUEST:"auth/cancelled-popup-request",INTERNAL_ERROR:"auth/internal-error",INVALID_API_KEY:"auth/invalid-api-key",INVALID_APP_CREDENTIAL:"auth/invalid-app-credential",INVALID_APP_ID:"auth/invalid-app-id",INVALID_AUTH:"auth/invalid-user-token",INVALID_AUTH_EVENT:"auth/invalid-auth-event",INVALID_CERT_HASH:"auth/invalid-cert-hash",INVALID_CODE:"auth/invalid-verification-code",INVALID_CONTINUE_URI:"auth/invalid-continue-uri",INVALID_CORDOVA_CONFIGURATION:"auth/invalid-cordova-configuration",INVALID_CUSTOM_TOKEN:"auth/invalid-custom-token",INVALID_DYNAMIC_LINK_DOMAIN:"auth/invalid-dynamic-link-domain",INVALID_EMAIL:"auth/invalid-email",INVALID_EMULATOR_SCHEME:"auth/invalid-emulator-scheme",INVALID_IDP_RESPONSE:"auth/invalid-credential",INVALID_LOGIN_CREDENTIALS:"auth/invalid-credential",INVALID_MESSAGE_PAYLOAD:"auth/invalid-message-payload",INVALID_MFA_SESSION:"auth/invalid-multi-factor-session",INVALID_OAUTH_CLIENT_ID:"auth/invalid-oauth-client-id",INVALID_OAUTH_PROVIDER:"auth/invalid-oauth-provider",INVALID_OOB_CODE:"auth/invalid-action-code",INVALID_ORIGIN:"auth/unauthorized-domain",INVALID_PASSWORD:"auth/wrong-password",INVALID_PERSISTENCE:"auth/invalid-persistence-type",INVALID_PHONE_NUMBER:"auth/invalid-phone-number",INVALID_PROVIDER_ID:"auth/invalid-provider-id",INVALID_RECIPIENT_EMAIL:"auth/invalid-recipient-email",INVALID_SENDER:"auth/invalid-sender",INVALID_SESSION_INFO:"auth/invalid-verification-id",INVALID_TENANT_ID:"auth/invalid-tenant-id",MFA_INFO_NOT_FOUND:"auth/multi-factor-info-not-found",MFA_REQUIRED:"auth/multi-factor-auth-required",MISSING_ANDROID_PACKAGE_NAME:"auth/missing-android-pkg-name",MISSING_APP_CREDENTIAL:"auth/missing-app-credential",MISSING_AUTH_DOMAIN:"auth/auth-domain-config-required",MISSING_CODE:"auth/missing-verification-code",MISSING_CONTINUE_URI:"auth/missing-continue-uri",MISSING_IFRAME_START:"auth/missing-iframe-start",MISSING_IOS_BUNDLE_ID:"auth/missing-ios-bundle-id",MISSING_OR_INVALID_NONCE:"auth/missing-or-invalid-nonce",MISSING_MFA_INFO:"auth/missing-multi-factor-info",MISSING_MFA_SESSION:"auth/missing-multi-factor-session",MISSING_PHONE_NUMBER:"auth/missing-phone-number",MISSING_PASSWORD:"auth/missing-password",MISSING_SESSION_INFO:"auth/missing-verification-id",MODULE_DESTROYED:"auth/app-deleted",NEED_CONFIRMATION:"auth/account-exists-with-different-credential",NETWORK_REQUEST_FAILED:"auth/network-request-failed",NULL_USER:"auth/null-user",NO_AUTH_EVENT:"auth/no-auth-event",NO_SUCH_PROVIDER:"auth/no-such-provider",OPERATION_NOT_ALLOWED:"auth/operation-not-allowed",OPERATION_NOT_SUPPORTED:"auth/operation-not-supported-in-this-environment",POPUP_BLOCKED:"auth/popup-blocked",POPUP_CLOSED_BY_USER:"auth/popup-closed-by-user",PROVIDER_ALREADY_LINKED:"auth/provider-already-linked",QUOTA_EXCEEDED:"auth/quota-exceeded",REDIRECT_CANCELLED_BY_USER:"auth/redirect-cancelled-by-user",REDIRECT_OPERATION_PENDING:"auth/redirect-operation-pending",REJECTED_CREDENTIAL:"auth/rejected-credential",SECOND_FACTOR_ALREADY_ENROLLED:"auth/second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"auth/maximum-second-factor-count-exceeded",TENANT_ID_MISMATCH:"auth/tenant-id-mismatch",TIMEOUT:"auth/timeout",TOKEN_EXPIRED:"auth/user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"auth/too-many-requests",UNAUTHORIZED_DOMAIN:"auth/unauthorized-continue-uri",UNSUPPORTED_FIRST_FACTOR:"auth/unsupported-first-factor",UNSUPPORTED_PERSISTENCE:"auth/unsupported-persistence-type",UNSUPPORTED_TENANT_OPERATION:"auth/unsupported-tenant-operation",UNVERIFIED_EMAIL:"auth/unverified-email",USER_CANCELLED:"auth/user-cancelled",USER_DELETED:"auth/user-not-found",USER_DISABLED:"auth/user-disabled",USER_MISMATCH:"auth/user-mismatch",USER_SIGNED_OUT:"auth/user-signed-out",WEAK_PASSWORD:"auth/weak-password",WEB_STORAGE_UNSUPPORTED:"auth/web-storage-unsupported",ALREADY_INITIALIZED:"auth/already-initialized",RECAPTCHA_NOT_ENABLED:"auth/recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"auth/missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"auth/invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"auth/invalid-recaptcha-action",MISSING_CLIENT_TYPE:"auth/missing-client-type",MISSING_RECAPTCHA_VERSION:"auth/missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"auth/invalid-recaptcha-version",INVALID_REQ_TYPE:"auth/invalid-req-type",INVALID_HOSTING_LINK_DOMAIN:"auth/invalid-hosting-link-domain"};const oh=new Om("@firebase/auth");function A1(t,...e){oh.logLevel<=Pe.WARN&&oh.warn(`Auth (${Ea}): ${t}`,...e)}function Au(t,...e){oh.logLevel<=Pe.ERROR&&oh.error(`Auth (${Ea}): ${t}`,...e)}function fn(t,...e){throw Fm(t,...e)}function tn(t,...e){return Fm(t,...e)}function Mm(t,e,n){const r={...gA(),[e]:n};return new yl("auth","Firebase",r).create(e,{appName:t.name})}function xt(t){return Mm(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ta(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&fn(t,"argument-error"),Mm(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Fm(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return _A.create(t,...e)}function Q(t,e,...n){if(!t)throw Fm(e,...n)}function tr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Au(e),new Error(e)}function Lr(t,e){t||tr(e)}function Yc(){return typeof self<"u"&&self.location?.href||""}function Um(){return LI()==="http:"||LI()==="https:"}function LI(){return typeof self<"u"&&self.location?.protocol||null}function b1(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Um()||zx()||"connection"in navigator)?navigator.onLine:!0}function R1(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}class El{constructor(e,n){this.shortDelay=e,this.longDelay=n,Lr(n>e,"Short delay should be less than long delay!"),this.isMobile=Gx()||Qx()}get(){return b1()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Bm(t,e){Lr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class yA{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;tr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;tr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;tr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const S1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const P1=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],C1=new El(3e4,6e4);function tt(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function nt(t,e,n,r,s={}){return IA(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=Ia({key:t.config.apiKey,...o}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:c,...i};return Wx()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&Ki(t.emulatorConfig.host)&&(u.credentials="include"),yA.fetch()(await EA(t,t.config.apiHost,n,a),u)})}async function IA(t,e,n){t._canInitEmulator=!1;const r={...S1,...e};try{const s=new N1(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw pc(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[c,u]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw pc(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw pc(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw pc(t,"user-disabled",o);const h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Mm(t,h,u);fn(t,h)}}catch(s){if(s instanceof Hr)throw s;fn(t,"network-request-failed",{message:String(s)})}}async function $r(t,e,n,r,s={}){const i=await nt(t,e,n,r,s);return"mfaPendingCredential"in i&&fn(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function EA(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?Bm(t.config,s):`${t.config.apiScheme}://${s}`;return P1.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function k1(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class N1{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(tn(this.auth,"network-request-failed")),C1.get())})}}function pc(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=tn(t,e,r);return s.customData._tokenResponse=n,s}function MI(t){return t!==void 0&&t.getResponse!==void 0}function FI(t){return t!==void 0&&t.enterprise!==void 0}class TA{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return k1(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function D1(t){return(await nt(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function wA(t,e){return nt(t,"GET","/v2/recaptchaConfig",tt(t,e))}async function V1(t,e){return nt(t,"POST","/v1/accounts:delete",e)}async function x1(t,e){return nt(t,"POST","/v1/accounts:update",e)}async function ah(t,e){return nt(t,"POST","/v1/accounts:lookup",e)}function Pc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function O1(t,e=!1){return ue(t).getIdToken(e)}async function vA(t,e=!1){const n=ue(t),r=await n.getIdToken(e),s=zh(r);Q(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i?.sign_in_provider;return{claims:s,token:r,authTime:Pc(yf(s.auth_time)),issuedAtTime:Pc(yf(s.iat)),expirationTime:Pc(yf(s.exp)),signInProvider:o||null,signInSecondFactor:i?.sign_in_second_factor||null}}function yf(t){return Number(t)*1e3}function zh(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Au("JWT malformed, contained fewer than 3 sections"),null;try{const s=Nm(n);return s?JSON.parse(s):(Au("Failed to decode base64 JWT payload"),null)}catch(s){return Au("Caught error parsing JWT payload as JSON",s?.toString()),null}}function UI(t){const e=zh(t);return Q(e,"internal-error"),Q(typeof e.exp<"u","internal-error"),Q(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Mr(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Hr&&L1(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function L1({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}class M1{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class yp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Pc(this.lastLoginAt),this.creationTime=Pc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Xc(t){const e=t.auth,n=await t.getIdToken(),r=await Mr(t,ah(e,{idToken:n}));Q(r?.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=s.providerUserInfo?.length?bA(s.providerUserInfo):[],o=F1(t.providerData,i),a=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!o?.length,u=a?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new yp(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function AA(t){const e=ue(t);await Xc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function F1(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function bA(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function U1(t,e){const n=await IA(t,{},async()=>{const r=Ia({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await EA(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:a,body:r};return t.emulatorConfig&&Ki(t.emulatorConfig.host)&&(c.credentials="include"),yA.fetch()(o,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function B1(t,e){return nt(t,"POST","/v2/accounts:revokeToken",tt(t,e))}class ko{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Q(e.idToken,"internal-error"),Q(typeof e.idToken<"u","internal-error"),Q(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):UI(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Q(e.length!==0,"internal-error");const n=UI(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Q(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await U1(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new ko;return r&&(Q(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(Q(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(Q(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ko,this.toJSON())}_performRefresh(){return tr("not implemented")}}function is(t,e){Q(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Un{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new M1(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new yp(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Mr(this,this.stsTokenManager.getToken(this.auth,e));return Q(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return vA(this,e)}reload(){return AA(this)}_assign(e){this!==e&&(Q(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Un({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Q(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Xc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(at(this.auth.app))return Promise.reject(xt(this.auth));const e=await this.getIdToken();return await Mr(this,V1(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,c=n._redirectEventId??void 0,u=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:d,emailVerified:f,isAnonymous:m,providerData:I,stsTokenManager:T}=n;Q(d&&T,e,"internal-error");const k=ko.fromJSON(this.name,T);Q(typeof d=="string",e,"internal-error"),is(r,e.name),is(s,e.name),Q(typeof f=="boolean",e,"internal-error"),Q(typeof m=="boolean",e,"internal-error"),is(i,e.name),is(o,e.name),is(a,e.name),is(c,e.name),is(u,e.name),is(h,e.name);const V=new Un({uid:d,auth:e,email:s,emailVerified:f,displayName:r,isAnonymous:m,photoURL:o,phoneNumber:i,tenantId:a,stsTokenManager:k,createdAt:u,lastLoginAt:h});return I&&Array.isArray(I)&&(V.providerData=I.map(N=>({...N}))),c&&(V._redirectEventId=c),V}static async _fromIdTokenResponse(e,n,r=!1){const s=new ko;s.updateFromServerResponse(n);const i=new Un({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Xc(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];Q(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?bA(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!i?.length,a=new ko;a.updateFromIdToken(r);const c=new Un({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new yp(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!i?.length};return Object.assign(c,u),c}}const BI=new Map;function Rr(t){Lr(t instanceof Function,"Expected a class definition");let e=BI.get(t);return e?(Lr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,BI.set(t,e),e)}class RA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}RA.type="NONE";const Ip=RA;function bu(t,e,n){return`firebase:${t}:${e}:${n}`}class No{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=bu(this.userKey,s.apiKey,i),this.fullPersistenceKey=bu("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await ah(this.auth,{idToken:e}).catch(()=>{});return n?Un._fromGetAccountInfoResponse(this.auth,n,e):null}return Un._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new No(Rr(Ip),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||Rr(Ip);const o=bu(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const h=await u._get(o);if(h){let d;if(typeof h=="string"){const f=await ah(e,{idToken:h}).catch(()=>{});if(!f)break;d=await Un._fromGetAccountInfoResponse(e,f,h)}else d=Un._fromJSON(e,h);u!==i&&(a=d),i=u;break}}catch{}const c=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new No(i,e,r):(i=c[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new No(i,e,r))}}function jI(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(kA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(SA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(DA(e))return"Blackberry";if(VA(e))return"Webos";if(PA(e))return"Safari";if((e.includes("chrome/")||CA(e))&&!e.includes("edge/"))return"Chrome";if(NA(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function SA(t=Rt()){return/firefox\//i.test(t)}function PA(t=Rt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function CA(t=Rt()){return/crios\//i.test(t)}function kA(t=Rt()){return/iemobile/i.test(t)}function NA(t=Rt()){return/android/i.test(t)}function DA(t=Rt()){return/blackberry/i.test(t)}function VA(t=Rt()){return/webos/i.test(t)}function jm(t=Rt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function j1(t=Rt()){return jm(t)&&!!window.navigator?.standalone}function q1(){return Jx()&&document.documentMode===10}function xA(t=Rt()){return jm(t)||NA(t)||VA(t)||DA(t)||/windows phone/i.test(t)||kA(t)}function OA(t,e=[]){let n;switch(t){case"Browser":n=jI(Rt());break;case"Worker":n=`${jI(Rt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ea}/${r}`}class H1{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const c=e(i);o(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function $1(t,e={}){return nt(t,"GET","/v2/passwordPolicy",tt(t,e))}const G1=6;class K1{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??G1,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class W1{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new qI(this),this.idTokenSubscription=new qI(this),this.beforeStateQueue=new H1(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_A,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Rr(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await No.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await ah(this,{idToken:e}),r=await Un._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch{await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(at(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=this.redirectUser?._redirectEventId,o=r?._redirectEventId,a=await this.tryRedirectSignIn(e);(!i||i===o)&&a?.user&&(r=a.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(i){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Q(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Xc(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=R1()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(at(this.app))return Promise.reject(xt(this));const n=e?ue(e):null;return n&&Q(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Q(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return at(this.app)?Promise.reject(xt(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return at(this.app)?Promise.reject(xt(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Rr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await $1(this),n=new K1(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new yl("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await B1(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Rr(e)||this._popupRedirectResolver;Q(n,this,"argument-error"),this.redirectPersistenceManager=await No.create(this,[Rr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Q(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Q(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=OA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(at(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&A1(`Error while retrieving App Check token: ${e.error}`),e?.token}}function ht(t){return ue(t)}class qI{constructor(e){this.auth=e,this.observer=null,this.addObserver=nO(n=>this.observer=n)}get next(){return Q(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Tl={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function z1(t){Tl=t}function qm(t){return Tl.loadJS(t)}function Q1(){return Tl.recaptchaV2Script}function J1(){return Tl.recaptchaEnterpriseScript}function Y1(){return Tl.gapiScript}function LA(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const X1=500,Z1=6e4,lu=1e12;class eL{constructor(e){this.auth=e,this.counter=lu,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new rL(e,this.auth.name,n||{})),this.counter++,r}reset(e){const n=e||lu;this._widgets.get(n)?.delete(),this._widgets.delete(n)}getResponse(e){const n=e||lu;return this._widgets.get(n)?.getResponse()||""}async execute(e){const n=e||lu;return this._widgets.get(n)?.execute(),""}}class tL{constructor(){this.enterprise=new nL}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class nL{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class rL{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const s=typeof e=="string"?document.getElementById(e):e;Q(s,"argument-error",{appName:n}),this.container=s,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=sL(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},Z1)},X1))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function sL(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}const iL="recaptcha-enterprise",Cc="NO_RECAPTCHA";class MA{constructor(e){this.type=iL,this.auth=ht(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{wA(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new TA(c);return i.tenantId==null?i._agentRecaptchaConfig=u:i._tenantRecaptchaConfigs[i.tenantId]=u,o(u.siteKey)}}).catch(c=>{a(c)})})}function s(i,o,a){const c=window.grecaptcha;FI(c)?c.enterprise.ready(()=>{c.enterprise.execute(i,{action:e}).then(u=>{o(u)}).catch(()=>{o(Cc)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new tL().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&FI(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=J1();c.length!==0&&(c+=a),qm(c).then(()=>{s(a,i,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function rc(t,e,n,r=!1,s=!1){const i=new MA(t);let o;if(s)o=Cc;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const a={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const c=a.phoneEnrollmentInfo.phoneNumber,u=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const c=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Rs(t,e,n,r,s){if(s==="EMAIL_PASSWORD_PROVIDER")if(t._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await rc(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){const o=await rc(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)});else if(s==="PHONE_PROVIDER")if(t._getRecaptchaConfig()?.isProviderEnabled("PHONE_PROVIDER")){const i=await rc(t,e,n);return r(t,i).catch(async o=>{if(t._getRecaptchaConfig()?.getProviderEnforcementState("PHONE_PROVIDER")==="AUDIT"&&(o.code==="auth/missing-recaptcha-token"||o.code==="auth/invalid-app-credential")){const a=await rc(t,e,n,!1,!0);return r(t,a)}return Promise.reject(o)})}else{const i=await rc(t,e,n,!1,!0);return r(t,i)}else return Promise.reject(s+" provider is not supported.")}async function FA(t){const e=ht(t),n=await wA(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new TA(n);e.tenantId==null?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,r.isAnyProviderEnabled()&&new MA(e).verify()}function UA(t,e){const n=Il(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Kn(i,e??{}))return s;fn(s,"already-initialized")}return n.initialize({options:e})}function oL(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Rr);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function BA(t,e,n){const r=ht(t);Q(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!n?.disableWarnings,i=jA(e),{host:o,port:a}=aL(e),c=a===null?"":`:${a}`,u={url:`${i}//${o}${c}/`},h=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){Q(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Q(Kn(u,r.config.emulator)&&Kn(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,Ki(o)?(Vm(`${i}//${o}${c}`),eA("Auth",!0)):s||cL()}function jA(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function aL(t){const e=jA(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:HI(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:HI(o)}}}function HI(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function cL(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}class wa{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return tr("not implemented")}_getIdTokenResponse(e){return tr("not implemented")}_linkToIdToken(e,n){return tr("not implemented")}_getReauthenticationResolver(e){return tr("not implemented")}}async function qA(t,e){return nt(t,"POST","/v1/accounts:resetPassword",tt(t,e))}async function lL(t,e){return nt(t,"POST","/v1/accounts:update",e)}async function uL(t,e){return nt(t,"POST","/v1/accounts:signUp",e)}async function hL(t,e){return nt(t,"POST","/v1/accounts:update",tt(t,e))}async function dL(t,e){return $r(t,"POST","/v1/accounts:signInWithPassword",tt(t,e))}async function Qh(t,e){return nt(t,"POST","/v1/accounts:sendOobCode",tt(t,e))}async function fL(t,e){return Qh(t,e)}async function pL(t,e){return Qh(t,e)}async function mL(t,e){return Qh(t,e)}async function gL(t,e){return Qh(t,e)}async function _L(t,e){return $r(t,"POST","/v1/accounts:signInWithEmailLink",tt(t,e))}async function yL(t,e){return $r(t,"POST","/v1/accounts:signInWithEmailLink",tt(t,e))}class zo extends wa{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new zo(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new zo(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Rs(e,n,"signInWithPassword",dL,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return _L(e,{email:this._email,oobCode:this._password});default:fn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Rs(e,r,"signUpPassword",uL,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return yL(e,{idToken:n,email:this._email,oobCode:this._password});default:fn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Nr(t,e){return $r(t,"POST","/v1/accounts:signInWithIdp",tt(t,e))}const IL="http://localhost";class ur extends wa{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ur(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):fn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const o=new ur(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Nr(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Nr(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Nr(e,n)}buildRequest(){const e={requestUri:IL,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ia(n)}return e}}async function $I(t,e){return nt(t,"POST","/v1/accounts:sendVerificationCode",tt(t,e))}async function EL(t,e){return $r(t,"POST","/v1/accounts:signInWithPhoneNumber",tt(t,e))}async function TL(t,e){const n=await $r(t,"POST","/v1/accounts:signInWithPhoneNumber",tt(t,e));if(n.temporaryProof)throw pc(t,"account-exists-with-different-credential",n);return n}const wL={USER_NOT_FOUND:"user-not-found"};async function vL(t,e){const n={...e,operation:"REAUTH"};return $r(t,"POST","/v1/accounts:signInWithPhoneNumber",tt(t,n),wL)}class Ss extends wa{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new Ss({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new Ss({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return EL(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return TL(e,{idToken:n,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return vL(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:s}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:s}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:s,temporaryProof:i}=e;return!r&&!n&&!s&&!i?null:new Ss({verificationId:n,verificationCode:r,phoneNumber:s,temporaryProof:i})}}function AL(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function bL(t){const e=dc(fc(t)).link,n=e?dc(fc(e)).deep_link_id:null,r=dc(fc(t)).deep_link_id;return(r?dc(fc(r)).link:null)||r||n||e||t}class va{constructor(e){const n=dc(fc(e)),r=n.apiKey??null,s=n.oobCode??null,i=AL(n.mode??null);Q(r&&s&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=bL(e);try{return new va(n)}catch{return null}}}function RL(t){return va.parseLink(t)}class Hs{constructor(){this.providerId=Hs.PROVIDER_ID}static credential(e,n){return zo._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=va.parseLink(n);return Q(r,"argument-error"),zo._fromEmailAndCode(e,r.code,r.tenantId)}}Hs.PROVIDER_ID="password";Hs.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Hs.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Gr{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Aa extends Gr{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class kc extends Aa{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return Q("providerId"in n&&"signInMethod"in n,"argument-error"),ur._fromParams(n)}credential(e){return this._credential({...e,nonce:e.rawNonce})}_credential(e){return Q(e.idToken||e.accessToken,"argument-error"),ur._fromParams({...e,providerId:this.providerId,signInMethod:this.providerId})}static credentialFromResult(e){return kc.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return kc.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:s,pendingToken:i,nonce:o,providerId:a}=e;if(!r&&!s&&!n&&!i||!a)return null;try{return new kc(a)._credential({idToken:n,accessToken:r,nonce:o,pendingToken:i})}catch{return null}}}class wr extends Aa{constructor(){super("facebook.com")}static credential(e){return ur._fromParams({providerId:wr.PROVIDER_ID,signInMethod:wr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return wr.credentialFromTaggedObject(e)}static credentialFromError(e){return wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return wr.credential(e.oauthAccessToken)}catch{return null}}}wr.FACEBOOK_SIGN_IN_METHOD="facebook.com";wr.PROVIDER_ID="facebook.com";class vr extends Aa{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ur._fromParams({providerId:vr.PROVIDER_ID,signInMethod:vr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return vr.credentialFromTaggedObject(e)}static credentialFromError(e){return vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return vr.credential(n,r)}catch{return null}}}vr.GOOGLE_SIGN_IN_METHOD="google.com";vr.PROVIDER_ID="google.com";class Ar extends Aa{constructor(){super("github.com")}static credential(e){return ur._fromParams({providerId:Ar.PROVIDER_ID,signInMethod:Ar.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ar.credentialFromTaggedObject(e)}static credentialFromError(e){return Ar.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ar.credential(e.oauthAccessToken)}catch{return null}}}Ar.GITHUB_SIGN_IN_METHOD="github.com";Ar.PROVIDER_ID="github.com";const SL="http://localhost";class Zc extends wa{constructor(e,n){super(e,e),this.pendingToken=n}_getIdTokenResponse(e){const n=this.buildRequest();return Nr(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Nr(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Nr(e,n)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,pendingToken:i}=n;return!r||!s||!i||r!==s?null:new Zc(r,i)}static _create(e,n){return new Zc(e,n)}buildRequest(){return{requestUri:SL,returnSecureToken:!0,pendingToken:this.pendingToken}}}const PL="saml.";class ch extends Gr{constructor(e){Q(e.startsWith(PL),"argument-error"),super(e)}static credentialFromResult(e){return ch.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return ch.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const n=Zc.fromJSON(e);return Q(n,"argument-error"),n}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:n,providerId:r}=e;if(!n||!r)return null;try{return Zc._create(r,n)}catch{return null}}}class br extends Aa{constructor(){super("twitter.com")}static credential(e,n){return ur._fromParams({providerId:br.PROVIDER_ID,signInMethod:br.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return br.credentialFromTaggedObject(e)}static credentialFromError(e){return br.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return br.credential(n,r)}catch{return null}}}br.TWITTER_SIGN_IN_METHOD="twitter.com";br.PROVIDER_ID="twitter.com";async function HA(t,e){return $r(t,"POST","/v1/accounts:signUp",tt(t,e))}class Nn{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Un._fromIdTokenResponse(e,r,s),o=GI(r);return new Nn({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=GI(r);return new Nn({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function GI(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}async function CL(t){if(at(t.app))return Promise.reject(xt(t));const e=ht(t);if(await e._initializationPromise,e.currentUser?.isAnonymous)return new Nn({user:e.currentUser,providerId:null,operationType:"signIn"});const n=await HA(e,{returnSecureToken:!0}),r=await Nn._fromIdTokenResponse(e,"signIn",n,!0);return await e._updateCurrentUser(r.user),r}class lh extends Hr{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,lh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new lh(e,n,r,s)}}function $A(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?lh._fromErrorAndOperation(t,i,e,r):i})}function GA(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}async function kL(t,e){const n=ue(t);await Jh(!0,n,e);const{providerUserInfo:r}=await x1(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),s=GA(r||[]);return n.providerData=n.providerData.filter(i=>s.has(i.providerId)),s.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function Hm(t,e,n=!1){const r=await Mr(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Nn._forOperation(t,"link",r)}async function Jh(t,e,n){await Xc(e);const r=GA(e.providerData),s=t===!1?"provider-already-linked":"no-such-provider";Q(r.has(n)===t,e.auth,s)}async function KA(t,e,n=!1){const{auth:r}=t;if(at(r.app))return Promise.reject(xt(r));const s="reauthenticate";try{const i=await Mr(t,$A(r,s,e,t),n);Q(i.idToken,r,"internal-error");const o=zh(i.idToken);Q(o,r,"internal-error");const{sub:a}=o;return Q(t.uid===a,r,"user-mismatch"),Nn._forOperation(t,s,i)}catch(i){throw i?.code==="auth/user-not-found"&&fn(r,"user-mismatch"),i}}async function WA(t,e,n=!1){if(at(t.app))return Promise.reject(xt(t));const r="signIn",s=await $A(t,r,e),i=await Nn._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function Yh(t,e){return WA(ht(t),e)}async function zA(t,e){const n=ue(t);return await Jh(!1,n,e.providerId),Hm(n,e)}async function QA(t,e){return KA(ue(t),e)}async function NL(t,e){return $r(t,"POST","/v1/accounts:signInWithCustomToken",tt(t,e))}async function DL(t,e){if(at(t.app))return Promise.reject(xt(t));const n=ht(t),r=await NL(n,{token:e,returnSecureToken:!0}),s=await Nn._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(s.user),s}class wl{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?$m._fromServerResponse(e,n):"totpInfo"in n?Gm._fromServerResponse(e,n):fn(e,"internal-error")}}class $m extends wl{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new $m(n)}}class Gm extends wl{constructor(e){super("totp",e)}static _fromServerResponse(e,n){return new Gm(n)}}function Xh(t,e,n){Q(n.url?.length>0,t,"invalid-continue-uri"),Q(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),Q(typeof n.linkDomain>"u"||n.linkDomain.length>0,t,"invalid-hosting-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.linkDomain=n.linkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Q(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(Q(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}async function Km(t){const e=ht(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function JA(t,e,n){const r=ht(t),s={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&Xh(r,s,n),await Rs(r,s,"getOobCode",pL,"EMAIL_PASSWORD_PROVIDER")}async function VL(t,e,n){await qA(ue(t),{oobCode:e,newPassword:n}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Km(t),r})}async function xL(t,e){await hL(ue(t),{oobCode:e})}async function YA(t,e){const n=ue(t),r=await qA(n,{oobCode:e}),s=r.requestType;switch(Q(s,n,"internal-error"),s){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Q(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Q(r.mfaInfo,n,"internal-error");default:Q(r.email,n,"internal-error")}let i=null;return r.mfaInfo&&(i=wl._fromServerResponse(ht(n),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:i},operation:s}}async function OL(t,e){const{data:n}=await YA(ue(t),e);return n.email}async function XA(t,e,n){if(at(t.app))return Promise.reject(xt(t));const r=ht(t),o=await Rs(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",HA,"EMAIL_PASSWORD_PROVIDER").catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&Km(t),c}),a=await Nn._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function ZA(t,e,n){return at(t.app)?Promise.reject(xt(t)):Yh(ue(t),Hs.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Km(t),r})}async function LL(t,e,n){const r=ht(t),s={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function i(o,a){Q(a.handleCodeInApp,r,"argument-error"),a&&Xh(r,o,a)}i(s,n),await Rs(r,s,"getOobCode",mL,"EMAIL_PASSWORD_PROVIDER")}function ML(t,e){return va.parseLink(e)?.operation==="EMAIL_SIGNIN"}async function FL(t,e,n){if(at(t.app))return Promise.reject(xt(t));const r=ue(t),s=Hs.credentialWithLink(e,n||Yc());return Q(s._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),Yh(r,s)}async function UL(t,e){return nt(t,"POST","/v1/accounts:createAuthUri",tt(t,e))}async function BL(t,e){const n=Um()?Yc():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:s}=await UL(ue(t),r);return s||[]}async function Ep(t,e){const n=ue(t),s={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&Xh(n.auth,s,e);const{email:i}=await fL(n.auth,s);i!==t.email&&await t.reload()}async function jL(t,e,n){const r=ue(t),i={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};n&&Xh(r.auth,i,n);const{email:o}=await gL(r.auth,i);o!==t.email&&await t.reload()}async function qL(t,e){return nt(t,"POST","/v1/accounts:update",e)}async function HL(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=ue(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Mr(r,qL(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:c})=>c==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function $L(t,e){const n=ue(t);return at(n.auth.app)?Promise.reject(xt(n.auth)):eb(n,e,null)}function GL(t,e){return eb(ue(t),null,e)}async function eb(t,e,n){const{auth:r}=t,i={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(i.email=e),n&&(i.password=n);const o=await Mr(t,lL(r,i));await t._updateTokensIfNecessary(o,!0)}function KL(t){if(!t)return null;const{providerId:e}=t,n=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},r=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!e&&t?.idToken){const s=zh(t.idToken)?.firebase?.sign_in_provider;if(s){const i=s!=="anonymous"&&s!=="custom"?s:null;return new Do(r,i)}}if(!e)return null;switch(e){case"facebook.com":return new WL(r,n);case"github.com":return new zL(r,n);case"google.com":return new QL(r,n);case"twitter.com":return new JL(r,n,t.screenName||null);case"custom":case"anonymous":return new Do(r,null);default:return new Do(r,e,n)}}class Do{constructor(e,n,r={}){this.isNewUser=e,this.providerId=n,this.profile=r}}class tb extends Do{constructor(e,n,r,s){super(e,n,r),this.username=s}}class WL extends Do{constructor(e,n){super(e,"facebook.com",n)}}class zL extends tb{constructor(e,n){super(e,"github.com",n,typeof n?.login=="string"?n?.login:null)}}class QL extends Do{constructor(e,n){super(e,"google.com",n)}}class JL extends tb{constructor(e,n,r){super(e,"twitter.com",n,r)}}function YL(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:KL(n)}function XL(t,e){return ue(t).setPersistence(e)}function ZL(t){return FA(t)}async function eM(t,e){return ht(t).validatePassword(e)}function nb(t,e,n,r){return ue(t).onIdTokenChanged(e,n,r)}function rb(t,e,n){return ue(t).beforeAuthStateChanged(e,n)}function sb(t,e,n,r){return ue(t).onAuthStateChanged(e,n,r)}function tM(t){ue(t).useDeviceLanguage()}function nM(t,e){return ue(t).updateCurrentUser(e)}function hi(t){return ue(t).signOut()}function rM(t,e){return ht(t).revokeAccessToken(e)}async function sM(t){return ue(t).delete()}class Ii{constructor(e,n,r){this.type=e,this.credential=n,this.user=r}static _fromIdtoken(e,n){return new Ii("enroll",e,n)}static _fromMfaPendingCredential(e){return new Ii("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){if(e?.multiFactorSession){if(e.multiFactorSession?.pendingCredential)return Ii._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(e.multiFactorSession?.idToken)return Ii._fromIdtoken(e.multiFactorSession.idToken)}return null}}class Wm{constructor(e,n,r){this.session=e,this.hints=n,this.signInResolver=r}static _fromError(e,n){const r=ht(e),s=n.customData._serverResponse,i=(s.mfaInfo||[]).map(a=>wl._fromServerResponse(r,a));Q(s.mfaPendingCredential,r,"internal-error");const o=Ii._fromMfaPendingCredential(s.mfaPendingCredential);return new Wm(o,i,async a=>{const c=await a._process(r,o);delete s.mfaInfo,delete s.mfaPendingCredential;const u={...s,idToken:c.idToken,refreshToken:c.refreshToken};switch(n.operationType){case"signIn":const h=await Nn._fromIdTokenResponse(r,n.operationType,u);return await r._updateCurrentUser(h.user),h;case"reauthenticate":return Q(n.user,r,"internal-error"),Nn._forOperation(n.user,n.operationType,u);default:fn(r,"internal-error")}})}async resolveSignIn(e){const n=e;return this.signInResolver(n)}}function iM(t,e){const n=ue(t),r=e;return Q(e.customData.operationType,n,"argument-error"),Q(r.customData._serverResponse?.mfaPendingCredential,n,"argument-error"),Wm._fromError(n,r)}function KI(t,e){return nt(t,"POST","/v2/accounts/mfaEnrollment:start",tt(t,e))}function oM(t,e){return nt(t,"POST","/v2/accounts/mfaEnrollment:finalize",tt(t,e))}function aM(t,e){return nt(t,"POST","/v2/accounts/mfaEnrollment:start",tt(t,e))}function cM(t,e){return nt(t,"POST","/v2/accounts/mfaEnrollment:finalize",tt(t,e))}function lM(t,e){return nt(t,"POST","/v2/accounts/mfaEnrollment:withdraw",tt(t,e))}class zm{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(n=>{n.mfaInfo&&(this.enrolledFactors=n.mfaInfo.map(r=>wl._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new zm(e)}async getSession(){return Ii._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,n){const r=e,s=await this.getSession(),i=await Mr(this.user,r._process(this.user.auth,s,n));return await this.user._updateTokensIfNecessary(i),this.user.reload()}async unenroll(e){const n=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const s=await Mr(this.user,lM(this.user.auth,{idToken:r,mfaEnrollmentId:n}));this.enrolledFactors=this.enrolledFactors.filter(({uid:i})=>i!==n),await this.user._updateTokensIfNecessary(s),await this.user.reload()}catch(s){throw s}}}const If=new WeakMap;function uM(t){const e=ue(t);return If.has(e)||If.set(e,zm._fromUser(e)),If.get(e)}const uh="__sak";class ib{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(uh,"1"),this.storage.removeItem(uh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const hM=1e3,dM=10;class ob extends ib{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=xA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);q1()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,dM):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},hM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}ob.type="LOCAL";const ab=ob;const fM=1e3;function Ef(t){const e=t.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),n=RegExp(`${e}=([^;]+)`);return document.cookie.match(n)?.[1]??null}function Tf(t){return`${window.location.protocol==="http:"?"__dev_":"__HOST-"}FIREBASE_${t.split(":")[3]}`}class cb{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(typeof window===void 0)return e;const n=new URL(`${window.location.origin}/__cookies__`);return n.searchParams.set("finalTarget",e),n}async _isAvailable(){return typeof isSecureContext=="boolean"&&!isSecureContext||typeof navigator>"u"||typeof document>"u"?!1:navigator.cookieEnabled??!0}async _set(e,n){}async _get(e){if(!this._isAvailable())return null;const n=Tf(e);return window.cookieStore?(await window.cookieStore.get(n))?.value:Ef(n)}async _remove(e){if(!this._isAvailable()||!await this._get(e))return;const r=Tf(e);document.cookie=`${r}=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High`,await fetch("/__cookies__",{method:"DELETE"}).catch(()=>{})}_addListener(e,n){if(!this._isAvailable())return;const r=Tf(e);if(window.cookieStore){const a=(u=>{const h=u.changed.find(f=>f.name===r);h&&n(h.value),u.deleted.find(f=>f.name===r)&&n(null)}),c=()=>window.cookieStore.removeEventListener("change",a);return this.listenerUnsubscribes.set(n,c),window.cookieStore.addEventListener("change",a)}let s=Ef(r);const i=setInterval(()=>{const a=Ef(r);a!==s&&(n(a),s=a)},fM),o=()=>clearInterval(i);this.listenerUnsubscribes.set(n,o)}_removeListener(e,n){const r=this.listenerUnsubscribes.get(n);r&&(r(),this.listenerUnsubscribes.delete(n))}}cb.type="COOKIE";const pM=cb;class lb extends ib{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}lb.type="SESSION";const Qm=lb;function mM(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class Zh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Zh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!o?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async u=>u(n.origin,i)),c=await mM(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Zh.receivers=[];function ed(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}class gM{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,c)=>{const u=ed("",20);s.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(d){const f=d;if(f.data.eventId===u)switch(f.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(f.data.response);break;default:clearTimeout(h),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}function It(){return window}function _M(t){It().location.href=t}function Jm(){return typeof It().WorkerGlobalScope<"u"&&typeof It().importScripts=="function"}async function yM(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function IM(){return navigator?.serviceWorker?.controller||null}function EM(){return Jm()?self:null}const ub="firebaseLocalStorageDb",TM=1,hh="firebaseLocalStorage",hb="fbase_key";class vl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function td(t,e){return t.transaction([hh],e?"readwrite":"readonly").objectStore(hh)}function wM(){const t=indexedDB.deleteDatabase(ub);return new vl(t).toPromise()}function Tp(){const t=indexedDB.open(ub,TM);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(hh,{keyPath:hb})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(hh)?e(r):(r.close(),await wM(),e(await Tp()))})})}async function WI(t,e,n){const r=td(t,!0).put({[hb]:e,value:n});return new vl(r).toPromise()}async function vM(t,e){const n=td(t,!1).get(e),r=await new vl(n).toPromise();return r===void 0?null:r.value}function zI(t,e){const n=td(t,!0).delete(e);return new vl(n).toPromise()}const AM=800,bM=3;class db{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Tp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>bM)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Jm()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Zh._getInstance(EM()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await yM(),!this.activeServiceWorker)return;this.sender=new gM(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||IM()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Tp();return await WI(e,uh,"1"),await zI(e,uh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>WI(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>vM(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>zI(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=td(s,!1).getAll();return new vl(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),AM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}db.type="LOCAL";const fb=db;function QI(t,e){return nt(t,"POST","/v2/accounts/mfaSignIn:start",tt(t,e))}function RM(t,e){return nt(t,"POST","/v2/accounts/mfaSignIn:finalize",tt(t,e))}function SM(t,e){return nt(t,"POST","/v2/accounts/mfaSignIn:finalize",tt(t,e))}const wf=LA("rcb"),PM=new El(3e4,6e4);class CM{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!It().grecaptcha?.render}load(e,n=""){return Q(kM(n),e,"argument-error"),this.shouldResolveImmediately(n)&&MI(It().grecaptcha)?Promise.resolve(It().grecaptcha):new Promise((r,s)=>{const i=It().setTimeout(()=>{s(tn(e,"network-request-failed"))},PM.get());It()[wf]=()=>{It().clearTimeout(i),delete It()[wf];const a=It().grecaptcha;if(!a||!MI(a)){s(tn(e,"internal-error"));return}const c=a.render;a.render=(u,h)=>{const d=c(u,h);return this.counter++,d},this.hostLanguage=n,r(a)};const o=`${Q1()}?${Ia({onload:wf,render:"explicit",hl:n})}`;qm(o).catch(()=>{clearTimeout(i),s(tn(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){return!!It().grecaptcha?.render&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function kM(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class NM{async load(e){return new eL(e)}clearedOneInstance(){}}const Nc="recaptcha",DM={theme:"light",type:"image"};class VM{constructor(e,n,r={...DM}){this.parameters=r,this.type=Nc,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ht(e),this.isInvisible=this.parameters.size==="invisible",Q(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const s=typeof n=="string"?document.getElementById(n):n;Q(s,this.auth,"argument-error"),this.container=s,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new NM:new CM,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(s=>{const i=o=>{o&&(this.tokenChangeListeners.delete(i),s(o))};this.tokenChangeListeners.add(i),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){Q(!this.parameters.sitekey,this.auth,"argument-error"),Q(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Q(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=It()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){Q(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){Q(Um()&&!Jm(),this.auth,"internal-error"),await xM(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await D1(this.auth);Q(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return Q(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function xM(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}class Ym{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=Ss._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function OM(t,e,n){if(at(t.app))return Promise.reject(xt(t));const r=ht(t),s=await nd(r,e,ue(n));return new Ym(s,i=>Yh(r,i))}async function LM(t,e,n){const r=ue(t);await Jh(!1,r,"phone");const s=await nd(r.auth,e,ue(n));return new Ym(s,i=>zA(r,i))}async function MM(t,e,n){const r=ue(t);if(at(r.auth.app))return Promise.reject(xt(r.auth));const s=await nd(r.auth,e,ue(n));return new Ym(s,i=>QA(r,i))}async function nd(t,e,n){if(!t._getRecaptchaConfig())try{await FA(t)}catch{}try{let r;if(typeof e=="string"?r={phoneNumber:e}:r=e,"session"in r){const s=r.session;if("phoneNumber"in r){Q(s.type==="enroll",t,"internal-error");const i={idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await Rs(t,i,"mfaSmsEnrollment",async(u,h)=>{if(h.phoneEnrollmentInfo.captchaResponse===Cc){Q(n?.type===Nc,u,"argument-error");const d=await vf(u,h,n);return KI(u,d)}return KI(u,h)},"PHONE_PROVIDER").catch(u=>Promise.reject(u))).phoneSessionInfo.sessionInfo}else{Q(s.type==="signin",t,"internal-error");const i=r.multiFactorHint?.uid||r.multiFactorUid;Q(i,t,"missing-multi-factor-info");const o={mfaPendingCredential:s.credential,mfaEnrollmentId:i,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await Rs(t,o,"mfaSmsSignIn",async(h,d)=>{if(d.phoneSignInInfo.captchaResponse===Cc){Q(n?.type===Nc,h,"argument-error");const f=await vf(h,d,n);return QI(h,f)}return QI(h,d)},"PHONE_PROVIDER").catch(h=>Promise.reject(h))).phoneResponseInfo.sessionInfo}}else{const s={phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await Rs(t,s,"sendVerificationCode",async(c,u)=>{if(u.captchaResponse===Cc){Q(n?.type===Nc,c,"argument-error");const h=await vf(c,u,n);return $I(c,h)}return $I(c,u)},"PHONE_PROVIDER").catch(c=>Promise.reject(c))).sessionInfo}}finally{n?._reset()}}async function FM(t,e){const n=ue(t);if(at(n.auth.app))return Promise.reject(xt(n.auth));await Hm(n,e)}async function vf(t,e,n){Q(n.type===Nc,t,"argument-error");const r=await n.verify();Q(typeof r=="string",t,"argument-error");const s={...e};if("phoneEnrollmentInfo"in s){const i=s.phoneEnrollmentInfo.phoneNumber,o=s.phoneEnrollmentInfo.captchaResponse,a=s.phoneEnrollmentInfo.clientType,c=s.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(s,{phoneEnrollmentInfo:{phoneNumber:i,recaptchaToken:r,captchaResponse:o,clientType:a,recaptchaVersion:c}}),s}else if("phoneSignInInfo"in s){const i=s.phoneSignInInfo.captchaResponse,o=s.phoneSignInInfo.clientType,a=s.phoneSignInInfo.recaptchaVersion;return Object.assign(s,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:i,clientType:o,recaptchaVersion:a}}),s}else return Object.assign(s,{recaptchaToken:r}),s}class bi{constructor(e){this.providerId=bi.PROVIDER_ID,this.auth=ht(e)}verifyPhoneNumber(e,n){return nd(this.auth,e,ue(n))}static credential(e,n){return Ss._fromVerification(e,n)}static credentialFromResult(e){const n=e;return bi.credentialFromTaggedObject(n)}static credentialFromError(e){return bi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:n,temporaryProof:r}=e;return n&&r?Ss._fromTokenResponse(n,r):null}}bi.PROVIDER_ID="phone";bi.PHONE_SIGN_IN_METHOD="phone";function Wi(t,e){return e?Rr(e):(Q(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class Xm extends wa{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Nr(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Nr(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Nr(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function UM(t){return WA(t.auth,new Xm(t),t.bypassAuthState)}function BM(t){const{auth:e,user:n}=t;return Q(n,e,"internal-error"),KA(n,new Xm(t),t.bypassAuthState)}async function jM(t){const{auth:e,user:n}=t;return Q(n,e,"internal-error"),Hm(n,new Xm(t),t.bypassAuthState)}class pb{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return UM;case"linkViaPopup":case"linkViaRedirect":return jM;case"reauthViaPopup":case"reauthViaRedirect":return BM;default:fn(this.auth,"internal-error")}}resolve(e){Lr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Lr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const qM=new El(2e3,1e4);async function HM(t,e,n){if(at(t.app))return Promise.reject(tn(t,"operation-not-supported-in-this-environment"));const r=ht(t);Ta(t,e,Gr);const s=Wi(r,n);return new Sr(r,"signInViaPopup",e,s).executeNotNull()}async function $M(t,e,n){const r=ue(t);if(at(r.auth.app))return Promise.reject(tn(r.auth,"operation-not-supported-in-this-environment"));Ta(r.auth,e,Gr);const s=Wi(r.auth,n);return new Sr(r.auth,"reauthViaPopup",e,s,r).executeNotNull()}async function GM(t,e,n){const r=ue(t);Ta(r.auth,e,Gr);const s=Wi(r.auth,n);return new Sr(r.auth,"linkViaPopup",e,s,r).executeNotNull()}class Sr extends pb{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Sr.currentPopupAction&&Sr.currentPopupAction.cancel(),Sr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Q(e,this.auth,"internal-error"),e}async onExecution(){Lr(this.filter.length===1,"Popup operations only handle one event");const e=ed();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(tn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(tn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Sr.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(tn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,qM.get())};e()}}Sr.currentPopupAction=null;const KM="pendingRedirect",Ru=new Map;class WM extends pb{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Ru.get(this.auth._key());if(!e){try{const r=await zM(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Ru.set(this.auth._key(),e)}return this.bypassAuthState||Ru.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function zM(t,e){const n=gb(e),r=mb(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}async function Zm(t,e){return mb(t)._set(gb(e),"true")}function QM(t,e){Ru.set(t._key(),e)}function mb(t){return Rr(t._redirectPersistence)}function gb(t){return bu(KM,t.config.apiKey,t.name)}function JM(t,e,n){return YM(t,e,n)}async function YM(t,e,n){if(at(t.app))return Promise.reject(xt(t));const r=ht(t);Ta(t,e,Gr),await r._initializationPromise;const s=Wi(r,n);return await Zm(s,r),s._openRedirect(r,e,"signInViaRedirect")}function XM(t,e,n){return ZM(t,e,n)}async function ZM(t,e,n){const r=ue(t);if(Ta(r.auth,e,Gr),at(r.auth.app))return Promise.reject(xt(r.auth));await r.auth._initializationPromise;const s=Wi(r.auth,n);await Zm(s,r.auth);const i=await yb(r);return s._openRedirect(r.auth,e,"reauthViaRedirect",i)}function eF(t,e,n){return tF(t,e,n)}async function tF(t,e,n){const r=ue(t);Ta(r.auth,e,Gr),await r.auth._initializationPromise;const s=Wi(r.auth,n);await Jh(!1,r,e.providerId),await Zm(s,r.auth);const i=await yb(r);return s._openRedirect(r.auth,e,"linkViaRedirect",i)}async function nF(t,e){return await ht(t)._initializationPromise,_b(t,e,!1)}async function _b(t,e,n=!1){if(at(t.app))return Promise.reject(xt(t));const r=ht(t),s=Wi(r,e),o=await new WM(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}async function yb(t){const e=ed(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}const rF=600*1e3;class sF{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!iF(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!Ib(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(tn(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=rF&&this.cachedEventUids.clear(),this.cachedEventUids.has(JI(e))}saveEventToCache(e){this.cachedEventUids.add(JI(e)),this.lastProcessedEventTime=Date.now()}}function JI(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Ib({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function iF(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ib(t);default:return!1}}async function oF(t,e={}){return nt(t,"GET","/v1/projects",e)}const aF=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,cF=/^https?/;async function lF(t){if(t.config.emulator)return;const{authorizedDomains:e}=await oF(t);for(const n of e)try{if(uF(n))return}catch{}fn(t,"unauthorized-domain")}function uF(t){const e=Yc(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!cF.test(n))return!1;if(aF.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}const hF=new El(3e4,6e4);function YI(){const t=It().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function dF(t){return new Promise((e,n)=>{function r(){YI(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{YI(),n(tn(t,"network-request-failed"))},timeout:hF.get()})}if(It().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(It().gapi?.load)r();else{const s=LA("iframefcb");return It()[s]=()=>{gapi.load?r():n(tn(t,"network-request-failed"))},qm(`${Y1()}?onload=${s}`).catch(i=>n(i))}}).catch(e=>{throw Su=null,e})}let Su=null;function fF(t){return Su=Su||dF(t),Su}const pF=new El(5e3,15e3),mF="__/auth/iframe",gF="emulator/auth/iframe",_F={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},yF=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function IF(t){const e=t.config;Q(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Bm(e,gF):`https://${t.config.authDomain}/${mF}`,r={apiKey:e.apiKey,appName:t.name,v:Ea},s=yF.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Ia(r).slice(1)}`}async function EF(t){const e=await fF(t),n=It().gapi;return Q(n,t,"internal-error"),e.open({where:document.body,url:IF(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:_F,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=tn(t,"network-request-failed"),a=It().setTimeout(()=>{i(o)},pF.get());function c(){It().clearTimeout(a),s(r)}r.ping(c).then(c,()=>{i(o)})}))}const TF={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},wF=500,vF=600,AF="_blank",bF="http://localhost";class XI{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function RF(t,e,n,r=wF,s=vF){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const c={...TF,width:r.toString(),height:s.toString(),top:i,left:o},u=Rt().toLowerCase();n&&(a=CA(u)?AF:n),SA(u)&&(e=e||bF,c.scrollbars="yes");const h=Object.entries(c).reduce((f,[m,I])=>`${f}${m}=${I},`,"");if(j1(u)&&a!=="_self")return SF(e||"",a),new XI(null);const d=window.open(e||"",a,h);Q(d,t,"popup-blocked");try{d.focus()}catch{}return new XI(d)}function SF(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}const PF="__/auth/handler",CF="emulator/auth/handler",kF=encodeURIComponent("fac");async function ZI(t,e,n,r,s,i){Q(t.config.authDomain,t,"auth-domain-config-required"),Q(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ea,eventId:s};if(e instanceof Gr){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",tO(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries({}))o[h]=d}if(e instanceof Aa){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const c=await t._getAppCheckToken(),u=c?`#${kF}=${encodeURIComponent(c)}`:"";return`${NF(t)}?${Ia(a).slice(1)}${u}`}function NF({config:t}){return t.emulator?Bm(t,CF):`https://${t.authDomain}/${PF}`}const Af="webStorageSupport";class DF{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Qm,this._completeRedirectFn=_b,this._overrideRedirectResult=QM}async _openPopup(e,n,r,s){Lr(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const i=await ZI(e,n,r,Yc(),s);return RF(e,i,ed())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await ZI(e,n,r,Yc(),s);return _M(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Lr(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await EF(e),r=new sF(e);return n.register("authEvent",s=>(Q(s?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Af,{type:Af},s=>{const i=s?.[0]?.[Af];i!==void 0&&n(!!i),fn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=lF(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return xA()||PA()||jm()}}const Eb=DF;class Tb{constructor(e){this.factorId=e}_process(e,n,r){switch(n.type){case"enroll":return this._finalizeEnroll(e,n.credential,r);case"signin":return this._finalizeSignIn(e,n.credential);default:return tr("unexpected MultiFactorSessionType")}}}class eg extends Tb{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new eg(e)}_finalizeEnroll(e,n,r){return oM(e,{idToken:n,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,n){return RM(e,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class wb{constructor(){}static assertion(e){return eg._fromCredential(e)}}wb.FACTOR_ID="phone";class vb{static assertionForEnrollment(e,n){return el._fromSecret(e,n)}static assertionForSignIn(e,n){return el._fromEnrollmentId(e,n)}static async generateSecret(e){const n=e;Q(typeof n.user?.auth<"u","internal-error");const r=await aM(n.user.auth,{idToken:n.credential,totpEnrollmentInfo:{}});return rd._fromStartTotpMfaEnrollmentResponse(r,n.user.auth)}}vb.FACTOR_ID="totp";class el extends Tb{constructor(e,n,r){super("totp"),this.otp=e,this.enrollmentId=n,this.secret=r}static _fromSecret(e,n){return new el(n,void 0,e)}static _fromEnrollmentId(e,n){return new el(n,e)}async _finalizeEnroll(e,n,r){return Q(typeof this.secret<"u",e,"argument-error"),cM(e,{idToken:n,displayName:r,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)})}async _finalizeSignIn(e,n){Q(this.enrollmentId!==void 0&&this.otp!==void 0,e,"argument-error");const r={verificationCode:this.otp};return SM(e,{mfaPendingCredential:n,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:r})}}class rd{constructor(e,n,r,s,i,o,a){this.sessionInfo=o,this.auth=a,this.secretKey=e,this.hashingAlgorithm=n,this.codeLength=r,this.codeIntervalSeconds=s,this.enrollmentCompletionDeadline=i}static _fromStartTotpMfaEnrollmentResponse(e,n){return new rd(e.totpSessionInfo.sharedSecretKey,e.totpSessionInfo.hashingAlgorithm,e.totpSessionInfo.verificationCodeLength,e.totpSessionInfo.periodSec,new Date(e.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),e.totpSessionInfo.sessionInfo,n)}_makeTotpVerificationInfo(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}generateQrCodeUrl(e,n){let r=!1;return(uu(e)||uu(n))&&(r=!0),r&&(uu(e)&&(e=this.auth.currentUser?.email||"unknownuser"),uu(n)&&(n=this.auth.name)),`otpauth://totp/${n}:${e}?secret=${this.secretKey}&issuer=${n}&algorithm=${this.hashingAlgorithm}&digits=${this.codeLength}`}}function uu(t){return typeof t>"u"||t?.length===0}var eE="@firebase/auth",tE="1.12.0";class VF{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Q(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function xF(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function OF(t){Wo(new Vi("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Q(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:OA(t)},u=new W1(r,s,i,c);return oL(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Wo(new Vi("auth-internal",e=>{const n=ht(e.getProvider("auth").getImmediate());return(r=>new VF(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),bs(eE,tE,xF(t)),bs(eE,tE,"esm2020")}const LF=300,MF=Zv("authIdTokenMaxAge")||LF;let nE=null;const FF=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>MF)return;const s=n?.token;nE!==s&&(nE=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function UF(t=dA()){const e=Il(t,"auth");if(e.isInitialized())return e.getImmediate();const n=UA(t,{popupRedirectResolver:Eb,persistence:[fb,ab,Qm]}),r=Zv("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=FF(i.toString());rb(n,o,()=>o(n.currentUser)),nb(n,a=>o(a))}}const s=Xv("auth");return s&&BA(n,`http://${s}`),n}function BF(){return document.getElementsByTagName("head")?.[0]??document}z1({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=tn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",BF().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});OF("Browser");const jF=Object.freeze(Object.defineProperty({__proto__:null,ActionCodeOperation:E1,ActionCodeURL:va,AuthCredential:wa,AuthErrorCodes:v1,EmailAuthCredential:zo,EmailAuthProvider:Hs,FacebookAuthProvider:wr,FactorId:g1,GithubAuthProvider:Ar,GoogleAuthProvider:vr,OAuthCredential:ur,OAuthProvider:kc,OperationType:I1,PhoneAuthCredential:Ss,PhoneAuthProvider:bi,PhoneMultiFactorGenerator:wb,ProviderId:_1,RecaptchaVerifier:VM,SAMLAuthProvider:ch,SignInMethod:y1,TotpMultiFactorGenerator:vb,TotpSecret:rd,TwitterAuthProvider:br,applyActionCode:xL,beforeAuthStateChanged:rb,browserCookiePersistence:pM,browserLocalPersistence:ab,browserPopupRedirectResolver:Eb,browserSessionPersistence:Qm,checkActionCode:YA,confirmPasswordReset:VL,connectAuthEmulator:BA,createUserWithEmailAndPassword:XA,debugErrorMap:w1,deleteUser:sM,fetchSignInMethodsForEmail:BL,getAdditionalUserInfo:YL,getAuth:UF,getIdToken:O1,getIdTokenResult:vA,getMultiFactorResolver:iM,getRedirectResult:nF,inMemoryPersistence:Ip,indexedDBLocalPersistence:fb,initializeAuth:UA,initializeRecaptchaConfig:ZL,isSignInWithEmailLink:ML,linkWithCredential:zA,linkWithPhoneNumber:LM,linkWithPopup:GM,linkWithRedirect:eF,multiFactor:uM,onAuthStateChanged:sb,onIdTokenChanged:nb,parseActionCodeURL:RL,prodErrorMap:gA,reauthenticateWithCredential:QA,reauthenticateWithPhoneNumber:MM,reauthenticateWithPopup:$M,reauthenticateWithRedirect:XM,reload:AA,revokeAccessToken:rM,sendEmailVerification:Ep,sendPasswordResetEmail:JA,sendSignInLinkToEmail:LL,setPersistence:XL,signInAnonymously:CL,signInWithCredential:Yh,signInWithCustomToken:DL,signInWithEmailAndPassword:ZA,signInWithEmailLink:FL,signInWithPhoneNumber:OM,signInWithPopup:HM,signInWithRedirect:JM,signOut:hi,unlink:kL,updateCurrentUser:nM,updateEmail:$L,updatePassword:GL,updatePhoneNumber:FM,updateProfile:HL,useDeviceLanguage:tM,validatePassword:eM,verifyBeforeUpdateEmail:jL,verifyPasswordResetCode:OL},Symbol.toStringTag,{value:"Module"}));var rE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Ps,Ab;(function(){var t;function e(v,E){function y(){}y.prototype=E.prototype,v.F=E.prototype,v.prototype=new y,v.prototype.constructor=v,v.D=function(A,P,S){for(var b=Array(arguments.length-2),ge=2;ge<arguments.length;ge++)b[ge-2]=arguments[ge];return E.prototype[P].apply(A,b)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(v,E,y){y||(y=0);const A=Array(16);if(typeof E=="string")for(var P=0;P<16;++P)A[P]=E.charCodeAt(y++)|E.charCodeAt(y++)<<8|E.charCodeAt(y++)<<16|E.charCodeAt(y++)<<24;else for(P=0;P<16;++P)A[P]=E[y++]|E[y++]<<8|E[y++]<<16|E[y++]<<24;E=v.g[0],y=v.g[1],P=v.g[2];let S=v.g[3],b;b=E+(S^y&(P^S))+A[0]+3614090360&4294967295,E=y+(b<<7&4294967295|b>>>25),b=S+(P^E&(y^P))+A[1]+3905402710&4294967295,S=E+(b<<12&4294967295|b>>>20),b=P+(y^S&(E^y))+A[2]+606105819&4294967295,P=S+(b<<17&4294967295|b>>>15),b=y+(E^P&(S^E))+A[3]+3250441966&4294967295,y=P+(b<<22&4294967295|b>>>10),b=E+(S^y&(P^S))+A[4]+4118548399&4294967295,E=y+(b<<7&4294967295|b>>>25),b=S+(P^E&(y^P))+A[5]+1200080426&4294967295,S=E+(b<<12&4294967295|b>>>20),b=P+(y^S&(E^y))+A[6]+2821735955&4294967295,P=S+(b<<17&4294967295|b>>>15),b=y+(E^P&(S^E))+A[7]+4249261313&4294967295,y=P+(b<<22&4294967295|b>>>10),b=E+(S^y&(P^S))+A[8]+1770035416&4294967295,E=y+(b<<7&4294967295|b>>>25),b=S+(P^E&(y^P))+A[9]+2336552879&4294967295,S=E+(b<<12&4294967295|b>>>20),b=P+(y^S&(E^y))+A[10]+4294925233&4294967295,P=S+(b<<17&4294967295|b>>>15),b=y+(E^P&(S^E))+A[11]+2304563134&4294967295,y=P+(b<<22&4294967295|b>>>10),b=E+(S^y&(P^S))+A[12]+1804603682&4294967295,E=y+(b<<7&4294967295|b>>>25),b=S+(P^E&(y^P))+A[13]+4254626195&4294967295,S=E+(b<<12&4294967295|b>>>20),b=P+(y^S&(E^y))+A[14]+2792965006&4294967295,P=S+(b<<17&4294967295|b>>>15),b=y+(E^P&(S^E))+A[15]+1236535329&4294967295,y=P+(b<<22&4294967295|b>>>10),b=E+(P^S&(y^P))+A[1]+4129170786&4294967295,E=y+(b<<5&4294967295|b>>>27),b=S+(y^P&(E^y))+A[6]+3225465664&4294967295,S=E+(b<<9&4294967295|b>>>23),b=P+(E^y&(S^E))+A[11]+643717713&4294967295,P=S+(b<<14&4294967295|b>>>18),b=y+(S^E&(P^S))+A[0]+3921069994&4294967295,y=P+(b<<20&4294967295|b>>>12),b=E+(P^S&(y^P))+A[5]+3593408605&4294967295,E=y+(b<<5&4294967295|b>>>27),b=S+(y^P&(E^y))+A[10]+38016083&4294967295,S=E+(b<<9&4294967295|b>>>23),b=P+(E^y&(S^E))+A[15]+3634488961&4294967295,P=S+(b<<14&4294967295|b>>>18),b=y+(S^E&(P^S))+A[4]+3889429448&4294967295,y=P+(b<<20&4294967295|b>>>12),b=E+(P^S&(y^P))+A[9]+568446438&4294967295,E=y+(b<<5&4294967295|b>>>27),b=S+(y^P&(E^y))+A[14]+3275163606&4294967295,S=E+(b<<9&4294967295|b>>>23),b=P+(E^y&(S^E))+A[3]+4107603335&4294967295,P=S+(b<<14&4294967295|b>>>18),b=y+(S^E&(P^S))+A[8]+1163531501&4294967295,y=P+(b<<20&4294967295|b>>>12),b=E+(P^S&(y^P))+A[13]+2850285829&4294967295,E=y+(b<<5&4294967295|b>>>27),b=S+(y^P&(E^y))+A[2]+4243563512&4294967295,S=E+(b<<9&4294967295|b>>>23),b=P+(E^y&(S^E))+A[7]+1735328473&4294967295,P=S+(b<<14&4294967295|b>>>18),b=y+(S^E&(P^S))+A[12]+2368359562&4294967295,y=P+(b<<20&4294967295|b>>>12),b=E+(y^P^S)+A[5]+4294588738&4294967295,E=y+(b<<4&4294967295|b>>>28),b=S+(E^y^P)+A[8]+2272392833&4294967295,S=E+(b<<11&4294967295|b>>>21),b=P+(S^E^y)+A[11]+1839030562&4294967295,P=S+(b<<16&4294967295|b>>>16),b=y+(P^S^E)+A[14]+4259657740&4294967295,y=P+(b<<23&4294967295|b>>>9),b=E+(y^P^S)+A[1]+2763975236&4294967295,E=y+(b<<4&4294967295|b>>>28),b=S+(E^y^P)+A[4]+1272893353&4294967295,S=E+(b<<11&4294967295|b>>>21),b=P+(S^E^y)+A[7]+4139469664&4294967295,P=S+(b<<16&4294967295|b>>>16),b=y+(P^S^E)+A[10]+3200236656&4294967295,y=P+(b<<23&4294967295|b>>>9),b=E+(y^P^S)+A[13]+681279174&4294967295,E=y+(b<<4&4294967295|b>>>28),b=S+(E^y^P)+A[0]+3936430074&4294967295,S=E+(b<<11&4294967295|b>>>21),b=P+(S^E^y)+A[3]+3572445317&4294967295,P=S+(b<<16&4294967295|b>>>16),b=y+(P^S^E)+A[6]+76029189&4294967295,y=P+(b<<23&4294967295|b>>>9),b=E+(y^P^S)+A[9]+3654602809&4294967295,E=y+(b<<4&4294967295|b>>>28),b=S+(E^y^P)+A[12]+3873151461&4294967295,S=E+(b<<11&4294967295|b>>>21),b=P+(S^E^y)+A[15]+530742520&4294967295,P=S+(b<<16&4294967295|b>>>16),b=y+(P^S^E)+A[2]+3299628645&4294967295,y=P+(b<<23&4294967295|b>>>9),b=E+(P^(y|~S))+A[0]+4096336452&4294967295,E=y+(b<<6&4294967295|b>>>26),b=S+(y^(E|~P))+A[7]+1126891415&4294967295,S=E+(b<<10&4294967295|b>>>22),b=P+(E^(S|~y))+A[14]+2878612391&4294967295,P=S+(b<<15&4294967295|b>>>17),b=y+(S^(P|~E))+A[5]+4237533241&4294967295,y=P+(b<<21&4294967295|b>>>11),b=E+(P^(y|~S))+A[12]+1700485571&4294967295,E=y+(b<<6&4294967295|b>>>26),b=S+(y^(E|~P))+A[3]+2399980690&4294967295,S=E+(b<<10&4294967295|b>>>22),b=P+(E^(S|~y))+A[10]+4293915773&4294967295,P=S+(b<<15&4294967295|b>>>17),b=y+(S^(P|~E))+A[1]+2240044497&4294967295,y=P+(b<<21&4294967295|b>>>11),b=E+(P^(y|~S))+A[8]+1873313359&4294967295,E=y+(b<<6&4294967295|b>>>26),b=S+(y^(E|~P))+A[15]+4264355552&4294967295,S=E+(b<<10&4294967295|b>>>22),b=P+(E^(S|~y))+A[6]+2734768916&4294967295,P=S+(b<<15&4294967295|b>>>17),b=y+(S^(P|~E))+A[13]+1309151649&4294967295,y=P+(b<<21&4294967295|b>>>11),b=E+(P^(y|~S))+A[4]+4149444226&4294967295,E=y+(b<<6&4294967295|b>>>26),b=S+(y^(E|~P))+A[11]+3174756917&4294967295,S=E+(b<<10&4294967295|b>>>22),b=P+(E^(S|~y))+A[2]+718787259&4294967295,P=S+(b<<15&4294967295|b>>>17),b=y+(S^(P|~E))+A[9]+3951481745&4294967295,v.g[0]=v.g[0]+E&4294967295,v.g[1]=v.g[1]+(P+(b<<21&4294967295|b>>>11))&4294967295,v.g[2]=v.g[2]+P&4294967295,v.g[3]=v.g[3]+S&4294967295}r.prototype.v=function(v,E){E===void 0&&(E=v.length);const y=E-this.blockSize,A=this.C;let P=this.h,S=0;for(;S<E;){if(P==0)for(;S<=y;)s(this,v,S),S+=this.blockSize;if(typeof v=="string"){for(;S<E;)if(A[P++]=v.charCodeAt(S++),P==this.blockSize){s(this,A),P=0;break}}else for(;S<E;)if(A[P++]=v[S++],P==this.blockSize){s(this,A),P=0;break}}this.h=P,this.o+=E},r.prototype.A=function(){var v=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);v[0]=128;for(var E=1;E<v.length-8;++E)v[E]=0;E=this.o*8;for(var y=v.length-8;y<v.length;++y)v[y]=E&255,E/=256;for(this.v(v),v=Array(16),E=0,y=0;y<4;++y)for(let A=0;A<32;A+=8)v[E++]=this.g[y]>>>A&255;return v};function i(v,E){var y=a;return Object.prototype.hasOwnProperty.call(y,v)?y[v]:y[v]=E(v)}function o(v,E){this.h=E;const y=[];let A=!0;for(let P=v.length-1;P>=0;P--){const S=v[P]|0;A&&S==E||(y[P]=S,A=!1)}this.g=y}var a={};function c(v){return-128<=v&&v<128?i(v,function(E){return new o([E|0],E<0?-1:0)}):new o([v|0],v<0?-1:0)}function u(v){if(isNaN(v)||!isFinite(v))return d;if(v<0)return k(u(-v));const E=[];let y=1;for(let A=0;v>=y;A++)E[A]=v/y|0,y*=4294967296;return new o(E,0)}function h(v,E){if(v.length==0)throw Error("number format error: empty string");if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(v.charAt(0)=="-")return k(h(v.substring(1),E));if(v.indexOf("-")>=0)throw Error('number format error: interior "-" character');const y=u(Math.pow(E,8));let A=d;for(let S=0;S<v.length;S+=8){var P=Math.min(8,v.length-S);const b=parseInt(v.substring(S,S+P),E);P<8?(P=u(Math.pow(E,P)),A=A.j(P).add(u(b))):(A=A.j(y),A=A.add(u(b)))}return A}var d=c(0),f=c(1),m=c(16777216);t=o.prototype,t.m=function(){if(T(this))return-k(this).m();let v=0,E=1;for(let y=0;y<this.g.length;y++){const A=this.i(y);v+=(A>=0?A:4294967296+A)*E,E*=4294967296}return v},t.toString=function(v){if(v=v||10,v<2||36<v)throw Error("radix out of range: "+v);if(I(this))return"0";if(T(this))return"-"+k(this).toString(v);const E=u(Math.pow(v,6));var y=this;let A="";for(;;){const P=C(y,E).g;y=V(y,P.j(E));let S=((y.g.length>0?y.g[0]:y.h)>>>0).toString(v);if(y=P,I(y))return S+A;for(;S.length<6;)S="0"+S;A=S+A}},t.i=function(v){return v<0?0:v<this.g.length?this.g[v]:this.h};function I(v){if(v.h!=0)return!1;for(let E=0;E<v.g.length;E++)if(v.g[E]!=0)return!1;return!0}function T(v){return v.h==-1}t.l=function(v){return v=V(this,v),T(v)?-1:I(v)?0:1};function k(v){const E=v.g.length,y=[];for(let A=0;A<E;A++)y[A]=~v.g[A];return new o(y,~v.h).add(f)}t.abs=function(){return T(this)?k(this):this},t.add=function(v){const E=Math.max(this.g.length,v.g.length),y=[];let A=0;for(let P=0;P<=E;P++){let S=A+(this.i(P)&65535)+(v.i(P)&65535),b=(S>>>16)+(this.i(P)>>>16)+(v.i(P)>>>16);A=b>>>16,S&=65535,b&=65535,y[P]=b<<16|S}return new o(y,y[y.length-1]&-2147483648?-1:0)};function V(v,E){return v.add(k(E))}t.j=function(v){if(I(this)||I(v))return d;if(T(this))return T(v)?k(this).j(k(v)):k(k(this).j(v));if(T(v))return k(this.j(k(v)));if(this.l(m)<0&&v.l(m)<0)return u(this.m()*v.m());const E=this.g.length+v.g.length,y=[];for(var A=0;A<2*E;A++)y[A]=0;for(A=0;A<this.g.length;A++)for(let P=0;P<v.g.length;P++){const S=this.i(A)>>>16,b=this.i(A)&65535,ge=v.i(P)>>>16,Ae=v.i(P)&65535;y[2*A+2*P]+=b*Ae,N(y,2*A+2*P),y[2*A+2*P+1]+=S*Ae,N(y,2*A+2*P+1),y[2*A+2*P+1]+=b*ge,N(y,2*A+2*P+1),y[2*A+2*P+2]+=S*ge,N(y,2*A+2*P+2)}for(v=0;v<E;v++)y[v]=y[2*v+1]<<16|y[2*v];for(v=E;v<2*E;v++)y[v]=0;return new o(y,0)};function N(v,E){for(;(v[E]&65535)!=v[E];)v[E+1]+=v[E]>>>16,v[E]&=65535,E++}function _(v,E){this.g=v,this.h=E}function C(v,E){if(I(E))throw Error("division by zero");if(I(v))return new _(d,d);if(T(v))return E=C(k(v),E),new _(k(E.g),k(E.h));if(T(E))return E=C(v,k(E)),new _(k(E.g),E.h);if(v.g.length>30){if(T(v)||T(E))throw Error("slowDivide_ only works with positive integers.");for(var y=f,A=E;A.l(v)<=0;)y=x(y),A=x(A);var P=U(y,1),S=U(A,1);for(A=U(A,2),y=U(y,2);!I(A);){var b=S.add(A);b.l(v)<=0&&(P=P.add(y),S=b),A=U(A,1),y=U(y,1)}return E=V(v,P.j(E)),new _(P,E)}for(P=d;v.l(E)>=0;){for(y=Math.max(1,Math.floor(v.m()/E.m())),A=Math.ceil(Math.log(y)/Math.LN2),A=A<=48?1:Math.pow(2,A-48),S=u(y),b=S.j(E);T(b)||b.l(v)>0;)y-=A,S=u(y),b=S.j(E);I(S)&&(S=f),P=P.add(S),v=V(v,b)}return new _(P,v)}t.B=function(v){return C(this,v).h},t.and=function(v){const E=Math.max(this.g.length,v.g.length),y=[];for(let A=0;A<E;A++)y[A]=this.i(A)&v.i(A);return new o(y,this.h&v.h)},t.or=function(v){const E=Math.max(this.g.length,v.g.length),y=[];for(let A=0;A<E;A++)y[A]=this.i(A)|v.i(A);return new o(y,this.h|v.h)},t.xor=function(v){const E=Math.max(this.g.length,v.g.length),y=[];for(let A=0;A<E;A++)y[A]=this.i(A)^v.i(A);return new o(y,this.h^v.h)};function x(v){const E=v.g.length+1,y=[];for(let A=0;A<E;A++)y[A]=v.i(A)<<1|v.i(A-1)>>>31;return new o(y,v.h)}function U(v,E){const y=E>>5;E%=32;const A=v.g.length-y,P=[];for(let S=0;S<A;S++)P[S]=E>0?v.i(S+y)>>>E|v.i(S+y+1)<<32-E:v.i(S+y);return new o(P,v.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Ab=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,Ps=o}).apply(typeof rE<"u"?rE:typeof self<"u"?self:typeof window<"u"?window:{});var hu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var bb,mc,Rb,Pu,wp,Sb,Pb,Cb;(function(){var t,e=Object.defineProperty;function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof hu=="object"&&hu];for(var p=0;p<l.length;++p){var g=l[p];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function s(l,p){if(p)e:{var g=r;l=l.split(".");for(var w=0;w<l.length-1;w++){var L=l[w];if(!(L in g))break e;g=g[L]}l=l[l.length-1],w=g[l],p=p(w),p!=w&&p!=null&&e(g,l,{configurable:!0,writable:!0,value:p})}}s("Symbol.dispose",function(l){return l||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(l){return l||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(l){return l||function(p){var g=[],w;for(w in p)Object.prototype.hasOwnProperty.call(p,w)&&g.push([w,p[w]]);return g}});var i=i||{},o=this||self;function a(l){var p=typeof l;return p=="object"&&l!=null||p=="function"}function c(l,p,g){return l.call.apply(l.bind,arguments)}function u(l,p,g){return u=c,u.apply(null,arguments)}function h(l,p){var g=Array.prototype.slice.call(arguments,1);return function(){var w=g.slice();return w.push.apply(w,arguments),l.apply(this,w)}}function d(l,p){function g(){}g.prototype=p.prototype,l.Z=p.prototype,l.prototype=new g,l.prototype.constructor=l,l.Ob=function(w,L,B){for(var ee=Array(arguments.length-2),we=2;we<arguments.length;we++)ee[we-2]=arguments[we];return p.prototype[L].apply(w,ee)}}var f=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?l=>l&&AsyncContext.Snapshot.wrap(l):l=>l;function m(l){const p=l.length;if(p>0){const g=Array(p);for(let w=0;w<p;w++)g[w]=l[w];return g}return[]}function I(l,p){for(let w=1;w<arguments.length;w++){const L=arguments[w];var g=typeof L;if(g=g!="object"?g:L?Array.isArray(L)?"array":g:"null",g=="array"||g=="object"&&typeof L.length=="number"){g=l.length||0;const B=L.length||0;l.length=g+B;for(let ee=0;ee<B;ee++)l[g+ee]=L[ee]}else l.push(L)}}class T{constructor(p,g){this.i=p,this.j=g,this.h=0,this.g=null}get(){let p;return this.h>0?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function k(l){o.setTimeout(()=>{throw l},0)}function V(){var l=v;let p=null;return l.g&&(p=l.g,l.g=l.g.next,l.g||(l.h=null),p.next=null),p}class N{constructor(){this.h=this.g=null}add(p,g){const w=_.get();w.set(p,g),this.h?this.h.next=w:this.g=w,this.h=w}}var _=new T(()=>new C,l=>l.reset());class C{constructor(){this.next=this.g=this.h=null}set(p,g){this.h=p,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let x,U=!1,v=new N,E=()=>{const l=Promise.resolve(void 0);x=()=>{l.then(y)}};function y(){for(var l;l=V();){try{l.h.call(l.g)}catch(g){k(g)}var p=_;p.j(l),p.h<100&&(p.h++,l.next=p.g,p.g=l)}U=!1}function A(){this.u=this.u,this.C=this.C}A.prototype.u=!1,A.prototype.dispose=function(){this.u||(this.u=!0,this.N())},A.prototype[Symbol.dispose]=function(){this.dispose()},A.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function P(l,p){this.type=l,this.g=this.target=p,this.defaultPrevented=!1}P.prototype.h=function(){this.defaultPrevented=!0};var S=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var l=!1,p=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const g=()=>{};o.addEventListener("test",g,p),o.removeEventListener("test",g,p)}catch{}return l})();function b(l){return/^[\s\xa0]*$/.test(l)}function ge(l,p){P.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l&&this.init(l,p)}d(ge,P),ge.prototype.init=function(l,p){const g=this.type=l.type,w=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;this.target=l.target||l.srcElement,this.g=p,p=l.relatedTarget,p||(g=="mouseover"?p=l.fromElement:g=="mouseout"&&(p=l.toElement)),this.relatedTarget=p,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=l.pointerType,this.state=l.state,this.i=l,l.defaultPrevented&&ge.Z.h.call(this)},ge.prototype.h=function(){ge.Z.h.call(this);const l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Ae="closure_listenable_"+(Math.random()*1e6|0),se=0;function le(l,p,g,w,L){this.listener=l,this.proxy=null,this.src=p,this.type=g,this.capture=!!w,this.ha=L,this.key=++se,this.da=this.fa=!1}function ie(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function xe(l,p,g){for(const w in l)p.call(g,l[w],w,l)}function Wn(l,p){for(const g in l)p.call(void 0,l[g],g,l)}function pn(l){const p={};for(const g in l)p[g]=l[g];return p}const Mt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function dr(l,p){let g,w;for(let L=1;L<arguments.length;L++){w=arguments[L];for(g in w)l[g]=w[g];for(let B=0;B<Mt.length;B++)g=Mt[B],Object.prototype.hasOwnProperty.call(w,g)&&(l[g]=w[g])}}function Vn(l){this.src=l,this.g={},this.h=0}Vn.prototype.add=function(l,p,g,w,L){const B=l.toString();l=this.g[B],l||(l=this.g[B]=[],this.h++);const ee=Bt(l,p,w,L);return ee>-1?(p=l[ee],g||(p.fa=!1)):(p=new le(p,this.src,B,!!w,L),p.fa=g,l.push(p)),p};function xn(l,p){const g=p.type;if(g in l.g){var w=l.g[g],L=Array.prototype.indexOf.call(w,p,void 0),B;(B=L>=0)&&Array.prototype.splice.call(w,L,1),B&&(ie(p),l.g[g].length==0&&(delete l.g[g],l.h--))}}function Bt(l,p,g,w){for(let L=0;L<l.length;++L){const B=l[L];if(!B.da&&B.listener==p&&B.capture==!!g&&B.ha==w)return L}return-1}var H="closure_lm_"+(Math.random()*1e6|0),oe={};function te(l,p,g,w,L){if(Array.isArray(p)){for(let B=0;B<p.length;B++)te(l,p[B],g,w,L);return null}return g=K(g),l&&l[Ae]?l.J(p,g,a(w)?!!w.capture:!1,L):de(l,p,g,!1,w,L)}function de(l,p,g,w,L,B){if(!p)throw Error("Invalid event type");const ee=a(L)?!!L.capture:!!L;let we=$(l);if(we||(l[H]=we=new Vn(l)),g=we.add(p,g,w,ee,B),g.proxy)return g;if(w=ve(),g.proxy=w,w.src=l,w.listener=g,l.addEventListener)S||(L=ee),L===void 0&&(L=!1),l.addEventListener(p.toString(),w,L);else if(l.attachEvent)l.attachEvent(D(p.toString()),w);else if(l.addListener&&l.removeListener)l.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return g}function ve(){function l(g){return p.call(l.src,l.listener,g)}const p=F;return l}function $e(l,p,g,w,L){if(Array.isArray(p))for(var B=0;B<p.length;B++)$e(l,p[B],g,w,L);else w=a(w)?!!w.capture:!!w,g=K(g),l&&l[Ae]?(l=l.i,B=String(p).toString(),B in l.g&&(p=l.g[B],g=Bt(p,g,w,L),g>-1&&(ie(p[g]),Array.prototype.splice.call(p,g,1),p.length==0&&(delete l.g[B],l.h--)))):l&&(l=$(l))&&(p=l.g[p.toString()],l=-1,p&&(l=Bt(p,g,w,L)),(g=l>-1?p[l]:null)&&R(g))}function R(l){if(typeof l!="number"&&l&&!l.da){var p=l.src;if(p&&p[Ae])xn(p.i,l);else{var g=l.type,w=l.proxy;p.removeEventListener?p.removeEventListener(g,w,l.capture):p.detachEvent?p.detachEvent(D(g),w):p.addListener&&p.removeListener&&p.removeListener(w),(g=$(p))?(xn(g,l),g.h==0&&(g.src=null,p[H]=null)):ie(l)}}}function D(l){return l in oe?oe[l]:oe[l]="on"+l}function F(l,p){if(l.da)l=!0;else{p=new ge(p,this);const g=l.listener,w=l.ha||l.src;l.fa&&R(l),l=g.call(w,p)}return l}function $(l){return l=l[H],l instanceof Vn?l:null}var j="__closure_events_fn_"+(Math.random()*1e9>>>0);function K(l){return typeof l=="function"?l:(l[j]||(l[j]=function(p){return l.handleEvent(p)}),l[j])}function J(){A.call(this),this.i=new Vn(this),this.M=this,this.G=null}d(J,A),J.prototype[Ae]=!0,J.prototype.removeEventListener=function(l,p,g,w){$e(this,l,p,g,w)};function z(l,p){var g,w=l.G;if(w)for(g=[];w;w=w.G)g.push(w);if(l=l.M,w=p.type||p,typeof p=="string")p=new P(p,l);else if(p instanceof P)p.target=p.target||l;else{var L=p;p=new P(w,l),dr(p,L)}L=!0;let B,ee;if(g)for(ee=g.length-1;ee>=0;ee--)B=p.g=g[ee],L=Y(B,w,!0,p)&&L;if(B=p.g=l,L=Y(B,w,!0,p)&&L,L=Y(B,w,!1,p)&&L,g)for(ee=0;ee<g.length;ee++)B=p.g=g[ee],L=Y(B,w,!1,p)&&L}J.prototype.N=function(){if(J.Z.N.call(this),this.i){var l=this.i;for(const p in l.g){const g=l.g[p];for(let w=0;w<g.length;w++)ie(g[w]);delete l.g[p],l.h--}}this.G=null},J.prototype.J=function(l,p,g,w){return this.i.add(String(l),p,!1,g,w)},J.prototype.K=function(l,p,g,w){return this.i.add(String(l),p,!0,g,w)};function Y(l,p,g,w){if(p=l.i.g[String(p)],!p)return!0;p=p.concat();let L=!0;for(let B=0;B<p.length;++B){const ee=p[B];if(ee&&!ee.da&&ee.capture==g){const we=ee.listener,vt=ee.ha||ee.src;ee.fa&&xn(l.i,ee),L=we.call(vt,w)!==!1&&L}}return L&&!w.defaultPrevented}function W(l,p){if(typeof l!="function")if(l&&typeof l.handleEvent=="function")l=u(l.handleEvent,l);else throw Error("Invalid listener argument");return Number(p)>2147483647?-1:o.setTimeout(l,p||0)}function pe(l){l.g=W(()=>{l.g=null,l.i&&(l.i=!1,pe(l))},l.l);const p=l.h;l.h=null,l.m.apply(null,p)}class ne extends A{constructor(p,g){super(),this.m=p,this.l=g,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:pe(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ce(l){A.call(this),this.h=l,this.g={}}d(ce,A);var Ee=[];function Se(l){xe(l.g,function(p,g){this.g.hasOwnProperty(g)&&R(p)},l),l.g={}}ce.prototype.N=function(){ce.Z.N.call(this),Se(this)},ce.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Oe=o.JSON.stringify,Ve=o.JSON.parse,jt=class{stringify(l){return o.JSON.stringify(l,void 0)}parse(l){return o.JSON.parse(l,void 0)}};function Tt(){}function nn(){}var wt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function fr(){P.call(this,"d")}d(fr,P);function eo(){P.call(this,"c")}d(eo,P);var dt={},mn=null;function Ys(){return mn=mn||new J}dt.Ia="serverreachability";function Ma(l){P.call(this,dt.Ia,l)}d(Ma,P);function Fa(l){const p=Ys();z(p,new Ma(p))}dt.STAT_EVENT="statevent";function l_(l,p){P.call(this,dt.STAT_EVENT,l),this.stat=p}d(l_,P);function Jt(l){const p=Ys();z(p,new l_(p,l))}dt.Ja="timingevent";function u_(l,p){P.call(this,dt.Ja,l),this.size=p}d(u_,P);function Ua(l,p){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){l()},p)}function Ba(){this.g=!0}Ba.prototype.ua=function(){this.g=!1};function AP(l,p,g,w,L,B){l.info(function(){if(l.g)if(B){var ee="",we=B.split("&");for(let Ge=0;Ge<we.length;Ge++){var vt=we[Ge].split("=");if(vt.length>1){const Ct=vt[0];vt=vt[1];const Qn=Ct.split("_");ee=Qn.length>=2&&Qn[1]=="type"?ee+(Ct+"="+vt+"&"):ee+(Ct+"=redacted&")}}}else ee=null;else ee=B;return"XMLHTTP REQ ("+w+") [attempt "+L+"]: "+p+`
`+g+`
`+ee})}function bP(l,p,g,w,L,B,ee){l.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+L+"]: "+p+`
`+g+`
`+B+" "+ee})}function to(l,p,g,w){l.info(function(){return"XMLHTTP TEXT ("+p+"): "+SP(l,g)+(w?" "+w:"")})}function RP(l,p){l.info(function(){return"TIMEOUT: "+p})}Ba.prototype.info=function(){};function SP(l,p){if(!l.g)return p;if(!p)return null;try{const B=JSON.parse(p);if(B){for(l=0;l<B.length;l++)if(Array.isArray(B[l])){var g=B[l];if(!(g.length<2)){var w=g[1];if(Array.isArray(w)&&!(w.length<1)){var L=w[0];if(L!="noop"&&L!="stop"&&L!="close")for(let ee=1;ee<w.length;ee++)w[ee]=""}}}}return Oe(B)}catch{return p}}var Ul={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},h_={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},d_;function Cd(){}d(Cd,Tt),Cd.prototype.g=function(){return new XMLHttpRequest},d_=new Cd;function ja(l){return encodeURIComponent(String(l))}function PP(l){var p=1;l=l.split(":");const g=[];for(;p>0&&l.length;)g.push(l.shift()),p--;return l.length&&g.push(l.join(":")),g}function Jr(l,p,g,w){this.j=l,this.i=p,this.l=g,this.S=w||1,this.V=new ce(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new f_}function f_(){this.i=null,this.g="",this.h=!1}var p_={},kd={};function Nd(l,p,g){l.M=1,l.A=jl(zn(p)),l.u=g,l.R=!0,m_(l,null)}function m_(l,p){l.F=Date.now(),Bl(l),l.B=zn(l.A);var g=l.B,w=l.S;Array.isArray(w)||(w=[String(w)]),P_(g.i,"t",w),l.C=0,g=l.j.L,l.h=new f_,l.g=K_(l.j,g?p:null,!l.u),l.P>0&&(l.O=new ne(u(l.Y,l,l.g),l.P)),p=l.V,g=l.g,w=l.ba;var L="readystatechange";Array.isArray(L)||(L&&(Ee[0]=L.toString()),L=Ee);for(let B=0;B<L.length;B++){const ee=te(g,L[B],w||p.handleEvent,!1,p.h||p);if(!ee)break;p.g[ee.key]=ee}p=l.J?pn(l.J):{},l.u?(l.v||(l.v="POST"),p["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.B,l.v,l.u,p)):(l.v="GET",l.g.ea(l.B,l.v,null,p)),Fa(),AP(l.i,l.v,l.B,l.l,l.S,l.u)}Jr.prototype.ba=function(l){l=l.target;const p=this.O;p&&Zr(l)==3?p.j():this.Y(l)},Jr.prototype.Y=function(l){try{if(l==this.g)e:{const we=Zr(this.g),vt=this.g.ya(),Ge=this.g.ca();if(!(we<3)&&(we!=3||this.g&&(this.h.h||this.g.la()||O_(this.g)))){this.K||we!=4||vt==7||(vt==8||Ge<=0?Fa(3):Fa(2)),Dd(this);var p=this.g.ca();this.X=p;var g=CP(this);if(this.o=p==200,bP(this.i,this.v,this.B,this.l,this.S,we,p),this.o){if(this.U&&!this.L){t:{if(this.g){var w,L=this.g;if((w=L.g?L.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!b(w)){var B=w;break t}}B=null}if(l=B)to(this.i,this.l,l,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Vd(this,l);else{this.o=!1,this.m=3,Jt(12),Xs(this),qa(this);break e}}if(this.R){l=!0;let Ct;for(;!this.K&&this.C<g.length;)if(Ct=kP(this,g),Ct==kd){we==4&&(this.m=4,Jt(14),l=!1),to(this.i,this.l,null,"[Incomplete Response]");break}else if(Ct==p_){this.m=4,Jt(15),to(this.i,this.l,g,"[Invalid Chunk]"),l=!1;break}else to(this.i,this.l,Ct,null),Vd(this,Ct);if(g_(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),we!=4||g.length!=0||this.h.h||(this.m=1,Jt(16),l=!1),this.o=this.o&&l,!l)to(this.i,this.l,g,"[Invalid Chunked Response]"),Xs(this),qa(this);else if(g.length>0&&!this.W){this.W=!0;var ee=this.j;ee.g==this&&ee.aa&&!ee.P&&(ee.j.info("Great, no buffering proxy detected. Bytes received: "+g.length),jd(ee),ee.P=!0,Jt(11))}}else to(this.i,this.l,g,null),Vd(this,g);we==4&&Xs(this),this.o&&!this.K&&(we==4?q_(this.j,this):(this.o=!1,Bl(this)))}else $P(this.g),p==400&&g.indexOf("Unknown SID")>0?(this.m=3,Jt(12)):(this.m=0,Jt(13)),Xs(this),qa(this)}}}catch{}};function CP(l){if(!g_(l))return l.g.la();const p=O_(l.g);if(p==="")return"";let g="";const w=p.length,L=Zr(l.g)==4;if(!l.h.i){if(typeof TextDecoder>"u")return Xs(l),qa(l),"";l.h.i=new o.TextDecoder}for(let B=0;B<w;B++)l.h.h=!0,g+=l.h.i.decode(p[B],{stream:!(L&&B==w-1)});return p.length=0,l.h.g+=g,l.C=0,l.h.g}function g_(l){return l.g?l.v=="GET"&&l.M!=2&&l.j.Aa:!1}function kP(l,p){var g=l.C,w=p.indexOf(`
`,g);return w==-1?kd:(g=Number(p.substring(g,w)),isNaN(g)?p_:(w+=1,w+g>p.length?kd:(p=p.slice(w,w+g),l.C=w+g,p)))}Jr.prototype.cancel=function(){this.K=!0,Xs(this)};function Bl(l){l.T=Date.now()+l.H,__(l,l.H)}function __(l,p){if(l.D!=null)throw Error("WatchDog timer not null");l.D=Ua(u(l.aa,l),p)}function Dd(l){l.D&&(o.clearTimeout(l.D),l.D=null)}Jr.prototype.aa=function(){this.D=null;const l=Date.now();l-this.T>=0?(RP(this.i,this.B),this.M!=2&&(Fa(),Jt(17)),Xs(this),this.m=2,qa(this)):__(this,this.T-l)};function qa(l){l.j.I==0||l.K||q_(l.j,l)}function Xs(l){Dd(l);var p=l.O;p&&typeof p.dispose=="function"&&p.dispose(),l.O=null,Se(l.V),l.g&&(p=l.g,l.g=null,p.abort(),p.dispose())}function Vd(l,p){try{var g=l.j;if(g.I!=0&&(g.g==l||xd(g.h,l))){if(!l.L&&xd(g.h,l)&&g.I==3){try{var w=g.Ba.g.parse(p)}catch{w=null}if(Array.isArray(w)&&w.length==3){var L=w;if(L[0]==0){e:if(!g.v){if(g.g)if(g.g.F+3e3<l.F)Kl(g),$l(g);else break e;Bd(g),Jt(18)}}else g.xa=L[1],0<g.xa-g.K&&L[2]<37500&&g.F&&g.A==0&&!g.C&&(g.C=Ua(u(g.Va,g),6e3));E_(g.h)<=1&&g.ta&&(g.ta=void 0)}else ei(g,11)}else if((l.L||g.g==l)&&Kl(g),!b(p))for(L=g.Ba.g.parse(p),p=0;p<L.length;p++){let Ge=L[p];const Ct=Ge[0];if(!(Ct<=g.K))if(g.K=Ct,Ge=Ge[1],g.I==2)if(Ge[0]=="c"){g.M=Ge[1],g.ba=Ge[2];const Qn=Ge[3];Qn!=null&&(g.ka=Qn,g.j.info("VER="+g.ka));const ti=Ge[4];ti!=null&&(g.za=ti,g.j.info("SVER="+g.za));const es=Ge[5];es!=null&&typeof es=="number"&&es>0&&(w=1.5*es,g.O=w,g.j.info("backChannelRequestTimeoutMs_="+w)),w=g;const ts=l.g;if(ts){const zl=ts.g?ts.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(zl){var B=w.h;B.g||zl.indexOf("spdy")==-1&&zl.indexOf("quic")==-1&&zl.indexOf("h2")==-1||(B.j=B.l,B.g=new Set,B.h&&(Od(B,B.h),B.h=null))}if(w.G){const qd=ts.g?ts.g.getResponseHeader("X-HTTP-Session-Id"):null;qd&&(w.wa=qd,Je(w.J,w.G,qd))}}g.I=3,g.l&&g.l.ra(),g.aa&&(g.T=Date.now()-l.F,g.j.info("Handshake RTT: "+g.T+"ms")),w=g;var ee=l;if(w.na=G_(w,w.L?w.ba:null,w.W),ee.L){T_(w.h,ee);var we=ee,vt=w.O;vt&&(we.H=vt),we.D&&(Dd(we),Bl(we)),w.g=ee}else B_(w);g.i.length>0&&Gl(g)}else Ge[0]!="stop"&&Ge[0]!="close"||ei(g,7);else g.I==3&&(Ge[0]=="stop"||Ge[0]=="close"?Ge[0]=="stop"?ei(g,7):Ud(g):Ge[0]!="noop"&&g.l&&g.l.qa(Ge),g.A=0)}}Fa(4)}catch{}}var NP=class{constructor(l,p){this.g=l,this.map=p}};function y_(l){this.l=l||10,o.PerformanceNavigationTiming?(l=o.performance.getEntriesByType("navigation"),l=l.length>0&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function I_(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function E_(l){return l.h?1:l.g?l.g.size:0}function xd(l,p){return l.h?l.h==p:l.g?l.g.has(p):!1}function Od(l,p){l.g?l.g.add(p):l.h=p}function T_(l,p){l.h&&l.h==p?l.h=null:l.g&&l.g.has(p)&&l.g.delete(p)}y_.prototype.cancel=function(){if(this.i=w_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function w_(l){if(l.h!=null)return l.i.concat(l.h.G);if(l.g!=null&&l.g.size!==0){let p=l.i;for(const g of l.g.values())p=p.concat(g.G);return p}return m(l.i)}var v_=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function DP(l,p){if(l){l=l.split("&");for(let g=0;g<l.length;g++){const w=l[g].indexOf("=");let L,B=null;w>=0?(L=l[g].substring(0,w),B=l[g].substring(w+1)):L=l[g],p(L,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function Yr(l){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let p;l instanceof Yr?(this.l=l.l,Ha(this,l.j),this.o=l.o,this.g=l.g,$a(this,l.u),this.h=l.h,Ld(this,C_(l.i)),this.m=l.m):l&&(p=String(l).match(v_))?(this.l=!1,Ha(this,p[1]||"",!0),this.o=Ga(p[2]||""),this.g=Ga(p[3]||"",!0),$a(this,p[4]),this.h=Ga(p[5]||"",!0),Ld(this,p[6]||"",!0),this.m=Ga(p[7]||"")):(this.l=!1,this.i=new Wa(null,this.l))}Yr.prototype.toString=function(){const l=[];var p=this.j;p&&l.push(Ka(p,A_,!0),":");var g=this.g;return(g||p=="file")&&(l.push("//"),(p=this.o)&&l.push(Ka(p,A_,!0),"@"),l.push(ja(g).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.u,g!=null&&l.push(":",String(g))),(g=this.h)&&(this.g&&g.charAt(0)!="/"&&l.push("/"),l.push(Ka(g,g.charAt(0)=="/"?OP:xP,!0))),(g=this.i.toString())&&l.push("?",g),(g=this.m)&&l.push("#",Ka(g,MP)),l.join("")},Yr.prototype.resolve=function(l){const p=zn(this);let g=!!l.j;g?Ha(p,l.j):g=!!l.o,g?p.o=l.o:g=!!l.g,g?p.g=l.g:g=l.u!=null;var w=l.h;if(g)$a(p,l.u);else if(g=!!l.h){if(w.charAt(0)!="/")if(this.g&&!this.h)w="/"+w;else{var L=p.h.lastIndexOf("/");L!=-1&&(w=p.h.slice(0,L+1)+w)}if(L=w,L==".."||L==".")w="";else if(L.indexOf("./")!=-1||L.indexOf("/.")!=-1){w=L.lastIndexOf("/",0)==0,L=L.split("/");const B=[];for(let ee=0;ee<L.length;){const we=L[ee++];we=="."?w&&ee==L.length&&B.push(""):we==".."?((B.length>1||B.length==1&&B[0]!="")&&B.pop(),w&&ee==L.length&&B.push("")):(B.push(we),w=!0)}w=B.join("/")}else w=L}return g?p.h=w:g=l.i.toString()!=="",g?Ld(p,C_(l.i)):g=!!l.m,g&&(p.m=l.m),p};function zn(l){return new Yr(l)}function Ha(l,p,g){l.j=g?Ga(p,!0):p,l.j&&(l.j=l.j.replace(/:$/,""))}function $a(l,p){if(p){if(p=Number(p),isNaN(p)||p<0)throw Error("Bad port number "+p);l.u=p}else l.u=null}function Ld(l,p,g){p instanceof Wa?(l.i=p,FP(l.i,l.l)):(g||(p=Ka(p,LP)),l.i=new Wa(p,l.l))}function Je(l,p,g){l.i.set(p,g)}function jl(l){return Je(l,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),l}function Ga(l,p){return l?p?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Ka(l,p,g){return typeof l=="string"?(l=encodeURI(l).replace(p,VP),g&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function VP(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var A_=/[#\/\?@]/g,xP=/[#\?:]/g,OP=/[#\?]/g,LP=/[#\?@]/g,MP=/#/g;function Wa(l,p){this.h=this.g=null,this.i=l||null,this.j=!!p}function Zs(l){l.g||(l.g=new Map,l.h=0,l.i&&DP(l.i,function(p,g){l.add(decodeURIComponent(p.replace(/\+/g," ")),g)}))}t=Wa.prototype,t.add=function(l,p){Zs(this),this.i=null,l=no(this,l);let g=this.g.get(l);return g||this.g.set(l,g=[]),g.push(p),this.h+=1,this};function b_(l,p){Zs(l),p=no(l,p),l.g.has(p)&&(l.i=null,l.h-=l.g.get(p).length,l.g.delete(p))}function R_(l,p){return Zs(l),p=no(l,p),l.g.has(p)}t.forEach=function(l,p){Zs(this),this.g.forEach(function(g,w){g.forEach(function(L){l.call(p,L,w,this)},this)},this)};function S_(l,p){Zs(l);let g=[];if(typeof p=="string")R_(l,p)&&(g=g.concat(l.g.get(no(l,p))));else for(l=Array.from(l.g.values()),p=0;p<l.length;p++)g=g.concat(l[p]);return g}t.set=function(l,p){return Zs(this),this.i=null,l=no(this,l),R_(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[p]),this.h+=1,this},t.get=function(l,p){return l?(l=S_(this,l),l.length>0?String(l[0]):p):p};function P_(l,p,g){b_(l,p),g.length>0&&(l.i=null,l.g.set(no(l,p),m(g)),l.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],p=Array.from(this.g.keys());for(let w=0;w<p.length;w++){var g=p[w];const L=ja(g);g=S_(this,g);for(let B=0;B<g.length;B++){let ee=L;g[B]!==""&&(ee+="="+ja(g[B])),l.push(ee)}}return this.i=l.join("&")};function C_(l){const p=new Wa;return p.i=l.i,l.g&&(p.g=new Map(l.g),p.h=l.h),p}function no(l,p){return p=String(p),l.j&&(p=p.toLowerCase()),p}function FP(l,p){p&&!l.j&&(Zs(l),l.i=null,l.g.forEach(function(g,w){const L=w.toLowerCase();w!=L&&(b_(this,w),P_(this,L,g))},l)),l.j=p}function UP(l,p){const g=new Ba;if(o.Image){const w=new Image;w.onload=h(Xr,g,"TestLoadImage: loaded",!0,p,w),w.onerror=h(Xr,g,"TestLoadImage: error",!1,p,w),w.onabort=h(Xr,g,"TestLoadImage: abort",!1,p,w),w.ontimeout=h(Xr,g,"TestLoadImage: timeout",!1,p,w),o.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=l}else p(!1)}function BP(l,p){const g=new Ba,w=new AbortController,L=setTimeout(()=>{w.abort(),Xr(g,"TestPingServer: timeout",!1,p)},1e4);fetch(l,{signal:w.signal}).then(B=>{clearTimeout(L),B.ok?Xr(g,"TestPingServer: ok",!0,p):Xr(g,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(L),Xr(g,"TestPingServer: error",!1,p)})}function Xr(l,p,g,w,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),w(g)}catch{}}function jP(){this.g=new jt}function Md(l){this.i=l.Sb||null,this.h=l.ab||!1}d(Md,Tt),Md.prototype.g=function(){return new ql(this.i,this.h)};function ql(l,p){J.call(this),this.H=l,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}d(ql,J),t=ql.prototype,t.open=function(l,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=l,this.D=p,this.readyState=1,Qa(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const p={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};l&&(p.body=l),(this.H||o).fetch(new Request(this.D,p)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,za(this)),this.readyState=0},t.Pa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Qa(this)),this.g&&(this.readyState=3,Qa(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;k_(this)}else l.text().then(this.Oa.bind(this),this.ga.bind(this))};function k_(l){l.j.read().then(l.Ma.bind(l)).catch(l.ga.bind(l))}t.Ma=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var p=l.value?l.value:new Uint8Array(0);(p=this.B.decode(p,{stream:!l.done}))&&(this.response=this.responseText+=p)}l.done?za(this):Qa(this),this.readyState==3&&k_(this)}},t.Oa=function(l){this.g&&(this.response=this.responseText=l,za(this))},t.Na=function(l){this.g&&(this.response=l,za(this))},t.ga=function(){this.g&&za(this)};function za(l){l.readyState=4,l.l=null,l.j=null,l.B=null,Qa(l)}t.setRequestHeader=function(l,p){this.A.append(l,p)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],p=this.h.entries();for(var g=p.next();!g.done;)g=g.value,l.push(g[0]+": "+g[1]),g=p.next();return l.join(`\r
`)};function Qa(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(ql.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function N_(l){let p="";return xe(l,function(g,w){p+=w,p+=":",p+=g,p+=`\r
`}),p}function Fd(l,p,g){e:{for(w in g){var w=!1;break e}w=!0}w||(g=N_(g),typeof l=="string"?g!=null&&ja(g):Je(l,p,g))}function lt(l){J.call(this),this.headers=new Map,this.L=l||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}d(lt,J);var qP=/^https?$/i,HP=["POST","PUT"];t=lt.prototype,t.Fa=function(l){this.H=l},t.ea=function(l,p,g,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);p=p?p.toUpperCase():"GET",this.D=l,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():d_.g(),this.g.onreadystatechange=f(u(this.Ca,this));try{this.B=!0,this.g.open(p,String(l),!0),this.B=!1}catch(B){D_(this,B);return}if(l=g||"",g=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var L in w)g.set(L,w[L]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const B of w.keys())g.set(B,w.get(B));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(g.keys()).find(B=>B.toLowerCase()=="content-type"),L=o.FormData&&l instanceof o.FormData,!(Array.prototype.indexOf.call(HP,p,void 0)>=0)||w||L||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[B,ee]of g)this.g.setRequestHeader(B,ee);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(l),this.v=!1}catch(B){D_(this,B)}};function D_(l,p){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=p,l.o=5,V_(l),Hl(l)}function V_(l){l.A||(l.A=!0,z(l,"complete"),z(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=l||7,z(this,"complete"),z(this,"abort"),Hl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Hl(this,!0)),lt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?x_(this):this.Xa())},t.Xa=function(){x_(this)};function x_(l){if(l.h&&typeof i<"u"){if(l.v&&Zr(l)==4)setTimeout(l.Ca.bind(l),0);else if(z(l,"readystatechange"),Zr(l)==4){l.h=!1;try{const B=l.ca();e:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var g;if(!(g=p)){var w;if(w=B===0){let ee=String(l.D).match(v_)[1]||null;!ee&&o.self&&o.self.location&&(ee=o.self.location.protocol.slice(0,-1)),w=!qP.test(ee?ee.toLowerCase():"")}g=w}if(g)z(l,"complete"),z(l,"success");else{l.o=6;try{var L=Zr(l)>2?l.g.statusText:""}catch{L=""}l.l=L+" ["+l.ca()+"]",V_(l)}}finally{Hl(l)}}}}function Hl(l,p){if(l.g){l.m&&(clearTimeout(l.m),l.m=null);const g=l.g;l.g=null,p||z(l,"ready");try{g.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Zr(l){return l.g?l.g.readyState:0}t.ca=function(){try{return Zr(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(l){if(this.g){var p=this.g.responseText;return l&&p.indexOf(l)==0&&(p=p.substring(l.length)),Ve(p)}};function O_(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.F){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function $P(l){const p={};l=(l.g&&Zr(l)>=2&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<l.length;w++){if(b(l[w]))continue;var g=PP(l[w]);const L=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const B=p[L]||[];p[L]=B,B.push(g)}Wn(p,function(w){return w.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ja(l,p,g){return g&&g.internalChannelParams&&g.internalChannelParams[l]||p}function L_(l){this.za=0,this.i=[],this.j=new Ba,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ja("failFast",!1,l),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ja("baseRetryDelayMs",5e3,l),this.Za=Ja("retryDelaySeedMs",1e4,l),this.Ta=Ja("forwardChannelMaxRetries",2,l),this.va=Ja("forwardChannelRequestTimeoutMs",2e4,l),this.ma=l&&l.xmlHttpFactory||void 0,this.Ua=l&&l.Rb||void 0,this.Aa=l&&l.useFetchStreams||!1,this.O=void 0,this.L=l&&l.supportsCrossDomainXhr||!1,this.M="",this.h=new y_(l&&l.concurrentRequestLimit),this.Ba=new jP,this.S=l&&l.fastHandshake||!1,this.R=l&&l.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=l&&l.Pb||!1,l&&l.ua&&this.j.ua(),l&&l.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&l&&l.detectBufferingProxy||!1,this.ia=void 0,l&&l.longPollingTimeout&&l.longPollingTimeout>0&&(this.ia=l.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=L_.prototype,t.ka=8,t.I=1,t.connect=function(l,p,g,w){Jt(0),this.W=l,this.H=p||{},g&&w!==void 0&&(this.H.OSID=g,this.H.OAID=w),this.F=this.X,this.J=G_(this,null,this.W),Gl(this)};function Ud(l){if(M_(l),l.I==3){var p=l.V++,g=zn(l.J);if(Je(g,"SID",l.M),Je(g,"RID",p),Je(g,"TYPE","terminate"),Ya(l,g),p=new Jr(l,l.j,p),p.M=2,p.A=jl(zn(g)),g=!1,o.navigator&&o.navigator.sendBeacon)try{g=o.navigator.sendBeacon(p.A.toString(),"")}catch{}!g&&o.Image&&(new Image().src=p.A,g=!0),g||(p.g=K_(p.j,null),p.g.ea(p.A)),p.F=Date.now(),Bl(p)}$_(l)}function $l(l){l.g&&(jd(l),l.g.cancel(),l.g=null)}function M_(l){$l(l),l.v&&(o.clearTimeout(l.v),l.v=null),Kl(l),l.h.cancel(),l.m&&(typeof l.m=="number"&&o.clearTimeout(l.m),l.m=null)}function Gl(l){if(!I_(l.h)&&!l.m){l.m=!0;var p=l.Ea;x||E(),U||(x(),U=!0),v.add(p,l),l.D=0}}function GP(l,p){return E_(l.h)>=l.h.j-(l.m?1:0)?!1:l.m?(l.i=p.G.concat(l.i),!0):l.I==1||l.I==2||l.D>=(l.Sa?0:l.Ta)?!1:(l.m=Ua(u(l.Ea,l,p),H_(l,l.D)),l.D++,!0)}t.Ea=function(l){if(this.m)if(this.m=null,this.I==1){if(!l){this.V=Math.floor(Math.random()*1e5),l=this.V++;const L=new Jr(this,this.j,l);let B=this.o;if(this.U&&(B?(B=pn(B),dr(B,this.U)):B=this.U),this.u!==null||this.R||(L.J=B,B=null),this.S)e:{for(var p=0,g=0;g<this.i.length;g++){t:{var w=this.i[g];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(p+=w,p>4096){p=g;break e}if(p===4096||g===this.i.length-1){p=g+1;break e}}p=1e3}else p=1e3;p=U_(this,L,p),g=zn(this.J),Je(g,"RID",l),Je(g,"CVER",22),this.G&&Je(g,"X-HTTP-Session-Id",this.G),Ya(this,g),B&&(this.R?p="headers="+ja(N_(B))+"&"+p:this.u&&Fd(g,this.u,B)),Od(this.h,L),this.Ra&&Je(g,"TYPE","init"),this.S?(Je(g,"$req",p),Je(g,"SID","null"),L.U=!0,Nd(L,g,null)):Nd(L,g,p),this.I=2}}else this.I==3&&(l?F_(this,l):this.i.length==0||I_(this.h)||F_(this))};function F_(l,p){var g;p?g=p.l:g=l.V++;const w=zn(l.J);Je(w,"SID",l.M),Je(w,"RID",g),Je(w,"AID",l.K),Ya(l,w),l.u&&l.o&&Fd(w,l.u,l.o),g=new Jr(l,l.j,g,l.D+1),l.u===null&&(g.J=l.o),p&&(l.i=p.G.concat(l.i)),p=U_(l,g,1e3),g.H=Math.round(l.va*.5)+Math.round(l.va*.5*Math.random()),Od(l.h,g),Nd(g,w,p)}function Ya(l,p){l.H&&xe(l.H,function(g,w){Je(p,w,g)}),l.l&&xe({},function(g,w){Je(p,w,g)})}function U_(l,p,g){g=Math.min(l.i.length,g);const w=l.l?u(l.l.Ka,l.l,l):null;e:{var L=l.i;let we=-1;for(;;){const vt=["count="+g];we==-1?g>0?(we=L[0].g,vt.push("ofs="+we)):we=0:vt.push("ofs="+we);let Ge=!0;for(let Ct=0;Ct<g;Ct++){var B=L[Ct].g;const Qn=L[Ct].map;if(B-=we,B<0)we=Math.max(0,L[Ct].g-100),Ge=!1;else try{B="req"+B+"_"||"";try{var ee=Qn instanceof Map?Qn:Object.entries(Qn);for(const[ti,es]of ee){let ts=es;a(es)&&(ts=Oe(es)),vt.push(B+ti+"="+encodeURIComponent(ts))}}catch(ti){throw vt.push(B+"type="+encodeURIComponent("_badmap")),ti}}catch{w&&w(Qn)}}if(Ge){ee=vt.join("&");break e}}ee=void 0}return l=l.i.splice(0,g),p.G=l,ee}function B_(l){if(!l.g&&!l.v){l.Y=1;var p=l.Da;x||E(),U||(x(),U=!0),v.add(p,l),l.A=0}}function Bd(l){return l.g||l.v||l.A>=3?!1:(l.Y++,l.v=Ua(u(l.Da,l),H_(l,l.A)),l.A++,!0)}t.Da=function(){if(this.v=null,j_(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var l=4*this.T;this.j.info("BP detection timer enabled: "+l),this.B=Ua(u(this.Wa,this),l)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Jt(10),$l(this),j_(this))};function jd(l){l.B!=null&&(o.clearTimeout(l.B),l.B=null)}function j_(l){l.g=new Jr(l,l.j,"rpc",l.Y),l.u===null&&(l.g.J=l.o),l.g.P=0;var p=zn(l.na);Je(p,"RID","rpc"),Je(p,"SID",l.M),Je(p,"AID",l.K),Je(p,"CI",l.F?"0":"1"),!l.F&&l.ia&&Je(p,"TO",l.ia),Je(p,"TYPE","xmlhttp"),Ya(l,p),l.u&&l.o&&Fd(p,l.u,l.o),l.O&&(l.g.H=l.O);var g=l.g;l=l.ba,g.M=1,g.A=jl(zn(p)),g.u=null,g.R=!0,m_(g,l)}t.Va=function(){this.C!=null&&(this.C=null,$l(this),Bd(this),Jt(19))};function Kl(l){l.C!=null&&(o.clearTimeout(l.C),l.C=null)}function q_(l,p){var g=null;if(l.g==p){Kl(l),jd(l),l.g=null;var w=2}else if(xd(l.h,p))g=p.G,T_(l.h,p),w=1;else return;if(l.I!=0){if(p.o)if(w==1){g=p.u?p.u.length:0,p=Date.now()-p.F;var L=l.D;w=Ys(),z(w,new u_(w,g)),Gl(l)}else B_(l);else if(L=p.m,L==3||L==0&&p.X>0||!(w==1&&GP(l,p)||w==2&&Bd(l)))switch(g&&g.length>0&&(p=l.h,p.i=p.i.concat(g)),L){case 1:ei(l,5);break;case 4:ei(l,10);break;case 3:ei(l,6);break;default:ei(l,2)}}}function H_(l,p){let g=l.Qa+Math.floor(Math.random()*l.Za);return l.isActive()||(g*=2),g*p}function ei(l,p){if(l.j.info("Error code "+p),p==2){var g=u(l.bb,l),w=l.Ua;const L=!w;w=new Yr(w||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Ha(w,"https"),jl(w),L?UP(w.toString(),g):BP(w.toString(),g)}else Jt(2);l.I=0,l.l&&l.l.pa(p),$_(l),M_(l)}t.bb=function(l){l?(this.j.info("Successfully pinged google.com"),Jt(2)):(this.j.info("Failed to ping google.com"),Jt(1))};function $_(l){if(l.I=0,l.ja=[],l.l){const p=w_(l.h);(p.length!=0||l.i.length!=0)&&(I(l.ja,p),I(l.ja,l.i),l.h.i.length=0,m(l.i),l.i.length=0),l.l.oa()}}function G_(l,p,g){var w=g instanceof Yr?zn(g):new Yr(g);if(w.g!="")p&&(w.g=p+"."+w.g),$a(w,w.u);else{var L=o.location;w=L.protocol,p=p?p+"."+L.hostname:L.hostname,L=+L.port;const B=new Yr(null);w&&Ha(B,w),p&&(B.g=p),L&&$a(B,L),g&&(B.h=g),w=B}return g=l.G,p=l.wa,g&&p&&Je(w,g,p),Je(w,"VER",l.ka),Ya(l,w),w}function K_(l,p,g){if(p&&!l.L)throw Error("Can't create secondary domain capable XhrIo object.");return p=l.Aa&&!l.ma?new lt(new Md({ab:g})):new lt(l.ma),p.Fa(l.L),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function W_(){}t=W_.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Wl(){}Wl.prototype.g=function(l,p){return new gn(l,p)};function gn(l,p){J.call(this),this.g=new L_(p),this.l=l,this.h=p&&p.messageUrlParams||null,l=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(l?l["X-WebChannel-Content-Type"]=p.messageContentType:l={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.sa&&(l?l["X-WebChannel-Client-Profile"]=p.sa:l={"X-WebChannel-Client-Profile":p.sa}),this.g.U=l,(l=p&&p.Qb)&&!b(l)&&(this.g.u=l),this.A=p&&p.supportsCrossDomainXhr||!1,this.v=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!b(p)&&(this.g.G=p,l=this.h,l!==null&&p in l&&(l=this.h,p in l&&delete l[p])),this.j=new ro(this)}d(gn,J),gn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){Ud(this.g)},gn.prototype.o=function(l){var p=this.g;if(typeof l=="string"){var g={};g.__data__=l,l=g}else this.v&&(g={},g.__data__=Oe(l),l=g);p.i.push(new NP(p.Ya++,l)),p.I==3&&Gl(p)},gn.prototype.N=function(){this.g.l=null,delete this.j,Ud(this.g),delete this.g,gn.Z.N.call(this)};function z_(l){fr.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var p=l.__sm__;if(p){e:{for(const g in p){l=g;break e}l=void 0}(this.i=l)&&(l=this.i,p=p!==null&&l in p?p[l]:void 0),this.data=p}else this.data=l}d(z_,fr);function Q_(){eo.call(this),this.status=1}d(Q_,eo);function ro(l){this.g=l}d(ro,W_),ro.prototype.ra=function(){z(this.g,"a")},ro.prototype.qa=function(l){z(this.g,new z_(l))},ro.prototype.pa=function(l){z(this.g,new Q_)},ro.prototype.oa=function(){z(this.g,"b")},Wl.prototype.createWebChannel=Wl.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,Cb=function(){return new Wl},Pb=function(){return Ys()},Sb=dt,wp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ul.NO_ERROR=0,Ul.TIMEOUT=8,Ul.HTTP_ERROR=6,Pu=Ul,h_.COMPLETE="complete",Rb=h_,nn.EventType=wt,wt.OPEN="a",wt.CLOSE="b",wt.ERROR="c",wt.MESSAGE="d",J.prototype.listen=J.prototype.J,mc=nn,lt.prototype.listenOnce=lt.prototype.K,lt.prototype.getLastError=lt.prototype.Ha,lt.prototype.getLastErrorCode=lt.prototype.ya,lt.prototype.getStatus=lt.prototype.ca,lt.prototype.getResponseJson=lt.prototype.La,lt.prototype.getResponseText=lt.prototype.la,lt.prototype.send=lt.prototype.ea,lt.prototype.setWithCredentials=lt.prototype.Fa,bb=lt}).apply(typeof hu<"u"?hu:typeof self<"u"?self:typeof window<"u"?window:{});class Nt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Nt.UNAUTHENTICATED=new Nt(null),Nt.GOOGLE_CREDENTIALS=new Nt("google-credentials-uid"),Nt.FIRST_PARTY=new Nt("first-party-uid"),Nt.MOCK_USER=new Nt("mock-user");let ba="12.8.0";function qF(t){ba=t}const Vs=new Om("@firebase/firestore");function _o(){return Vs.logLevel}function HF(t){Vs.setLogLevel(t)}function G(t,...e){if(Vs.logLevel<=Pe.DEBUG){const n=e.map(tg);Vs.debug(`Firestore (${ba}): ${t}`,...n)}}function pt(t,...e){if(Vs.logLevel<=Pe.ERROR){const n=e.map(tg);Vs.error(`Firestore (${ba}): ${t}`,...n)}}function bn(t,...e){if(Vs.logLevel<=Pe.WARN){const n=e.map(tg);Vs.warn(`Firestore (${ba}): ${t}`,...n)}}function tg(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function re(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,kb(t,r,n)}function kb(t,e,n){let r=`FIRESTORE (${ba}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw pt(r),new Error(r)}function ae(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||kb(e,s,r)}function $F(t,e){t||re(57014,e)}function Z(t,e){return t}const M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class q extends Hr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ot{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class Nb{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Db{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Nt.UNAUTHENTICATED)))}shutdown(){}}class GF{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class KF{constructor(e){this.t=e,this.currentUser=Nt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ae(this.o===void 0,42304);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new Ot;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Ot,e.enqueueRetryable((()=>s(this.currentUser)))};const o=()=>{const c=i;e.enqueueRetryable((async()=>{await c.promise,await s(this.currentUser)}))},a=c=>{G("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((c=>a(c))),setTimeout((()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?a(c):(G("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Ot)}}),0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(G("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ae(typeof r.accessToken=="string",31837,{l:r}),new Nb(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ae(e===null||typeof e=="string",2055,{h:e}),new Nt(e)}}class WF{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Nt.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class zF{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new WF(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Nt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class vp{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class QF{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,at(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ae(this.o===void 0,3512);const r=i=>{i.error!=null&&G("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,G("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable((()=>r(i)))};const s=i=>{G("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((i=>s(i))),setTimeout((()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):G("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new vp(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(ae(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new vp(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}class JF{getToken(){return Promise.resolve(new vp(""))}invalidateToken(){}start(e,n){}shutdown(){}}function YF(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class sd{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=YF(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function ye(t,e){return t<e?-1:t>e?1:0}function Ap(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return bf(s)===bf(i)?ye(s,i):bf(s)?1:-1}return ye(t.length,e.length)}const XF=55296,ZF=57343;function bf(t){const e=t.charCodeAt(0);return e>=XF&&e<=ZF}function Qo(t,e,n){return t.length===e.length&&t.every(((r,s)=>n(r,e[s])))}function Vb(t){return t+"\0"}const bp="__name__";class Xn{constructor(e,n,r){n===void 0?n=0:n>e.length&&re(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&re(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Xn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Xn?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=Xn.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return ye(e.length,n.length)}static compareSegments(e,n){const r=Xn.isNumericId(e),s=Xn.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Xn.extractNumericId(e).compare(Xn.extractNumericId(n)):Ap(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ps.fromString(e.substring(4,e.length-2))}}class be extends Xn{construct(e,n,r){return new be(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new q(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((s=>s.length>0)))}return new be(n)}static emptyPath(){return new be([])}}const eU=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Xe extends Xn{construct(e,n,r){return new Xe(e,n,r)}static isValidIdentifier(e){return eU.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xe.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===bp}static keyField(){return new Xe([bp])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new q(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new q(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new q(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new q(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Xe(n)}static emptyPath(){return new Xe([])}}class X{constructor(e){this.path=e}static fromPath(e){return new X(be.fromString(e))}static fromName(e){return new X(be.fromString(e).popFirst(5))}static empty(){return new X(be.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&be.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return be.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new X(new be(e.slice()))}}function ng(t,e,n){if(!n)throw new q(M.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function xb(t,e,n,r){if(e===!0&&r===!0)throw new q(M.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function sE(t){if(!X.isDocumentKey(t))throw new q(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function iE(t){if(X.isDocumentKey(t))throw new q(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Ob(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function id(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":re(12329,{type:typeof t})}function Re(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new q(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=id(t);throw new q(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function Lb(t,e){if(e<=0)throw new q(M.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}function Et(t,e){const n={typeString:t};return e&&(n.value=e),n}function zi(t,e){if(!Ob(t))throw new q(M.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new q(M.INVALID_ARGUMENT,n);return!0}const oE=-62135596800,aE=1e6;class Fe{static now(){return Fe.fromMillis(Date.now())}static fromDate(e){return Fe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*aE);return new Fe(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new q(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new q(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<oE)throw new q(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new q(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/aE}_compareTo(e){return this.seconds===e.seconds?ye(this.nanoseconds,e.nanoseconds):ye(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Fe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(zi(e,Fe._jsonSchema))return new Fe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-oE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Fe._jsonSchemaVersion="firestore/timestamp/1.0",Fe._jsonSchema={type:Et("string",Fe._jsonSchemaVersion),seconds:Et("number"),nanoseconds:Et("number")};class he{static fromTimestamp(e){return new he(e)}static min(){return new he(new Fe(0,0))}static max(){return new he(new Fe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Jo=-1;class Yo{constructor(e,n,r,s){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=s}}function Rp(t){return t.fields.find((e=>e.kind===2))}function di(t){return t.fields.filter((e=>e.kind!==2))}function tU(t,e){let n=ye(t.collectionGroup,e.collectionGroup);if(n!==0)return n;for(let r=0;r<Math.min(t.fields.length,e.fields.length);++r)if(n=nU(t.fields[r],e.fields[r]),n!==0)return n;return ye(t.fields.length,e.fields.length)}Yo.UNKNOWN_ID=-1;class Ri{constructor(e,n){this.fieldPath=e,this.kind=n}}function nU(t,e){const n=Xe.comparator(t.fieldPath,e.fieldPath);return n!==0?n:ye(t.kind,e.kind)}class Xo{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Xo(0,Rn.min())}}function Mb(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=he.fromTimestamp(r===1e9?new Fe(n+1,0):new Fe(n,r));return new Rn(s,X.empty(),e)}function Fb(t){return new Rn(t.readTime,t.key,Jo)}class Rn{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Rn(he.min(),X.empty(),Jo)}static max(){return new Rn(he.max(),X.empty(),Jo)}}function rg(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=X.comparator(t.documentKey,e.documentKey),n!==0?n:ye(t.largestBatchId,e.largestBatchId))}const Ub="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Bb{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function $s(t){if(t.code!==M.FAILED_PRECONDITION||t.message!==Ub)throw t;G("LocalStore","Unexpectedly lost primary lease")}class O{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&re(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new O(((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof O?n:O.resolve(n)}catch(n){return O.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):O.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):O.reject(n)}static resolve(e){return new O(((n,r)=>{n(e)}))}static reject(e){return new O(((n,r)=>{r(e)}))}static waitFor(e){return new O(((n,r)=>{let s=0,i=0,o=!1;e.forEach((a=>{++s,a.next((()=>{++i,o&&i===s&&n()}),(c=>r(c)))})),o=!0,i===s&&n()}))}static or(e){let n=O.resolve(!1);for(const r of e)n=n.next((s=>s?O.resolve(s):r()));return n}static forEach(e,n){const r=[];return e.forEach(((s,i)=>{r.push(n.call(this,s,i))})),this.waitFor(r)}static mapArray(e,n){return new O(((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let c=0;c<i;c++){const u=c;n(e[u]).next((h=>{o[u]=h,++a,a===i&&r(o)}),(h=>s(h)))}}))}static doWhile(e,n){return new O(((r,s)=>{const i=()=>{e()===!0?n().next((()=>{i()}),s):r()};i()}))}}const _n="SimpleDb";class od{static open(e,n,r,s){try{return new od(n,e.transaction(s,r))}catch(i){throw new Dc(n,i)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.S=new Ot,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new Dc(e,n.error)):this.S.resolve()},this.transaction.onerror=r=>{const s=sg(r.target.error);this.S.reject(new Dc(e,s))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(G(_n,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new sU(n)}}class or{static delete(e){return G(_n,"Removing database:",e),pi(Yv().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!iA())return!1;if(or.F())return!0;const e=Rt(),n=or.M(e),r=0<n&&n<10,s=jb(e),i=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||i)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,n){return e.store(n)}static M(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,n,r){this.name=e,this.version=n,this.N=r,this.B=null,or.M(Rt())===12.2&&pt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(G(_n,"Opening database:",this.name),this.db=await new Promise(((n,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const o=i.target.result;n(o)},s.onblocked=()=>{r(new Dc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const o=i.target.error;o.name==="VersionError"?r(new q(M.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new q(M.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Dc(e,o))},s.onupgradeneeded=i=>{G(_n,'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const o=i.target.result;this.N.k(o,s.transaction,i.oldVersion,this.version).next((()=>{G(_n,"Database upgrade to version "+this.version+" complete")}))}}))),this.K&&(this.db.onversionchange=n=>this.K(n)),this.db}q(e){this.K=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,s){const i=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.L(e);const a=od.open(this.db,e,i?"readonly":"readwrite",r),c=s(a).next((u=>(a.C(),u))).catch((u=>(a.abort(u),O.reject(u)))).toPromise();return c.catch((()=>{})),await a.D,c}catch(a){const c=a,u=c.name!=="FirebaseError"&&o<3;if(G(_n,"Transaction failed with error:",c.message,"Retrying:",u),this.close(),!u)return Promise.reject(c)}}}close(){this.db&&this.db.close(),this.db=void 0}}function jb(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class rU{constructor(e){this.U=e,this.$=!1,this.W=null}get isDone(){return this.$}get G(){return this.W}set cursor(e){this.U=e}done(){this.$=!0}j(e){this.W=e}delete(){return pi(this.U.delete())}}class Dc extends q{constructor(e,n){super(M.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Gs(t){return t.name==="IndexedDbTransactionError"}class sU{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(G(_n,"PUT",this.store.name,e,n),r=this.store.put(n,e)):(G(_n,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),pi(r)}add(e){return G(_n,"ADD",this.store.name,e,e),pi(this.store.add(e))}get(e){return pi(this.store.get(e)).next((n=>(n===void 0&&(n=null),G(_n,"GET",this.store.name,e,n),n)))}delete(e){return G(_n,"DELETE",this.store.name,e),pi(this.store.delete(e))}count(){return G(_n,"COUNT",this.store.name),pi(this.store.count())}H(e,n){const r=this.options(e,n),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const i=s.getAll(r.range);return new O(((o,a)=>{i.onerror=c=>{a(c.target.error)},i.onsuccess=c=>{o(c.target.result)}}))}{const i=this.cursor(r),o=[];return this.J(i,((a,c)=>{o.push(c)})).next((()=>o))}}Z(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new O(((s,i)=>{r.onerror=o=>{i(o.target.error)},r.onsuccess=o=>{s(o.target.result)}}))}X(e,n){G(_n,"DELETE ALL",this.store.name);const r=this.options(e,n);r.Y=!1;const s=this.cursor(r);return this.J(s,((i,o,a)=>a.delete()))}ee(e,n){let r;n?r=e:(r={},n=e);const s=this.cursor(r);return this.J(s,n)}te(e){const n=this.cursor({});return new O(((r,s)=>{n.onerror=i=>{const o=sg(i.target.error);s(o)},n.onsuccess=i=>{const o=i.target.result;o?e(o.primaryKey,o.value).next((a=>{a?o.continue():r()})):r()}}))}J(e,n){const r=[];return new O(((s,i)=>{e.onerror=o=>{i(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void s();const c=new rU(a),u=n(a.primaryKey,a.value,c);if(u instanceof O){const h=u.catch((d=>(c.done(),O.reject(d))));r.push(h)}c.isDone?s():c.G===null?a.continue():a.continue(c.G)}})).next((()=>O.waitFor(r)))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function pi(t){return new O(((e,n)=>{t.onsuccess=r=>{const s=r.target.result;e(s)},t.onerror=r=>{const s=sg(r.target.error);n(s)}}))}let cE=!1;function sg(t){const e=or.M(Rt());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new q("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return cE||(cE=!0,setTimeout((()=>{throw r}),0)),r}}return t}const Vc="IndexBackfiller";class iU{constructor(e,n){this.asyncQueue=e,this.ne=n,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){G(Vc,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const n=await this.ne.ie();G(Vc,`Documents written: ${n}`)}catch(n){Gs(n)?G(Vc,"Ignoring IndexedDB error during index backfill: ",n):await $s(n)}await this.re(6e4)}))}}class oU{constructor(e,n){this.localStore=e,this.persistence=n}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(n=>this.se(n,e)))}se(e,n){const r=new Set;let s=n,i=!0;return O.doWhile((()=>i===!0&&s>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((o=>{if(o!==null&&!r.has(o))return G(Vc,`Processing collection: ${o}`),this.oe(e,o,s).next((a=>{s-=a,r.add(o)}));i=!1})))).next((()=>n-s))}oe(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next((s=>this.localStore.localDocuments.getNextDocuments(e,n,s,r).next((i=>{const o=i.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next((()=>this._e(s,i))).next((a=>(G(Vc,`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a)))).next((()=>o.size))}))))}_e(e,n){let r=e;return n.changes.forEach(((s,i)=>{const o=Fb(i);rg(o,r)>0&&(r=o)})),new Rn(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}class cn{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}cn.ce=-1;const Cs=-1;function Al(t){return t==null}function tl(t){return t===0&&1/t==-1/0}function qb(t){return typeof t=="number"&&Number.isInteger(t)&&!tl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}const dh="";function zt(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=lE(e)),e=aU(t.get(n),e);return lE(e)}function aU(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case dh:n+="";break;default:n+=i}}return n}function lE(t){return t+dh+""}function nr(t){const e=t.length;if(ae(e>=2,64408,{path:t}),e===2)return ae(t.charAt(0)===dh&&t.charAt(1)==="",56145,{path:t}),be.emptyPath();const n=e-2,r=[];let s="";for(let i=0;i<e;){const o=t.indexOf(dh,i);switch((o<0||o>n)&&re(50515,{path:t}),t.charAt(o+1)){case"":const a=t.substring(i,o);let c;s.length===0?c=a:(s+=a,c=s,s=""),r.push(c);break;case"":s+=t.substring(i,o),s+="\0";break;case"":s+=t.substring(i,o+1);break;default:re(61167,{path:t})}i=o+2}return new be(r)}const fi="remoteDocuments",bl="owner",co="owner",nl="mutationQueues",cU="userId",On="mutations",uE="batchId",Ei="userMutationsIndex",hE=["userId","batchId"];function Cu(t,e){return[t,zt(e)]}function Hb(t,e,n){return[t,zt(e),n]}const lU={},Zo="documentMutations",fh="remoteDocumentsV14",uU=["prefixPath","collectionGroup","readTime","documentId"],ku="documentKeyIndex",hU=["prefixPath","collectionGroup","documentId"],$b="collectionGroupIndex",dU=["collectionGroup","readTime","prefixPath","documentId"],rl="remoteDocumentGlobal",Sp="remoteDocumentGlobalKey",ea="targets",Gb="queryTargetsIndex",fU=["canonicalId","targetId"],ta="targetDocuments",pU=["targetId","path"],ig="documentTargetsIndex",mU=["path","targetId"],ph="targetGlobalKey",Si="targetGlobal",sl="collectionParents",gU=["collectionId","parent"],na="clientMetadata",_U="clientId",ad="bundles",yU="bundleId",cd="namedQueries",IU="name",og="indexConfiguration",EU="indexId",Pp="collectionGroupIndex",TU="collectionGroup",xc="indexState",wU=["indexId","uid"],Kb="sequenceNumberIndex",vU=["uid","sequenceNumber"],Oc="indexEntries",AU=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Wb="documentKeyIndex",bU=["indexId","uid","orderedDocumentKey"],ld="documentOverlays",RU=["userId","collectionPath","documentId"],Cp="collectionPathOverlayIndex",SU=["userId","collectionPath","largestBatchId"],zb="collectionGroupOverlayIndex",PU=["userId","collectionGroup","largestBatchId"],ag="globals",CU="name",Qb=[nl,On,Zo,fi,ea,bl,Si,ta,na,rl,sl,ad,cd],kU=[...Qb,ld],Jb=[nl,On,Zo,fh,ea,bl,Si,ta,na,rl,sl,ad,cd,ld],Yb=Jb,cg=[...Yb,og,xc,Oc],NU=cg,Xb=[...cg,ag],DU=Xb;class kp extends Bb{constructor(e,n){super(),this.le=e,this.currentSequenceNumber=n}}function Pt(t,e){const n=Z(t);return or.O(n.le,e)}function dE(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ks(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Zb(t,e){const n=[];for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.push(e(t[r],r,t));return n}function eR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class Qe{constructor(e,n){this.comparator=e,this.root=n||Ft.EMPTY}insert(e,n){return new Qe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ft.BLACK,null,null))}remove(e){return new Qe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ft.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new du(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new du(this.root,e,this.comparator,!1)}getReverseIterator(){return new du(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new du(this.root,e,this.comparator,!0)}}class du{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ft{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Ft.RED,this.left=s??Ft.EMPTY,this.right=i??Ft.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Ft(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Ft.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Ft.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ft.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ft.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw re(43730,{key:this.key,value:this.value});if(this.right.isRed())throw re(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw re(27949);return e+(this.isRed()?0:1)}}Ft.EMPTY=null,Ft.RED=!0,Ft.BLACK=!1;Ft.EMPTY=new class{constructor(){this.size=0}get key(){throw re(57766)}get value(){throw re(16141)}get color(){throw re(16727)}get left(){throw re(29726)}get right(){throw re(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new Ft(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class je{constructor(e){this.comparator=e,this.data=new Qe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new fE(this.data.getIterator())}getIteratorFrom(e){return new fE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof je)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new je(this.comparator);return n.data=e,n}}class fE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function lo(t){return t.hasNext()?t.getNext():void 0}class ln{constructor(e){this.fields=e,e.sort(Xe.comparator)}static empty(){return new ln([])}unionWith(e){let n=new je(Xe.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new ln(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Qo(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}class tR extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}function VU(){return typeof atob<"u"}class ct{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new tR("Invalid base64 string: "+i):i}})(e);return new ct(n)}static fromUint8Array(e){const n=(function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i})(e);return new ct(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ye(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ct.EMPTY_BYTE_STRING=new ct("");const xU=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Fr(t){if(ae(!!t,39018),typeof t=="string"){let e=0;const n=xU.exec(t);if(ae(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:rt(t.seconds),nanos:rt(t.nanos)}}function rt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ur(t){return typeof t=="string"?ct.fromBase64String(t):ct.fromUint8Array(t)}const nR="server_timestamp",rR="__type__",sR="__previous_value__",iR="__local_write_time__";function ud(t){return(t?.mapValue?.fields||{})[rR]?.stringValue===nR}function hd(t){const e=t.mapValue.fields[sR];return ud(e)?hd(e):e}function il(t){const e=Fr(t.mapValue.fields[iR].timestampValue);return new Fe(e.seconds,e.nanos)}class OU{constructor(e,n,r,s,i,o,a,c,u,h,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=h,this.apiKey=d}}const ol="(default)";class xs{constructor(e,n){this.projectId=e,this.database=n||ol}static empty(){return new xs("","")}get isDefaultDatabase(){return this.database===ol}isEqual(e){return e instanceof xs&&e.projectId===this.projectId&&e.database===this.database}}function LU(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new q(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xs(t.options.projectId,e)}const lg="__type__",oR="__max__",_s={mapValue:{fields:{__type__:{stringValue:oR}}}},ug="__vector__",ra="value",Nu={nullValue:"NULL_VALUE"};function Os(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ud(t)?4:aR(t)?9007199254740991:dd(t)?10:11:re(28295,{value:t})}function hr(t,e){if(t===e)return!0;const n=Os(t);if(n!==Os(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return il(t).isEqual(il(e));case 3:return(function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Fr(s.timestampValue),a=Fr(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(s,i){return Ur(s.bytesValue).isEqual(Ur(i.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(s,i){return rt(s.geoPointValue.latitude)===rt(i.geoPointValue.latitude)&&rt(s.geoPointValue.longitude)===rt(i.geoPointValue.longitude)})(t,e);case 2:return(function(s,i){if("integerValue"in s&&"integerValue"in i)return rt(s.integerValue)===rt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=rt(s.doubleValue),a=rt(i.doubleValue);return o===a?tl(o)===tl(a):isNaN(o)&&isNaN(a)}return!1})(t,e);case 9:return Qo(t.arrayValue.values||[],e.arrayValue.values||[],hr);case 10:case 11:return(function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(dE(o)!==dE(a))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!hr(o[c],a[c])))return!1;return!0})(t,e);default:return re(52216,{left:t})}}function al(t,e){return(t.values||[]).find((n=>hr(n,e)))!==void 0}function Ls(t,e){if(t===e)return 0;const n=Os(t),r=Os(e);if(n!==r)return ye(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ye(t.booleanValue,e.booleanValue);case 2:return(function(i,o){const a=rt(i.integerValue||i.doubleValue),c=rt(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1})(t,e);case 3:return pE(t.timestampValue,e.timestampValue);case 4:return pE(il(t),il(e));case 5:return Ap(t.stringValue,e.stringValue);case 6:return(function(i,o){const a=Ur(i),c=Ur(o);return a.compareTo(c)})(t.bytesValue,e.bytesValue);case 7:return(function(i,o){const a=i.split("/"),c=o.split("/");for(let u=0;u<a.length&&u<c.length;u++){const h=ye(a[u],c[u]);if(h!==0)return h}return ye(a.length,c.length)})(t.referenceValue,e.referenceValue);case 8:return(function(i,o){const a=ye(rt(i.latitude),rt(o.latitude));return a!==0?a:ye(rt(i.longitude),rt(o.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return mE(t.arrayValue,e.arrayValue);case 10:return(function(i,o){const a=i.fields||{},c=o.fields||{},u=a[ra]?.arrayValue,h=c[ra]?.arrayValue,d=ye(u?.values?.length||0,h?.values?.length||0);return d!==0?d:mE(u,h)})(t.mapValue,e.mapValue);case 11:return(function(i,o){if(i===_s.mapValue&&o===_s.mapValue)return 0;if(i===_s.mapValue)return 1;if(o===_s.mapValue)return-1;const a=i.fields||{},c=Object.keys(a),u=o.fields||{},h=Object.keys(u);c.sort(),h.sort();for(let d=0;d<c.length&&d<h.length;++d){const f=Ap(c[d],h[d]);if(f!==0)return f;const m=Ls(a[c[d]],u[h[d]]);if(m!==0)return m}return ye(c.length,h.length)})(t.mapValue,e.mapValue);default:throw re(23264,{he:n})}}function pE(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ye(t,e);const n=Fr(t),r=Fr(e),s=ye(n.seconds,r.seconds);return s!==0?s:ye(n.nanos,r.nanos)}function mE(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Ls(n[s],r[s]);if(i)return i}return ye(n.length,r.length)}function sa(t){return Np(t)}function Np(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=Fr(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Ur(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return X.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Np(i);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Np(n.fields[o])}`;return s+"}"})(t.mapValue):re(61005,{value:t})}function Du(t){switch(Os(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=hd(t);return e?16+Du(e):16;case 5:return 2*t.stringValue.length;case 6:return Ur(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((s,i)=>s+Du(i)),0)})(t.arrayValue);case 10:case 11:return(function(r){let s=0;return Ks(r.fields,((i,o)=>{s+=i.length+Du(o)})),s})(t.mapValue);default:throw re(13486,{value:t})}}function Oi(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Dp(t){return!!t&&"integerValue"in t}function cl(t){return!!t&&"arrayValue"in t}function gE(t){return!!t&&"nullValue"in t}function _E(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Vu(t){return!!t&&"mapValue"in t}function dd(t){return(t?.mapValue?.fields||{})[lg]?.stringValue===ug}function Lc(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Ks(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=Lc(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Lc(t.arrayValue.values[n]);return e}return{...t}}function aR(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===oR}const cR={mapValue:{fields:{[lg]:{stringValue:ug},[ra]:{arrayValue:{}}}}};function MU(t){return"nullValue"in t?Nu:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Oi(xs.empty(),X.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?dd(t)?cR:{mapValue:{}}:re(35942,{value:t})}function FU(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Oi(xs.empty(),X.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?cR:"mapValue"in t?dd(t)?{mapValue:{}}:_s:re(61959,{value:t})}function yE(t,e){const n=Ls(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function IE(t,e){const n=Ls(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}class Dt{constructor(e){this.value=e}static empty(){return new Dt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Vu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Lc(n)}setAll(e){let n=Xe.emptyPath(),r={},s=[];e.forEach(((o,a)=>{if(!n.isImmediateParentOf(a)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=Lc(o):s.push(a.lastSegment())}));const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Vu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return hr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Vu(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Ks(n,((s,i)=>e[s]=i));for(const s of r)delete e[s]}clone(){return new Dt(Lc(this.value))}}function lR(t){const e=[];return Ks(t.fields,((n,r)=>{const s=new Xe([n]);if(Vu(r)){const i=lR(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)})),new ln(e)}class Ye{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Ye(e,0,he.min(),he.min(),he.min(),Dt.empty(),0)}static newFoundDocument(e,n,r,s){return new Ye(e,1,n,he.min(),r,s,0)}static newNoDocument(e,n){return new Ye(e,2,n,he.min(),he.min(),Dt.empty(),0)}static newUnknownDocument(e,n){return new Ye(e,3,n,he.min(),he.min(),Dt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(he.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Dt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Dt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=he.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ye&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ye(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ms{constructor(e,n){this.position=e,this.inclusive=n}}function EE(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=X.comparator(X.fromName(o.referenceValue),n.key):r=Ls(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function TE(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!hr(t.position[n],e.position[n]))return!1;return!0}class ll{constructor(e,n="asc"){this.field=e,this.dir=n}}function UU(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class uR{}class Ce extends uR{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new BU(e,n,r):n==="array-contains"?new HU(e,r):n==="in"?new gR(e,r):n==="not-in"?new $U(e,r):n==="array-contains-any"?new GU(e,r):new Ce(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new jU(e,r):new qU(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ls(n,this.value)):n!==null&&Os(this.value)===Os(n)&&this.matchesComparison(Ls(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return re(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ue extends uR{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Ue(e,n)}matches(e){return ia(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function ia(t){return t.op==="and"}function Vp(t){return t.op==="or"}function hg(t){return hR(t)&&ia(t)}function hR(t){for(const e of t.filters)if(e instanceof Ue)return!1;return!0}function xp(t){if(t instanceof Ce)return t.field.canonicalString()+t.op.toString()+sa(t.value);if(hg(t))return t.filters.map((e=>xp(e))).join(",");{const e=t.filters.map((n=>xp(n))).join(",");return`${t.op}(${e})`}}function dR(t,e){return t instanceof Ce?(function(r,s){return s instanceof Ce&&r.op===s.op&&r.field.isEqual(s.field)&&hr(r.value,s.value)})(t,e):t instanceof Ue?(function(r,s){return s instanceof Ue&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((i,o,a)=>i&&dR(o,s.filters[a])),!0):!1})(t,e):void re(19439)}function fR(t,e){const n=t.filters.concat(e);return Ue.create(n,t.op)}function pR(t){return t instanceof Ce?(function(n){return`${n.field.canonicalString()} ${n.op} ${sa(n.value)}`})(t):t instanceof Ue?(function(n){return n.op.toString()+" {"+n.getFilters().map(pR).join(" ,")+"}"})(t):"Filter"}class BU extends Ce{constructor(e,n,r){super(e,n,r),this.key=X.fromName(r.referenceValue)}matches(e){const n=X.comparator(e.key,this.key);return this.matchesComparison(n)}}class jU extends Ce{constructor(e,n){super(e,"in",n),this.keys=mR("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class qU extends Ce{constructor(e,n){super(e,"not-in",n),this.keys=mR("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function mR(t,e){return(e.arrayValue?.values||[]).map((n=>X.fromName(n.referenceValue)))}class HU extends Ce{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return cl(n)&&al(n.arrayValue,this.value)}}class gR extends Ce{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&al(this.value.arrayValue,n)}}class $U extends Ce{constructor(e,n){super(e,"not-in",n)}matches(e){if(al(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!al(this.value.arrayValue,n)}}class GU extends Ce{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!cl(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>al(this.value.arrayValue,r)))}}class KU{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.Te=null}}function Op(t,e=null,n=[],r=[],s=null,i=null,o=null){return new KU(t,e,n,r,s,i,o)}function Li(t){const e=Z(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>xp(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(i){return i.field.canonicalString()+i.dir})(r))).join(","),Al(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>sa(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>sa(r))).join(",")),e.Te=n}return e.Te}function Rl(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!UU(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!dR(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!TE(t.startAt,e.startAt)&&TE(t.endAt,e.endAt)}function mh(t){return X.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function gh(t,e){return t.filters.filter((n=>n instanceof Ce&&n.field.isEqual(e)))}function wE(t,e,n){let r=Nu,s=!0;for(const i of gh(t,e)){let o=Nu,a=!0;switch(i.op){case"<":case"<=":o=MU(i.value);break;case"==":case"in":case">=":o=i.value;break;case">":o=i.value,a=!1;break;case"!=":case"not-in":o=Nu}yE({value:r,inclusive:s},{value:o,inclusive:a})<0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];yE({value:r,inclusive:s},{value:o,inclusive:n.inclusive})<0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}function vE(t,e,n){let r=_s,s=!0;for(const i of gh(t,e)){let o=_s,a=!0;switch(i.op){case">=":case">":o=FU(i.value),a=!1;break;case"==":case"in":case"<=":o=i.value;break;case"<":o=i.value,a=!1;break;case"!=":case"not-in":o=_s}IE({value:r,inclusive:s},{value:o,inclusive:a})>0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];IE({value:r,inclusive:s},{value:o,inclusive:n.inclusive})>0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}class Kr{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=c,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function _R(t,e,n,r,s,i,o,a){return new Kr(t,e,n,r,s,i,o,a)}function Ra(t){return new Kr(t)}function AE(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function WU(t){return X.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function dg(t){return t.collectionGroup!==null}function Vo(t){const e=Z(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new je(Xe.comparator);return o.filters.forEach((c=>{c.getFlattenedFilters().forEach((u=>{u.isInequality()&&(a=a.add(u.field))}))})),a})(e).forEach((i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new ll(i,r))})),n.has(Xe.keyField().canonicalString())||e.Ie.push(new ll(Xe.keyField(),r))}return e.Ie}function Qt(t){const e=Z(t);return e.Ee||(e.Ee=IR(e,Vo(t))),e.Ee}function yR(t){const e=Z(t);return e.Re||(e.Re=IR(e,t.explicitOrderBy)),e.Re}function IR(t,e){if(t.limitType==="F")return Op(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((s=>{const i=s.dir==="desc"?"asc":"desc";return new ll(s.field,i)}));const n=t.endAt?new Ms(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ms(t.startAt.position,t.startAt.inclusive):null;return Op(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Lp(t,e){const n=t.filters.concat([e]);return new Kr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function zU(t,e){const n=t.explicitOrderBy.concat([e]);return new Kr(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}function _h(t,e,n){return new Kr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function QU(t,e){return new Kr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}function JU(t,e){return new Kr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}function Sl(t,e){return Rl(Qt(t),Qt(e))&&t.limitType===e.limitType}function ER(t){return`${Li(Qt(t))}|lt:${t.limitType}`}function yo(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((s=>pR(s))).join(", ")}]`),Al(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((s=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(s))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((s=>sa(s))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((s=>sa(s))).join(",")),`Target(${r})`})(Qt(t))}; limitType=${t.limitType})`}function Pl(t,e){return e.isFoundDocument()&&(function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):X.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)})(t,e)&&(function(r,s){for(const i of Vo(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0})(t,e)&&(function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0})(t,e)&&(function(r,s){return!(r.startAt&&!(function(o,a,c){const u=EE(o,a,c);return o.inclusive?u<=0:u<0})(r.startAt,Vo(r),s)||r.endAt&&!(function(o,a,c){const u=EE(o,a,c);return o.inclusive?u>=0:u>0})(r.endAt,Vo(r),s))})(t,e)}function TR(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function wR(t){return(e,n)=>{let r=!1;for(const s of Vo(t)){const i=YU(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function YU(t,e,n){const r=t.field.isKeyField()?X.comparator(e.key,n.key):(function(i,o,a){const c=o.data.field(i),u=a.data.field(i);return c!==null&&u!==null?Ls(c,u):re(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return re(19790,{direction:t.dir})}}class Wr{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ks(this.inner,((n,r)=>{for(const[s,i]of r)e(s,i)}))}isEmpty(){return eR(this.inner)}size(){return this.innerSize}}const XU=new Qe(X.comparator);function un(){return XU}const vR=new Qe(X.comparator);function gc(...t){let e=vR;for(const n of t)e=e.insert(n.key,n);return e}function AR(t){let e=vR;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function rr(){return Mc()}function bR(){return Mc()}function Mc(){return new Wr((t=>t.toString()),((t,e)=>t.isEqual(e)))}const ZU=new Qe(X.comparator),e2=new je(X.comparator);function Te(...t){let e=e2;for(const n of t)e=e.add(n);return e}const t2=new je(ye);function fg(){return t2}function pg(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:tl(e)?"-0":e}}function RR(t){return{integerValue:""+t}}function SR(t,e){return qb(e)?RR(e):pg(t,e)}class fd{constructor(){this._=void 0}}function n2(t,e,n){return t instanceof oa?(function(s,i){const o={fields:{[rR]:{stringValue:nR},[iR]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&ud(i)&&(i=hd(i)),i&&(o.fields[sR]=i),{mapValue:o}})(n,e):t instanceof Mi?CR(t,e):t instanceof Fi?kR(t,e):(function(s,i){const o=PR(s,i),a=bE(o)+bE(s.Ae);return Dp(o)&&Dp(s.Ae)?RR(a):pg(s.serializer,a)})(t,e)}function r2(t,e,n){return t instanceof Mi?CR(t,e):t instanceof Fi?kR(t,e):n}function PR(t,e){return t instanceof aa?(function(r){return Dp(r)||(function(i){return!!i&&"doubleValue"in i})(r)})(e)?e:{integerValue:0}:null}class oa extends fd{}class Mi extends fd{constructor(e){super(),this.elements=e}}function CR(t,e){const n=NR(e);for(const r of t.elements)n.some((s=>hr(s,r)))||n.push(r);return{arrayValue:{values:n}}}class Fi extends fd{constructor(e){super(),this.elements=e}}function kR(t,e){let n=NR(e);for(const r of t.elements)n=n.filter((s=>!hr(s,r)));return{arrayValue:{values:n}}}class aa extends fd{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function bE(t){return rt(t.integerValue||t.doubleValue)}function NR(t){return cl(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class Cl{constructor(e,n){this.field=e,this.transform=n}}function s2(t,e){return t.field.isEqual(e.field)&&(function(r,s){return r instanceof Mi&&s instanceof Mi||r instanceof Fi&&s instanceof Fi?Qo(r.elements,s.elements,hr):r instanceof aa&&s instanceof aa?hr(r.Ae,s.Ae):r instanceof oa&&s instanceof oa})(t.transform,e.transform)}class i2{constructor(e,n){this.version=e,this.transformResults=n}}class st{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new st}static exists(e){return new st(void 0,e)}static updateTime(e){return new st(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function xu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class pd{}function DR(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Pa(t.key,st.none()):new Sa(t.key,t.data,st.none());{const n=t.data,r=Dt.empty();let s=new je(Xe.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new zr(t.key,r,new ln(s.toArray()),st.none())}}function o2(t,e,n){t instanceof Sa?(function(s,i,o){const a=s.value.clone(),c=SE(s.fieldTransforms,i,o.transformResults);a.setAll(c),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()})(t,e,n):t instanceof zr?(function(s,i,o){if(!xu(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=SE(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(VR(s)),c.setAll(a),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(t,e,n):(function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,n)}function Fc(t,e,n,r){return t instanceof Sa?(function(i,o,a,c){if(!xu(i.precondition,o))return a;const u=i.value.clone(),h=PE(i.fieldTransforms,c,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null})(t,e,n,r):t instanceof zr?(function(i,o,a,c){if(!xu(i.precondition,o))return a;const u=PE(i.fieldTransforms,c,o),h=o.data;return h.setAll(VR(i)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map((d=>d.field)))})(t,e,n,r):(function(i,o,a){return xu(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a})(t,e,n)}function a2(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=PR(r.transform,s||null);i!=null&&(n===null&&(n=Dt.empty()),n.set(r.field,i))}return n||null}function RE(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Qo(r,s,((i,o)=>s2(i,o)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Sa extends pd{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class zr extends pd{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function VR(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function SE(t,e,n){const r=new Map;ae(t.length===n.length,32656,{Ve:n.length,de:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,r2(o,a,n[s]))}return r}function PE(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,n2(i,o,e))}return r}class Pa extends pd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class mg extends pd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class gg{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&o2(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Fc(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Fc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=bR();return this.mutations.forEach((s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const c=DR(o,a);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(he.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Te())}isEqual(e){return this.batchId===e.batchId&&Qo(this.mutations,e.mutations,((n,r)=>RE(n,r)))&&Qo(this.baseMutations,e.baseMutations,((n,r)=>RE(n,r)))}}class _g{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ae(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=(function(){return ZU})();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new _g(e,n,r,s)}}class yg{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class xR{constructor(e,n,r){this.alias=e,this.aggregateType=n,this.fieldPath=r}}class c2{constructor(e,n){this.count=e,this.unchangedNames=n}}var gt,ke;function OR(t){switch(t){case M.OK:return re(64938);case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0;default:return re(15467,{code:t})}}function LR(t){if(t===void 0)return pt("GRPC error has no .code"),M.UNKNOWN;switch(t){case gt.OK:return M.OK;case gt.CANCELLED:return M.CANCELLED;case gt.UNKNOWN:return M.UNKNOWN;case gt.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case gt.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case gt.INTERNAL:return M.INTERNAL;case gt.UNAVAILABLE:return M.UNAVAILABLE;case gt.UNAUTHENTICATED:return M.UNAUTHENTICATED;case gt.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case gt.NOT_FOUND:return M.NOT_FOUND;case gt.ALREADY_EXISTS:return M.ALREADY_EXISTS;case gt.PERMISSION_DENIED:return M.PERMISSION_DENIED;case gt.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case gt.ABORTED:return M.ABORTED;case gt.OUT_OF_RANGE:return M.OUT_OF_RANGE;case gt.UNIMPLEMENTED:return M.UNIMPLEMENTED;case gt.DATA_LOSS:return M.DATA_LOSS;default:return re(39323,{code:t})}}(ke=gt||(gt={}))[ke.OK=0]="OK",ke[ke.CANCELLED=1]="CANCELLED",ke[ke.UNKNOWN=2]="UNKNOWN",ke[ke.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ke[ke.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ke[ke.NOT_FOUND=5]="NOT_FOUND",ke[ke.ALREADY_EXISTS=6]="ALREADY_EXISTS",ke[ke.PERMISSION_DENIED=7]="PERMISSION_DENIED",ke[ke.UNAUTHENTICATED=16]="UNAUTHENTICATED",ke[ke.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ke[ke.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ke[ke.ABORTED=10]="ABORTED",ke[ke.OUT_OF_RANGE=11]="OUT_OF_RANGE",ke[ke.UNIMPLEMENTED=12]="UNIMPLEMENTED",ke[ke.INTERNAL=13]="INTERNAL",ke[ke.UNAVAILABLE=14]="UNAVAILABLE",ke[ke.DATA_LOSS=15]="DATA_LOSS";let Mp=null;function l2(t){if(Mp)throw new Error("a TestingHooksSpi instance is already set");Mp=t}function MR(){return new TextEncoder}const u2=new Ps([4294967295,4294967295],0);function CE(t){const e=MR().encode(t),n=new Ab;return n.update(e),new Uint8Array(n.digest())}function kE(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Ps([n,r],0),new Ps([s,i],0)]}class Ig{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new _c(`Invalid padding: ${n}`);if(r<0)throw new _c(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new _c(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new _c(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Ps.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(Ps.fromNumber(r)));return s.compare(u2)===1&&(s=new Ps([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=CE(e),[r,s]=kE(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Ig(i,s,n);return r.forEach((a=>o.insert(a))),o}insert(e){if(this.ge===0)return;const n=CE(e),[r,s]=kE(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.be(o)}}be(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class _c extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class kl{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Nl.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new kl(he.min(),s,new Qe(ye),un(),Te())}}class Nl{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Nl(r,n,Te(),Te(),Te())}}class Ou{constructor(e,n,r,s){this.Se=e,this.removedTargetIds=n,this.key=r,this.De=s}}class FR{constructor(e,n){this.targetId=e,this.Ce=n}}class UR{constructor(e,n,r=ct.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class NE{constructor(){this.ve=0,this.Fe=DE(),this.Me=ct.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Te(),n=Te(),r=Te();return this.Fe.forEach(((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:re(38017,{changeType:i})}})),new Nl(this.Me,this.xe,e,n,r)}Ke(){this.Oe=!1,this.Fe=DE()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,ae(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class h2{constructor(e){this.Ge=e,this.ze=new Map,this.je=un(),this.He=fu(),this.Je=fu(),this.Ze=new Qe(ye)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:re(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,s)=>{this.rt(s)&&n(s)}))}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(mh(i))if(r===0){const o=new X(i.path);this.et(n,o,Ye.newNoDocument(o,he.min()))}else ae(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const a=this.ut(e),c=a?this.ct(a,e,o):1;if(c!==0){this.it(n);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,u)}Mp?.lt((function(h,d,f,m,I){const T={localCacheCount:h,existenceFilterCount:d.count,databaseId:f.database,projectId:f.projectId},k=d.unchangedNames;return k&&(T.bloomFilter={applied:I===0,hashCount:k?.hashCount??0,bitmapLength:k?.bits?.bitmap?.length??0,padding:k?.bits?.padding??0,mightContain:V=>m?.mightContain(V)??!1}),T})(o,e.Ce,this.Ge.ht(),a,c))}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=Ur(r).toUint8Array()}catch(c){if(c instanceof tR)return bn("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new Ig(o,s,i)}catch(c){return bn(c instanceof _c?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.ge===0?null:a}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach((i=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.et(n,i,null),s++)})),s}Tt(e){const n=new Map;this.ze.forEach(((i,o)=>{const a=this.ot(o);if(a){if(i.current&&mh(a.target)){const c=new X(a.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,Ye.newNoDocument(c,e))}i.Be&&(n.set(o,i.ke()),i.Ke())}}));let r=Te();this.Je.forEach(((i,o)=>{let a=!0;o.forEachWhile((c=>{const u=this.ot(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)})),a&&(r=r.add(i))})),this.je.forEach(((i,o)=>o.setReadTime(e)));const s=new kl(e,n,this.Ze,this.je,r);return this.je=un(),this.He=fu(),this.Je=fu(),this.Ze=new Qe(ye),s}Ye(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,r),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.qe(n,1):s.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new NE,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new je(ye),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new je(ye),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||G("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new NE),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function fu(){return new Qe(X.comparator)}function DE(){return new Qe(X.comparator)}const d2={asc:"ASCENDING",desc:"DESCENDING"},f2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},p2={and:"AND",or:"OR"};class m2{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Fp(t,e){return t.useProto3Json||Al(e)?e:{value:e}}function ca(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function BR(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function g2(t,e){return ca(t,e.toTimestamp())}function mt(t){return ae(!!t,49232),he.fromTimestamp((function(n){const r=Fr(n);return new Fe(r.seconds,r.nanos)})(t))}function Eg(t,e){return Up(t,e).canonicalString()}function Up(t,e){const n=(function(s){return new be(["projects",s.projectId,"databases",s.database])})(t).child("documents");return e===void 0?n:n.child(e)}function jR(t){const e=be.fromString(t);return ae(JR(e),10190,{key:e.toString()}),e}function ul(t,e){return Eg(t.databaseId,e.path)}function ar(t,e){const n=jR(e);if(n.get(1)!==t.databaseId.projectId)throw new q(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new q(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new X($R(n))}function qR(t,e){return Eg(t.databaseId,e)}function HR(t){const e=jR(t);return e.length===4?be.emptyPath():$R(e)}function Bp(t){return new be(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function $R(t){return ae(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function VE(t,e,n){return{name:ul(t,e),fields:n.value.mapValue.fields}}function md(t,e,n){const r=ar(t,e.name),s=mt(e.updateTime),i=e.createTime?mt(e.createTime):he.min(),o=new Dt({mapValue:{fields:e.fields}}),a=Ye.newFoundDocument(r,s,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function _2(t,e){return"found"in e?(function(r,s){ae(!!s.found,43571),s.found.name,s.found.updateTime;const i=ar(r,s.found.name),o=mt(s.found.updateTime),a=s.found.createTime?mt(s.found.createTime):he.min(),c=new Dt({mapValue:{fields:s.found.fields}});return Ye.newFoundDocument(i,o,a,c)})(t,e):"missing"in e?(function(r,s){ae(!!s.missing,3894),ae(!!s.readTime,22933);const i=ar(r,s.missing),o=mt(s.readTime);return Ye.newNoDocument(i,o)})(t,e):re(7234,{result:e})}function y2(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:re(39313,{state:u})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=(function(u,h){return u.useProto3Json?(ae(h===void 0||typeof h=="string",58123),ct.fromBase64String(h||"")):(ae(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),ct.fromUint8Array(h||new Uint8Array))})(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&(function(u){const h=u.code===void 0?M.UNKNOWN:LR(u.code);return new q(h,u.message||"")})(o);n=new UR(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=ar(t,r.document.name),i=mt(r.document.updateTime),o=r.document.createTime?mt(r.document.createTime):he.min(),a=new Dt({mapValue:{fields:r.document.fields}}),c=Ye.newFoundDocument(s,i,o,a),u=r.targetIds||[],h=r.removedTargetIds||[];n=new Ou(u,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=ar(t,r.document),i=r.readTime?mt(r.readTime):he.min(),o=Ye.newNoDocument(s,i),a=r.removedTargetIds||[];n=new Ou([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=ar(t,r.document),i=r.removedTargetIds||[];n=new Ou([],i,s,null)}else{if(!("filter"in e))return re(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new c2(s,i),a=r.targetId;n=new FR(a,o)}}return n}function hl(t,e){let n;if(e instanceof Sa)n={update:VE(t,e.key,e.value)};else if(e instanceof Pa)n={delete:ul(t,e.key)};else if(e instanceof zr)n={update:VE(t,e.key,e.data),updateMask:A2(e.fieldMask)};else{if(!(e instanceof mg))return re(16599,{dt:e.type});n={verify:ul(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(i,o){const a=o.transform;if(a instanceof oa)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Mi)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Fi)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof aa)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw re(20930,{transform:o.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(s,i){return i.updateTime!==void 0?{updateTime:g2(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:re(27497)})(t,e.precondition)),n}function jp(t,e){const n=e.currentDocument?(function(i){return i.updateTime!==void 0?st.updateTime(mt(i.updateTime)):i.exists!==void 0?st.exists(i.exists):st.none()})(e.currentDocument):st.none(),r=e.updateTransforms?e.updateTransforms.map((s=>(function(o,a){let c=null;if("setToServerValue"in a)ae(a.setToServerValue==="REQUEST_TIME",16630,{proto:a}),c=new oa;else if("appendMissingElements"in a){const h=a.appendMissingElements.values||[];c=new Mi(h)}else if("removeAllFromArray"in a){const h=a.removeAllFromArray.values||[];c=new Fi(h)}else"increment"in a?c=new aa(o,a.increment):re(16584,{proto:a});const u=Xe.fromServerFormat(a.fieldPath);return new Cl(u,c)})(t,s))):[];if(e.update){e.update.name;const s=ar(t,e.update.name),i=new Dt({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=(function(c){const u=c.fieldPaths||[];return new ln(u.map((h=>Xe.fromServerFormat(h))))})(e.updateMask);return new zr(s,i,o,n,r)}return new Sa(s,i,n,r)}if(e.delete){const s=ar(t,e.delete);return new Pa(s,n)}if(e.verify){const s=ar(t,e.verify);return new mg(s,n)}return re(1463,{proto:e})}function I2(t,e){return t&&t.length>0?(ae(e!==void 0,14353),t.map((n=>(function(s,i){let o=s.updateTime?mt(s.updateTime):mt(i);return o.isEqual(he.min())&&(o=mt(i)),new i2(o,s.transformResults||[])})(n,e)))):[]}function GR(t,e){return{documents:[qR(t,e.path)]}}function gd(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=qR(t,s);const i=(function(u){if(u.length!==0)return QR(Ue.create(u,"and"))})(e.filters);i&&(n.structuredQuery.where=i);const o=(function(u){if(u.length!==0)return u.map((h=>(function(f){return{field:ps(f.field),direction:T2(f.dir)}})(h)))})(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Fp(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=(function(u){return{before:u.inclusive,values:u.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(u){return{before:!u.inclusive,values:u.position}})(e.endAt)),{ft:n,parent:s}}function KR(t,e,n,r){const{ft:s,parent:i}=gd(t,e),o={},a=[];let c=0;return n.forEach((u=>{const h=r?u.alias:"aggregate_"+c++;o[h]=u.alias,u.aggregateType==="count"?a.push({alias:h,count:{}}):u.aggregateType==="avg"?a.push({alias:h,avg:{field:ps(u.fieldPath)}}):u.aggregateType==="sum"&&a.push({alias:h,sum:{field:ps(u.fieldPath)}})})),{request:{structuredAggregationQuery:{aggregations:a,structuredQuery:s.structuredQuery},parent:s.parent},gt:o,parent:i}}function WR(t){let e=HR(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ae(r===1,65062);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=(function(d){const f=zR(d);return f instanceof Ue&&hg(f)?f.getFilters():[f]})(n.where));let o=[];n.orderBy&&(o=(function(d){return d.map((f=>(function(I){return new ll(Io(I.field),(function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(I.direction))})(f)))})(n.orderBy));let a=null;n.limit&&(a=(function(d){let f;return f=typeof d=="object"?d.value:d,Al(f)?null:f})(n.limit));let c=null;n.startAt&&(c=(function(d){const f=!!d.before,m=d.values||[];return new Ms(m,f)})(n.startAt));let u=null;return n.endAt&&(u=(function(d){const f=!d.before,m=d.values||[];return new Ms(m,f)})(n.endAt)),_R(e,s,o,i,a,"F",c,u)}function E2(t,e){const n=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return re(28987,{purpose:s})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function zR(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Io(n.unaryFilter.field);return Ce.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Io(n.unaryFilter.field);return Ce.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Io(n.unaryFilter.field);return Ce.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Io(n.unaryFilter.field);return Ce.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return re(61313);default:return re(60726)}})(t):t.fieldFilter!==void 0?(function(n){return Ce.create(Io(n.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return re(58110);default:return re(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Ue.create(n.compositeFilter.filters.map((r=>zR(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return re(1026)}})(n.compositeFilter.op))})(t):re(30097,{filter:t})}function T2(t){return d2[t]}function w2(t){return f2[t]}function v2(t){return p2[t]}function ps(t){return{fieldPath:t.canonicalString()}}function Io(t){return Xe.fromServerFormat(t.fieldPath)}function QR(t){return t instanceof Ce?(function(n){if(n.op==="=="){if(_E(n.value))return{unaryFilter:{field:ps(n.field),op:"IS_NAN"}};if(gE(n.value))return{unaryFilter:{field:ps(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(_E(n.value))return{unaryFilter:{field:ps(n.field),op:"IS_NOT_NAN"}};if(gE(n.value))return{unaryFilter:{field:ps(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ps(n.field),op:w2(n.op),value:n.value}}})(t):t instanceof Ue?(function(n){const r=n.getFilters().map((s=>QR(s)));return r.length===1?r[0]:{compositeFilter:{op:v2(n.op),filters:r}}})(t):re(54877,{filter:t})}function A2(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function JR(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}function YR(t){return!!t&&typeof t._toProto=="function"&&t._protoValueType==="ProtoValue"}class Pr{constructor(e,n,r,s,i=he.min(),o=he.min(),a=ct.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new Pr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Pr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Pr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Pr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class XR{constructor(e){this.yt=e}}function b2(t,e){let n;if(e.document)n=md(t.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=X.fromSegments(e.noDocument.path),s=Bi(e.noDocument.readTime);n=Ye.newNoDocument(r,s),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return re(56709);{const r=X.fromSegments(e.unknownDocument.path),s=Bi(e.unknownDocument.version);n=Ye.newUnknownDocument(r,s)}}return e.readTime&&n.setReadTime((function(s){const i=new Fe(s[0],s[1]);return he.fromTimestamp(i)})(e.readTime)),n}function xE(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:yh(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(i,o){return{name:ul(i,o.key),fields:o.data.value.mapValue.fields,updateTime:ca(i,o.version.toTimestamp()),createTime:ca(i,o.createTime.toTimestamp())}})(t.yt,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Ui(e.version)};else{if(!e.isUnknownDocument())return re(57904,{document:e});r.unknownDocument={path:n.path.toArray(),version:Ui(e.version)}}return r}function yh(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Ui(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Bi(t){const e=new Fe(t.seconds,t.nanoseconds);return he.fromTimestamp(e)}function mi(t,e){const n=(e.baseMutations||[]).map((i=>jp(t.yt,i)));for(let i=0;i<e.mutations.length-1;++i){const o=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const a=e.mutations[i+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const r=e.mutations.map((i=>jp(t.yt,i))),s=Fe.fromMillis(e.localWriteTimeMs);return new gg(e.batchId,s,n,r)}function yc(t){const e=Bi(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Bi(t.lastLimboFreeSnapshotVersion):he.min();let r;return r=(function(i){return i.documents!==void 0})(t.query)?(function(i){const o=i.documents.length;return ae(o===1,1966,{count:o}),Qt(Ra(HR(i.documents[0])))})(t.query):(function(i){return Qt(WR(i))})(t.query),new Pr(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,ct.fromBase64String(t.resumeToken))}function ZR(t,e){const n=Ui(e.snapshotVersion),r=Ui(e.lastLimboFreeSnapshotVersion);let s;s=mh(e.target)?GR(t.yt,e.target):gd(t.yt,e.target).ft;const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Li(e.target),readTime:n,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function _d(t){const e=WR({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?_h(e,e.limit,"L"):e}function Rf(t,e){return new yg(e.largestBatchId,jp(t.yt,e.overlayMutation))}function OE(t,e){const n=e.path.lastSegment();return[t,zt(e.path.popLast()),n]}function LE(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:Ui(r.readTime),documentKey:zt(r.documentKey.path),largestBatchId:r.largestBatchId}}class R2{getBundleMetadata(e,n){return ME(e).get(n).next((r=>{if(r)return(function(i){return{id:i.bundleId,createTime:Bi(i.createTime),version:i.version}})(r)}))}saveBundleMetadata(e,n){return ME(e).put((function(s){return{bundleId:s.id,createTime:Ui(mt(s.createTime)),version:s.version}})(n))}getNamedQuery(e,n){return FE(e).get(n).next((r=>{if(r)return(function(i){return{name:i.name,query:_d(i.bundledQuery),readTime:Bi(i.readTime)}})(r)}))}saveNamedQuery(e,n){return FE(e).put((function(s){return{name:s.name,readTime:Ui(mt(s.readTime)),bundledQuery:s.bundledQuery}})(n))}}function ME(t){return Pt(t,ad)}function FE(t){return Pt(t,cd)}class yd{constructor(e,n){this.serializer=e,this.userId=n}static wt(e,n){const r=n.uid||"";return new yd(e,r)}getOverlay(e,n){return sc(e).get(OE(this.userId,n)).next((r=>r?Rf(this.serializer,r):null))}getOverlays(e,n){const r=rr();return O.forEach(n,(s=>this.getOverlay(e,s).next((i=>{i!==null&&r.set(s,i)})))).next((()=>r))}saveOverlays(e,n,r){const s=[];return r.forEach(((i,o)=>{const a=new yg(n,o);s.push(this.bt(e,a))})),O.waitFor(s)}removeOverlaysForBatchId(e,n,r){const s=new Set;n.forEach((o=>s.add(zt(o.getCollectionPath()))));const i=[];return s.forEach((o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);i.push(sc(e).X(Cp,a))})),O.waitFor(i)}getOverlaysForCollection(e,n,r){const s=rr(),i=zt(n),o=IDBKeyRange.bound([this.userId,i,r],[this.userId,i,Number.POSITIVE_INFINITY],!0);return sc(e).H(Cp,o).next((a=>{for(const c of a){const u=Rf(this.serializer,c);s.set(u.getKey(),u)}return s}))}getOverlaysForCollectionGroup(e,n,r,s){const i=rr();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return sc(e).ee({index:zb,range:a},((c,u,h)=>{const d=Rf(this.serializer,u);i.size()<s||d.largestBatchId===o?(i.set(d.getKey(),d),o=d.largestBatchId):h.done()})).next((()=>i))}bt(e,n){return sc(e).put((function(s,i,o){const[a,c,u]=OE(i,o.mutation.key);return{userId:i,collectionPath:c,documentId:u,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:hl(s.yt,o.mutation)}})(this.serializer,this.userId,n))}}function sc(t){return Pt(t,ld)}class S2{St(e){return Pt(e,ag)}getSessionToken(e){return this.St(e).get("sessionToken").next((n=>{const r=n?.value;return r?ct.fromUint8Array(r):ct.EMPTY_BYTE_STRING}))}setSessionToken(e,n){return this.St(e).put({name:"sessionToken",value:n.toUint8Array()})}}class gi{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(rt(e.integerValue));else if("doubleValue"in e){const r=rt(e.doubleValue);isNaN(r)?this.Ft(n,13):(this.Ft(n,15),tl(r)?n.Mt(0):n.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(n,20),typeof r=="string"&&(r=Fr(r)),n.xt(`${r.seconds||""}`),n.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(Ur(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(n,45),n.Mt(r.latitude||0),n.Mt(r.longitude||0)}else"mapValue"in e?aR(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):dd(e)?this.kt(e.mapValue,n):(this.Kt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.qt(e.arrayValue,n),this.Nt(n)):re(19022,{Ut:e})}Ot(e,n){this.Ft(n,25),this.$t(e,n)}$t(e,n){n.xt(e)}Kt(e,n){const r=e.fields||{};this.Ft(n,55);for(const s of Object.keys(r))this.Ot(s,n),this.Ct(r[s],n)}kt(e,n){const r=e.fields||{};this.Ft(n,53);const s=ra,i=r[s].arrayValue?.values?.length||0;this.Ft(n,15),n.Mt(rt(i)),this.Ot(s,n),this.Ct(r[s],n)}qt(e,n){const r=e.values||[];this.Ft(n,50);for(const s of r)this.Ct(s,n)}Lt(e,n){this.Ft(n,37),X.fromName(e).path.forEach((r=>{this.Ft(n,60),this.$t(r,n)}))}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}}gi.Wt=new gi;const uo=255;function P2(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function UE(t){const e=64-(function(r){let s=0;for(let i=0;i<8;++i){const o=P2(255&r[i]);if(s+=o,o!==8)break}return s})(t);return Math.ceil(e/8)}class C2{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Qt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Gt(r.value),r=n.next();this.zt()}jt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ht(r.value),r=n.next();this.Jt()}Zt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const s=n.codePointAt(0);this.Gt(240|s>>>18),this.Gt(128|63&s>>>12),this.Gt(128|63&s>>>6),this.Gt(128|63&s)}}this.zt()}Xt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ht(r);else if(r<2048)this.Ht(960|r>>>6),this.Ht(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ht(480|r>>>12),this.Ht(128|63&r>>>6),this.Ht(128|63&r);else{const s=n.codePointAt(0);this.Ht(240|s>>>18),this.Ht(128|63&s>>>12),this.Ht(128|63&s>>>6),this.Ht(128|63&s)}}this.Jt()}Yt(e){const n=this.en(e),r=UE(n);this.tn(1+r),this.buffer[this.position++]=255&r;for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=255&n[s]}nn(e){const n=this.en(e),r=UE(n);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=~(255&n[s])}rn(){this.sn(uo),this.sn(255)}_n(){this.an(uo),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const n=(function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)})(e),r=!!(128&n[0]);n[0]^=r?255:128;for(let s=1;s<n.length;++s)n[s]^=r?255:0;return n}Gt(e){const n=255&e;n===0?(this.sn(0),this.sn(255)):n===uo?(this.sn(uo),this.sn(0)):this.sn(n)}Ht(e){const n=255&e;n===0?(this.an(0),this.an(255)):n===uo?(this.an(uo),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Jt(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class k2{constructor(e){this.cn=e}Bt(e){this.cn.Qt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.Yt(e)}vt(){this.cn.rn()}}class N2{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Xt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class ic{constructor(){this.cn=new C2,this.ascending=new k2(this.cn),this.descending=new N2(this.cn)}seed(e){this.cn.seed(e)}ln(e){return e===0?this.ascending:this.descending}un(){return this.cn.un()}reset(){this.cn.reset()}}class _i{constructor(e,n,r,s){this.hn=e,this.Pn=n,this.Tn=r,this.In=s}En(){const e=this.In.length,n=e===0||this.In[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.In,0),n!==e?r.set([0],this.In.length):++r[r.length-1],new _i(this.hn,this.Pn,this.Tn,r)}Rn(e,n,r){return{indexId:this.hn,uid:e,arrayValue:Lu(this.Tn),directionalValue:Lu(this.In),orderedDocumentKey:Lu(n),documentKey:r.path.toArray()}}An(e,n,r){const s=this.Rn(e,n,r);return[s.indexId,s.uid,s.arrayValue,s.directionalValue,s.orderedDocumentKey,s.documentKey]}}function os(t,e){let n=t.hn-e.hn;return n!==0?n:(n=BE(t.Tn,e.Tn),n!==0?n:(n=BE(t.In,e.In),n!==0?n:X.comparator(t.Pn,e.Pn)))}function BE(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}function Lu(t){return sA()?(function(n){let r="";for(let s=0;s<n.length;s++)r+=String.fromCharCode(n[s]);return r})(t):t}function jE(t){return typeof t!="string"?t:(function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r})(t)}class qE{constructor(e){this.Vn=new je(((n,r)=>Xe.comparator(n.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.dn=e.orderBy,this.mn=[];for(const n of e.filters){const r=n;r.isInequality()?this.Vn=this.Vn.add(r):this.mn.push(r)}}get fn(){return this.Vn.size>1}gn(e){if(ae(e.collectionGroup===this.collectionId,49279),this.fn)return!1;const n=Rp(e);if(n!==void 0&&!this.pn(n))return!1;const r=di(e);let s=new Set,i=0,o=0;for(;i<r.length&&this.pn(r[i]);++i)s=s.add(r[i].fieldPath.canonicalString());if(i===r.length)return!0;if(this.Vn.size>0){const a=this.Vn.getIterator().getNext();if(!s.has(a.field.canonicalString())){const c=r[i];if(!this.yn(a,c)||!this.wn(this.dn[o++],c))return!1}++i}for(;i<r.length;++i){const a=r[i];if(o>=this.dn.length||!this.wn(this.dn[o++],a))return!1}return!0}bn(){if(this.fn)return null;let e=new je(Xe.comparator);const n=[];for(const r of this.mn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new Ri(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Ri(r.field,0))}for(const r of this.dn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Ri(r.field,r.dir==="asc"?0:1)));return new Yo(Yo.UNKNOWN_ID,this.collectionId,n,Xo.empty())}pn(e){for(const n of this.mn)if(this.yn(n,e))return!0;return!1}yn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}wn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}function eS(t){if(ae(t instanceof Ce||t instanceof Ue,20012),t instanceof Ce){if(t instanceof gR){const n=t.value.arrayValue?.values?.map((r=>Ce.create(t.field,"==",r)))||[];return Ue.create(n,"or")}return t}const e=t.filters.map((n=>eS(n)));return Ue.create(e,t.op)}function D2(t){if(t.getFilters().length===0)return[];const e=$p(eS(t));return ae(tS(e),7391),qp(e)||Hp(e)?[e]:e.getFilters()}function qp(t){return t instanceof Ce}function Hp(t){return t instanceof Ue&&hg(t)}function tS(t){return qp(t)||Hp(t)||(function(n){if(n instanceof Ue&&Vp(n)){for(const r of n.getFilters())if(!qp(r)&&!Hp(r))return!1;return!0}return!1})(t)}function $p(t){if(ae(t instanceof Ce||t instanceof Ue,34018),t instanceof Ce)return t;if(t.filters.length===1)return $p(t.filters[0]);const e=t.filters.map((r=>$p(r)));let n=Ue.create(e,t.op);return n=Ih(n),tS(n)?n:(ae(n instanceof Ue,64498),ae(ia(n),40251),ae(n.filters.length>1,57927),n.filters.reduce(((r,s)=>Tg(r,s))))}function Tg(t,e){let n;return ae(t instanceof Ce||t instanceof Ue,38388),ae(e instanceof Ce||e instanceof Ue,25473),n=t instanceof Ce?e instanceof Ce?(function(s,i){return Ue.create([s,i],"and")})(t,e):HE(t,e):e instanceof Ce?HE(e,t):(function(s,i){if(ae(s.filters.length>0&&i.filters.length>0,48005),ia(s)&&ia(i))return fR(s,i.getFilters());const o=Vp(s)?s:i,a=Vp(s)?i:s,c=o.filters.map((u=>Tg(u,a)));return Ue.create(c,"or")})(t,e),Ih(n)}function HE(t,e){if(ia(e))return fR(e,t.getFilters());{const n=e.filters.map((r=>Tg(t,r)));return Ue.create(n,"or")}}function Ih(t){if(ae(t instanceof Ce||t instanceof Ue,11850),t instanceof Ce)return t;const e=t.getFilters();if(e.length===1)return Ih(e[0]);if(hR(t))return t;const n=e.map((s=>Ih(s))),r=[];return n.forEach((s=>{s instanceof Ce?r.push(s):s instanceof Ue&&(s.op===t.op?r.push(...s.filters):r.push(s))})),r.length===1?r[0]:Ue.create(r,t.op)}class V2{constructor(){this.Sn=new wg}addToCollectionParentIndex(e,n){return this.Sn.add(n),O.resolve()}getCollectionParents(e,n){return O.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return O.resolve()}deleteFieldIndex(e,n){return O.resolve()}deleteAllFieldIndexes(e){return O.resolve()}createTargetIndexes(e,n){return O.resolve()}getDocumentsMatchingTarget(e,n){return O.resolve(null)}getIndexType(e,n){return O.resolve(0)}getFieldIndexes(e,n){return O.resolve([])}getNextCollectionGroupToUpdate(e){return O.resolve(null)}getMinOffset(e,n){return O.resolve(Rn.min())}getMinOffsetFromCollectionGroup(e,n){return O.resolve(Rn.min())}updateCollectionGroup(e,n,r){return O.resolve()}updateIndexEntries(e,n){return O.resolve()}}class wg{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new je(be.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new je(be.comparator)).toArray()}}const $E="IndexedDbIndexManager",pu=new Uint8Array(0);class x2{constructor(e,n){this.databaseId=n,this.Dn=new wg,this.Cn=new Wr((r=>Li(r)),((r,s)=>Rl(r,s))),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.Dn.has(n)){const r=n.lastSegment(),s=n.popLast();e.addOnCommittedListener((()=>{this.Dn.add(n)}));const i={collectionId:r,parent:zt(s)};return GE(e).put(i)}return O.resolve()}getCollectionParents(e,n){const r=[],s=IDBKeyRange.bound([n,""],[Vb(n),""],!1,!0);return GE(e).H(s).next((i=>{for(const o of i){if(o.collectionId!==n)break;r.push(nr(o.parent))}return r}))}addFieldIndex(e,n){const r=oc(e),s=(function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map((c=>[c.fieldPath.canonicalString(),c.kind]))}})(n);delete s.indexId;const i=r.add(s);if(n.indexState){const o=fo(e);return i.next((a=>{o.put(LE(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))}))}return i.next()}deleteFieldIndex(e,n){const r=oc(e),s=fo(e),i=ho(e);return r.delete(n.indexId).next((()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const n=oc(e),r=ho(e),s=fo(e);return n.X().next((()=>r.X())).next((()=>s.X()))}createTargetIndexes(e,n){return O.forEach(this.vn(n),(r=>this.getIndexType(e,r).next((s=>{if(s===0||s===1){const i=new qE(r).bn();if(i!=null)return this.addFieldIndex(e,i)}}))))}getDocumentsMatchingTarget(e,n){const r=ho(e);let s=!0;const i=new Map;return O.forEach(this.vn(n),(o=>this.Fn(e,o).next((a=>{s&&(s=!!a),i.set(o,a)})))).next((()=>{if(s){let o=Te();const a=[];return O.forEach(i,((c,u)=>{G($E,`Using index ${(function(_){return`id=${_.indexId}|cg=${_.collectionGroup}|f=${_.fields.map((C=>`${C.fieldPath}:${C.kind}`)).join(",")}`})(c)} to execute ${Li(n)}`);const h=(function(_,C){const x=Rp(C);if(x===void 0)return null;for(const U of gh(_,x.fieldPath))switch(U.op){case"array-contains-any":return U.value.arrayValue.values||[];case"array-contains":return[U.value]}return null})(u,c),d=(function(_,C){const x=new Map;for(const U of di(C))for(const v of gh(_,U.fieldPath))switch(v.op){case"==":case"in":x.set(U.fieldPath.canonicalString(),v.value);break;case"not-in":case"!=":return x.set(U.fieldPath.canonicalString(),v.value),Array.from(x.values())}return null})(u,c),f=(function(_,C){const x=[];let U=!0;for(const v of di(C)){const E=v.kind===0?wE(_,v.fieldPath,_.startAt):vE(_,v.fieldPath,_.startAt);x.push(E.value),U&&(U=E.inclusive)}return new Ms(x,U)})(u,c),m=(function(_,C){const x=[];let U=!0;for(const v of di(C)){const E=v.kind===0?vE(_,v.fieldPath,_.endAt):wE(_,v.fieldPath,_.endAt);x.push(E.value),U&&(U=E.inclusive)}return new Ms(x,U)})(u,c),I=this.Mn(c,u,f),T=this.Mn(c,u,m),k=this.xn(c,u,d),V=this.On(c.indexId,h,I,f.inclusive,T,m.inclusive,k);return O.forEach(V,(N=>r.Z(N,n.limit).next((_=>{_.forEach((C=>{const x=X.fromSegments(C.documentKey);o.has(x)||(o=o.add(x),a.push(x))}))}))))})).next((()=>a))}return O.resolve(null)}))}vn(e){let n=this.Cn.get(e);return n||(e.filters.length===0?n=[e]:n=D2(Ue.create(e.filters,"and")).map((r=>Op(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Cn.set(e,n),n)}On(e,n,r,s,i,o,a){const c=(n!=null?n.length:1)*Math.max(r.length,i.length),u=c/(n!=null?n.length:1),h=[];for(let d=0;d<c;++d){const f=n?this.Nn(n[d/u]):pu,m=this.Bn(e,f,r[d%u],s),I=this.Ln(e,f,i[d%u],o),T=a.map((k=>this.Bn(e,f,k,!0)));h.push(...this.createRange(m,I,T))}return h}Bn(e,n,r,s){const i=new _i(e,X.empty(),n,r);return s?i:i.En()}Ln(e,n,r,s){const i=new _i(e,X.empty(),n,r);return s?i.En():i}Fn(e,n){const r=new qE(n),s=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,s).next((i=>{let o=null;for(const a of i)r.gn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o}))}getIndexType(e,n){let r=2;const s=this.vn(n);return O.forEach(s,(i=>this.Fn(e,i).next((o=>{o?r!==0&&o.fields.length<(function(c){let u=new je(Xe.comparator),h=!1;for(const d of c.filters)for(const f of d.getFlattenedFilters())f.field.isKeyField()||(f.op==="array-contains"||f.op==="array-contains-any"?h=!0:u=u.add(f.field));for(const d of c.orderBy)d.field.isKeyField()||(u=u.add(d.field));return u.size+(h?1:0)})(i)&&(r=1):r=0})))).next((()=>(function(o){return o.limit!==null})(n)&&s.length>1&&r===2?1:r))}kn(e,n){const r=new ic;for(const s of di(e)){const i=n.data.field(s.fieldPath);if(i==null)return null;const o=r.ln(s.kind);gi.Wt.Dt(i,o)}return r.un()}Nn(e){const n=new ic;return gi.Wt.Dt(e,n.ln(0)),n.un()}Kn(e,n){const r=new ic;return gi.Wt.Dt(Oi(this.databaseId,n),r.ln((function(i){const o=di(i);return o.length===0?0:o[o.length-1].kind})(e))),r.un()}xn(e,n,r){if(r===null)return[];let s=[];s.push(new ic);let i=0;for(const o of di(e)){const a=r[i++];for(const c of s)if(this.qn(n,o.fieldPath)&&cl(a))s=this.Un(s,o,a);else{const u=c.ln(o.kind);gi.Wt.Dt(a,u)}}return this.$n(s)}Mn(e,n,r){return this.xn(e,n,r.position)}$n(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].un();return n}Un(e,n,r){const s=[...e],i=[];for(const o of r.arrayValue.values||[])for(const a of s){const c=new ic;c.seed(a.un()),gi.Wt.Dt(o,c.ln(n.kind)),i.push(c)}return i}qn(e,n){return!!e.filters.find((r=>r instanceof Ce&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,n){const r=oc(e),s=fo(e);return(n?r.H(Pp,IDBKeyRange.bound(n,n)):r.H()).next((i=>{const o=[];return O.forEach(i,(a=>s.get([a.indexId,this.uid]).next((c=>{o.push((function(h,d){const f=d?new Xo(d.sequenceNumber,new Rn(Bi(d.readTime),new X(nr(d.documentKey)),d.largestBatchId)):Xo.empty(),m=h.fields.map((([I,T])=>new Ri(Xe.fromServerFormat(I),T)));return new Yo(h.indexId,h.collectionGroup,m,f)})(a,c))})))).next((()=>o))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((n=>n.length===0?null:(n.sort(((r,s)=>{const i=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return i!==0?i:ye(r.collectionGroup,s.collectionGroup)})),n[0].collectionGroup)))}updateCollectionGroup(e,n,r){const s=oc(e),i=fo(e);return this.Wn(e).next((o=>s.H(Pp,IDBKeyRange.bound(n,n)).next((a=>O.forEach(a,(c=>i.put(LE(c.indexId,this.uid,o,r))))))))}updateIndexEntries(e,n){const r=new Map;return O.forEach(n,((s,i)=>{const o=r.get(s.collectionGroup);return(o?O.resolve(o):this.getFieldIndexes(e,s.collectionGroup)).next((a=>(r.set(s.collectionGroup,a),O.forEach(a,(c=>this.Qn(e,s,c).next((u=>{const h=this.Gn(i,c);return u.isEqual(h)?O.resolve():this.zn(e,i,c,u,h)})))))))}))}jn(e,n,r,s){return ho(e).put(s.Rn(this.uid,this.Kn(r,n.key),n.key))}Hn(e,n,r,s){return ho(e).delete(s.An(this.uid,this.Kn(r,n.key),n.key))}Qn(e,n,r){const s=ho(e);let i=new je(os);return s.ee({index:Wb,range:IDBKeyRange.only([r.indexId,this.uid,Lu(this.Kn(r,n))])},((o,a)=>{i=i.add(new _i(r.indexId,n,jE(a.arrayValue),jE(a.directionalValue)))})).next((()=>i))}Gn(e,n){let r=new je(os);const s=this.kn(n,e);if(s==null)return r;const i=Rp(n);if(i!=null){const o=e.data.field(i.fieldPath);if(cl(o))for(const a of o.arrayValue.values||[])r=r.add(new _i(n.indexId,e.key,this.Nn(a),s))}else r=r.add(new _i(n.indexId,e.key,pu,s));return r}zn(e,n,r,s,i){G($E,"Updating index entries for document '%s'",n.key);const o=[];return(function(c,u,h,d,f){const m=c.getIterator(),I=u.getIterator();let T=lo(m),k=lo(I);for(;T||k;){let V=!1,N=!1;if(T&&k){const _=h(T,k);_<0?N=!0:_>0&&(V=!0)}else T!=null?N=!0:V=!0;V?(d(k),k=lo(I)):N?(f(T),T=lo(m)):(T=lo(m),k=lo(I))}})(s,i,os,(a=>{o.push(this.jn(e,n,r,a))}),(a=>{o.push(this.Hn(e,n,r,a))})),O.waitFor(o)}Wn(e){let n=1;return fo(e).ee({index:Kb,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,s,i)=>{i.done(),n=s.sequenceNumber+1})).next((()=>n))}createRange(e,n,r){r=r.sort(((o,a)=>os(o,a))).filter(((o,a,c)=>!a||os(o,c[a-1])!==0));const s=[];s.push(e);for(const o of r){const a=os(o,e),c=os(o,n);if(a===0)s[0]=e.En();else if(a>0&&c<0)s.push(o),s.push(o.En());else if(c>0)break}s.push(n);const i=[];for(let o=0;o<s.length;o+=2){if(this.Jn(s[o],s[o+1]))return[];const a=s[o].An(this.uid,pu,X.empty()),c=s[o+1].An(this.uid,pu,X.empty());i.push(IDBKeyRange.bound(a,c))}return i}Jn(e,n){return os(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(KE)}getMinOffset(e,n){return O.mapArray(this.vn(n),(r=>this.Fn(e,r).next((s=>s||re(44426))))).next(KE)}}function GE(t){return Pt(t,sl)}function ho(t){return Pt(t,Oc)}function oc(t){return Pt(t,og)}function fo(t){return Pt(t,xc)}function KE(t){ae(t.length!==0,28825);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const s=t[r].indexState.offset;rg(s,e)<0&&(e=s),n<s.largestBatchId&&(n=s.largestBatchId)}return new Rn(e.readTime,e.documentKey,n)}const WE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},nS=41943040;class $t{static withCacheSize(e){return new $t(e,$t.DEFAULT_COLLECTION_PERCENTILE,$t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}function rS(t,e,n){const r=t.store(On),s=t.store(Zo),i=[],o=IDBKeyRange.only(n.batchId);let a=0;const c=r.ee({range:o},((h,d,f)=>(a++,f.delete())));i.push(c.next((()=>{ae(a===1,47070,{batchId:n.batchId})})));const u=[];for(const h of n.mutations){const d=Hb(e,h.key.path,n.batchId);i.push(s.delete(d)),u.push(h.key)}return O.waitFor(i).next((()=>u))}function Eh(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw re(14731);e=t.noDocument}return JSON.stringify(e).length}$t.DEFAULT_COLLECTION_PERCENTILE=10,$t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,$t.DEFAULT=new $t(nS,$t.DEFAULT_COLLECTION_PERCENTILE,$t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),$t.DISABLED=new $t(-1,0,0);class Id{constructor(e,n,r,s){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=s,this.Zn={}}static wt(e,n,r,s){ae(e.uid!=="",64387);const i=e.isAuthenticated()?e.uid:"";return new Id(i,n,r,s)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return as(e).ee({index:Ei,range:r},((s,i,o)=>{n=!1,o.done()})).next((()=>n))}addMutationBatch(e,n,r,s){const i=Eo(e),o=as(e);return o.add({}).next((a=>{ae(typeof a=="number",49019);const c=new gg(a,n,r,s),u=(function(m,I,T){const k=T.baseMutations.map((N=>hl(m.yt,N))),V=T.mutations.map((N=>hl(m.yt,N)));return{userId:I,batchId:T.batchId,localWriteTimeMs:T.localWriteTime.toMillis(),baseMutations:k,mutations:V}})(this.serializer,this.userId,c),h=[];let d=new je(((f,m)=>ye(f.canonicalString(),m.canonicalString())));for(const f of s){const m=Hb(this.userId,f.key.path,a);d=d.add(f.key.path.popLast()),h.push(o.put(u)),h.push(i.put(m,lU))}return d.forEach((f=>{h.push(this.indexManager.addToCollectionParentIndex(e,f))})),e.addOnCommittedListener((()=>{this.Zn[a]=c.keys()})),O.waitFor(h).next((()=>c))}))}lookupMutationBatch(e,n){return as(e).get(n).next((r=>r?(ae(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:n}),mi(this.serializer,r)):null))}Xn(e,n){return this.Zn[n]?O.resolve(this.Zn[n]):this.lookupMutationBatch(e,n).next((r=>{if(r){const s=r.keys();return this.Zn[n]=s,s}return null}))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=IDBKeyRange.lowerBound([this.userId,r]);let i=null;return as(e).ee({index:Ei,range:s},((o,a,c)=>{a.userId===this.userId&&(ae(a.batchId>=r,47524,{Yn:r}),i=mi(this.serializer,a)),c.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=Cs;return as(e).ee({index:Ei,range:n,reverse:!0},((s,i,o)=>{r=i.batchId,o.done()})).next((()=>r))}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,Cs],[this.userId,Number.POSITIVE_INFINITY]);return as(e).H(Ei,n).next((r=>r.map((s=>mi(this.serializer,s)))))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=Cu(this.userId,n.path),s=IDBKeyRange.lowerBound(r),i=[];return Eo(e).ee({range:s},((o,a,c)=>{const[u,h,d]=o,f=nr(h);if(u===this.userId&&n.path.isEqual(f))return as(e).get(d).next((m=>{if(!m)throw re(61480,{er:o,batchId:d});ae(m.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:m.userId,batchId:d}),i.push(mi(this.serializer,m))}));c.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new je(ye);const s=[];return n.forEach((i=>{const o=Cu(this.userId,i.path),a=IDBKeyRange.lowerBound(o),c=Eo(e).ee({range:a},((u,h,d)=>{const[f,m,I]=u,T=nr(m);f===this.userId&&i.path.isEqual(T)?r=r.add(I):d.done()}));s.push(c)})),O.waitFor(s).next((()=>this.tr(e,r)))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1,i=Cu(this.userId,r),o=IDBKeyRange.lowerBound(i);let a=new je(ye);return Eo(e).ee({range:o},((c,u,h)=>{const[d,f,m]=c,I=nr(f);d===this.userId&&r.isPrefixOf(I)?I.length===s&&(a=a.add(m)):h.done()})).next((()=>this.tr(e,a)))}tr(e,n){const r=[],s=[];return n.forEach((i=>{s.push(as(e).get(i).next((o=>{if(o===null)throw re(35274,{batchId:i});ae(o.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:o.userId,batchId:i}),r.push(mi(this.serializer,o))})))})),O.waitFor(s).next((()=>r))}removeMutationBatch(e,n){return rS(e.le,this.userId,n).next((r=>(e.addOnCommittedListener((()=>{this.nr(n.batchId)})),O.forEach(r,(s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))))}nr(e){delete this.Zn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((n=>{if(!n)return O.resolve();const r=IDBKeyRange.lowerBound((function(o){return[o]})(this.userId)),s=[];return Eo(e).ee({range:r},((i,o,a)=>{if(i[0]===this.userId){const c=nr(i[1]);s.push(c)}else a.done()})).next((()=>{ae(s.length===0,56720,{rr:s.map((i=>i.canonicalString()))})}))}))}containsKey(e,n){return sS(e,this.userId,n)}ir(e){return iS(e).get(this.userId).next((n=>n||{userId:this.userId,lastAcknowledgedBatchId:Cs,lastStreamToken:""}))}}function sS(t,e,n){const r=Cu(e,n.path),s=r[1],i=IDBKeyRange.lowerBound(r);let o=!1;return Eo(t).ee({range:i,Y:!0},((a,c,u)=>{const[h,d,f]=a;h===e&&d===s&&(o=!0),u.done()})).next((()=>o))}function as(t){return Pt(t,On)}function Eo(t){return Pt(t,Zo)}function iS(t){return Pt(t,nl)}class ji{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new ji(0)}static ar(){return new ji(-1)}}class O2{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.ur(e).next((n=>{const r=new ji(n.highestTargetId);return n.highestTargetId=r.next(),this.cr(e,n).next((()=>n.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.ur(e).next((n=>he.fromTimestamp(new Fe(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.ur(e).next((n=>n.highestListenSequenceNumber))}setTargetsMetadata(e,n,r){return this.ur(e).next((s=>(s.highestListenSequenceNumber=n,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),n>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=n),this.cr(e,s))))}addTargetData(e,n){return this.lr(e,n).next((()=>this.ur(e).next((r=>(r.targetCount+=1,this.hr(n,r),this.cr(e,r))))))}updateTargetData(e,n){return this.lr(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next((()=>po(e).delete(n.targetId))).next((()=>this.ur(e))).next((r=>(ae(r.targetCount>0,8065),r.targetCount-=1,this.cr(e,r))))}removeTargets(e,n,r){let s=0;const i=[];return po(e).ee(((o,a)=>{const c=yc(a);c.sequenceNumber<=n&&r.get(c.targetId)===null&&(s++,i.push(this.removeTargetData(e,c)))})).next((()=>O.waitFor(i))).next((()=>s))}forEachTarget(e,n){return po(e).ee(((r,s)=>{const i=yc(s);n(i)}))}ur(e){return zE(e).get(ph).next((n=>(ae(n!==null,2888),n)))}cr(e,n){return zE(e).put(ph,n)}lr(e,n){return po(e).put(ZR(this.serializer,n))}hr(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.ur(e).next((n=>n.targetCount))}getTargetData(e,n){const r=Li(n),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let i=null;return po(e).ee({range:s,index:Gb},((o,a,c)=>{const u=yc(a);Rl(n,u.target)&&(i=u,c.done())})).next((()=>i))}addMatchingKeys(e,n,r){const s=[],i=ms(e);return n.forEach((o=>{const a=zt(o.path);s.push(i.put({targetId:r,path:a})),s.push(this.referenceDelegate.addReference(e,r,o))})),O.waitFor(s)}removeMatchingKeys(e,n,r){const s=ms(e);return O.forEach(n,(i=>{const o=zt(i.path);return O.waitFor([s.delete([r,o]),this.referenceDelegate.removeReference(e,r,i)])}))}removeMatchingKeysForTargetId(e,n){const r=ms(e),s=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),s=ms(e);let i=Te();return s.ee({range:r,Y:!0},((o,a,c)=>{const u=nr(o[1]),h=new X(u);i=i.add(h)})).next((()=>i))}containsKey(e,n){const r=zt(n.path),s=IDBKeyRange.bound([r],[Vb(r)],!1,!0);let i=0;return ms(e).ee({index:ig,Y:!0,range:s},(([o,a],c,u)=>{o!==0&&(i++,u.done())})).next((()=>i>0))}At(e,n){return po(e).get(n).next((r=>r?yc(r):null))}}function po(t){return Pt(t,ea)}function zE(t){return Pt(t,Si)}function ms(t){return Pt(t,ta)}const QE="LruGarbageCollector",oS=1048576;function JE([t,e],[n,r]){const s=ye(t,n);return s===0?ye(e,r):s}class L2{constructor(e){this.Pr=e,this.buffer=new je(JE),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();JE(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class aS{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){G(QE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Gs(n)?G(QE,"Ignoring IndexedDB error during garbage collection: ",n):await $s(n)}await this.Ar(3e5)}))}}class M2{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return O.resolve(cn.ce);const r=new L2(n);return this.Vr.forEachTarget(e,(s=>r.Er(s.sequenceNumber))).next((()=>this.Vr.mr(e,(s=>r.Er(s))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(G("LruGarbageCollector","Garbage collection skipped; disabled"),O.resolve(WE)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(G("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),WE):this.gr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let r,s,i,o,a,c,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((d=>(d>this.params.maximumSequenceNumbersToCollect?(G("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),s=this.params.maximumSequenceNumbersToCollect):s=d,o=Date.now(),this.nthSequenceNumber(e,s)))).next((d=>(r=d,a=Date.now(),this.removeTargets(e,r,n)))).next((d=>(i=d,c=Date.now(),this.removeOrphanedDocuments(e,r)))).next((d=>(u=Date.now(),_o()<=Pe.DEBUG&&G("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(c-a)+`ms
	Removed ${d} documents in `+(u-c)+`ms
Total Duration: ${u-h}ms`),O.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:d}))))}}function cS(t,e){return new M2(t,e)}class F2{constructor(e,n){this.db=e,this.garbageCollector=cS(this,n)}dr(e){const n=this.pr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>n.next((s=>r+s))))}pr(e){let n=0;return this.mr(e,(r=>{n++})).next((()=>n))}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}mr(e,n){return this.yr(e,((r,s)=>n(s)))}addReference(e,n,r){return mu(e,r)}removeReference(e,n,r){return mu(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return mu(e,n)}wr(e,n){return(function(s,i){let o=!1;return iS(s).te((a=>sS(s,a,i).next((c=>(c&&(o=!0),O.resolve(!c)))))).next((()=>o))})(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let i=0;return this.yr(e,((o,a)=>{if(a<=n){const c=this.wr(e,o).next((u=>{if(!u)return i++,r.getEntry(e,o).next((()=>(r.removeEntry(o,he.min()),ms(e).delete((function(d){return[0,zt(d.path)]})(o)))))}));s.push(c)}})).next((()=>O.waitFor(s))).next((()=>r.apply(e))).next((()=>i))}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return mu(e,n)}yr(e,n){const r=ms(e);let s,i=cn.ce;return r.ee({index:ig},(([o,a],{path:c,sequenceNumber:u})=>{o===0?(i!==cn.ce&&n(new X(nr(s)),i),i=u,s=c):i=cn.ce})).next((()=>{i!==cn.ce&&n(new X(nr(s)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function mu(t,e){return ms(t).put((function(r,s){return{targetId:0,path:zt(r.path),sequenceNumber:s}})(e,t.currentSequenceNumber))}class lS{constructor(){this.changes=new Wr((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ye.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?O.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class U2{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return oi(e).put(r)}removeEntry(e,n,r){return oi(e).delete((function(i,o){const a=i.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],yh(o),a[a.length-1]]})(n,r))}updateMetadata(e,n){return this.getMetadata(e).next((r=>(r.byteSize+=n,this.br(e,r))))}getEntry(e,n){let r=Ye.newInvalidDocument(n);return oi(e).ee({index:ku,range:IDBKeyRange.only(ac(n))},((s,i)=>{r=this.Sr(n,i)})).next((()=>r))}Dr(e,n){let r={size:0,document:Ye.newInvalidDocument(n)};return oi(e).ee({index:ku,range:IDBKeyRange.only(ac(n))},((s,i)=>{r={document:this.Sr(n,i),size:Eh(i)}})).next((()=>r))}getEntries(e,n){let r=un();return this.Cr(e,n,((s,i)=>{const o=this.Sr(s,i);r=r.insert(s,o)})).next((()=>r))}vr(e,n){let r=un(),s=new Qe(X.comparator);return this.Cr(e,n,((i,o)=>{const a=this.Sr(i,o);r=r.insert(i,a),s=s.insert(i,Eh(o))})).next((()=>({documents:r,Fr:s})))}Cr(e,n,r){if(n.isEmpty())return O.resolve();let s=new je(ZE);n.forEach((c=>s=s.add(c)));const i=IDBKeyRange.bound(ac(s.first()),ac(s.last())),o=s.getIterator();let a=o.getNext();return oi(e).ee({index:ku,range:i},((c,u,h)=>{const d=X.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&ZE(a,d)<0;)r(a,null),a=o.getNext();a&&a.isEqual(d)&&(r(a,u),a=o.hasNext()?o.getNext():null),a?h.j(ac(a)):h.done()})).next((()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null}))}getDocumentsMatchingQuery(e,n,r,s,i){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),yh(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return oi(e).H(IDBKeyRange.bound(a,c,!0)).next((u=>{i?.incrementDocumentReadCount(u.length);let h=un();for(const d of u){const f=this.Sr(X.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);f.isFoundDocument()&&(Pl(n,f)||s.has(f.key))&&(h=h.insert(f.key,f))}return h}))}getAllFromCollectionGroup(e,n,r,s){let i=un();const o=XE(n,r),a=XE(n,Rn.max());return oi(e).ee({index:$b,range:IDBKeyRange.bound(o,a,!0)},((c,u,h)=>{const d=this.Sr(X.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);i=i.insert(d.key,d),i.size===s&&h.done()})).next((()=>i))}newChangeBuffer(e){return new B2(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((n=>n.byteSize))}getMetadata(e){return YE(e).get(Sp).next((n=>(ae(!!n,20021),n)))}br(e,n){return YE(e).put(Sp,n)}Sr(e,n){if(n){const r=b2(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(he.min())))return r}return Ye.newInvalidDocument(e)}}function uS(t){return new U2(t)}class B2 extends lS{constructor(e,n){super(),this.Mr=e,this.trackRemovals=n,this.Or=new Wr((r=>r.toString()),((r,s)=>r.isEqual(s)))}applyChanges(e){const n=[];let r=0,s=new je(((i,o)=>ye(i.canonicalString(),o.canonicalString())));return this.changes.forEach(((i,o)=>{const a=this.Or.get(i);if(n.push(this.Mr.removeEntry(e,i,a.readTime)),o.isValidDocument()){const c=xE(this.Mr.serializer,o);s=s.add(i.path.popLast());const u=Eh(c);r+=u-a.size,n.push(this.Mr.addEntry(e,i,c))}else if(r-=a.size,this.trackRemovals){const c=xE(this.Mr.serializer,o.convertToNoDocument(he.min()));n.push(this.Mr.addEntry(e,i,c))}})),s.forEach((i=>{n.push(this.Mr.indexManager.addToCollectionParentIndex(e,i))})),n.push(this.Mr.updateMetadata(e,r)),O.waitFor(n)}getFromCache(e,n){return this.Mr.Dr(e,n).next((r=>(this.Or.set(n,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,n){return this.Mr.vr(e,n).next((({documents:r,Fr:s})=>(s.forEach(((i,o)=>{this.Or.set(i,{size:o,readTime:r.get(i).readTime})})),r)))}}function YE(t){return Pt(t,rl)}function oi(t){return Pt(t,fh)}function ac(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function XE(t,e){const n=e.documentKey.path.toArray();return[t,yh(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function ZE(t,e){const n=t.path.toArray(),r=e.path.toArray();let s=0;for(let i=0;i<n.length-2&&i<r.length-2;++i)if(s=ye(n[i],r[i]),s)return s;return s=ye(n.length,r.length),s||(s=ye(n[n.length-2],r[r.length-2]),s||ye(n[n.length-1],r[r.length-1]))}class j2{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class hS{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,n)))).next((s=>(r!==null&&Fc(r.mutation,s,ln.empty(),Fe.now()),s)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,Te()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=Te()){const s=rr();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,r).next((i=>{let o=gc();return i.forEach(((a,c)=>{o=o.insert(a,c.overlayedDocument)})),o}))))}getOverlayedDocuments(e,n){const r=rr();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,Te())))}populateOverlays(e,n,r){const s=[];return r.forEach((i=>{n.has(i)||s.push(i)})),this.documentOverlayCache.getOverlays(e,s).next((i=>{i.forEach(((o,a)=>{n.set(o,a)}))}))}computeViews(e,n,r,s){let i=un();const o=Mc(),a=(function(){return Mc()})();return n.forEach(((c,u)=>{const h=r.get(u.key);s.has(u.key)&&(h===void 0||h.mutation instanceof zr)?i=i.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),Fc(h.mutation,u,h.mutation.getFieldMask(),Fe.now())):o.set(u.key,ln.empty())})),this.recalculateAndSaveOverlays(e,i).next((c=>(c.forEach(((u,h)=>o.set(u,h))),n.forEach(((u,h)=>a.set(u,new j2(h,o.get(u)??null)))),a)))}recalculateAndSaveOverlays(e,n){const r=Mc();let s=new Qe(((o,a)=>o-a)),i=Te();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((o=>{for(const a of o)a.keys().forEach((c=>{const u=n.get(c);if(u===null)return;let h=r.get(c)||ln.empty();h=a.applyToLocalView(u,h),r.set(c,h);const d=(s.get(a.batchId)||Te()).add(c);s=s.insert(a.batchId,d)}))})).next((()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),u=c.key,h=c.value,d=bR();h.forEach((f=>{if(!i.has(f)){const m=DR(n.get(f),r.get(f));m!==null&&d.set(f,m),i=i.add(f)}})),o.push(this.documentOverlayCache.saveOverlays(e,u,d))}return O.waitFor(o)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,s){return WU(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):dg(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next((i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):O.resolve(rr());let a=Jo,c=i;return o.next((u=>O.forEach(u,((h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),i.get(h)?O.resolve():this.remoteDocumentCache.getEntry(e,h).next((f=>{c=c.insert(h,f)}))))).next((()=>this.populateOverlays(e,u,i))).next((()=>this.computeViews(e,c,u,Te()))).next((h=>({batchId:a,changes:AR(h)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new X(n)).next((r=>{let s=gc();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=gc();return this.indexManager.getCollectionParents(e,i).next((a=>O.forEach(a,(c=>{const u=(function(d,f){return new Kr(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)})(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,r,s).next((h=>{h.forEach(((d,f)=>{o=o.insert(d,f)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s)))).next((o=>{i.forEach(((c,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,Ye.newInvalidDocument(h)))}));let a=gc();return o.forEach(((c,u)=>{const h=i.get(c);h!==void 0&&Fc(h.mutation,u,ln.empty(),Fe.now()),Pl(n,u)&&(a=a.insert(c,u))})),a}))}}class q2{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return O.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,(function(s){return{id:s.id,version:s.version,createTime:mt(s.createTime)}})(n)),O.resolve()}getNamedQuery(e,n){return O.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,(function(s){return{name:s.name,query:_d(s.bundledQuery),readTime:mt(s.readTime)}})(n)),O.resolve()}}class H2{constructor(){this.overlays=new Qe(X.comparator),this.Lr=new Map}getOverlay(e,n){return O.resolve(this.overlays.get(n))}getOverlays(e,n){const r=rr();return O.forEach(n,(s=>this.getOverlay(e,s).next((i=>{i!==null&&r.set(s,i)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((s,i)=>{this.bt(e,n,i)})),O.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Lr.get(r);return s!==void 0&&(s.forEach((i=>this.overlays=this.overlays.remove(i))),this.Lr.delete(r)),O.resolve()}getOverlaysForCollection(e,n,r){const s=rr(),i=n.length+1,o=new X(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const c=a.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return O.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Qe(((u,h)=>u-h));const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let h=i.get(u.largestBatchId);h===null&&(h=rr(),i=i.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const a=rr(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach(((u,h)=>a.set(u,h))),!(a.size()>=s)););return O.resolve(a)}bt(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Lr.get(s.largestBatchId).delete(r.key);this.Lr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new yg(n,r));let i=this.Lr.get(n);i===void 0&&(i=Te(),this.Lr.set(n,i)),this.Lr.set(n,i.add(r.key))}}class $2{constructor(){this.sessionToken=ct.EMPTY_BYTE_STRING}getSessionToken(e){return O.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,O.resolve()}}class vg{constructor(){this.kr=new je(kt.Kr),this.qr=new je(kt.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const r=new kt(e,n);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Wr(new kt(e,n))}Qr(e,n){e.forEach((r=>this.removeReference(r,n)))}Gr(e){const n=new X(new be([])),r=new kt(n,e),s=new kt(n,e+1),i=[];return this.qr.forEachInRange([r,s],(o=>{this.Wr(o),i.push(o.key)})),i}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new X(new be([])),r=new kt(n,e),s=new kt(n,e+1);let i=Te();return this.qr.forEachInRange([r,s],(o=>{i=i.add(o.key)})),i}containsKey(e){const n=new kt(e,0),r=this.kr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class kt{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return X.comparator(e.key,n.key)||ye(e.Hr,n.Hr)}static Ur(e,n){return ye(e.Hr,n.Hr)||X.comparator(e.key,n.key)}}class G2{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new je(kt.Kr)}checkEmpty(e){return O.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new gg(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.Jr=this.Jr.add(new kt(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return O.resolve(o)}lookupMutationBatch(e,n){return O.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.Xr(r),i=s<0?0:s;return O.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(this.mutationQueue.length===0?Cs:this.Yn-1)}getAllMutationBatches(e){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new kt(n,0),s=new kt(n,Number.POSITIVE_INFINITY),i=[];return this.Jr.forEachInRange([r,s],(o=>{const a=this.Zr(o.Hr);i.push(a)})),O.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new je(ye);return n.forEach((s=>{const i=new kt(s,0),o=new kt(s,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([i,o],(a=>{r=r.add(a.Hr)}))})),O.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;X.isDocumentKey(i)||(i=i.child(""));const o=new kt(new X(i),0);let a=new je(ye);return this.Jr.forEachWhile((c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(a=a.add(c.Hr)),!0)}),o),O.resolve(this.Yr(a))}Yr(e){const n=[];return e.forEach((r=>{const s=this.Zr(r);s!==null&&n.push(s)})),n}removeMutationBatch(e,n){ae(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return O.forEach(n.mutations,(s=>{const i=new kt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Jr=r}))}nr(e){}containsKey(e,n){const r=new kt(n,0),s=this.Jr.firstAfterOrEqual(r);return O.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,O.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class K2{constructor(e){this.ti=e,this.docs=(function(){return new Qe(X.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ti(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return O.resolve(r?r.document.mutableCopy():Ye.newInvalidDocument(n))}getEntries(e,n){let r=un();return n.forEach((s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Ye.newInvalidDocument(s))})),O.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=un();const o=n.path,a=new X(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:u,value:{document:h}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||rg(Fb(h),r)<=0||(s.has(h.key)||Pl(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return O.resolve(i)}getAllFromCollectionGroup(e,n,r,s){re(9500)}ni(e,n){return O.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new W2(this)}getSize(e){return O.resolve(this.size)}}class W2 extends lS{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?n.push(this.Mr.addEntry(e,s)):this.Mr.removeEntry(r)})),O.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}class z2{constructor(e){this.persistence=e,this.ri=new Wr((n=>Li(n)),Rl),this.lastRemoteSnapshotVersion=he.min(),this.highestTargetId=0,this.ii=0,this.si=new vg,this.targetCount=0,this.oi=ji._r()}forEachTarget(e,n){return this.ri.forEach(((r,s)=>n(s))),O.resolve()}getLastRemoteSnapshotVersion(e){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return O.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ii&&(this.ii=n),O.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new ji(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,O.resolve()}updateTargetData(e,n){return this.lr(n),O.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,O.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.ri.forEach(((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.ri.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)})),O.waitFor(i).next((()=>s))}getTargetCount(e){return O.resolve(this.targetCount)}getTargetData(e,n){const r=this.ri.get(n)||null;return O.resolve(r)}addMatchingKeys(e,n,r){return this.si.$r(n,r),O.resolve()}removeMatchingKeys(e,n,r){this.si.Qr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach((o=>{i.push(s.markPotentiallyOrphaned(e,o))})),O.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),O.resolve()}getMatchingKeysForTargetId(e,n){const r=this.si.jr(n);return O.resolve(r)}containsKey(e,n){return O.resolve(this.si.containsKey(n))}}class Ag{constructor(e,n){this._i={},this.overlays={},this.ai=new cn(0),this.ui=!1,this.ui=!0,this.ci=new $2,this.referenceDelegate=e(this),this.li=new z2(this),this.indexManager=new V2,this.remoteDocumentCache=(function(s){return new K2(s)})((r=>this.referenceDelegate.hi(r))),this.serializer=new XR(n),this.Pi=new q2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new H2,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this._i[e.toKey()];return r||(r=new G2(n,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,r){G("MemoryPersistence","Starting transaction:",e);const s=new Q2(this.ai.next());return this.referenceDelegate.Ti(),r(s).next((i=>this.referenceDelegate.Ii(s).next((()=>i)))).toPromise().then((i=>(s.raiseOnCommittedEvent(),i)))}Ei(e,n){return O.or(Object.values(this._i).map((r=>()=>r.containsKey(e,n))))}}class Q2 extends Bb{constructor(e){super(),this.currentSequenceNumber=e}}class Ed{constructor(e){this.persistence=e,this.Ri=new vg,this.Ai=null}static Vi(e){return new Ed(e)}get di(){if(this.Ai)return this.Ai;throw re(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.di.delete(r.toString()),O.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.di.add(r.toString()),O.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),O.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach((s=>this.di.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((s=>{s.forEach((i=>this.di.add(i.toString())))})).next((()=>r.removeTargetData(e,n)))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.di,(r=>{const s=X.fromPath(r);return this.mi(e,s).next((i=>{i||n.removeEntry(s,he.min())}))})).next((()=>(this.Ai=null,n.apply(e))))}updateLimboDocument(e,n){return this.mi(e,n).next((r=>{r?this.di.delete(n.toString()):this.di.add(n.toString())}))}hi(e){return 0}mi(e,n){return O.or([()=>O.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Th{constructor(e,n){this.persistence=e,this.fi=new Wr((r=>zt(r.path)),((r,s)=>r.isEqual(s))),this.garbageCollector=cS(this,n)}static Vi(e,n){return new Th(e,n)}Ti(){}Ii(e){return O.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((s=>r+s))))}pr(e){let n=0;return this.mr(e,(r=>{n++})).next((()=>n))}mr(e,n){return O.forEach(this.fi,((r,s)=>this.wr(e,r,s).next((i=>i?O.resolve():n(s)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ni(e,(o=>this.wr(e,o,n).next((a=>{a||(r++,i.removeEntry(o,he.min()))})))).next((()=>i.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),O.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),O.resolve()}removeReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),O.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),O.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Du(e.data.value)),n}wr(e,n,r){return O.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.fi.get(n);return O.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class J2{constructor(e){this.serializer=e}k(e,n,r,s){const i=new od("createOrUpgrade",n);r<1&&s>=1&&((function(c){c.createObjectStore(bl)})(e),(function(c){c.createObjectStore(nl,{keyPath:cU}),c.createObjectStore(On,{keyPath:uE,autoIncrement:!0}).createIndex(Ei,hE,{unique:!0}),c.createObjectStore(Zo)})(e),eT(e),(function(c){c.createObjectStore(fi)})(e));let o=O.resolve();return r<3&&s>=3&&(r!==0&&((function(c){c.deleteObjectStore(ta),c.deleteObjectStore(ea),c.deleteObjectStore(Si)})(e),eT(e)),o=o.next((()=>(function(c){const u=c.store(Si),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:he.min().toTimestamp(),targetCount:0};return u.put(ph,h)})(i)))),r<4&&s>=4&&(r!==0&&(o=o.next((()=>(function(c,u){return u.store(On).H().next((d=>{c.deleteObjectStore(On),c.createObjectStore(On,{keyPath:uE,autoIncrement:!0}).createIndex(Ei,hE,{unique:!0});const f=u.store(On),m=d.map((I=>f.put(I)));return O.waitFor(m)}))})(e,i)))),o=o.next((()=>{(function(c){c.createObjectStore(na,{keyPath:_U})})(e)}))),r<5&&s>=5&&(o=o.next((()=>this.gi(i)))),r<6&&s>=6&&(o=o.next((()=>((function(c){c.createObjectStore(rl)})(e),this.pi(i))))),r<7&&s>=7&&(o=o.next((()=>this.yi(i)))),r<8&&s>=8&&(o=o.next((()=>this.wi(e,i)))),r<9&&s>=9&&(o=o.next((()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&s>=10&&(o=o.next((()=>this.bi(i)))),r<11&&s>=11&&(o=o.next((()=>{(function(c){c.createObjectStore(ad,{keyPath:yU})})(e),(function(c){c.createObjectStore(cd,{keyPath:IU})})(e)}))),r<12&&s>=12&&(o=o.next((()=>{(function(c){const u=c.createObjectStore(ld,{keyPath:RU});u.createIndex(Cp,SU,{unique:!1}),u.createIndex(zb,PU,{unique:!1})})(e)}))),r<13&&s>=13&&(o=o.next((()=>(function(c){const u=c.createObjectStore(fh,{keyPath:uU});u.createIndex(ku,hU),u.createIndex($b,dU)})(e))).next((()=>this.Si(e,i))).next((()=>e.deleteObjectStore(fi)))),r<14&&s>=14&&(o=o.next((()=>this.Di(e,i)))),r<15&&s>=15&&(o=o.next((()=>(function(c){c.createObjectStore(og,{keyPath:EU,autoIncrement:!0}).createIndex(Pp,TU,{unique:!1}),c.createObjectStore(xc,{keyPath:wU}).createIndex(Kb,vU,{unique:!1}),c.createObjectStore(Oc,{keyPath:AU}).createIndex(Wb,bU,{unique:!1})})(e)))),r<16&&s>=16&&(o=o.next((()=>{n.objectStore(xc).clear()})).next((()=>{n.objectStore(Oc).clear()}))),r<17&&s>=17&&(o=o.next((()=>{(function(c){c.createObjectStore(ag,{keyPath:CU})})(e)}))),r<18&&s>=18&&sA()&&(o=o.next((()=>{n.objectStore(xc).clear()})).next((()=>{n.objectStore(Oc).clear()}))),o}pi(e){let n=0;return e.store(fi).ee(((r,s)=>{n+=Eh(s)})).next((()=>{const r={byteSize:n};return e.store(rl).put(Sp,r)}))}gi(e){const n=e.store(nl),r=e.store(On);return n.H().next((s=>O.forEach(s,(i=>{const o=IDBKeyRange.bound([i.userId,Cs],[i.userId,i.lastAcknowledgedBatchId]);return r.H(Ei,o).next((a=>O.forEach(a,(c=>{ae(c.userId===i.userId,18650,"Cannot process batch from unexpected user",{batchId:c.batchId});const u=mi(this.serializer,c);return rS(e,i.userId,u).next((()=>{}))}))))}))))}yi(e){const n=e.store(ta),r=e.store(fi);return e.store(Si).get(ph).next((s=>{const i=[];return r.ee(((o,a)=>{const c=new be(o),u=(function(d){return[0,zt(d)]})(c);i.push(n.get(u).next((h=>h?O.resolve():(d=>n.put({targetId:0,path:zt(d),sequenceNumber:s.highestListenSequenceNumber}))(c))))})).next((()=>O.waitFor(i)))}))}wi(e,n){e.createObjectStore(sl,{keyPath:gU});const r=n.store(sl),s=new wg,i=o=>{if(s.add(o)){const a=o.lastSegment(),c=o.popLast();return r.put({collectionId:a,parent:zt(c)})}};return n.store(fi).ee({Y:!0},((o,a)=>{const c=new be(o);return i(c.popLast())})).next((()=>n.store(Zo).ee({Y:!0},(([o,a,c],u)=>{const h=nr(a);return i(h.popLast())}))))}bi(e){const n=e.store(ea);return n.ee(((r,s)=>{const i=yc(s),o=ZR(this.serializer,i);return n.put(o)}))}Si(e,n){const r=n.store(fi),s=[];return r.ee(((i,o)=>{const a=n.store(fh),c=(function(d){return d.document?new X(be.fromString(d.document.name).popFirst(5)):d.noDocument?X.fromSegments(d.noDocument.path):d.unknownDocument?X.fromSegments(d.unknownDocument.path):re(36783)})(o).path.toArray(),u={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};s.push(a.put(u))})).next((()=>O.waitFor(s)))}Di(e,n){const r=n.store(On),s=uS(this.serializer),i=new Ag(Ed.Vi,this.serializer.yt);return r.H().next((o=>{const a=new Map;return o.forEach((c=>{let u=a.get(c.userId)??Te();mi(this.serializer,c).keys().forEach((h=>u=u.add(h))),a.set(c.userId,u)})),O.forEach(a,((c,u)=>{const h=new Nt(u),d=yd.wt(this.serializer,h),f=i.getIndexManager(h),m=Id.wt(h,this.serializer,f,i.referenceDelegate);return new hS(s,m,d,f).recalculateAndSaveOverlaysForDocumentKeys(new kp(n,cn.ce),c).next()}))}))}}function eT(t){t.createObjectStore(ta,{keyPath:pU}).createIndex(ig,mU,{unique:!0}),t.createObjectStore(ea,{keyPath:"targetId"}).createIndex(Gb,fU,{unique:!0}),t.createObjectStore(Si)}const cs="IndexedDbPersistence",Sf=18e5,Pf=5e3,Cf="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",dS="main";class bg{constructor(e,n,r,s,i,o,a,c,u,h,d=18){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Ci=i,this.window=o,this.document=a,this.Fi=u,this.Mi=h,this.xi=d,this.ai=null,this.ui=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Oi=null,this.inForeground=!1,this.Ni=null,this.Bi=null,this.Li=Number.NEGATIVE_INFINITY,this.ki=f=>Promise.resolve(),!bg.v())throw new q(M.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new F2(this,s),this.Ki=n+dS,this.serializer=new XR(c),this.qi=new or(this.Ki,this.xi,new J2(this.serializer)),this.ci=new S2,this.li=new O2(this.referenceDelegate,this.serializer),this.remoteDocumentCache=uS(this.serializer),this.Pi=new R2,this.window&&this.window.localStorage?this.Ui=this.window.localStorage:(this.Ui=null,h===!1&&pt(cs,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.$i().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new q(M.FAILED_PRECONDITION,Cf);return this.Wi(),this.Qi(),this.Gi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.li.getHighestSequenceNumber(e)))})).then((e=>{this.ai=new cn(e,this.Fi)})).then((()=>{this.ui=!0})).catch((e=>(this.qi&&this.qi.close(),Promise.reject(e))))}zi(e){return this.ki=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.qi.q((async n=>{n.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Ci.enqueueAndForget((async()=>{this.started&&await this.$i()})))}$i(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>gu(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.ji(e).next((n=>{n||(this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))))}))})).next((()=>this.Hi(e))).next((n=>this.isPrimary&&!n?this.Ji(e).next((()=>!1)):!!n&&this.Zi(e).next((()=>!0)))))).catch((e=>{if(Gs(e))return G(cs,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return G(cs,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Ci.enqueueRetryable((()=>this.ki(e))),this.isPrimary=e}))}ji(e){return cc(e).get(co).next((n=>O.resolve(this.Xi(n))))}Yi(e){return gu(e).delete(this.clientId)}async es(){if(this.isPrimary&&!this.ts(this.Li,Sf)){this.Li=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(n=>{const r=Pt(n,na);return r.H().next((s=>{const i=this.ns(s,Sf),o=s.filter((a=>i.indexOf(a)===-1));return O.forEach(o,(a=>r.delete(a.clientId))).next((()=>o))}))})).catch((()=>[]));if(this.Ui)for(const n of e)this.Ui.removeItem(this.rs(n.clientId))}}Gi(){this.Bi=this.Ci.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.$i().then((()=>this.es())).then((()=>this.Gi()))))}Xi(e){return!!e&&e.ownerId===this.clientId}Hi(e){return this.Mi?O.resolve(!0):cc(e).get(co).next((n=>{if(n!==null&&this.ts(n.leaseTimestampMs,Pf)&&!this.ss(n.ownerId)){if(this.Xi(n)&&this.networkEnabled)return!0;if(!this.Xi(n)){if(!n.allowTabSynchronization)throw new q(M.FAILED_PRECONDITION,Cf);return!1}}return!(!this.networkEnabled||!this.inForeground)||gu(e).H().next((r=>this.ns(r,Pf).find((s=>{if(this.clientId!==s.clientId){const i=!this.networkEnabled&&s.networkEnabled,o=!this.inForeground&&s.inForeground,a=this.networkEnabled===s.networkEnabled;if(i||o&&a)return!0}return!1}))===void 0))})).next((n=>(this.isPrimary!==n&&G(cs,`Client ${n?"is":"is not"} eligible for a primary lease.`),n)))}async shutdown(){this.ui=!1,this._s(),this.Bi&&(this.Bi.cancel(),this.Bi=null),this.us(),this.cs(),await this.qi.runTransaction("shutdown","readwrite",[bl,na],(e=>{const n=new kp(e,cn.ce);return this.Ji(n).next((()=>this.Yi(n)))})),this.qi.close(),this.ls()}ns(e,n){return e.filter((r=>this.ts(r.updateTimeMs,n)&&!this.ss(r.clientId)))}hs(){return this.runTransaction("getActiveClients","readonly",(e=>gu(e).H().next((n=>this.ns(n,Sf).map((r=>r.clientId))))))}get started(){return this.ui}getGlobalsCache(){return this.ci}getMutationQueue(e,n){return Id.wt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new x2(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return yd.wt(this.serializer,e)}getBundleCache(){return this.Pi}runTransaction(e,n,r){G(cs,"Starting transaction:",e);const s=n==="readonly"?"readonly":"readwrite",i=(function(c){return c===18?DU:c===17?Xb:c===16?NU:c===15?cg:c===14?Yb:c===13?Jb:c===12?kU:c===11?Qb:void re(60245)})(this.xi);let o;return this.qi.runTransaction(e,s,i,(a=>(o=new kp(a,this.ai?this.ai.next():cn.ce),n==="readwrite-primary"?this.ji(o).next((c=>!!c||this.Hi(o))).next((c=>{if(!c)throw pt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))),new q(M.FAILED_PRECONDITION,Ub);return r(o)})).next((c=>this.Zi(o).next((()=>c)))):this.Ps(o).next((()=>r(o)))))).then((a=>(o.raiseOnCommittedEvent(),a)))}Ps(e){return cc(e).get(co).next((n=>{if(n!==null&&this.ts(n.leaseTimestampMs,Pf)&&!this.ss(n.ownerId)&&!this.Xi(n)&&!(this.Mi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new q(M.FAILED_PRECONDITION,Cf)}))}Zi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return cc(e).put(co,n)}static v(){return or.v()}Ji(e){const n=cc(e);return n.get(co).next((r=>this.Xi(r)?(G(cs,"Releasing primary lease."),n.delete(co)):O.resolve()))}ts(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(pt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Wi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ni=()=>{this.Ci.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.$i())))},this.document.addEventListener("visibilitychange",this.Ni),this.inForeground=this.document.visibilityState==="visible")}us(){this.Ni&&(this.document.removeEventListener("visibilitychange",this.Ni),this.Ni=null)}Qi(){typeof this.window?.addEventListener=="function"&&(this.Oi=()=>{this._s();const e=/(?:Version|Mobile)\/1[456]/;rA()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Ci.enterRestrictedMode(!0),this.Ci.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Oi))}cs(){this.Oi&&(this.window.removeEventListener("pagehide",this.Oi),this.Oi=null)}ss(e){try{const n=this.Ui?.getItem(this.rs(e))!==null;return G(cs,`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return pt(cs,"Failed to get zombied client id.",n),!1}}_s(){if(this.Ui)try{this.Ui.setItem(this.rs(this.clientId),String(Date.now()))}catch(e){pt("Failed to set zombie client id.",e)}}ls(){if(this.Ui)try{this.Ui.removeItem(this.rs(this.clientId))}catch{}}rs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function cc(t){return Pt(t,bl)}function gu(t){return Pt(t,na)}function Rg(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}class Sg{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Ts=r,this.Is=s}static Es(e,n){let r=Te(),s=Te();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Sg(e,n.fromCache,r,s)}}class Y2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class fS{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return rA()?8:jb(Rt())>0?6:4})()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.gs(e,n).next((o=>{i.result=o})).next((()=>{if(!i.result)return this.ps(e,n,s,r).next((o=>{i.result=o}))})).next((()=>{if(i.result)return;const o=new Y2;return this.ys(e,n,o).next((a=>{if(i.result=a,this.As)return this.ws(e,n,o,a.size)}))})).next((()=>i.result))}ws(e,n,r,s){return r.documentReadCount<this.Vs?(_o()<=Pe.DEBUG&&G("QueryEngine","SDK will not create cache indexes for query:",yo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),O.resolve()):(_o()<=Pe.DEBUG&&G("QueryEngine","Query:",yo(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ds*s?(_o()<=Pe.DEBUG&&G("QueryEngine","The SDK decides to create cache indexes for query:",yo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Qt(n))):O.resolve())}gs(e,n){if(AE(n))return O.resolve(null);let r=Qt(n);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(n.limit!==null&&s===1&&(n=_h(n,null,"F"),r=Qt(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((i=>{const o=Te(...i);return this.fs.getDocuments(e,o).next((a=>this.indexManager.getMinOffset(e,r).next((c=>{const u=this.bs(n,a);return this.Ss(n,u,o,c.readTime)?this.gs(e,_h(n,null,"F")):this.Ds(e,u,n,c)}))))})))))}ps(e,n,r,s){return AE(n)||s.isEqual(he.min())?O.resolve(null):this.fs.getDocuments(e,r).next((i=>{const o=this.bs(n,i);return this.Ss(n,o,r,s)?O.resolve(null):(_o()<=Pe.DEBUG&&G("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),yo(n)),this.Ds(e,o,n,Mb(s,Jo)).next((a=>a)))}))}bs(e,n){let r=new je(wR(e));return n.forEach(((s,i)=>{Pl(e,i)&&(r=r.add(i))})),r}Ss(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}ys(e,n,r){return _o()<=Pe.DEBUG&&G("QueryEngine","Using full collection scan to execute query:",yo(n)),this.fs.getDocumentsMatchingQuery(e,n,Rn.min(),r)}Ds(e,n,r,s){return this.fs.getDocumentsMatchingQuery(e,r,s).next((i=>(n.forEach((o=>{i=i.insert(o.key,o)})),i)))}}const Pg="LocalStore",X2=3e8;class Z2{constructor(e,n,r,s){this.persistence=e,this.Cs=n,this.serializer=s,this.vs=new Qe(ye),this.Fs=new Wr((i=>Li(i)),Rl),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new hS(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.vs)))}}function pS(t,e,n,r){return new Z2(t,e,n,r)}async function mS(t,e){const n=Z(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next((i=>(s=i,n.Os(e),n.mutationQueue.getAllMutationBatches(r)))).next((i=>{const o=[],a=[];let c=Te();for(const u of s){o.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}for(const u of i){a.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(r,c).next((u=>({Ns:u,removedBatchIds:o,addedBatchIds:a})))}))}))}function eB(t,e){const n=Z(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),i=n.xs.newChangeBuffer({trackRemovals:!0});return(function(a,c,u,h){const d=u.batch,f=d.keys();let m=O.resolve();return f.forEach((I=>{m=m.next((()=>h.getEntry(c,I))).next((T=>{const k=u.docVersions.get(I);ae(k!==null,48541),T.version.compareTo(k)<0&&(d.applyToRemoteDocument(T,u),T.isValidDocument()&&(T.setReadTime(u.commitVersion),h.addEntry(T)))}))})),m.next((()=>a.mutationQueue.removeMutationBatch(c,d)))})(n,r,e,i).next((()=>i.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let c=Te();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c})(e)))).next((()=>n.localDocuments.getDocuments(r,s)))}))}function gS(t){const e=Z(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.li.getLastRemoteSnapshotVersion(n)))}function tB(t,e){const n=Z(t),r=e.snapshotVersion;let s=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(i=>{const o=n.xs.newChangeBuffer({trackRemovals:!0});s=n.vs;const a=[];e.targetChanges.forEach(((h,d)=>{const f=s.get(d);if(!f)return;a.push(n.li.removeMatchingKeys(i,h.removedDocuments,d).next((()=>n.li.addMatchingKeys(i,h.addedDocuments,d))));let m=f.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(d)!==null?m=m.withResumeToken(ct.EMPTY_BYTE_STRING,he.min()).withLastLimboFreeSnapshotVersion(he.min()):h.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(h.resumeToken,r)),s=s.insert(d,m),(function(T,k,V){return T.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-T.snapshotVersion.toMicroseconds()>=X2?!0:V.addedDocuments.size+V.modifiedDocuments.size+V.removedDocuments.size>0})(f,m,h)&&a.push(n.li.updateTargetData(i,m))}));let c=un(),u=Te();if(e.documentUpdates.forEach((h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))})),a.push(_S(i,o,e.documentUpdates).next((h=>{c=h.Bs,u=h.Ls}))),!r.isEqual(he.min())){const h=n.li.getLastRemoteSnapshotVersion(i).next((d=>n.li.setTargetsMetadata(i,i.currentSequenceNumber,r)));a.push(h)}return O.waitFor(a).next((()=>o.apply(i))).next((()=>n.localDocuments.getLocalViewOfDocuments(i,c,u))).next((()=>c))})).then((i=>(n.vs=s,i)))}function _S(t,e,n){let r=Te(),s=Te();return n.forEach((i=>r=r.add(i))),e.getEntries(t,r).next((i=>{let o=un();return n.forEach(((a,c)=>{const u=i.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(a)),c.isNoDocument()&&c.version.isEqual(he.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):G(Pg,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)})),{Bs:o,Ls:s}}))}function nB(t,e){const n=Z(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Cs),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function la(t,e){const n=Z(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return n.li.getTargetData(r,e).next((i=>i?(s=i,O.resolve(s)):n.li.allocateTargetId(r).next((o=>(s=new Pr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.li.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=n.vs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.vs=n.vs.insert(r.targetId,r),n.Fs.set(e,r.targetId)),r}))}async function ua(t,e,n){const r=Z(t),s=r.vs.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,(o=>r.persistence.referenceDelegate.removeTarget(o,s)))}catch(o){if(!Gs(o))throw o;G(Pg,`Failed to update sequence numbers for target ${e}: ${o}`)}r.vs=r.vs.remove(e),r.Fs.delete(s.target)}function wh(t,e,n){const r=Z(t);let s=he.min(),i=Te();return r.persistence.runTransaction("Execute query","readwrite",(o=>(function(c,u,h){const d=Z(c),f=d.Fs.get(h);return f!==void 0?O.resolve(d.vs.get(f)):d.li.getTargetData(u,h)})(r,o,Qt(e)).next((a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(o,a.targetId).next((c=>{i=c}))})).next((()=>r.Cs.getDocumentsMatchingQuery(o,e,n?s:he.min(),n?i:Te()))).next((a=>(ES(r,TR(e),a),{documents:a,ks:i})))))}function yS(t,e){const n=Z(t),r=Z(n.li),s=n.vs.get(e);return s?Promise.resolve(s.target):n.persistence.runTransaction("Get target data","readonly",(i=>r.At(i,e).next((o=>o?o.target:null))))}function IS(t,e){const n=Z(t),r=n.Ms.get(e)||he.min();return n.persistence.runTransaction("Get new document changes","readonly",(s=>n.xs.getAllFromCollectionGroup(s,e,Mb(r,Jo),Number.MAX_SAFE_INTEGER))).then((s=>(ES(n,e,s),s)))}function ES(t,e,n){let r=t.Ms.get(e)||he.min();n.forEach(((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)})),t.Ms.set(e,r)}async function rB(t,e,n,r){const s=Z(t);let i=Te(),o=un();for(const u of n){const h=e.Ks(u.metadata.name);u.document&&(i=i.add(h));const d=e.qs(u);d.setReadTime(e.Us(u.metadata.readTime)),o=o.insert(h,d)}const a=s.xs.newChangeBuffer({trackRemovals:!0}),c=await la(s,(function(h){return Qt(Ra(be.fromString(`__bundle__/docs/${h}`)))})(r));return s.persistence.runTransaction("Apply bundle documents","readwrite",(u=>_S(u,a,o).next((h=>(a.apply(u),h))).next((h=>s.li.removeMatchingKeysForTargetId(u,c.targetId).next((()=>s.li.addMatchingKeys(u,i,c.targetId))).next((()=>s.localDocuments.getLocalViewOfDocuments(u,h.Bs,h.Ls))).next((()=>h.Bs))))))}async function sB(t,e,n=Te()){const r=await la(t,Qt(_d(e.bundledQuery))),s=Z(t);return s.persistence.runTransaction("Save named query","readwrite",(i=>{const o=mt(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return s.Pi.saveNamedQuery(i,e);const a=r.withResumeToken(ct.EMPTY_BYTE_STRING,o);return s.vs=s.vs.insert(a.targetId,a),s.li.updateTargetData(i,a).next((()=>s.li.removeMatchingKeysForTargetId(i,r.targetId))).next((()=>s.li.addMatchingKeys(i,n,r.targetId))).next((()=>s.Pi.saveNamedQuery(i,e)))}))}const TS="firestore_clients";function tT(t,e){return`${TS}_${t}_${e}`}const wS="firestore_mutations";function nT(t,e,n){let r=`${wS}_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const vS="firestore_targets";function kf(t,e){return`${vS}_${t}_${e}`}const Zn="SharedClientState";class vh{constructor(e,n,r,s){this.user=e,this.batchId=n,this.state=r,this.error=s}static $s(e,n,r){const s=JSON.parse(r);let i,o=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return o&&s.error&&(o=typeof s.error.message=="string"&&typeof s.error.code=="string",o&&(i=new q(s.error.code,s.error.message))),o?new vh(e,n,s.state,i):(pt(Zn,`Failed to parse mutation state for ID '${n}': ${r}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Uc{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static $s(e,n){const r=JSON.parse(n);let s,i=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return i&&r.error&&(i=typeof r.error.message=="string"&&typeof r.error.code=="string",i&&(s=new q(r.error.code,r.error.message))),i?new Uc(e,r.state,s):(pt(Zn,`Failed to parse target state for ID '${e}': ${n}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ah{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static $s(e,n){const r=JSON.parse(n);let s=typeof r=="object"&&r.activeTargetIds instanceof Array,i=fg();for(let o=0;s&&o<r.activeTargetIds.length;++o)s=qb(r.activeTargetIds[o]),i=i.add(r.activeTargetIds[o]);return s?new Ah(e,i):(pt(Zn,`Failed to parse client data for instance '${e}': ${n}`),null)}}class Cg{constructor(e,n){this.clientId=e,this.onlineState=n}static $s(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new Cg(n.clientId,n.onlineState):(pt(Zn,`Failed to parse online state: ${e}`),null)}}class Gp{constructor(){this.activeTargetIds=fg()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Nf{constructor(e,n,r,s,i){this.window=e,this.Ci=n,this.persistenceKey=r,this.zs=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.js=this.Hs.bind(this),this.Js=new Qe(ye),this.started=!1,this.Zs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Xs=tT(this.persistenceKey,this.zs),this.Ys=(function(c){return`firestore_sequence_number_${c}`})(this.persistenceKey),this.Js=this.Js.insert(this.zs,new Gp),this.eo=new RegExp(`^${TS}_${o}_([^_]*)$`),this.no=new RegExp(`^${wS}_${o}_(\\d+)(?:_(.*))?$`),this.ro=new RegExp(`^${vS}_${o}_(\\d+)$`),this.io=(function(c){return`firestore_online_state_${c}`})(this.persistenceKey),this.so=(function(c){return`firestore_bundle_loaded_v2_${c}`})(this.persistenceKey),this.window.addEventListener("storage",this.js)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.hs();for(const r of e){if(r===this.zs)continue;const s=this.getItem(tT(this.persistenceKey,r));if(s){const i=Ah.$s(r,s);i&&(this.Js=this.Js.insert(i.clientId,i))}}this.oo();const n=this.storage.getItem(this.io);if(n){const r=this._o(n);r&&this.ao(r)}for(const r of this.Zs)this.Hs(r);this.Zs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ys,JSON.stringify(e))}getAllActiveQueryTargets(){return this.uo(this.Js)}isActiveQueryTarget(e){let n=!1;return this.Js.forEach(((r,s)=>{s.activeTargetIds.has(e)&&(n=!0)})),n}addPendingMutation(e){this.co(e,"pending")}updateMutationState(e,n,r){this.co(e,n,r),this.lo(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(kf(this.persistenceKey,e));if(s){const i=Uc.$s(e,s);i&&(r=i.state)}}return n&&this.ho.Qs(e),this.oo(),r}removeLocalQueryTarget(e){this.ho.Gs(e),this.oo()}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(kf(this.persistenceKey,e))}updateQueryState(e,n,r){this.Po(e,n,r)}handleUserChange(e,n,r){n.forEach((s=>{this.lo(s)})),this.currentUser=e,r.forEach((s=>{this.addPendingMutation(s)}))}setOnlineState(e){this.To(e)}notifyBundleLoaded(e){this.Io(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.js),this.removeItem(this.Xs),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return G(Zn,"READ",e,n),n}setItem(e,n){G(Zn,"SET",e,n),this.storage.setItem(e,n)}removeItem(e){G(Zn,"REMOVE",e),this.storage.removeItem(e)}Hs(e){const n=e;if(n.storageArea===this.storage){if(G(Zn,"EVENT",n.key,n.newValue),n.key===this.Xs)return void pt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ci.enqueueRetryable((async()=>{if(this.started){if(n.key!==null){if(this.eo.test(n.key)){if(n.newValue==null){const r=this.Eo(n.key);return this.Ro(r,null)}{const r=this.Ao(n.key,n.newValue);if(r)return this.Ro(r.clientId,r)}}else if(this.no.test(n.key)){if(n.newValue!==null){const r=this.Vo(n.key,n.newValue);if(r)return this.mo(r)}}else if(this.ro.test(n.key)){if(n.newValue!==null){const r=this.fo(n.key,n.newValue);if(r)return this.po(r)}}else if(n.key===this.io){if(n.newValue!==null){const r=this._o(n.newValue);if(r)return this.ao(r)}}else if(n.key===this.Ys){const r=(function(i){let o=cn.ce;if(i!=null)try{const a=JSON.parse(i);ae(typeof a=="number",30636,{yo:i}),o=a}catch(a){pt(Zn,"Failed to read sequence number from WebStorage",a)}return o})(n.newValue);r!==cn.ce&&this.sequenceNumberHandler(r)}else if(n.key===this.so){const r=this.wo(n.newValue);await Promise.all(r.map((s=>this.syncEngine.bo(s))))}}}else this.Zs.push(n)}))}}get ho(){return this.Js.get(this.zs)}oo(){this.setItem(this.Xs,this.ho.Ws())}co(e,n,r){const s=new vh(this.currentUser,e,n,r),i=nT(this.persistenceKey,this.currentUser,e);this.setItem(i,s.Ws())}lo(e){const n=nT(this.persistenceKey,this.currentUser,e);this.removeItem(n)}To(e){const n={clientId:this.zs,onlineState:e};this.storage.setItem(this.io,JSON.stringify(n))}Po(e,n,r){const s=kf(this.persistenceKey,e),i=new Uc(e,n,r);this.setItem(s,i.Ws())}Io(e){const n=JSON.stringify(Array.from(e));this.setItem(this.so,n)}Eo(e){const n=this.eo.exec(e);return n?n[1]:null}Ao(e,n){const r=this.Eo(e);return Ah.$s(r,n)}Vo(e,n){const r=this.no.exec(e),s=Number(r[1]),i=r[2]!==void 0?r[2]:null;return vh.$s(new Nt(i),s,n)}fo(e,n){const r=this.ro.exec(e),s=Number(r[1]);return Uc.$s(s,n)}_o(e){return Cg.$s(e)}wo(e){return JSON.parse(e)}async mo(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.So(e.batchId,e.state,e.error);G(Zn,`Ignoring mutation for non-active user ${e.user.uid}`)}po(e){return this.syncEngine.Do(e.targetId,e.state,e.error)}Ro(e,n){const r=n?this.Js.insert(e,n):this.Js.remove(e),s=this.uo(this.Js),i=this.uo(r),o=[],a=[];return i.forEach((c=>{s.has(c)||o.push(c)})),s.forEach((c=>{i.has(c)||a.push(c)})),this.syncEngine.Co(o,a).then((()=>{this.Js=r}))}ao(e){this.Js.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}uo(e){let n=fg();return e.forEach(((r,s)=>{n=n.unionWith(s.activeTargetIds)})),n}}class AS{constructor(){this.vo=new Gp,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,r){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Gp,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class iB{Mo(e){}shutdown(){}}const rT="ConnectivityMonitor";class sT{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){G(rT,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){G(rT,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let _u=null;function Kp(){return _u===null?_u=(function(){return 268435456+Math.round(2147483648*Math.random())})():_u++,"0x"+_u.toString(16)}const Df="RestConnection",oB={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class aB{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.$o=this.databaseId.database===ol?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,n,r,s,i){const o=Kp(),a=this.Qo(e,n.toUriEncodedString());G(Df,`Sending RPC '${e}' ${o}:`,a,r);const c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(c,s,i);const{host:u}=new URL(a),h=Ki(u);return this.zo(e,a,c,r,h).then((d=>(G(Df,`Received RPC '${e}' ${o}: `,d),d)),(d=>{throw bn(Df,`RPC '${e}' ${o} failed with error: `,d,"url: ",a,"request:",r),d}))}jo(e,n,r,s,i,o){return this.Wo(e,n,r,s,i)}Go(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ba})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((s,i)=>e[i]=s)),r&&r.headers.forEach(((s,i)=>e[i]=s))}Qo(e,n){const r=oB[e];let s=`${this.qo}/v1/${n}:${r}`;return this.databaseInfo.apiKey&&(s=`${s}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),s}terminate(){}}class cB{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const qt="WebChannelConnection",lc=(t,e,n)=>{t.listen(e,(r=>{try{n(r)}catch(s){setTimeout((()=>{throw s}),0)}}))};class xo extends aB{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!xo.c_){const e=Pb();lc(e,Sb.STAT_EVENT,(n=>{n.stat===wp.PROXY?G(qt,"STAT_EVENT: detected buffering proxy"):n.stat===wp.NOPROXY&&G(qt,"STAT_EVENT: detected no buffering proxy")})),xo.c_=!0}}zo(e,n,r,s,i){const o=Kp();return new Promise(((a,c)=>{const u=new bb;u.setWithCredentials(!0),u.listenOnce(Rb.COMPLETE,(()=>{try{switch(u.getLastErrorCode()){case Pu.NO_ERROR:const d=u.getResponseJson();G(qt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),a(d);break;case Pu.TIMEOUT:G(qt,`RPC '${e}' ${o} timed out`),c(new q(M.DEADLINE_EXCEEDED,"Request time out"));break;case Pu.HTTP_ERROR:const f=u.getStatus();if(G(qt,`RPC '${e}' ${o} failed with status:`,f,"response text:",u.getResponseText()),f>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);const I=m?.error;if(I&&I.status&&I.message){const T=(function(V){const N=V.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(N)>=0?N:M.UNKNOWN})(I.status);c(new q(T,I.message))}else c(new q(M.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new q(M.UNAVAILABLE,"Connection failed."));break;default:re(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{G(qt,`RPC '${e}' ${o} completed.`)}}));const h=JSON.stringify(s);G(qt,`RPC '${e}' ${o} sending request:`,s),u.send(n,"POST",h,r,15)}))}T_(e,n,r){const s=Kp(),i=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=this.createWebChannelTransport(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(a.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Go(a.initMessageHeaders,n,r),a.encodeInitMessageHeaders=!0;const u=i.join("");G(qt,`Creating RPC '${e}' stream ${s}: ${u}`,a);const h=o.createWebChannel(u,a);this.I_(h);let d=!1,f=!1;const m=new cB({Ho:I=>{f?G(qt,`Not sending because RPC '${e}' stream ${s} is closed:`,I):(d||(G(qt,`Opening RPC '${e}' stream ${s} transport.`),h.open(),d=!0),G(qt,`RPC '${e}' stream ${s} sending:`,I),h.send(I))},Jo:()=>h.close()});return lc(h,mc.EventType.OPEN,(()=>{f||(G(qt,`RPC '${e}' stream ${s} transport opened.`),m.i_())})),lc(h,mc.EventType.CLOSE,(()=>{f||(f=!0,G(qt,`RPC '${e}' stream ${s} transport closed`),m.o_(),this.E_(h))})),lc(h,mc.EventType.ERROR,(I=>{f||(f=!0,bn(qt,`RPC '${e}' stream ${s} transport errored. Name:`,I.name,"Message:",I.message),m.o_(new q(M.UNAVAILABLE,"The operation could not be completed")))})),lc(h,mc.EventType.MESSAGE,(I=>{if(!f){const T=I.data[0];ae(!!T,16349);const k=T,V=k?.error||k[0]?.error;if(V){G(qt,`RPC '${e}' stream ${s} received error:`,V);const N=V.status;let _=(function(U){const v=gt[U];if(v!==void 0)return LR(v)})(N),C=V.message;_===void 0&&(_=M.INTERNAL,C="Unknown error status: "+N+" with message "+V.message),f=!0,m.o_(new q(_,C)),h.close()}else G(qt,`RPC '${e}' stream ${s} received:`,T),m.__(T)}})),xo.u_(),setTimeout((()=>{m.s_()}),0),m}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((n=>n===e))}Go(e,n,r){super.Go(e,n,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return Cb()}}function lB(t){return new xo(t)}function bS(){return typeof window<"u"?window:null}function Mu(){return typeof document<"u"?document:null}function Qi(t){return new m2(t,!0)}xo.c_=!1;class kg{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Ci=e,this.timerId=n,this.R_=r,this.A_=s,this.V_=i,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&G("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const iT="PersistentStream";class RS{constructor(e,n,r,s,i,o,a,c){this.Ci=e,this.b_=r,this.S_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new kg(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===M.RESOURCE_EXHAUSTED?(pt(n.toString()),pt("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.D_===n&&this.G_(r,s)}),(r=>{e((()=>{const s=new q(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)}))}))}G_(e,n){const r=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.Yo((()=>{r((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((s=>{r((()=>this.z_(s)))})),this.stream.onMessage((s=>{r((()=>++this.F_==1?this.H_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return G(iT,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget((()=>this.D_===e?n():(G(iT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class uB extends RS{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=y2(this.serializer,e),r=(function(i){if(!("targetChange"in i))return he.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?he.min():o.readTime?mt(o.readTime):he.min()})(e);return this.listener.J_(n,r)}Z_(e){const n={};n.database=Bp(this.serializer),n.addTarget=(function(i,o){let a;const c=o.target;if(a=mh(c)?{documents:GR(i,c)}:{query:gd(i,c).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=BR(i,o.resumeToken);const u=Fp(i,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(he.min())>0){a.readTime=ca(i,o.snapshotVersion.toTimestamp());const u=Fp(i,o.expectedCount);u!==null&&(a.expectedCount=u)}return a})(this.serializer,e);const r=E2(this.serializer,e);r&&(n.labels=r),this.K_(n)}X_(e){const n={};n.database=Bp(this.serializer),n.removeTarget=e,this.K_(n)}}class hB extends RS{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return ae(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ae(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ae(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=I2(e.writeResults,e.commitTime),r=mt(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Bp(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>hl(this.serializer,r)))};this.K_(n)}}class dB{}class fB extends dB{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new q(M.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,o])=>this.connection.Wo(e,Up(n,r),s,i,o))).catch((i=>{throw i.name==="FirebaseError"?(i.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new q(M.UNKNOWN,i.toString())}))}jo(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,a])=>this.connection.jo(e,Up(n,r),s,o,a,i))).catch((o=>{throw o.name==="FirebaseError"?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new q(M.UNKNOWN,o.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function pB(t,e,n,r){return new fB(t,e,n,r)}class mB{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(pt(n),this.aa=!1):G("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const qi="RemoteStore";class gB{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=i,this.Aa.Mo((o=>{r.enqueueAndForget((async()=>{Ws(this)&&(G(qi,"Restarting streams for network reachability change."),await(async function(c){const u=Z(c);u.Ea.add(4),await Ca(u),u.Va.set("Unknown"),u.Ea.delete(4),await Dl(u)})(this))}))})),this.Va=new mB(r,s)}}async function Dl(t){if(Ws(t))for(const e of t.Ra)await e(!0)}async function Ca(t){for(const e of t.Ra)await e(!1)}function Td(t,e){const n=Z(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Vg(n)?Dg(n):Na(n).O_()&&Ng(n,e))}function ha(t,e){const n=Z(t),r=Na(n);n.Ia.delete(e),r.O_()&&SS(n,e),n.Ia.size===0&&(r.O_()?r.L_():Ws(n)&&n.Va.set("Unknown"))}function Ng(t,e){if(t.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(he.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Na(t).Z_(e)}function SS(t,e){t.da.$e(e),Na(t).X_(e)}function Dg(t){t.da=new h2({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Na(t).start(),t.Va.ua()}function Vg(t){return Ws(t)&&!Na(t).x_()&&t.Ia.size>0}function Ws(t){return Z(t).Ea.size===0}function PS(t){t.da=void 0}async function _B(t){t.Va.set("Online")}async function yB(t){t.Ia.forEach(((e,n)=>{Ng(t,e)}))}async function IB(t,e){PS(t),Vg(t)?(t.Va.ha(e),Dg(t)):t.Va.set("Unknown")}async function EB(t,e,n){if(t.Va.set("Online"),e instanceof UR&&e.state===2&&e.cause)try{await(async function(s,i){const o=i.cause;for(const a of i.targetIds)s.Ia.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.Ia.delete(a),s.da.removeTarget(a))})(t,e)}catch(r){G(qi,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await bh(t,r)}else if(e instanceof Ou?t.da.Xe(e):e instanceof FR?t.da.st(e):t.da.tt(e),!n.isEqual(he.min()))try{const r=await gS(t.localStore);n.compareTo(r)>=0&&await(function(i,o){const a=i.da.Tt(o);return a.targetChanges.forEach(((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const h=i.Ia.get(u);h&&i.Ia.set(u,h.withResumeToken(c.resumeToken,o))}})),a.targetMismatches.forEach(((c,u)=>{const h=i.Ia.get(c);if(!h)return;i.Ia.set(c,h.withResumeToken(ct.EMPTY_BYTE_STRING,h.snapshotVersion)),SS(i,c);const d=new Pr(h.target,c,u,h.sequenceNumber);Ng(i,d)})),i.remoteSyncer.applyRemoteEvent(a)})(t,n)}catch(r){G(qi,"Failed to raise snapshot:",r),await bh(t,r)}}async function bh(t,e,n){if(!Gs(e))throw e;t.Ea.add(1),await Ca(t),t.Va.set("Offline"),n||(n=()=>gS(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{G(qi,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Dl(t)}))}function CS(t,e){return e().catch((n=>bh(t,n,e)))}async function ka(t){const e=Z(t),n=Fs(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Cs;for(;TB(e);)try{const s=await nB(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,wB(e,s)}catch(s){await bh(e,s)}kS(e)&&NS(e)}function TB(t){return Ws(t)&&t.Ta.length<10}function wB(t,e){t.Ta.push(e);const n=Fs(t);n.O_()&&n.Y_&&n.ea(e.mutations)}function kS(t){return Ws(t)&&!Fs(t).x_()&&t.Ta.length>0}function NS(t){Fs(t).start()}async function vB(t){Fs(t).ra()}async function AB(t){const e=Fs(t);for(const n of t.Ta)e.ea(n.mutations)}async function bB(t,e,n){const r=t.Ta.shift(),s=_g.from(r,e,n);await CS(t,(()=>t.remoteSyncer.applySuccessfulWrite(s))),await ka(t)}async function RB(t,e){e&&Fs(t).Y_&&await(async function(r,s){if((function(o){return OR(o)&&o!==M.ABORTED})(s.code)){const i=r.Ta.shift();Fs(r).B_(),await CS(r,(()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s))),await ka(r)}})(t,e),kS(t)&&NS(t)}async function oT(t,e){const n=Z(t);n.asyncQueue.verifyOperationInProgress(),G(qi,"RemoteStore received new credentials");const r=Ws(n);n.Ea.add(3),await Ca(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Dl(n)}async function Wp(t,e){const n=Z(t);e?(n.Ea.delete(2),await Dl(n)):e||(n.Ea.add(2),await Ca(n),n.Va.set("Unknown"))}function Na(t){return t.ma||(t.ma=(function(n,r,s){const i=Z(n);return i.sa(),new uB(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(t.datastore,t.asyncQueue,{Zo:_B.bind(null,t),Yo:yB.bind(null,t),t_:IB.bind(null,t),J_:EB.bind(null,t)}),t.Ra.push((async e=>{e?(t.ma.B_(),Vg(t)?Dg(t):t.Va.set("Unknown")):(await t.ma.stop(),PS(t))}))),t.ma}function Fs(t){return t.fa||(t.fa=(function(n,r,s){const i=Z(n);return i.sa(),new hB(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),Yo:vB.bind(null,t),t_:RB.bind(null,t),ta:AB.bind(null,t),na:bB.bind(null,t)}),t.Ra.push((async e=>{e?(t.fa.B_(),await ka(t)):(await t.fa.stop(),t.Ta.length>0&&(G(qi,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}class xg{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Ot,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new xg(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new q(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Da(t,e){if(pt("AsyncQueue",`${e}: ${t}`),Gs(t))return new q(M.UNAVAILABLE,`${e}: ${t}`);throw t}class Pi{static emptySet(e){return new Pi(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||X.comparator(n.key,r.key):(n,r)=>X.comparator(n.key,r.key),this.keyedMap=gc(),this.sortedSet=new Qe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Pi)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Pi;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class aT{constructor(){this.ga=new Qe(X.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):re(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class Hi{constructor(e,n,r,s,i,o,a,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach((a=>{o.push({type:0,doc:a})})),new Hi(e,n,Pi.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Sl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}class SB{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class PB{constructor(){this.queries=cT(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=Z(n),i=s.queries;s.queries=cT(),i.forEach(((o,a)=>{for(const c of a.ba)c.onError(r)}))})(this,new q(M.ABORTED,"Firestore shutting down"))}}function cT(){return new Wr((t=>ER(t)),Sl)}async function Og(t,e){const n=Z(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.Sa()&&e.Da()&&(r=2):(i=new SB,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=Da(o,`Initialization of query '${yo(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.ba.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&Mg(n)}async function Lg(t,e){const n=Z(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.ba.indexOf(e);o>=0&&(i.ba.splice(o,1),i.ba.length===0?s=e.Da()?0:1:!i.Sa()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function CB(t,e){const n=Z(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.ba)a.Fa(s)&&(r=!0);o.wa=s}}r&&Mg(n)}function kB(t,e,n){const r=Z(t),s=r.queries.get(e);if(s)for(const i of s.ba)i.onError(n);r.queries.delete(e)}function Mg(t){t.Ca.forEach((e=>{e.next()}))}var zp,lT;(lT=zp||(zp={})).Ma="default",lT.Cache="cache";class Fg{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Hi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Hi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==zp.Cache}}class DS{constructor(e,n){this.qa=e,this.byteLength=n}Ua(){return"metadata"in this.qa}}class uT{constructor(e){this.serializer=e}Ks(e){return ar(this.serializer,e)}qs(e){return e.metadata.exists?md(this.serializer,e.document,!1):Ye.newNoDocument(this.Ks(e.metadata.name),this.Us(e.metadata.readTime))}Us(e){return mt(e)}}class Ug{constructor(e,n){this.$a=e,this.serializer=n,this.Wa=[],this.Qa=[],this.collectionGroups=new Set,this.progress=VS(e)}get queries(){return this.Wa}get documents(){return this.Qa}Ga(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.qa.namedQuery)this.Wa.push(e.qa.namedQuery);else if(e.qa.documentMetadata){this.Qa.push({metadata:e.qa.documentMetadata}),e.qa.documentMetadata.exists||++n;const r=be.fromString(e.qa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.qa.document&&(this.Qa[this.Qa.length-1].document=e.qa.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,{...this.progress}):null}za(e){const n=new Map,r=new uT(this.serializer);for(const s of e)if(s.metadata.queries){const i=r.Ks(s.metadata.name);for(const o of s.metadata.queries){const a=(n.get(o)||Te()).add(i);n.set(o,a)}}return n}async ja(e){const n=await rB(e,new uT(this.serializer),this.Qa,this.$a.id),r=this.za(this.documents);for(const s of this.Wa)await sB(e,s,r.get(s.name));return this.progress.taskState="Success",{progress:this.progress,Ha:this.collectionGroups,Ja:n}}}function VS(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}class xS{constructor(e){this.key=e}}class OS{constructor(e){this.key=e}}class LS{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Te(),this.mutatedKeys=Te(),this.eu=wR(e),this.tu=new Pi(this.eu)}get nu(){return this.Za}ru(e,n){const r=n?n.iu:new aT,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((h,d)=>{const f=s.get(h),m=Pl(this.query,d)?d:null,I=!!f&&this.mutatedKeys.has(f.key),T=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let k=!1;f&&m?f.data.isEqual(m.data)?I!==T&&(r.track({type:3,doc:m}),k=!0):this.su(f,m)||(r.track({type:2,doc:m}),k=!0,(c&&this.eu(m,c)>0||u&&this.eu(m,u)<0)&&(a=!0)):!f&&m?(r.track({type:0,doc:m}),k=!0):f&&!m&&(r.track({type:1,doc:f}),k=!0,(c||u)&&(a=!0)),k&&(m?(o=o.add(m),i=T?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{tu:o,iu:r,Ss:a,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort(((h,d)=>(function(m,I){const T=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return re(20277,{Vt:k})}};return T(m)-T(I)})(h.type,d.type)||this.eu(h.doc,d.doc))),this.ou(r),s=s??!1;const a=n&&!s?this._u():[],c=this.Ya.size===0&&this.current&&!s?1:0,u=c!==this.Xa;return this.Xa=c,o.length!==0||u?{snapshot:new Hi(this.query,e.tu,i,o,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new aT,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Za=this.Za.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Za=this.Za.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Te(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))}));const n=[];return e.forEach((r=>{this.Ya.has(r)||n.push(new OS(r))})),this.Ya.forEach((r=>{e.has(r)||n.push(new xS(r))})),n}cu(e){this.Za=e.ks,this.Ya=Te();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Hi.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const zs="SyncEngine";class NB{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class DB{constructor(e){this.key=e,this.hu=!1}}class VB{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Wr((a=>ER(a)),Sl),this.Iu=new Map,this.Eu=new Set,this.Ru=new Qe(X.comparator),this.Au=new Map,this.Vu=new vg,this.du={},this.mu=new Map,this.fu=ji.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function xB(t,e,n=!0){const r=wd(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await MS(r,e,n,!0),s}async function OB(t,e){const n=wd(t);await MS(n,e,!0,!1)}async function MS(t,e,n,r){const s=await la(t.localStore,Qt(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await Bg(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&Td(t.remoteStore,s),a}async function Bg(t,e,n,r,s){t.pu=(d,f,m)=>(async function(T,k,V,N){let _=k.view.ru(V);_.Ss&&(_=await wh(T.localStore,k.query,!1).then((({documents:v})=>k.view.ru(v,_))));const C=N&&N.targetChanges.get(k.targetId),x=N&&N.targetMismatches.get(k.targetId)!=null,U=k.view.applyChanges(_,T.isPrimaryClient,C,x);return Qp(T,k.targetId,U.au),U.snapshot})(t,d,f,m);const i=await wh(t.localStore,e,!0),o=new LS(e,i.ks),a=o.ru(i.documents),c=Nl.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),u=o.applyChanges(a,t.isPrimaryClient,c);Qp(t,n,u.au);const h=new NB(e,n,o);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function LB(t,e,n){const r=Z(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter((o=>!Sl(o,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await ua(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),n&&ha(r.remoteStore,s.targetId),da(r,s.targetId)})).catch($s)):(da(r,s.targetId),await ua(r.localStore,s.targetId,!0))}async function MB(t,e){const n=Z(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),ha(n.remoteStore,r.targetId))}async function FB(t,e,n){const r=$g(t);try{const s=await(function(o,a){const c=Z(o),u=Fe.now(),h=a.reduce(((m,I)=>m.add(I.key)),Te());let d,f;return c.persistence.runTransaction("Locally write mutations","readwrite",(m=>{let I=un(),T=Te();return c.xs.getEntries(m,h).next((k=>{I=k,I.forEach(((V,N)=>{N.isValidDocument()||(T=T.add(V))}))})).next((()=>c.localDocuments.getOverlayedDocuments(m,I))).next((k=>{d=k;const V=[];for(const N of a){const _=a2(N,d.get(N.key).overlayedDocument);_!=null&&V.push(new zr(N.key,_,lR(_.value.mapValue),st.exists(!0)))}return c.mutationQueue.addMutationBatch(m,u,V,a)})).next((k=>{f=k;const V=k.applyToLocalDocumentSet(d,T);return c.documentOverlayCache.saveOverlays(m,k.batchId,V)}))})).then((()=>({batchId:f.batchId,changes:AR(d)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),(function(o,a,c){let u=o.du[o.currentUser.toKey()];u||(u=new Qe(ye)),u=u.insert(a,c),o.du[o.currentUser.toKey()]=u})(r,s.batchId,n),await Qr(r,s.changes),await ka(r.remoteStore)}catch(s){const i=Da(s,"Failed to persist write");n.reject(i)}}async function FS(t,e){const n=Z(t);try{const r=await tB(n.localStore,e);e.targetChanges.forEach(((s,i)=>{const o=n.Au.get(i);o&&(ae(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?ae(o.hu,14607):s.removedDocuments.size>0&&(ae(o.hu,42227),o.hu=!1))})),await Qr(n,r,e)}catch(r){await $s(r)}}function hT(t,e,n){const r=Z(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach(((i,o)=>{const a=o.view.va(e);a.snapshot&&s.push(a.snapshot)})),(function(o,a){const c=Z(o);c.onlineState=a;let u=!1;c.queries.forEach(((h,d)=>{for(const f of d.ba)f.va(a)&&(u=!0)})),u&&Mg(c)})(r.eventManager,e),s.length&&r.Pu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function UB(t,e,n){const r=Z(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new Qe(X.comparator);o=o.insert(i,Ye.newNoDocument(i,he.min()));const a=Te().add(i),c=new kl(he.min(),new Map,new Qe(ye),o,a);await FS(r,c),r.Ru=r.Ru.remove(i),r.Au.delete(e),Hg(r)}else await ua(r.localStore,e,!1).then((()=>da(r,e,n))).catch($s)}async function BB(t,e){const n=Z(t),r=e.batch.batchId;try{const s=await eB(n.localStore,e);qg(n,r,null),jg(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Qr(n,s)}catch(s){await $s(s)}}async function jB(t,e,n){const r=Z(t);try{const s=await(function(o,a){const c=Z(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",(u=>{let h;return c.mutationQueue.lookupMutationBatch(u,a).next((d=>(ae(d!==null,37113),h=d.keys(),c.mutationQueue.removeMutationBatch(u,d)))).next((()=>c.mutationQueue.performConsistencyCheck(u))).next((()=>c.documentOverlayCache.removeOverlaysForBatchId(u,h,a))).next((()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h))).next((()=>c.localDocuments.getDocuments(u,h)))}))})(r.localStore,e);qg(r,e,n),jg(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Qr(r,s)}catch(s){await $s(s)}}async function qB(t,e){const n=Z(t);Ws(n.remoteStore)||G(zs,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await(function(o){const a=Z(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c)))})(n.localStore);if(r===Cs)return void e.resolve();const s=n.mu.get(r)||[];s.push(e),n.mu.set(r,s)}catch(r){const s=Da(r,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}function jg(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function qg(t,e,n){const r=Z(t);let s=r.du[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.du[r.currentUser.toKey()]=s}}function da(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Vu.Gr(e).forEach((r=>{t.Vu.containsKey(r)||US(t,r)}))}function US(t,e){t.Eu.delete(e.path.canonicalString());const n=t.Ru.get(e);n!==null&&(ha(t.remoteStore,n),t.Ru=t.Ru.remove(e),t.Au.delete(n),Hg(t))}function Qp(t,e,n){for(const r of n)r instanceof xS?(t.Vu.addReference(r.key,e),HB(t,r)):r instanceof OS?(G(zs,"Document no longer in limbo: "+r.key),t.Vu.removeReference(r.key,e),t.Vu.containsKey(r.key)||US(t,r.key)):re(19791,{wu:r})}function HB(t,e){const n=e.key,r=n.path.canonicalString();t.Ru.get(n)||t.Eu.has(r)||(G(zs,"New document in limbo: "+n),t.Eu.add(r),Hg(t))}function Hg(t){for(;t.Eu.size>0&&t.Ru.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new X(be.fromString(e)),r=t.fu.next();t.Au.set(r,new DB(n)),t.Ru=t.Ru.insert(n,r),Td(t.remoteStore,new Pr(Qt(Ra(n.path)),r,"TargetPurposeLimboResolution",cn.ce))}}async function Qr(t,e,n){const r=Z(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach(((a,c)=>{o.push(r.pu(c,e,n).then((u=>{if((u||n)&&r.isPrimaryClient){const h=u?!u.fromCache:n?.targetChanges.get(c.targetId)?.current;r.sharedClientState.updateQueryState(c.targetId,h?"current":"not-current")}if(u){s.push(u);const h=Sg.Es(c.targetId,u);i.push(h)}})))})),await Promise.all(o),r.Pu.J_(s),await(async function(c,u){const h=Z(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",(d=>O.forEach(u,(f=>O.forEach(f.Ts,(m=>h.persistence.referenceDelegate.addReference(d,f.targetId,m))).next((()=>O.forEach(f.Is,(m=>h.persistence.referenceDelegate.removeReference(d,f.targetId,m)))))))))}catch(d){if(!Gs(d))throw d;G(Pg,"Failed to update sequence numbers: "+d)}for(const d of u){const f=d.targetId;if(!d.fromCache){const m=h.vs.get(f),I=m.snapshotVersion,T=m.withLastLimboFreeSnapshotVersion(I);h.vs=h.vs.insert(f,T)}}})(r.localStore,i))}async function $B(t,e){const n=Z(t);if(!n.currentUser.isEqual(e)){G(zs,"User change. New user:",e.toKey());const r=await mS(n.localStore,e);n.currentUser=e,(function(i,o){i.mu.forEach((a=>{a.forEach((c=>{c.reject(new q(M.CANCELLED,o))}))})),i.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Qr(n,r.Ns)}}function GB(t,e){const n=Z(t),r=n.Au.get(e);if(r&&r.hu)return Te().add(r.key);{let s=Te();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const a=n.Tu.get(o);s=s.unionWith(a.view.nu)}return s}}async function KB(t,e){const n=Z(t),r=await wh(n.localStore,e.query,!0),s=e.view.cu(r);return n.isPrimaryClient&&Qp(n,e.targetId,s.au),s}async function WB(t,e){const n=Z(t);return IS(n.localStore,e).then((r=>Qr(n,r)))}async function zB(t,e,n,r){const s=Z(t),i=await(function(a,c){const u=Z(a),h=Z(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",(d=>h.Xn(d,c).next((f=>f?u.localDocuments.getDocuments(d,f):O.resolve(null)))))})(s.localStore,e);i!==null?(n==="pending"?await ka(s.remoteStore):n==="acknowledged"||n==="rejected"?(qg(s,e,r||null),jg(s,e),(function(a,c){Z(Z(a).mutationQueue).nr(c)})(s.localStore,e)):re(6720,"Unknown batchState",{bu:n}),await Qr(s,i)):G(zs,"Cannot apply mutation batch with id: "+e)}async function QB(t,e){const n=Z(t);if(wd(n),$g(n),e===!0&&n.gu!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),s=await dT(n,r.toArray());n.gu=!0,await Wp(n.remoteStore,!0);for(const i of s)Td(n.remoteStore,i)}else if(e===!1&&n.gu!==!1){const r=[];let s=Promise.resolve();n.Iu.forEach(((i,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):s=s.then((()=>(da(n,o),ua(n.localStore,o,!0)))),ha(n.remoteStore,o)})),await s,await dT(n,r),(function(o){const a=Z(o);a.Au.forEach(((c,u)=>{ha(a.remoteStore,u)})),a.Vu.zr(),a.Au=new Map,a.Ru=new Qe(X.comparator)})(n),n.gu=!1,await Wp(n.remoteStore,!1)}}async function dT(t,e,n){const r=Z(t),s=[],i=[];for(const o of e){let a;const c=r.Iu.get(o);if(c&&c.length!==0){a=await la(r.localStore,Qt(c[0]));for(const u of c){const h=r.Tu.get(u),d=await KB(r,h);d.snapshot&&i.push(d.snapshot)}}else{const u=await yS(r.localStore,o);a=await la(r.localStore,u),await Bg(r,BS(u),o,!1,a.resumeToken)}s.push(a)}return r.Pu.J_(i),s}function BS(t){return _R(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function JB(t){return(function(n){return Z(Z(n).persistence).hs()})(Z(t).localStore)}async function YB(t,e,n,r){const s=Z(t);if(s.gu)return void G(zs,"Ignoring unexpected query state notification.");const i=s.Iu.get(e);if(i&&i.length>0)switch(n){case"current":case"not-current":{const o=await IS(s.localStore,TR(i[0])),a=kl.createSynthesizedRemoteEventForCurrentChange(e,n==="current",ct.EMPTY_BYTE_STRING);await Qr(s,o,a);break}case"rejected":await ua(s.localStore,e,!0),da(s,e,r);break;default:re(64155,n)}}async function XB(t,e,n){const r=wd(t);if(r.gu){for(const s of e){if(r.Iu.has(s)&&r.sharedClientState.isActiveQueryTarget(s)){G(zs,"Adding an already active target "+s);continue}const i=await yS(r.localStore,s),o=await la(r.localStore,i);await Bg(r,BS(i),o.targetId,!1,o.resumeToken),Td(r.remoteStore,o)}for(const s of n)r.Iu.has(s)&&await ua(r.localStore,s,!1).then((()=>{ha(r.remoteStore,s),da(r,s)})).catch($s)}}function wd(t){const e=Z(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=FS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=GB.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=UB.bind(null,e),e.Pu.J_=CB.bind(null,e.eventManager),e.Pu.yu=kB.bind(null,e.eventManager),e}function $g(t){const e=Z(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=BB.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=jB.bind(null,e),e}function ZB(t,e,n){const r=Z(t);(async function(i,o,a){try{const c=await o.getMetadata();if(await(function(m,I){const T=Z(m),k=mt(I.createTime);return T.persistence.runTransaction("hasNewerBundle","readonly",(V=>T.Pi.getBundleMetadata(V,I.id))).then((V=>!!V&&V.createTime.compareTo(k)>=0))})(i.localStore,c))return await o.close(),a._completeWith((function(m){return{taskState:"Success",documentsLoaded:m.totalDocuments,bytesLoaded:m.totalBytes,totalDocuments:m.totalDocuments,totalBytes:m.totalBytes}})(c)),Promise.resolve(new Set);a._updateProgress(VS(c));const u=new Ug(c,o.serializer);let h=await o.Su();for(;h;){const f=await u.Ga(h);f&&a._updateProgress(f),h=await o.Su()}const d=await u.ja(i.localStore);return await Qr(i,d.Ja,void 0),await(function(m,I){const T=Z(m);return T.persistence.runTransaction("Save bundle","readwrite",(k=>T.Pi.saveBundleMetadata(k,I)))})(i.localStore,c),a._completeWith(d.progress),Promise.resolve(d.Ha)}catch(c){return bn(zs,`Loading bundle failed with ${c}`),a._failWith(c),Promise.resolve(new Set)}})(r,e,n).then((s=>{r.sharedClientState.notifyBundleLoaded(s)}))}class fa{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Qi(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return pS(this.persistence,new fS,e.initialUser,this.serializer)}Cu(e){return new Ag(Ed.Vi,this.serializer)}Du(e){return new AS}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}fa.provider={build:()=>new fa};class Gg extends fa{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ae(this.persistence.referenceDelegate instanceof Th,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new aS(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?$t.withCacheSize(this.cacheSizeBytes):$t.DEFAULT;return new Ag((r=>Th.Vi(r,n)),this.serializer)}}class Kg extends fa{constructor(e,n,r){super(),this.xu=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await $g(this.xu.syncEngine),await ka(this.xu.remoteStore),await this.persistence.zi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return pS(this.persistence,new fS,e.initialUser,this.serializer)}Fu(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new aS(r,e.asyncQueue,n)}Mu(e,n){const r=new oU(n,this.persistence);return new iU(e.asyncQueue,r)}Cu(e){const n=Rg(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?$t.withCacheSize(this.cacheSizeBytes):$t.DEFAULT;return new bg(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,bS(),Mu(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new AS}}class jS extends Kg{constructor(e,n){super(e,n,!1),this.xu=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.xu.syncEngine;this.sharedClientState instanceof Nf&&(this.sharedClientState.syncEngine={So:zB.bind(null,n),Do:YB.bind(null,n),Co:XB.bind(null,n),hs:JB.bind(null,n),bo:WB.bind(null,n)},await this.sharedClientState.start()),await this.persistence.zi((async r=>{await QB(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))}Du(e){const n=bS();if(!Nf.v(n))throw new q(M.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Rg(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Nf(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class Us{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>hT(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=$B.bind(null,this.syncEngine),await Wp(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new PB})()}createDatastore(e){const n=Qi(e.databaseInfo.databaseId),r=lB(e.databaseInfo);return pB(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,s,i,o,a){return new gB(r,s,i,o,a)})(this.localStore,this.datastore,e.asyncQueue,(n=>hT(this.syncEngine,n,0)),(function(){return sT.v()?new sT:new iB})())}createSyncEngine(e,n){return(function(s,i,o,a,c,u,h){const d=new VB(s,i,o,a,c,u);return h&&(d.gu=!0),d})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=Z(n);G(qi,"RemoteStore shutting down."),r.Ea.add(5),await Ca(r),r.Aa.shutdown(),r.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Us.provider={build:()=>new Us};function fT(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}class vd{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):pt("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}class e4{constructor(e,n){this.Bu=e,this.serializer=n,this.metadata=new Ot,this.buffer=new Uint8Array,this.Lu=(function(){return new TextDecoder("utf-8")})(),this.ku().then((r=>{r&&r.Ua()?this.metadata.resolve(r.qa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.qa)}`))}),(r=>this.metadata.reject(r)))}close(){return this.Bu.cancel()}async getMetadata(){return this.metadata.promise}async Su(){return await this.getMetadata(),this.ku()}async ku(){const e=await this.Ku();if(e===null)return null;const n=this.Lu.decode(e),r=Number(n);isNaN(r)&&this.qu(`length string (${n}) is not valid number`);const s=await this.Uu(r);return new DS(JSON.parse(s),e.length+r)}$u(){return this.buffer.findIndex((e=>e===123))}async Ku(){for(;this.$u()<0&&!await this.Wu(););if(this.buffer.length===0)return null;const e=this.$u();e<0&&this.qu("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async Uu(e){for(;this.buffer.length<e;)await this.Wu()&&this.qu("Reached the end of bundle when more is expected.");const n=this.Lu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}qu(e){throw this.Bu.cancel(),new Error(`Invalid bundle format: ${e}`)}async Wu(){const e=await this.Bu.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}class t4{constructor(e,n){this.bundleData=e,this.serializer=n,this.cursor=0,this.elements=[];let r=this.Su();if(!r||!r.Ua())throw new Error(`The first element of the bundle is not a metadata object, it is
         ${JSON.stringify(r?.qa)}`);this.metadata=r;do r=this.Su(),r!==null&&this.elements.push(r);while(r!==null)}getMetadata(){return this.metadata}Qu(){return this.elements}Su(){if(this.cursor===this.bundleData.length)return null;const e=this.Ku(),n=this.Uu(e);return new DS(JSON.parse(n),e)}Uu(e){if(this.cursor+e>this.bundleData.length)throw new q(M.INTERNAL,"Reached the end of bundle when more is expected.");return this.bundleData.slice(this.cursor,this.cursor+=e)}Ku(){const e=this.cursor;let n=this.cursor;for(;n<this.bundleData.length;){if(this.bundleData[n]==="{"){if(n===e)throw new Error("First character is a bracket and not a number");return this.cursor=n,Number(this.bundleData.slice(e,n))}n++}throw new Error("Reached the end of bundle when more is expected.")}}let n4=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new q(M.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await(async function(s,i){const o=Z(s),a={documents:i.map((d=>ul(o.serializer,d)))},c=await o.jo("BatchGetDocuments",o.serializer.databaseId,be.emptyPath(),a,i.length),u=new Map;c.forEach((d=>{const f=_2(o.serializer,d);u.set(f.key.toString(),f)}));const h=[];return i.forEach((d=>{const f=u.get(d.toString());ae(!!f,55234,{key:d}),h.push(f)})),h})(this.datastore,e);return n.forEach((r=>this.recordVersion(r))),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Pa(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((n=>{e.delete(n.key.toString())})),e.forEach(((n,r)=>{const s=X.fromPath(r);this.mutations.push(new mg(s,this.precondition(s)))})),await(async function(r,s){const i=Z(r),o={writes:s.map((a=>hl(i.serializer,a)))};await i.Wo("Commit",i.serializer.databaseId,be.emptyPath(),o)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw re(50498,{Gu:e.constructor.name});n=he.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new q(M.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(he.min())?st.exists(!1):st.updateTime(n):st.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(he.min()))throw new q(M.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return st.updateTime(n)}return st.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};class r4{constructor(e,n,r,s,i){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=s,this.deferred=i,this.zu=r.maxAttempts,this.M_=new kg(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Hu()}Hu(){this.M_.p_((async()=>{const e=new n4(this.datastore),n=this.Ju(e);n&&n.then((r=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(r)})).catch((s=>{this.Zu(s)}))))})).catch((r=>{this.Zu(r)}))}))}Ju(e){try{const n=this.updateFunction(e);return!Al(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Zu(e){this.zu>0&&this.Xu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Hu(),Promise.resolve())))):this.deferred.reject(e)}Xu(e){if(e?.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!OR(n)}return!1}}const Bs="FirestoreClient";class s4{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this._databaseInfo=s,this.user=Nt.UNAUTHENTICATED,this.clientId=sd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,(async o=>{G(Bs,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,(o=>(G(Bs,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ot;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Da(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Vf(t,e){t.asyncQueue.verifyOperationInProgress(),G(Bs,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async s=>{r.isEqual(s)||(await mS(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function pT(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Wg(t);G(Bs,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>oT(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,s)=>oT(e.remoteStore,s))),t._onlineComponents=e}async function Wg(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){G(Bs,"Using user provided OfflineComponentProvider");try{await Vf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(s){return s.name==="FirebaseError"?s.code===M.FAILED_PRECONDITION||s.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(n))throw n;bn("Error using user provided cache. Falling back to memory cache: "+n),await Vf(t,new fa)}}else G(Bs,"Using default OfflineComponentProvider"),await Vf(t,new Gg(void 0));return t._offlineComponents}async function Ad(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(G(Bs,"Using user provided OnlineComponentProvider"),await pT(t,t._uninitializedComponentsProvider._online)):(G(Bs,"Using default OnlineComponentProvider"),await pT(t,new Us))),t._onlineComponents}function qS(t){return Wg(t).then((e=>e.persistence))}function Va(t){return Wg(t).then((e=>e.localStore))}function HS(t){return Ad(t).then((e=>e.remoteStore))}function zg(t){return Ad(t).then((e=>e.syncEngine))}function $S(t){return Ad(t).then((e=>e.datastore))}async function pa(t){const e=await Ad(t),n=e.eventManager;return n.onListen=xB.bind(null,e.syncEngine),n.onUnlisten=LB.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=OB.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=MB.bind(null,e.syncEngine),n}function i4(t){return t.asyncQueue.enqueue((async()=>{const e=await qS(t),n=await HS(t);return e.setNetworkEnabled(!0),(function(s){const i=Z(s);return i.Ea.delete(0),Dl(i)})(n)}))}function o4(t){return t.asyncQueue.enqueue((async()=>{const e=await qS(t),n=await HS(t);return e.setNetworkEnabled(!1),(async function(s){const i=Z(s);i.Ea.add(0),await Ca(i),i.Va.set("Offline")})(n)}))}function a4(t,e,n,r){const s=new vd(r),i=new Fg(e,s,n);return t.asyncQueue.enqueueAndForget((async()=>Og(await pa(t),i))),()=>{s.Nu(),t.asyncQueue.enqueueAndForget((async()=>Lg(await pa(t),i)))}}function c4(t,e){const n=new Ot;return t.asyncQueue.enqueueAndForget((async()=>(async function(s,i,o){try{const a=await(function(u,h){const d=Z(u);return d.persistence.runTransaction("read document","readonly",(f=>d.localDocuments.getDocument(f,h)))})(s,i);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new q(M.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const c=Da(a,`Failed to get document '${i} from cache`);o.reject(c)}})(await Va(t),e,n))),n.promise}function GS(t,e,n={}){const r=new Ot;return t.asyncQueue.enqueueAndForget((async()=>(function(i,o,a,c,u){const h=new vd({next:f=>{h.Nu(),o.enqueueAndForget((()=>Lg(i,d)));const m=f.docs.has(a);!m&&f.fromCache?u.reject(new q(M.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&f.fromCache&&c&&c.source==="server"?u.reject(new q(M.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(f)},error:f=>u.reject(f)}),d=new Fg(Ra(a.path),h,{includeMetadataChanges:!0,Ka:!0});return Og(i,d)})(await pa(t),t.asyncQueue,e,n,r))),r.promise}function l4(t,e){const n=new Ot;return t.asyncQueue.enqueueAndForget((async()=>(async function(s,i,o){try{const a=await wh(s,i,!0),c=new LS(i,a.ks),u=c.ru(a.documents),h=c.applyChanges(u,!1);o.resolve(h.snapshot)}catch(a){const c=Da(a,`Failed to execute query '${i} against cache`);o.reject(c)}})(await Va(t),e,n))),n.promise}function KS(t,e,n={}){const r=new Ot;return t.asyncQueue.enqueueAndForget((async()=>(function(i,o,a,c,u){const h=new vd({next:f=>{h.Nu(),o.enqueueAndForget((()=>Lg(i,d))),f.fromCache&&c.source==="server"?u.reject(new q(M.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(f)},error:f=>u.reject(f)}),d=new Fg(a,h,{includeMetadataChanges:!0,Ka:!0});return Og(i,d)})(await pa(t),t.asyncQueue,e,n,r))),r.promise}function u4(t,e,n){const r=new Ot;return t.asyncQueue.enqueueAndForget((async()=>{try{const s=await $S(t);r.resolve((async function(o,a,c){const u=Z(o),{request:h,gt:d,parent:f}=KR(u.serializer,yR(a),c);u.connection.Ko||delete h.parent;const m=(await u.jo("RunAggregationQuery",u.serializer.databaseId,f,h,1)).filter((T=>!!T.result));ae(m.length===1,64727);const I=m[0].result?.aggregateFields;return Object.keys(I).reduce(((T,k)=>(T[d[k]]=I[k],T)),{})})(s,e,n))}catch(s){r.reject(s)}})),r.promise}function h4(t,e){const n=new Ot;return t.asyncQueue.enqueueAndForget((async()=>FB(await zg(t),e,n))),n.promise}function d4(t,e){const n=new vd(e);return t.asyncQueue.enqueueAndForget((async()=>(function(s,i){Z(s).Ca.add(i),i.next()})(await pa(t),n))),()=>{n.Nu(),t.asyncQueue.enqueueAndForget((async()=>(function(s,i){Z(s).Ca.delete(i)})(await pa(t),n)))}}function f4(t,e,n){const r=new Ot;return t.asyncQueue.enqueueAndForget((async()=>{const s=await $S(t);new r4(t.asyncQueue,s,n,e,r).ju()})),r.promise}function p4(t,e,n,r){const s=(function(o,a){let c;return c=typeof o=="string"?MR().encode(o):o,(function(h,d){return new e4(h,d)})((function(h,d){if(h instanceof Uint8Array)return fT(h,d);if(h instanceof ArrayBuffer)return fT(new Uint8Array(h),d);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")})(c),a)})(n,Qi(e));t.asyncQueue.enqueueAndForget((async()=>{ZB(await zg(t),s,r)}))}function m4(t,e){return t.asyncQueue.enqueue((async()=>(function(r,s){const i=Z(r);return i.persistence.runTransaction("Get named query","readonly",(o=>i.Pi.getNamedQuery(o,s)))})(await Va(t),e)))}function WS(t,e){return(function(r,s){return new t4(r,s)})(t,e)}function g4(t,e){return t.asyncQueue.enqueue((async()=>(async function(r,s){const i=Z(r),o=i.indexManager,a=[];return i.persistence.runTransaction("Configure indexes","readwrite",(c=>o.getFieldIndexes(c).next((u=>(function(d,f,m,I,T){d=[...d],f=[...f],d.sort(m),f.sort(m);const k=d.length,V=f.length;let N=0,_=0;for(;N<V&&_<k;){const C=m(d[_],f[N]);C<0?T(d[_++]):C>0?I(f[N++]):(N++,_++)}for(;N<V;)I(f[N++]);for(;_<k;)T(d[_++])})(u,s,tU,(h=>{a.push(o.addFieldIndex(c,h))}),(h=>{a.push(o.deleteFieldIndex(c,h))})))).next((()=>O.waitFor(a)))))})(await Va(t),e)))}function _4(t,e){return t.asyncQueue.enqueue((async()=>(function(r,s){Z(r).Cs.As=s})(await Va(t),e)))}function y4(t){return t.asyncQueue.enqueue((async()=>(function(n){const r=Z(n),s=r.indexManager;return r.persistence.runTransaction("Delete All Indexes","readwrite",(i=>s.deleteAllFieldIndexes(i)))})(await Va(t))))}function zS(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}const I4="ComponentProvider",mT=new Map;function E4(t,e,n,r,s){return new OU(t,e,n,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,zS(s.experimentalLongPollingOptions),s.useFetchStreams,s.isUsingEmulator,r)}const QS="firestore.googleapis.com",gT=!0;class _T{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new q(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=QS,this.ssl=gT}else this.host=e.host,this.ssl=e.ssl??gT;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=nS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<oS)throw new q(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}xb("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=zS(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new q(M.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new q(M.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new q(M.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Vl{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new _T({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new q(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new q(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new _T(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new Db;switch(r.type){case"firstParty":return new zF(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new q(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=mT.get(n);r&&(G(I4,"Removing Datastore"),mT.delete(n),r.terminate())})(this),Promise.resolve()}}function JS(t,e,n,r={}){t=Re(t,Vl);const s=Ki(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},a=`${e}:${n}`;s&&(Vm(`https://${a}`),eA("Firestore",!0)),i.host!==QS&&i.host!==a&&bn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...i,host:a,ssl:s,emulatorOptions:r};if(!Kn(c,o)&&(t._setSettings(c),r.mockUserToken)){let u,h;if(typeof r.mockUserToken=="string")u=r.mockUserToken,h=Nt.MOCK_USER;else{u=qx(r.mockUserToken,t._app?.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new q(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Nt(d)}t._authCredentials=new GF(new Nb(u,h))}}class St{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new St(this.firestore,e,this._query)}}class Be{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new jn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Be(this.firestore,e,this._key)}toJSON(){return{type:Be._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(zi(n,Be._jsonSchema))return new Be(e,r||null,new X(be.fromString(n.referencePath)))}}Be._jsonSchemaVersion="firestore/documentReference/1.0",Be._jsonSchema={type:Et("string",Be._jsonSchemaVersion),referencePath:Et("string")};class jn extends St{constructor(e,n,r){super(e,n,Ra(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Be(this.firestore,null,new X(e))}withConverter(e){return new jn(this.firestore,e,this._path)}}function T4(t,e,...n){if(t=ue(t),ng("collection","path",e),t instanceof Vl){const r=be.fromString(e,...n);return iE(r),new jn(t,null,r)}{if(!(t instanceof Be||t instanceof jn))throw new q(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(be.fromString(e,...n));return iE(r),new jn(t.firestore,null,r)}}function w4(t,e){if(t=Re(t,Vl),ng("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new q(M.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new St(t,null,(function(r){return new Kr(be.emptyPath(),r)})(e))}function Bc(t,e,...n){if(t=ue(t),arguments.length===1&&(e=sd.newId()),ng("doc","path",e),t instanceof Vl){const r=be.fromString(e,...n);return sE(r),new Be(t,null,new X(r))}{if(!(t instanceof Be||t instanceof jn))throw new q(M.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(be.fromString(e,...n));return sE(r),new Be(t.firestore,t instanceof jn?t.converter:null,new X(r))}}function v4(t,e){return t=ue(t),e=ue(e),(t instanceof Be||t instanceof jn)&&(e instanceof Be||e instanceof jn)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function Qg(t,e){return t=ue(t),e=ue(e),t instanceof St&&e instanceof St&&t.firestore===e.firestore&&Sl(t._query,e._query)&&t.converter===e.converter}const yT="AsyncQueue";class IT{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new kg(this,"async_queue_retry"),this._c=()=>{const r=Mu();r&&G(yT,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Mu();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Mu();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Ot;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Gs(e))throw e;G(yT,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,pt("INTERNAL UNHANDLED ERROR: ",ET(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=xg.createAndSchedule(this,e,n,r,(i=>this.hc(i)));return this.tc.push(s),s}uc(){this.nc&&re(47125,{Pc:ET(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function ET(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class YS{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ot,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}const A4=-1;class He extends Vl{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new IT,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new IT(e),this._firestoreClient=void 0,await e}}}function b4(t,e,n){n||(n=ol);const r=Il(t,"firestore");if(r.isInitialized(n)){const s=r.getImmediate({identifier:n}),i=r.getOptions(n);if(Kn(i,e))return s;throw new q(M.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new q(M.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<oS)throw new q(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&Ki(e.host)&&Vm(e.host),r.initialize({options:e,instanceIdentifier:n})}function R4(t,e){const n=typeof t=="object"?t:dA(),r=typeof t=="string"?t:e||ol,s=Il(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=Bx("firestore");i&&JS(s,...i)}return s}function ot(t){if(t._terminated)throw new q(M.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||XS(t),t._firestoreClient}function XS(t){const e=t._freezeSettings(),n=E4(t._databaseId,t._app?.options.appId||"",t._persistenceKey,t._app?.options.apiKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new s4(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(s){const i=s?._online.build();return{_offline:s?._offline.build(i),_online:i}})(t._componentsProvider))}function S4(t,e){bn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return ZS(t,Us.provider,{build:r=>new Kg(r,n.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}async function P4(t){bn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();ZS(t,Us.provider,{build:n=>new jS(n,e.cacheSizeBytes)})}function ZS(t,e,n){if((t=Re(t,He))._firestoreClient||t._terminated)throw new q(M.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new q(M.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},XS(t)}function C4(t){if(t._initialized&&!t._terminated)throw new q(M.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Ot;return t._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await(async function(r){if(!or.v())return Promise.resolve();const s=r+dS;await or.delete(s)})(Rg(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}})),e.promise}function k4(t){return(function(n){const r=new Ot;return n.asyncQueue.enqueueAndForget((async()=>qB(await zg(n),r))),r.promise})(ot(t=Re(t,He)))}function N4(t){return i4(ot(t=Re(t,He)))}function D4(t){return o4(ot(t=Re(t,He)))}function V4(t){return e1(t.app,"firestore",t._databaseId.database),t._delete()}function Jp(t,e){const n=ot(t=Re(t,He)),r=new YS;return p4(n,t._databaseId,e,r),r}function eP(t,e){return m4(ot(t=Re(t,He)),e).then((n=>n?new St(t,null,n.query):null))}class on{constructor(e){this._byteString=e}static fromBase64String(e){try{return new on(ct.fromBase64String(e))}catch(n){throw new q(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new on(ct.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:on._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(zi(e,on._jsonSchema))return on.fromBase64String(e.bytes)}}on._jsonSchemaVersion="firestore/bytes/1.0",on._jsonSchema={type:Et("string",on._jsonSchemaVersion),bytes:Et("string")};class Ji{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new q(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xe(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function x4(){return new Ji(bp)}class Qs{constructor(e){this._methodName=e}}class qn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new q(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new q(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ye(this._lat,e._lat)||ye(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:qn._jsonSchemaVersion}}static fromJSON(e){if(zi(e,qn._jsonSchema))return new qn(e.latitude,e.longitude)}}qn._jsonSchemaVersion="firestore/geoPoint/1.0",qn._jsonSchema={type:Et("string",qn._jsonSchemaVersion),latitude:Et("number"),longitude:Et("number")};class vn{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0})(this._values,e._values)}toJSON(){return{type:vn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(zi(e,vn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new vn(e.vectorValues);throw new q(M.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}vn._jsonSchemaVersion="firestore/vectorValue/1.0",vn._jsonSchema={type:Et("string",vn._jsonSchemaVersion),vectorValues:Et("object")};const O4=/^__.*__$/;class L4{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new zr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Sa(e,this.data,n,this.fieldTransforms)}}class tP{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new zr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function nP(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw re(40011,{dataSource:t})}}class bd{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.validatePath(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new bd({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const n=this.path?.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){const n=this.path?.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Rh(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(nP(this.dataSource)&&O4.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class M4{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Qi(e)}createContext(e,n,r,s=!1){return new bd({dataSource:e,methodName:n,targetDoc:r,path:Xe.emptyPath(),arrayElement:!1,hasConverter:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Yi(t){const e=t._freezeSettings(),n=Qi(t._databaseId);return new M4(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Rd(t,e,n,r,s,i={}){const o=t.createContext(i.merge||i.mergeFields?2:0,e,n,s);n_("Data must be an object, but it was:",o,r);const a=iP(r,o);let c,u;if(i.merge)c=new ln(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const d of i.mergeFields){const f=Br(e,d,n);if(!o.contains(f))throw new q(M.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);aP(h,f)||h.push(f)}c=new ln(h),u=o.fieldTransforms.filter((d=>c.covers(d.field)))}else c=null,u=o.fieldTransforms;return new L4(new Dt(a),c,u)}class xl extends Qs{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof xl}}function rP(t,e,n){return new bd({dataSource:3,targetDoc:e.settings.targetDoc,methodName:t._methodName,arrayElement:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Jg extends Qs{_toFieldTransform(e){return new Cl(e.path,new oa)}isEqual(e){return e instanceof Jg}}class Yg extends Qs{constructor(e,n){super(e),this.Ac=n}_toFieldTransform(e){const n=rP(this,e,!0),r=this.Ac.map((i=>Xi(i,n))),s=new Mi(r);return new Cl(e.path,s)}isEqual(e){return e instanceof Yg&&Kn(this.Ac,e.Ac)}}class Xg extends Qs{constructor(e,n){super(e),this.Ac=n}_toFieldTransform(e){const n=rP(this,e,!0),r=this.Ac.map((i=>Xi(i,n))),s=new Fi(r);return new Cl(e.path,s)}isEqual(e){return e instanceof Xg&&Kn(this.Ac,e.Ac)}}class Zg extends Qs{constructor(e,n){super(e),this.Vc=n}_toFieldTransform(e){const n=new aa(e.serializer,SR(e.serializer,this.Vc));return new Cl(e.path,n)}isEqual(e){return e instanceof Zg&&this.Vc===e.Vc}}function e_(t,e,n,r){const s=t.createContext(1,e,n);n_("Data must be an object, but it was:",s,r);const i=[],o=Dt.empty();Ks(r,((c,u)=>{const h=r_(e,c,n);u=ue(u);const d=s.childContextForFieldPath(h);if(u instanceof xl)i.push(h);else{const f=Xi(u,d);f!=null&&(i.push(h),o.set(h,f))}}));const a=new ln(i);return new tP(o,a,s.fieldTransforms)}function t_(t,e,n,r,s,i){const o=t.createContext(1,e,n),a=[Br(e,r,n)],c=[s];if(i.length%2!=0)throw new q(M.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<i.length;f+=2)a.push(Br(e,i[f])),c.push(i[f+1]);const u=[],h=Dt.empty();for(let f=a.length-1;f>=0;--f)if(!aP(u,a[f])){const m=a[f];let I=c[f];I=ue(I);const T=o.childContextForFieldPath(m);if(I instanceof xl)u.push(m);else{const k=Xi(I,T);k!=null&&(u.push(m),h.set(m,k))}}const d=new ln(u);return new tP(h,d,o.fieldTransforms)}function sP(t,e,n,r=!1){return Xi(n,t.createContext(r?4:3,e))}function Xi(t,e){if(oP(t=ue(t)))return n_("Unsupported field value:",e,t),iP(t,e);if(t instanceof Qs)return(function(r,s){if(!nP(s.dataSource))throw s.createError(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.createError(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(r,s){const i=[];let o=0;for(const a of r){let c=Xi(a,s.childContextForArray(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}})(t,e)}return(function(r,s){if((r=ue(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return SR(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Fe.fromDate(r);return{timestampValue:ca(s.serializer,i)}}if(r instanceof Fe){const i=new Fe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ca(s.serializer,i)}}if(r instanceof qn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof on)return{bytesValue:BR(s.serializer,r._byteString)};if(r instanceof Be){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.createError(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Eg(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof vn)return(function(o,a){const c=o instanceof vn?o.toArray():o;return{mapValue:{fields:{[lg]:{stringValue:ug},[ra]:{arrayValue:{values:c.map((h=>{if(typeof h!="number")throw a.createError("VectorValues must only contain numeric values.");return pg(a.serializer,h)}))}}}}}})(r,s);if(YR(r))return r._toProto(s.serializer);throw s.createError(`Unsupported field value: ${id(r)}`)})(t,e)}function iP(t,e){const n={};return eR(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ks(t,((r,s)=>{const i=Xi(s,e.childContextForField(r));i!=null&&(n[r]=i)})),{mapValue:{fields:n}}}function oP(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Fe||t instanceof qn||t instanceof on||t instanceof Be||t instanceof Qs||t instanceof vn||YR(t))}function n_(t,e,n){if(!oP(n)||!Ob(n)){const r=id(n);throw r==="an object"?e.createError(t+" a custom object"):e.createError(t+" "+r)}}function Br(t,e,n){if((e=ue(e))instanceof Ji)return e._internalPath;if(typeof e=="string")return r_(t,e);throw Rh("Field path arguments must be of type string or ",t,!1,void 0,n)}const F4=new RegExp("[~\\*/\\[\\]]");function r_(t,e,n){if(e.search(F4)>=0)throw Rh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ji(...e.split("."))._internalPath}catch{throw Rh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Rh(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new q(M.INVALID_ARGUMENT,a+t+c)}function aP(t,e){return t.some((n=>n.isEqual(e)))}class s_{convertValue(e,n="none"){switch(Os(e)){case 0:return null;case 1:return e.booleanValue;case 2:return rt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ur(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw re(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ks(e,((s,i)=>{r[s]=this.convertValue(i,n)})),r}convertVectorValue(e){const n=e.fields?.[ra].arrayValue?.values?.map((r=>rt(r.doubleValue)));return new vn(n)}convertGeoPoint(e){return new qn(rt(e.latitude),rt(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=hd(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(il(e));default:return null}}convertTimestamp(e){const n=Fr(e);return new Fe(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=be.fromString(e);ae(JR(r),9688,{name:e});const s=new xs(r.get(1),r.get(3)),i=new X(r.popFirst(5));return s.isEqual(n)||pt(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}class Js extends s_{constructor(e){super(),this.firestore=e}convertBytes(e){return new on(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Be(this.firestore,null,n)}}function U4(){return new xl("deleteField")}function B4(){return new Jg("serverTimestamp")}function j4(...t){return new Yg("arrayUnion",t)}function q4(...t){return new Xg("arrayRemove",t)}function H4(t){return new Zg("increment",t)}function $4(t){return new vn(t)}function G4(t){const e=ot(Re(t.firestore,He)),n=e._onlineComponents?.datastore.serializer;return n===void 0?null:gd(n,Qt(t._query)).ft}function K4(t,e){const n=Zb(e,((i,o)=>new xR(o,i.aggregateType,i._internalFieldPath))),r=ot(Re(t.firestore,He)),s=r._onlineComponents?.datastore.serializer;return s===void 0?null:KR(s,yR(t._query),n,!0).request}const TT="@firebase/firestore",wT="4.10.0";function Oo(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1})(t,["next","error","complete"])}class ma{constructor(e="count",n){this._internalFieldPath=n,this.type="AggregateField",this.aggregateType=e}}class cP{constructor(e,n,r){this._userDataWriter=n,this._data=r,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}_fieldsProto(){return new Dt({mapValue:{fields:this._data}}).clone().value.mapValue.fields}}class dl{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Be(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new W4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const n=this._document.data.field(Br("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class W4 extends dl{data(){return super.data()}}function lP(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new q(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class i_{}class xa extends i_{}function z4(t,e,...n){let r=[];e instanceof i_&&r.push(e),r=r.concat(n),(function(i){const o=i.filter((c=>c instanceof Zi)).length,a=i.filter((c=>c instanceof Oa)).length;if(o>1||o>0&&a>0)throw new q(M.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const s of r)t=s._apply(t);return t}class Oa extends xa{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Oa(e,n,r)}_apply(e){const n=this._parse(e);return hP(e._query,n),new St(e.firestore,e.converter,Lp(e._query,n))}_parse(e){const n=Yi(e.firestore);return(function(i,o,a,c,u,h,d){let f;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new q(M.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){AT(d,h);const I=[];for(const T of d)I.push(vT(c,i,T));f={arrayValue:{values:I}}}else f=vT(c,i,d)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||AT(d,h),f=sP(a,o,d,h==="in"||h==="not-in");return Ce.create(u,h,f)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Q4(t,e,n){const r=e,s=Br("where",t);return Oa._create(s,r,n)}class Zi extends i_{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Zi(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:Ue.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(s,i){let o=s;const a=i.getFlattenedFilters();for(const c of a)hP(o,c),o=Lp(o,c)})(e._query,n),new St(e.firestore,e.converter,Lp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function J4(...t){return t.forEach((e=>dP("or",e))),Zi._create("or",t)}function Y4(...t){return t.forEach((e=>dP("and",e))),Zi._create("and",t)}class Sd extends xa{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Sd(e,n)}_apply(e){const n=(function(s,i,o){if(s.startAt!==null)throw new q(M.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new q(M.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ll(i,o)})(e._query,this._field,this._direction);return new St(e.firestore,e.converter,zU(e._query,n))}}function X4(t,e="asc"){const n=e,r=Br("orderBy",t);return Sd._create(r,n)}class Ol extends xa{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Ol(e,n,r)}_apply(e){return new St(e.firestore,e.converter,_h(e._query,this._limit,this._limitType))}}function Z4(t){return Lb("limit",t),Ol._create("limit",t,"F")}function e6(t){return Lb("limitToLast",t),Ol._create("limitToLast",t,"L")}class Ll extends xa{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Ll(e,n,r)}_apply(e){const n=uP(e,this.type,this._docOrFields,this._inclusive);return new St(e.firestore,e.converter,QU(e._query,n))}}function t6(...t){return Ll._create("startAt",t,!0)}function n6(...t){return Ll._create("startAfter",t,!1)}class Ml extends xa{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Ml(e,n,r)}_apply(e){const n=uP(e,this.type,this._docOrFields,this._inclusive);return new St(e.firestore,e.converter,JU(e._query,n))}}function r6(...t){return Ml._create("endBefore",t,!1)}function s6(...t){return Ml._create("endAt",t,!0)}function uP(t,e,n,r){if(n[0]=ue(n[0]),n[0]instanceof dl)return(function(i,o,a,c,u){if(!c)throw new q(M.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const h=[];for(const d of Vo(i))if(d.field.isKeyField())h.push(Oi(o,c.key));else{const f=c.data.field(d.field);if(ud(f))throw new q(M.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+d.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(f===null){const m=d.field.canonicalString();throw new q(M.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${m}' (used as the orderBy) does not exist.`)}h.push(f)}return new Ms(h,u)})(t._query,t.firestore._databaseId,e,n[0]._document,r);{const s=Yi(t.firestore);return(function(o,a,c,u,h,d){const f=o.explicitOrderBy;if(h.length>f.length)throw new q(M.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const m=[];for(let I=0;I<h.length;I++){const T=h[I];if(f[I].field.isKeyField()){if(typeof T!="string")throw new q(M.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof T}`);if(!dg(o)&&T.indexOf("/")!==-1)throw new q(M.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${T}' contains a slash.`);const k=o.path.child(be.fromString(T));if(!X.isDocumentKey(k))throw new q(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${k}' is not because it contains an odd number of segments.`);const V=new X(k);m.push(Oi(a,V))}else{const k=sP(c,u,T);m.push(k)}}return new Ms(m,d)})(t._query,t.firestore._databaseId,s,e,n,r)}}function vT(t,e,n){if(typeof(n=ue(n))=="string"){if(n==="")throw new q(M.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!dg(e)&&n.indexOf("/")!==-1)throw new q(M.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(be.fromString(n));if(!X.isDocumentKey(r))throw new q(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Oi(t,new X(r))}if(n instanceof Be)return Oi(t,n._key);throw new q(M.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${id(n)}.`)}function AT(t,e){if(!Array.isArray(t)||t.length===0)throw new q(M.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function hP(t,e){const n=(function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null})(t.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new q(M.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new q(M.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function dP(t,e){if(!(e instanceof Oa||e instanceof Zi))throw new q(M.INVALID_ARGUMENT,`Function ${t}() requires AppliableConstraints created with a call to 'where(...)', 'or(...)', or 'and(...)'.`)}function Pd(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class o_ extends s_{constructor(e){super(),this.firestore=e}convertBytes(e){return new on(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Be(this.firestore,null,n)}}function i6(t){return new ma("sum",Br("sum",t))}function o6(t){return new ma("avg",Br("average",t))}function fP(){return new ma("count")}function a6(t,e){return t instanceof ma&&e instanceof ma&&t.aggregateType===e.aggregateType&&t._internalFieldPath?.canonicalString()===e._internalFieldPath?.canonicalString()}function c6(t,e){return Qg(t.query,e.query)&&Kn(t.data(),e.data())}function l6(t){return pP(t,{count:fP()})}function pP(t,e){const n=Re(t.firestore,He),r=ot(n),s=Zb(e,((i,o)=>new xR(o,i.aggregateType,i._internalFieldPath)));return u4(r,t._query,s).then((i=>(function(a,c,u){const h=new Js(a);return new cP(c,h,u)})(n,t,i)))}class u6{constructor(e){this.kind="memory",this._onlineComponentProvider=Us.provider,this._offlineComponentProvider=e?.garbageCollector?e.garbageCollector._offlineComponentProvider:{build:()=>new Gg(void 0)}}toJSON(){return{kind:this.kind}}}class h6{constructor(e){let n;this.kind="persistent",e?.tabManager?(e.tabManager._initialize(e),n=e.tabManager):(n=mP(void 0),n._initialize(e)),this._onlineComponentProvider=n._onlineComponentProvider,this._offlineComponentProvider=n._offlineComponentProvider}toJSON(){return{kind:this.kind}}}class d6{constructor(){this.kind="memoryEager",this._offlineComponentProvider=fa.provider}toJSON(){return{kind:this.kind}}}class f6{constructor(e){this.kind="memoryLru",this._offlineComponentProvider={build:()=>new Gg(e)}}toJSON(){return{kind:this.kind}}}function p6(){return new d6}function m6(t){return new f6(t?.cacheSizeBytes)}function g6(t){return new u6(t)}function _6(t){return new h6(t)}class y6{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Us.provider,this._offlineComponentProvider={build:n=>new Kg(n,e?.cacheSizeBytes,this.forceOwnership)}}}class I6{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Us.provider,this._offlineComponentProvider={build:n=>new jS(n,e?.cacheSizeBytes)}}}function mP(t){return new y6(t?.forceOwnership)}function E6(){return new I6}const gP="NOT SUPPORTED";class Cr{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class hn extends dl{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new jc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Br("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new q(M.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=hn._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}function T6(t,e,n){if(zi(e,hn._jsonSchema)){if(e.bundle===gP)throw new q(M.INVALID_ARGUMENT,"The provided JSON object was created in a client environment, which is not supported.");const r=Qi(t._databaseId),s=WS(e.bundle,r),i=s.t(),o=new Ug(s.getMetadata(),r);for(const h of i)o.o(h);const a=o.documents;if(a.length!==1)throw new q(M.INVALID_ARGUMENT,`Expected bundle data to contain 1 document, but it contains ${a.length} documents.`);const c=md(r,a[0].document),u=new X(be.fromString(e.bundleName));return new hn(t,new o_(t),u,c,new Cr(!1,!1),n||null)}}hn._jsonSchemaVersion="firestore/documentSnapshot/1.0",hn._jsonSchema={type:Et("string",hn._jsonSchemaVersion),bundleSource:Et("string","DocumentSnapshot"),bundleName:Et("string"),bundle:Et("string")};class jc extends hn{data(e={}){return super.data(e)}}class dn{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Cr(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new jc(this._firestore,this._userDataWriter,r.key,r,new Cr(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new q(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map((a=>{const c=new jc(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Cr(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}}))}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((a=>i||a.type!==3)).map((a=>{const c=new jc(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Cr(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,h=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:v6(a.type),doc:c,oldIndex:u,newIndex:h}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new q(M.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=dn._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=sd.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach((i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function w6(t,e,n){if(zi(e,dn._jsonSchema)){if(e.bundle===gP)throw new q(M.INVALID_ARGUMENT,"The provided JSON object was created in a client environment, which is not supported.");const r=Qi(t._databaseId),s=WS(e.bundle,r),i=s.t(),o=new Ug(s.getMetadata(),r);for(const f of i)o.o(f);if(o.queries.length!==1)throw new q(M.INVALID_ARGUMENT,`Snapshot data expected 1 query but found ${o.queries.length} queries.`);const a=_d(o.queries[0].bundledQuery),c=o.documents;let u=new Pi;c.map((f=>{const m=md(r,f.document);u=u.add(m)}));const h=Hi.fromInitialDocuments(a,u,Te(),!1,!1),d=new St(t,n||null,a);return new dn(t,new o_(t),d,h)}}function v6(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return re(61501,{type:t})}}function A6(t,e){return t instanceof hn&&e instanceof hn?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof dn&&e instanceof dn&&t._firestore===e._firestore&&Qg(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}dn._jsonSchemaVersion="firestore/querySnapshot/1.0",dn._jsonSchema={type:Et("string",dn._jsonSchemaVersion),bundleSource:Et("string","QuerySnapshot"),bundleName:Et("string"),bundle:Et("string")};const b6={maxAttempts:5};class _P{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Yi(e)}set(e,n,r){this._verifyNotCommitted();const s=ys(e,this._firestore),i=Pd(s.converter,n,r),o=Rd(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,r);return this._mutations.push(o.toMutation(s._key,st.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const i=ys(e,this._firestore);let o;return o=typeof(n=ue(n))=="string"||n instanceof Ji?t_(this._dataReader,"WriteBatch.update",i._key,n,r,s):e_(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(o.toMutation(i._key,st.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=ys(e,this._firestore);return this._mutations=this._mutations.concat(new Pa(n._key,st.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new q(M.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function ys(t,e){if((t=ue(t)).firestore!==e)throw new q(M.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}class R6{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=Yi(e)}get(e){const n=ys(e,this._firestore),r=new o_(this._firestore);return this._transaction.lookup([n._key]).then((s=>{if(!s||s.length!==1)return re(24041);const i=s[0];if(i.isFoundDocument())return new dl(this._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new dl(this._firestore,r,n._key,null,n.converter);throw re(18433,{doc:i})}))}set(e,n,r){const s=ys(e,this._firestore),i=Pd(s.converter,n,r),o=Rd(this._dataReader,"Transaction.set",s._key,i,s.converter!==null,r);return this._transaction.set(s._key,o),this}update(e,n,r,...s){const i=ys(e,this._firestore);let o;return o=typeof(n=ue(n))=="string"||n instanceof Ji?t_(this._dataReader,"Transaction.update",i._key,n,r,s):e_(this._dataReader,"Transaction.update",i._key,n),this._transaction.update(i._key,o),this}delete(e){const n=ys(e,this._firestore);return this._transaction.delete(n._key),this}}class yP extends R6{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=ys(e,this._firestore),r=new Js(this._firestore);return super.get(e).then((s=>new hn(this._firestore,r,n._key,s._document,new Cr(!1,!1),n.converter)))}}function S6(t,e,n){t=Re(t,He);const r={...b6,...n};(function(o){if(o.maxAttempts<1)throw new q(M.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r);const s=ot(t);return f4(s,(i=>e(new yP(t,i))),r)}function Yp(t){t=Re(t,Be);const e=Re(t.firestore,He),n=ot(e);return GS(n,t._key).then((r=>a_(e,t,r)))}function P6(t){t=Re(t,Be);const e=Re(t.firestore,He),n=ot(e),r=new Js(e);return c4(n,t._key).then((s=>new hn(e,r,t._key,s,new Cr(s!==null&&s.hasLocalMutations,!0),t.converter)))}function C6(t){t=Re(t,Be);const e=Re(t.firestore,He),n=ot(e);return GS(n,t._key,{source:"server"}).then((r=>a_(e,t,r)))}function k6(t){t=Re(t,St);const e=Re(t.firestore,He),n=ot(e),r=new Js(e);return lP(t._query),KS(n,t._query).then((s=>new dn(e,r,t,s)))}function N6(t){t=Re(t,St);const e=Re(t.firestore,He),n=ot(e),r=new Js(e);return l4(n,t._query).then((s=>new dn(e,r,t,s)))}function D6(t){t=Re(t,St);const e=Re(t.firestore,He),n=ot(e),r=new Js(e);return KS(n,t._query,{source:"server"}).then((s=>new dn(e,r,t,s)))}function IP(t,e,n){t=Re(t,Be);const r=Re(t.firestore,He),s=Pd(t.converter,e,n),i=Yi(r);return La(r,[Rd(i,"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,st.none())])}function V6(t,e,n,...r){t=Re(t,Be);const s=Re(t.firestore,He),i=Yi(s);let o;return o=typeof(e=ue(e))=="string"||e instanceof Ji?t_(i,"updateDoc",t._key,e,n,r):e_(i,"updateDoc",t._key,e),La(s,[o.toMutation(t._key,st.exists(!0))])}function x6(t){return La(Re(t.firestore,He),[new Pa(t._key,st.none())])}function O6(t,e){const n=Re(t.firestore,He),r=Bc(t),s=Pd(t.converter,e),i=Yi(t.firestore);return La(n,[Rd(i,"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,st.exists(!1))]).then((()=>r))}function Xp(t,...e){t=ue(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||Oo(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(Oo(e[r])){const u=e[r];e[r]=u.next?.bind(u),e[r+1]=u.error?.bind(u),e[r+2]=u.complete?.bind(u)}let i,o,a;if(t instanceof Be)o=Re(t.firestore,He),a=Ra(t._key.path),i={next:u=>{e[r]&&e[r](a_(o,t,u))},error:e[r+1],complete:e[r+2]};else{const u=Re(t,St);o=Re(u.firestore,He),a=u._query;const h=new Js(o);i={next:d=>{e[r]&&e[r](new dn(o,h,u,d))},error:e[r+1],complete:e[r+2]},lP(t._query)}const c=ot(o);return a4(c,a,s,i)}function L6(t,e,...n){const r=ue(t),s=(function(c){const u={bundle:"",bundleName:"",bundleSource:""},h=["bundle","bundleName","bundleSource"];for(const d of h){if(!(d in c)){u.error=`snapshotJson missing required field: ${d}`;break}const f=c[d];if(typeof f!="string"){u.error=`snapshotJson field '${d}' must be a string.`;break}if(f.length===0){u.error=`snapshotJson field '${d}' cannot be an empty string.`;break}d==="bundle"?u.bundle=f:d==="bundleName"?u.bundleName=f:d==="bundleSource"&&(u.bundleSource=f)}return u})(e);if(s.error)throw new q(M.INVALID_ARGUMENT,s.error);let i,o=0;if(typeof n[o]!="object"||Oo(n[o])||(i=n[o++]),s.bundleSource==="QuerySnapshot"){let a=null;if(typeof n[o]=="object"&&Oo(n[o])){const c=n[o++];a={next:c.next,error:c.error,complete:c.complete}}else a={next:n[o++],error:n[o++],complete:n[o++]};return(function(u,h,d,f,m){let I,T=!1;return Jp(u,h.bundle).then((()=>eP(u,h.bundleName))).then((V=>{V&&!T&&(m&&V.withConverter(m),I=Xp(V,d||{},f))})).catch((V=>(f.error&&f.error(V),()=>{}))),()=>{T||(T=!0,I&&I())}})(r,s,i,a,n[o])}if(s.bundleSource==="DocumentSnapshot"){let a=null;if(typeof n[o]=="object"&&Oo(n[o])){const c=n[o++];a={next:c.next,error:c.error,complete:c.complete}}else a={next:n[o++],error:n[o++],complete:n[o++]};return(function(u,h,d,f,m){let I,T=!1;return Jp(u,h.bundle).then((()=>{if(!T){const V=new Be(u,m||null,X.fromPath(h.bundleName));I=Xp(V,d||{},f)}})).catch((V=>(f.error&&f.error(V),()=>{}))),()=>{T||(T=!0,I&&I())}})(r,s,i,a,n[o])}throw new q(M.INVALID_ARGUMENT,`unsupported bundle source: ${s.bundleSource}`)}function M6(t,e){t=Re(t,He);const n=ot(t),r=Oo(e)?e:{next:e};return d4(n,r)}function La(t,e){const n=ot(t);return h4(n,e)}function a_(t,e,n){const r=n.docs.get(e._key),s=new Js(t);return new hn(t,s,e._key,r,new Cr(n.hasPendingWrites,n.fromCache),e.converter)}function F6(t){return t=Re(t,He),ot(t),new _P(t,(e=>La(t,e)))}function U6(t,e){t=Re(t,He);const n=ot(t);if(!n._uninitializedComponentsProvider||n._uninitializedComponentsProvider._offline.kind==="memory")return bn("Cannot enable indexes when persistence is disabled"),Promise.resolve();const r=(function(i){const o=typeof i=="string"?(function(u){try{return JSON.parse(u)}catch(h){throw new q(M.INVALID_ARGUMENT,"Failed to parse JSON: "+h?.message)}})(i):i,a=[];if(Array.isArray(o.indexes))for(const c of o.indexes){const u=bT(c,"collectionGroup"),h=[];if(Array.isArray(c.fields))for(const d of c.fields){const f=bT(d,"fieldPath"),m=r_("setIndexConfiguration",f);d.arrayConfig==="CONTAINS"?h.push(new Ri(m,2)):d.order==="ASCENDING"?h.push(new Ri(m,0)):d.order==="DESCENDING"&&h.push(new Ri(m,1))}a.push(new Yo(Yo.UNKNOWN_ID,u,h,Xo.empty()))}return a})(e);return g4(n,r)}function bT(t,e){if(typeof t[e]!="string")throw new q(M.INVALID_ARGUMENT,"Missing string value for: "+e);return t[e]}class EP{constructor(e){this._firestore=e,this.type="PersistentCacheIndexManager"}}function B6(t){t=Re(t,He);const e=RT.get(t);if(e)return e;if(ot(t)._uninitializedComponentsProvider?._offline.kind!=="persistent")return null;const r=new EP(t);return RT.set(t,r),r}function j6(t){TP(t,!0)}function q6(t){TP(t,!1)}function H6(t){const e=ot(t._firestore);y4(e).then((n=>G("deleting all persistent cache indexes succeeded"))).catch((n=>bn("deleting all persistent cache indexes failed",n)))}function TP(t,e){const n=ot(t._firestore);_4(n,e).then((r=>G(`setting persistent cache index auto creation isEnabled=${e} succeeded`))).catch((r=>bn(`setting persistent cache index auto creation isEnabled=${e} failed`,r)))}const RT=new WeakMap;class $6{constructor(){throw new Error("instances of this class should not be created")}static onExistenceFilterMismatch(e){return c_.instance.onExistenceFilterMismatch(e)}}class c_{constructor(){this.i=new Map}static get instance(){return yu||(yu=new c_,l2(yu)),yu}u(e){this.i.forEach((n=>n(e)))}onExistenceFilterMismatch(e){const n=Symbol(),r=this.i;return r.set(n,e),()=>r.delete(n)}}let yu=null;(function(e,n=!0){qF(Ea),Wo(new Vi("firestore",((r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new He(new KF(r.getProvider("auth-internal")),new QF(o,r.getProvider("app-check-internal")),LU(o,s),o);return i={useFetchStreams:n,...i},a._setSettings(i),a}),"PUBLIC").setMultipleInstances(!0)),bs(TT,wT,e),bs(TT,wT,"esm2020")})();const G6=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:s_,AggregateField:ma,AggregateQuerySnapshot:cP,Bytes:on,CACHE_SIZE_UNLIMITED:A4,CollectionReference:jn,DocumentReference:Be,DocumentSnapshot:hn,FieldPath:Ji,FieldValue:Qs,Firestore:He,FirestoreError:q,GeoPoint:qn,LoadBundleTask:YS,PersistentCacheIndexManager:EP,Query:St,QueryCompositeFilterConstraint:Zi,QueryConstraint:xa,QueryDocumentSnapshot:jc,QueryEndAtConstraint:Ml,QueryFieldFilterConstraint:Oa,QueryLimitConstraint:Ol,QueryOrderByConstraint:Sd,QuerySnapshot:dn,QueryStartAtConstraint:Ll,SnapshotMetadata:Cr,Timestamp:Fe,Transaction:yP,VectorValue:vn,WriteBatch:_P,_AutoId:sd,_ByteString:ct,_DatabaseId:xs,_DocumentKey:X,_EmptyAppCheckTokenProvider:JF,_EmptyAuthCredentialsProvider:Db,_FieldPath:Xe,_TestingHooks:$6,_cast:Re,_debugAssert:$F,_internalAggregationQueryToProtoRunAggregationQueryRequest:K4,_internalQueryToProtoQueryTarget:G4,_isBase64Available:VU,_logWarn:bn,_validateIsNotUsedTogether:xb,addDoc:O6,aggregateFieldEqual:a6,aggregateQuerySnapshotEqual:c6,and:Y4,arrayRemove:q4,arrayUnion:j4,average:o6,clearIndexedDbPersistence:C4,collection:T4,collectionGroup:w4,connectFirestoreEmulator:JS,count:fP,deleteAllPersistentCacheIndexes:H6,deleteDoc:x6,deleteField:U4,disableNetwork:D4,disablePersistentCacheIndexAutoCreation:q6,doc:Bc,documentId:x4,documentSnapshotFromJSON:T6,enableIndexedDbPersistence:S4,enableMultiTabIndexedDbPersistence:P4,enableNetwork:N4,enablePersistentCacheIndexAutoCreation:j6,endAt:s6,endBefore:r6,ensureFirestoreConfigured:ot,executeWrite:La,getAggregateFromServer:pP,getCountFromServer:l6,getDoc:Yp,getDocFromCache:P6,getDocFromServer:C6,getDocs:k6,getDocsFromCache:N6,getDocsFromServer:D6,getFirestore:R4,getPersistentCacheIndexManager:B6,increment:H4,initializeFirestore:b4,limit:Z4,limitToLast:e6,loadBundle:Jp,memoryEagerGarbageCollector:p6,memoryLocalCache:g6,memoryLruGarbageCollector:m6,namedQuery:eP,onSnapshot:Xp,onSnapshotResume:L6,onSnapshotsInSync:M6,or:J4,orderBy:X4,persistentLocalCache:_6,persistentMultipleTabManager:E6,persistentSingleTabManager:mP,query:z4,queryEqual:Qg,querySnapshotFromJSON:w6,refEqual:v4,runTransaction:S6,serverTimestamp:B4,setDoc:IP,setIndexConfiguration:U6,setLogLevel:HF,snapshotEqual:A6,startAfter:n6,startAt:t6,sum:i6,terminate:V4,updateDoc:V6,vector:$4,waitForPendingWrites:k4,where:Q4,writeBatch:F6},Symbol.toStringTag,{value:"Module"})),Fl=aD("tarot",{state:()=>({ipt_birth8:"",ipt_birth4:"",ipt_year:"",result:null,calc:["","",""],y_calc:["","",""],picked:"r1",isReading:!1,radio:[{text:"",id:"r1"},{text:"",id:"r2"}],user:null,userGrade:null,isLoggedIn:!1,token:null,authLoading:!1,authChecked:!1,pendingVerificationEmail:null,alertData:{isVisible:!1,title:"",message:"",icon:"",confirmText:""},confirmData:{isVisible:!1,title:"",message:"",icon:"",confirmText:"",cancelText:"",onConfirm:null,onCancel:null},loader:{isAppLoading:!0,isPdfLoading:!1}}),actions:{setReading(t){this.isReading=t},fnGo(t){t=="result"?this.setReading(!1):this.setReading(!0)},fnBirthCalc(){if(this.calc=["","",""],/[^0-9]/.test(this.ipt_birth8)){this.showAlert({message:" !",icon:""}),this.ipt_birth8="";return}if(this.ipt_birth8.length!==8){this.showAlert({message:" 8   (: 19900219)",icon:""});return}const t=this.ipt_birth8.split("");let e=t.reduce((n,r)=>n+Number(r),0);if(this.calc[0]=t.join(" + "),e>21){this.calc[1]=e;const n=e.toString().split("");e=n.reduce((r,s)=>r+Number(s),0),this.calc[2]=n.join(" + ")}this.result=e},fnComingSoon(){this.showAlert({message:"   .",icon:""})},fnYearCalc(){if(this.calc=["","",""],/[^0-9]/.test(this.ipt_year)||/[^0-9]/.test(this.ipt_birth4)){this.showAlert({message:" !",icon:""}),/[^0-9]/.test(this.ipt_year)&&(this.ipt_year=""),/[^0-9]/.test(this.ipt_birth4)&&(this.ipt_birth4="");return}if(this.ipt_year.length!==4){this.showAlert({message:" 4   (: 1999)",icon:""}),this.ipt_year="";return}if(this.ipt_birth4.length!==4){this.showAlert({message:" 4   (: 0130)",icon:""}),this.ipt_birth4="";return}const t=Number(this.ipt_year),e=Number(this.ipt_birth4.substring(0,2)),n=Number(this.ipt_birth4.substring(2,4)),r=t+e+n;this.y_calc[0]=`${t} + ${e} + ${n} = ${r}`;const s=r.toString().split("");let i=s.reduce((o,a)=>o+Number(a),0);if(this.y_calc[1]=s.join(" + "),i>21){this.y_calc[1]=i;const o=i.toString().split("");i=o.reduce((a,c)=>a+Number(c),0),this.y_calc[2]=o.join(" + "),i==22&&(i=0)}this.result=i},fnReset(){this.ipt_birth8="",this.ipt_birth4="",this.ipt_year="",this.result=null,this.calc=["","",""],this.y_calc=["","",""]},fnClose(){this.fnReset()},async fnSignUp(t,e,n,r){const{$auth:s,$db:i}=ze();this.authLoading=!0,this.pendingVerificationEmail=t;try{const a=(await XA(s,t,e)).user;return await Ep(a),await IP(Bc(i,"users",a.uid),{email:t,name:n,phone:r,isApproved:!1,grade:"",createdAt:new Date}),await hi(s),{success:!0}}catch(o){return this.pendingVerificationEmail=null,{success:!1,error:this.getFirebaseErrorMessage(o.code)}}finally{this.authLoading=!1}},clearPendingVerification(){this.pendingVerificationEmail=null},async fnResendVerification(){const{$auth:t}=ze(),e=t.currentUser;if(e&&!e.emailVerified)try{return await Ep(e),{success:!0}}catch(n){return{success:!1,error:this.getFirebaseErrorMessage(n.code)}}return{success:!1,error:"  ."}},async fnResetPassword(t){const{$auth:e}=ze();this.authLoading=!0;try{return await JA(e,t),this.authLoading=!1,{success:!0}}catch(n){return this.authLoading=!1,{success:!1,error:this.getFirebaseErrorMessage(n.code)}}},async fnLogin(t,e){const{$auth:n,$db:r}=ze();this.authLoading=!0;try{const i=(await ZA(n,t,e)).user;if(!i.emailVerified)return await hi(n),this.authLoading=!1,{success:!1,needVerification:!0,error:"  .  ."};const o=await Yp(Bc(r,"users",i.uid));if(!o.exists())return await hi(n),this.authLoading=!1,{success:!1,error:"    ."};const a=o.data();return a.isApproved?(this.user={uid:i.uid,email:i.email,name:a.name||"",emailVerified:i.emailVerified,loginAt:new Date().toLocaleString()},this.userGrade=a.grade||"",this.token=await i.getIdToken(),this.isLoggedIn=!0,Yt.set("user_token",this.token,{expires:1}),Yt.set("user_info",JSON.stringify(this.user),{expires:1}),Yt.set("user_grade",this.userGrade,{expires:1}),this.setAppLoading(!0),setTimeout(()=>{this.setAppLoading(!1)},600),this.authLoading=!1,{success:!0}):(await hi(n),this.authLoading=!1,{success:!1,needApproval:!0,error:"   .    ."})}catch(s){return this.authLoading=!1,{success:!1,error:this.getFirebaseErrorMessage(s.code)}}},async fnLogout(){const{$auth:t}=ze();try{await hi(t)}catch{}this.user=null,this.userGrade=null,this.token=null,this.isLoggedIn=!1,Yt.remove("user_token"),Yt.remove("user_info"),Yt.remove("user_grade")},checkAuth(){const{$auth:t,$db:e}=ze(),n=Yt.get("user_token"),r=Yt.get("user_info"),s=Yt.get("user_grade"),i=o=>o&&o!=="undefined"&&o!=="false"&&o!=="null";if(i(n)||i(r))try{i(r)&&(this.user=JSON.parse(r)),this.userGrade=i(s)?s:"",this.token=n,this.isLoggedIn=!0,this.authChecked=!0}catch{}sb(t,async o=>{if(!this.pendingVerificationEmail){if(o){if(!o.emailVerified){this.resetAndClear();return}try{const a=await Yp(Bc(e,"users",o.uid));if(a.exists()){const c=a.data();if(!c.isApproved){await hi(t),this.resetAndClear();return}this.user={uid:o.uid,email:o.email,name:c.name||"",emailVerified:o.emailVerified,loginAt:new Date().toLocaleString()},this.userGrade=c.grade||"",this.token=await o.getIdToken(),this.isLoggedIn=!0;const u={expires:1,path:"/"};Yt.set("user_token",this.token,u),Yt.set("user_info",JSON.stringify(this.user),u),Yt.set("user_grade",this.userGrade,u)}}catch{}}else this.isLoggedIn||this.resetAndClear();this.authChecked=!0}})},getFirebaseErrorMessage(t){return{"auth/email-already-in-use":"   .","auth/invalid-email":"   .","auth/operation-not-allowed":"/   .","auth/weak-password":" 6  .","auth/user-disabled":" .","auth/user-not-found":"  .","auth/wrong-password":"  .","auth/invalid-credential":"    .","auth/too-many-requests":"   .    ."}[t]||"  ."},showAlert(t={}){this.alertData={isVisible:!0,title:t.title||"",message:t.message||"",icon:t.icon||"",confirmText:t.confirmText||""}},closeAlert(){this.alertData.isVisible=!1},showConfirm(t={}){this.confirmData={isVisible:!0,title:t.title||"",message:t.message||"",icon:t.icon||"",confirmText:t.confirmText||"",cancelText:t.cancelText||"",onConfirm:t.onConfirm||null,onCancel:t.onCancel||null}},handleConfirm(){this.confirmData.onConfirm&&this.confirmData.onConfirm(),this.closeConfirm()},handleCancel(){this.confirmData.onCancel&&this.confirmData.onCancel(),this.closeConfirm()},closeConfirm(){this.confirmData.isVisible=!1},resetAndClear(){this.user=null,this.userGrade=null,this.token=null,this.isLoggedIn=!1,Yt.remove("user_token"),Yt.remove("user_info"),Yt.remove("user_grade")},setAppLoading(t){this.loader.isAppLoading=t},setPdfLoading(t){this.loader.isPdfLoading=t},async downloadPDF(t){const{pdfContent:e,html2canvas:n,jsPDF:r,filename:s}=t;if(e)try{this.setPdfLoading(!0);const i=e;i.classList.add("pdf_print");const o=new r("p","mm","a4"),a=210,c=[".pdf_section1",".pdf_section2",".pdf_section3",".pdf_section4",".pdf_section5"],u=async f=>{const m=await n(f,{scale:3,useCORS:!0,backgroundColor:"#ffffff",logging:!1});return{data:m.toDataURL("image/jpeg",1),height:m.height*a/m.width}},h=i.querySelector(".pdf_only_header");h.style.display="block";const d=await u(h);h.style.display="none";for(let f=0;f<c.length;f++){const m=i.querySelector(c[f]);if(!m)continue;const I=m.style.display;m.style.display="block";const T=await u(m);m.style.display=I,f>0&&o.addPage();const k=20,V=a-k*2,N=T.height*V/a;let _=0;f===0?(o.addImage(d.data,"JPEG",0,0,a,d.height),_=d.height+5):_=15,o.addImage(T.data,"JPEG",k,_,V,N),o.setFontSize(10),o.setTextColor(150),o.text("- "+String(f+1)+" -",105,287,{align:"center"})}o.save(s),i.classList.remove("pdf_print"),this.setPdfLoading(!1)}catch{element.classList.remove("pdf_print"),this.setPdfLoading(!1),alert("PDF    .")}},goToWiki(t=null,e="majors"){const n=t??this.result;if(n==null)return;const r=`/wiki/${e}/${n}`;window.open(r,"_blank")},goToWikiMain(){window.open("/wiki","_blank")}}}),wP=(t,e)=>{const n=t.__vccOpts||t;for(const[r,s]of e)n[r]=s;return n},K6={class:"loader-content"},W6={class:"mystic-icon"},z6={class:"title"},Q6={class:"subtitle"},J6={__name:"GlobalLoader",setup(t){const e=Fl(),n=Kt(()=>e.loader.isPdfLoading?{icon:"",title:"   ",subtitle:"  ..."}:{icon:"",title:"   ",subtitle:"  ..."});return(r,s)=>(De(),In(qo,{name:"ifade"},{default:Ns(()=>[me(e).loader.isAppLoading||me(e).loader.isPdfLoading?(De(),yt("div",{key:0,class:Ci(["global-loader",{"pdf-mode":me(e).loader.isPdfLoading}])},[_e("div",K6,[_e("div",W6,Mn(n.value.icon),1),_e("h1",z6,Mn(n.value.title),1),s[0]||(s[0]=_e("div",{class:"progress-bar"},[_e("div",{class:"progress-inner"})],-1)),_e("p",Q6,Mn(n.value.subtitle),1)])],2)):Fn("",!0)]),_:1}))}},Y6=wP(J6,[["__scopeId","data-v-03bbbc9a"]]),vP=(t="RouteProvider")=>qs({name:t,props:{route:{type:Object,required:!0},vnode:Object,vnodeRef:Object,renderKey:String,trackRootNodes:Boolean},setup(e){const n=e.renderKey,r=e.route,s={};for(const i in e.route)Object.defineProperty(s,i,{get:()=>n===e.renderKey?e.route[i]:r[i],enumerable:!0});return Es(Di,er(s)),()=>e.vnode?Wt(e.vnode,{ref:e.vnodeRef}):e.vnode}}),X6=vP(),ST=new WeakMap,Z6=qs({name:"NuxtPage",inheritAttrs:!1,props:{name:{type:String},transition:{type:[Boolean,Object],default:void 0},keepalive:{type:[Boolean,Object],default:void 0},route:{type:Object},pageKey:{type:[Function,String],default:null}},setup(t,{attrs:e,slots:n,expose:r}){const s=ze(),i=ft(),o=Vt(Di,null);let a;r({pageRef:i});const c=Vt(Iv,null);let u;const h=s.deferHydration();if(s.isHydrating){const f=s.hooks.hookOnce("app:error",h);An().beforeEach(f)}t.pageKey&&kr(()=>t.pageKey,(f,m)=>{f!==m&&s.callHook("page:loading:start")});let d=!1;{const f=An().beforeResolve(()=>{d=!1});gl(()=>{f()})}return()=>Wt(Gv,{name:t.name,route:t.route,...e},{default:f=>{const m=tj(o,f.route,f.Component),I=o&&o.matched.length===f.route.matched.length;if(!f.Component){if(u&&!I)return u;h();return}if(u&&c&&!c.isCurrent(f.route))return u;if(m&&o&&(!c||c?.isCurrent(o)))return I?u:null;const T=dp(f,t.pageKey),k=nj(o,f.route,f.Component);!s.isHydrating&&a===T&&!k&&ks(()=>{d=!0,s.callHook("page:loading:end")}),a=T;const V=!!(t.transition??f.route.meta.pageTransition??$y),N=V&&ej([t.transition,f.route.meta.pageTransition,$y,{onAfterLeave(){delete s._runningTransition,s.callHook("page:transition:finish",f.Component)}}]),_=t.keepalive??f.route.meta.keepalive??ON;return u=Wv(V&&N,ox(_,Wt(Im,{suspensible:!0,onPending:()=>{V&&(s._runningTransition=!0),s.callHook("page:start",f.Component)},onResolve:async()=>{await ks();try{s._route.sync?.(),await s.callHook("page:finish",f.Component),delete s._runningTransition,!d&&!k&&(d=!0,await s.callHook("page:loading:end"))}finally{h()}}},{default:()=>{const C={key:T||void 0,vnode:n.default?rj(n.default,f):f.Component,route:f.route,renderKey:T||void 0,trackRootNodes:V,vnodeRef:i};if(!_)return Wt(X6,C);const x=f.Component.type,U=x;let v=ST.get(U);return v||(v=vP(x.name||x.__name),ST.set(U,v)),Wt(v,C)}}))).default(),u}})}});function ej(t){const e=[];for(const n of t)n&&e.push({...n,onAfterLeave:n.onAfterLeave?Cm(n.onAfterLeave):void 0});return _v(...e)}function tj(t,e,n){if(!t)return!1;const r=e.matched.findIndex(s=>s.components?.default===n?.type);return!r||r===-1?!1:e.matched.slice(0,r).some((s,i)=>s.components?.default!==t.matched[i]?.components?.default)||n&&dp({route:e,Component:n})!==dp({route:t,Component:n})}function nj(t,e,n){return t?e.matched.findIndex(s=>s.components?.default===n?.type)<e.matched.length-1:!1}function rj(t,e){const n=t(e);return n.length===1?Wt(n[0]):Wt(sn,void 0,n)}const sj=qs({name:"LayoutLoader",inheritAttrs:!1,props:{name:String,layoutProps:Object},setup(t,e){return()=>Wt(gs[t.name],t.layoutProps,e.slots)}}),ij={name:{type:[String,Boolean,Object],default:null},fallback:{type:[String,Object],default:null}},oj=qs({name:"NuxtLayout",inheritAttrs:!1,props:ij,setup(t,e){const n=ze(),r=Vt(Di),i=!r||r===qh()?Kv():r,o=Kt(()=>{let h=me(t.name)??i?.meta.layout??"default";return h&&!(h in gs)&&t.fallback&&(h=me(t.fallback)),h}),a=Mo();e.expose({layoutRef:a});const c=n.deferHydration();if(n.isHydrating){const h=n.hooks.hookOnce("app:error",c);An().beforeEach(h)}let u;return()=>{const h=o.value&&o.value in gs,d=i?.meta.layoutTransition??xN,f=u;return u=o.value,Wv(h&&d,{default:()=>Wt(Im,{suspensible:!0,onResolve:()=>{ks(c)}},{default:()=>Wt(aj,{layoutProps:Kw(e.attrs,{ref:a}),key:o.value||void 0,name:o.value,shouldProvide:!t.name,isRenderingNewLayout:m=>m!==f&&m===o.value,hasTransition:!!d},e.slots)})}).default()}}}),aj=qs({name:"NuxtLayoutProvider",inheritAttrs:!1,props:{name:{type:[String,Boolean]},layoutProps:{type:Object},hasTransition:{type:Boolean},shouldProvide:{type:Boolean},isRenderingNewLayout:{type:Function,required:!0}},setup(t,e){const n=t.name;t.shouldProvide&&Es(Iv,{isCurrent:i=>n===(i.meta.layout??"default")});const r=Vt(Di);if(r&&r===qh()){const i=Kv(),o={};for(const a in i){const c=a;Object.defineProperty(o,c,{enumerable:!0,get:()=>t.isRenderingNewLayout(t.name)?i[c]:r[c]})}Es(Di,er(o))}return()=>!n||typeof n=="string"&&!(n in gs)?e.slots.default?.():Wt(sj,{key:n,layoutProps:t.layoutProps,name:n},e.slots)}}),cj={class:"login"},lj={class:"l_wrap"},uj={class:"verification_notice",key:"verification"},hj={class:"txt_notice"},dj={key:"forgot"},fj={class:"l_form"},pj=["disabled"],mj={class:"l_form"},gj={class:"ipt_pw_wrap"},_j=["type"],yj={key:0,class:"ipt_pw_wrap"},Ij=["type"],Ej=["disabled"],Tj={key:0,class:"bx_member"},wj={key:1,class:"bx_member"},vj={__name:"Login",setup(t){const e=Fl(),n=ft(""),r=ft(""),s=ft(""),i=ft(""),o=ft(""),a=ft(!1),c=ft(!1),u=ft(!1),h=ft(!1),d=Kt(()=>c.value?"forgot":a.value?"signup":"login"),f=Kt(()=>c.value?"Reset Password":a.value?"Join":"Login"),m=()=>{a.value=!a.value,r.value="",s.value="",i.value="",o.value="",u.value=!1,h.value=!1},I=()=>{e.clearPendingVerification(),a.value=!1,c.value=!1,r.value="",s.value="",i.value="",o.value="",u.value=!1,h.value=!1},T=()=>{c.value=!0,r.value="",s.value=""},k=async()=>{if(!n.value){e.showAlert({title:"",message:" .",icon:""});return}const N=await e.fnResetPassword(n.value);N.success?(e.showAlert({title:"  ",message:"    .",icon:""}),I()):e.showAlert({title:" ",message:N.error,icon:""})},V=async()=>{if(!n.value||!r.value){e.showAlert({title:"",message:"  .",icon:""});return}if(a.value){if(!i.value||!o.value){e.showAlert({title:"",message:"  .",icon:""});return}if(!/^01[0-9]-[0-9]{4}-[0-9]{4}$/.test(o.value)){e.showAlert({title:"",message:"  . (010-0000-0000)",icon:""});return}if(r.value!==s.value){e.showAlert({title:"",message:"  .",icon:""});return}const _=await e.fnSignUp(n.value,r.value,i.value,o.value);_.success||e.showAlert({title:" ",message:_.error,icon:""})}else{const N=await e.fnLogin(n.value,r.value);if(!N.success){let _=" ",C="";N.needVerification?(_="  ",C=""):N.needApproval&&(_=" ",C=""),e.showAlert({title:_,message:N.error,icon:C}),r.value=""}}};return(N,_)=>(De(),yt("div",cj,[_e("div",lj,[_[16]||(_[16]=_e("div",{class:"icon"},"",-1)),_[17]||(_[17]=_e("p",{class:"l_logo"},"numerologyTarot",-1)),Ze(qo,{name:"l_fade",mode:"out-in"},{default:Ns(()=>[(De(),yt("h2",{class:"tit",key:d.value},Mn(f.value),1))]),_:1}),Ze(qo,{name:"l_fade",mode:"out-in"},{default:Ns(()=>[me(e).pendingVerificationEmail?(De(),yt("div",uj,[_[8]||(_[8]=_e("p",{class:"notice_icon"},"",-1)),_[9]||(_[9]=_e("p",{class:"notice_tit"},"  ",-1)),_e("p",hj,Mn(me(e).pendingVerificationEmail)+"    .",1),_[10]||(_[10]=_e("p",{class:"txt_alert"},"    .",-1)),_e("button",{class:"btn",onClick:I}," ")])):c.value?(De(),yt("div",dj,[_e("div",fj,[ci(_e("input",{class:"ipt","onUpdate:modelValue":_[0]||(_[0]=C=>n.value=C),type:"email",placeholder:"",onKeyup:oo(k,["enter"])},null,544),[[wo,n.value]]),_e("button",{class:"btn",onClick:k,disabled:me(e).authLoading},Mn(me(e).authLoading?" ...":"   "),9,pj)]),_e("div",{class:"bx_member"},[_e("button",{class:"link_member",onClick:I}," ")])])):(De(),yt("div",{key:a.value?"signup":"login"},[_e("div",mj,[ci(_e("input",{class:"ipt","onUpdate:modelValue":_[1]||(_[1]=C=>n.value=C),type:"email",placeholder:"",onKeyup:oo(V,["enter"])},null,544),[[wo,n.value]]),_e("div",gj,[ci(_e("input",{class:"ipt","onUpdate:modelValue":_[2]||(_[2]=C=>r.value=C),type:u.value?"text":"password",placeholder:"",onKeyup:oo(V,["enter"])},null,40,_j),[[My,r.value]]),_e("button",{type:"button",class:Ci(["btn_eye",{on:u.value}]),onClick:_[3]||(_[3]=C=>u.value=!u.value),tabindex:"-1"},null,2)]),a.value?(De(),yt("div",yj,[ci(_e("input",{class:"ipt","onUpdate:modelValue":_[4]||(_[4]=C=>s.value=C),type:h.value?"text":"password",placeholder:" ",onKeyup:oo(V,["enter"])},null,40,Ij),[[My,s.value]]),_e("button",{type:"button",class:Ci(["btn_eye",{on:h.value}]),onClick:_[5]||(_[5]=C=>h.value=!h.value),tabindex:"-1"},null,2)])):Fn("",!0),a.value?ci((De(),yt("input",{key:1,class:"ipt","onUpdate:modelValue":_[6]||(_[6]=C=>i.value=C),type:"text",placeholder:"",onKeyup:oo(V,["enter"])},null,544)),[[wo,i.value]]):Fn("",!0),a.value?ci((De(),yt("input",{key:2,class:"ipt","onUpdate:modelValue":_[7]||(_[7]=C=>o.value=C),type:"tel",placeholder:" (010-0000-0000)",onKeyup:oo(V,["enter"])},null,544)),[[wo,o.value]]):Fn("",!0),_e("button",{class:"btn",onClick:V,disabled:me(e).authLoading},Mn(me(e).authLoading?" ...":a.value?"":" "),9,Ej)]),a.value?(De(),yt("div",Tj,[_[11]||(_[11]=_e("span",null,"  ?",-1)),_[12]||(_[12]=zu()),_e("button",{class:"link_member",onClick:m},"")])):(De(),yt("div",wj,[_[13]||(_[13]=_e("span",null," ?",-1)),_[14]||(_[14]=zu()),_e("button",{class:"link_member",onClick:m},""),_[15]||(_[15]=_e("span",{class:"divider"},"|",-1)),_e("button",{class:"link_member",onClick:T}," ")]))]))]),_:1})])]))}},Aj=["innerHTML"],bj=["innerHTML"],Rj=["innerHTML"],Sj={class:"m_buttons"},Pj={__name:"AlertModal",setup(t){const e=Fl(),n=()=>{e.closeAlert()},r=s=>{e.alertData.isVisible&&(s.key==="Enter"||s.key==="Escape")&&(s.preventDefault(),n())};return kr(()=>e.alertData.isVisible,s=>{s?window.addEventListener("keydown",r):window.removeEventListener("keydown",r)}),Fh(()=>{window.removeEventListener("keydown",r)}),(s,i)=>(De(),In(qo,{name:"m_fade"},{default:Ns(()=>[me(e).alertData.isVisible?(De(),yt("div",{key:0,class:"modal",onClick:n},[_e("div",{class:"m_container",onClick:i[0]||(i[0]=Zw(()=>{},["stop"]))},[me(e).alertData.icon!==""?(De(),yt("div",{key:0,class:"m_icon",innerHTML:me(e).alertData.icon},null,8,Aj)):Fn("",!0),me(e).alertData.title!==""?(De(),yt("h2",{key:1,class:"m_title",innerHTML:me(e).alertData.title},null,8,bj)):Fn("",!0),me(e).alertData.message!==""?(De(),yt("p",{key:2,class:"m_message",innerHTML:me(e).alertData.message},null,8,Rj)):Fn("",!0),_e("div",Sj,[_e("button",{class:"btn-confirm",onClick:n},Mn(me(e).alertData.confirmText),1)])])])):Fn("",!0)]),_:1}))}},Cj=["innerHTML"],kj=["innerHTML"],Nj=["innerHTML"],Dj={class:"m_buttons"},Vj={__name:"ConfirmModal",setup(t){const e=Fl(),n=()=>{e.handleConfirm()},r=()=>{e.handleCancel()},s=i=>{e.confirmData.isVisible&&(i.key==="Enter"?(i.preventDefault(),n()):i.key==="Escape"&&(i.preventDefault(),r()))};return kr(()=>e.confirmData.isVisible,i=>{i?window.addEventListener("keydown",s):window.removeEventListener("keydown",s)}),Fh(()=>{window.removeEventListener("keydown",s)}),(i,o)=>(De(),In(qo,{name:"m_fade"},{default:Ns(()=>[me(e).confirmData.isVisible?(De(),yt("div",{key:0,class:"modal",onClick:r},[_e("div",{class:"m_container",onClick:o[0]||(o[0]=Zw(()=>{},["stop"]))},[_e("div",{class:"m_icon",innerHTML:me(e).confirmData.icon},null,8,Cj),_e("h2",{class:"m_title",innerHTML:me(e).confirmData.title},null,8,kj),me(e).confirmData.message!==""?(De(),yt("p",{key:0,class:"m_message",innerHTML:me(e).confirmData.message},null,8,Nj)):Fn("",!0),_e("div",Dj,[_e("button",{class:"btn-cancel",onClick:r},Mn(me(e).confirmData.cancelText),1),_e("button",{class:"btn-confirm",onClick:n},Mn(me(e).confirmData.confirmText),1)])])])):Fn("",!0)]),_:1}))}},xj=wP(Vj,[["__scopeId","data-v-19db4dd1"]]),Oj={key:0,id:"initial-loader"},Lj={__name:"app",setup(t){const e=Fl(),n=ft(!0);return Mh(()=>{e.checkAuth(),n.value=!1,setTimeout(()=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{e.setAppLoading(!1)})})},600)}),(r,s)=>{const i=Y6,o=Z6,a=oj,c=vj,u=Pj,h=xj;return De(),yt("div",null,[(De(),In(GC,{to:"body"},[n.value?(De(),yt("div",Oj,[...s[0]||(s[0]=[_e("div",{class:"loader-content"},[_e("div",{class:"mystic-icon"},""),_e("h1",{class:"title"},"   "),_e("div",{class:"progress-bar"},[_e("div",{class:"progress-inner"})]),_e("p",{class:"subtitle"},"  ...")],-1)])])):Fn("",!0)])),Ze(i),ci(_e("div",null,[me(e).isLoggedIn?(De(),In(a,{key:0},{default:Ns(()=>[Ze(o)]),_:1})):(De(),In(c,{key:1}))],512),[[ik,!me(e).loader.isAppLoading&&me(e).authChecked]]),Ze(u),Ze(h)])}}},Mj={__name:"nuxt-error-page",props:{error:Object},setup(t){const n=t.error,r=Number(n.statusCode||500),s=r===404,i=n.statusMessage??(s?"Page Not Found":"Internal Server Error"),o=n.message||n.toString(),a=void 0,h=s?cy(()=>vs(()=>import("./CPFSa93W.js"),__vite__mapDeps([5,6,7]),import.meta.url)):cy(()=>vs(()=>import("./B2lCovt2.js"),__vite__mapDeps([8,6,9]),import.meta.url));return(d,f)=>(De(),In(me(h),rC(Gw({statusCode:me(r),statusMessage:me(i),description:me(o),stack:me(a)})),null,16))}},Fj={key:0},PT={__name:"nuxt-root",setup(t){const e=()=>null,n=ze(),r=n.deferHydration();if(n.isHydrating){const u=n.hooks.hookOnce("app:error",r);An().beforeEach(u)}const s=!1;Es(Di,qh()),n.hooks.callHookWith(u=>u.map(h=>h()),"vue:setup");const i=Hh(),o=!1,a=/bot\b|chrome-lighthouse|facebookexternalhit|google\b/i;Ew((u,h,d)=>{if(n.hooks.callHook("vue:error",u,h,d).catch(f=>{}),a.test(navigator.userAgent))return n.hooks.callHook("app:error",u),!1;if(Tv(u)&&(u.fatal||u.unhandled))return n.runWithContext(()=>li(u)),!1});const c=!1;return(u,h)=>(De(),In(Im,{onResolve:me(r)},{default:Ns(()=>[me(o)?(De(),yt("div",Fj)):me(i)?(De(),In(me(Mj),{key:1,error:me(i)},null,8,["error"])):me(c)?(De(),In(me(e),{key:2,context:me(c)},null,8,["context"])):me(s)?(De(),In(c0(me(s)),{key:3})):(De(),In(me(Lj),{key:4}))]),_:1},8,["onResolve"]))}};let CT;{let t;CT=async function(){if(t)return t;const n=!!(window.__NUXT__?.serverRendered??document.getElementById("__NUXT_DATA__")?.dataset.ssr==="true"),r=n?kk(PT):Ck(PT),s=UN({vueApp:r});async function i(o){var a;await s.callHook("app:error",o),(a=s.payload).error||(a.error=Ai(o))}r.config.errorHandler=i,s.hook("app:suspense:resolve",()=>{r.config.errorHandler===i&&(r.config.errorHandler=void 0)}),!n&&Gy.id&&s.hook("app:suspense:resolve",()=>{document.getElementById(Gy.id)?.remove()});try{await qN(s,Nx)}catch(o){i(o)}try{await s.hooks.callHook("app:created",r),await s.hooks.callHook("app:beforeMount",r),r.mount(LN),await s.hooks.callHook("app:mounted",r),await ks()}catch(o){i(o)}return r},t=CT().catch(e=>{throw e})}export{tN as $,De as A,wP as B,_e as C,ih as D,Mn as E,Hr as F,qs as G,An as H,Mo as I,ft as J,Mh as K,km as L,vI as M,gl as N,Qj as O,Wt as P,Bj as Q,rv as R,Ea as S,ZN as T,Rx as U,Kt as V,Gi as W,wm as X,_l as Y,Kj as Z,NI as _,Jj as a,Zu as a0,Hj as a1,Ns as a2,zu as a3,Fn as a4,sn as a5,jj as a6,Ci as a7,ci as a8,ik as a9,Gj as aA,DT as aB,qo as aa,Dh as ab,Fl as ac,kr as ad,Kv as ae,zj as af,Tk as ag,me as ah,Ek as ai,wo as aj,Zw as ak,In as al,vs as am,qj as an,Fh as ao,PC as ap,$j as aq,$i as ar,r0 as as,aC as at,im as au,VC as av,ks as aw,Ai as ax,Ff as ay,jr as az,xi as b,Yj as c,Qc as d,Il as e,uA as f,at as g,t1 as h,Wo as i,e1 as j,zc as k,i1 as l,dA as m,Zj as n,s1 as o,Xj as p,eq as q,bs as r,tq as s,ze as t,Wj as u,Oh as v,Vt as w,Pv as x,yt as y,Ze as z};
