const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./DC6Pubts.js","./CIEpYMit.js","./BHc6ddXJ.js","./index.Cz9iidzY.css","./D08-qvYl.js","./D4NhJ5Vi.js","./BA99it_G.js","./error-404.2GhCpCfF.css","./CPph8gNw.js","./error-500.DqdIhFrl.css"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Yp(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const Ke={},wo=[],sr=()=>{},CT=()=>!1,dl=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Xp=t=>t.startsWith("onUpdate:"),Lt=Object.assign,Zp=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},GP=Object.prototype.hasOwnProperty,Me=(t,e)=>GP.call(t,e),fe=Array.isArray,vo=t=>ga(t)==="[object Map]",ma=t=>ga(t)==="[object Set]",z_=t=>ga(t)==="[object Date]",KP=t=>ga(t)==="[object RegExp]",Ie=t=>typeof t=="function",et=t=>typeof t=="string",cr=t=>typeof t=="symbol",qe=t=>t!==null&&typeof t=="object",em=t=>(qe(t)||Ie(t))&&Ie(t.then)&&Ie(t.catch),kT=Object.prototype.toString,ga=t=>kT.call(t),WP=t=>ga(t).slice(8,-1),NT=t=>ga(t)==="[object Object]",Sh=t=>et(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Ao=Yp(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Ph=t=>{const e=Object.create(null);return(n=>e[n]||(e[n]=t(n)))},zP=/-\w/g,kn=Ph(t=>t.replace(zP,e=>e.slice(1).toUpperCase())),QP=/\B([A-Z])/g,Bs=Ph(t=>t.replace(QP,"-$1").toLowerCase()),Ch=Ph(t=>t.charAt(0).toUpperCase()+t.slice(1)),Hd=Ph(t=>t?`on${Ch(t)}`:""),ys=(t,e)=>!Object.is(t,e),bo=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},DT=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},kh=t=>{const e=parseFloat(t);return isNaN(e)?t:e},VT=t=>{const e=et(t)?Number(t):NaN;return isNaN(e)?t:e};let Q_;const Nh=()=>Q_||(Q_=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Dh(t){if(fe(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],s=et(r)?ZP(r):Dh(r);if(s)for(const i in s)e[i]=s[i]}return e}else if(et(t)||qe(t))return t}const JP=/;(?![^(]*\))/g,YP=/:([^]+)/,XP=/\/\*[^]*?\*\//g;function ZP(t){const e={};return t.replace(XP,"").split(JP).forEach(n=>{if(n){const r=n.split(YP);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Pi(t){let e="";if(et(t))e=t;else if(fe(t))for(let n=0;n<t.length;n++){const r=Pi(t[n]);r&&(e+=r+" ")}else if(qe(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}function eC(t){if(!t)return null;let{class:e,style:n}=t;return e&&!et(e)&&(t.class=Pi(e)),n&&(t.style=Dh(n)),t}const tC="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",nC=Yp(tC);function xT(t){return!!t||t===""}function rC(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=Ci(t[r],e[r]);return n}function Ci(t,e){if(t===e)return!0;let n=z_(t),r=z_(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=cr(t),r=cr(e),n||r)return t===e;if(n=fe(t),r=fe(e),n||r)return n&&r?rC(t,e):!1;if(n=qe(t),r=qe(e),n||r){if(!n||!r)return!1;const s=Object.keys(t).length,i=Object.keys(e).length;if(s!==i)return!1;for(const o in t){const a=t.hasOwnProperty(o),c=e.hasOwnProperty(o);if(a&&!c||!a&&c||!Ci(t[o],e[o]))return!1}}return String(t)===String(e)}function tm(t,e){return t.findIndex(n=>Ci(n,e))}const OT=t=>!!(t&&t.__v_isRef===!0),Mn=t=>et(t)?t:t==null?"":fe(t)||qe(t)&&(t.toString===kT||!Ie(t.toString))?OT(t)?Mn(t.value):JSON.stringify(t,LT,2):String(t),LT=(t,e)=>OT(e)?LT(t,e.value):vo(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,s],i)=>(n[$d(r,i)+" =>"]=s,n),{})}:ma(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>$d(n))}:cr(e)?$d(e):qe(e)&&!fe(e)&&!NT(e)?String(e):e,$d=(t,e="")=>{var n;return cr(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};let Ht;class MT{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Ht,!e&&Ht&&(this.index=(Ht.scopes||(Ht.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=Ht;try{return Ht=this,e()}finally{Ht=n}}}on(){++this._on===1&&(this.prevScope=Ht,Ht=this)}off(){this._on>0&&--this._on===0&&(Ht=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function nm(t){return new MT(t)}function rm(){return Ht}function sC(t,e=!1){Ht&&Ht.cleanups.push(t)}let We;const Gd=new WeakSet;class FT{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Ht&&Ht.active&&Ht.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Gd.has(this)&&(Gd.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||BT(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,J_(this),jT(this);const e=We,n=Bn;We=this,Bn=!0;try{return this.fn()}finally{qT(this),We=e,Bn=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)om(e);this.deps=this.depsTail=void 0,J_(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Gd.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){xf(this)&&this.run()}get dirty(){return xf(this)}}let UT=0,yc,Ic;function BT(t,e=!1){if(t.flags|=8,e){t.next=Ic,Ic=t;return}t.next=yc,yc=t}function sm(){UT++}function im(){if(--UT>0)return;if(Ic){let e=Ic;for(Ic=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;yc;){let e=yc;for(yc=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=n}}if(t)throw t}function jT(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function qT(t){let e,n=t.depsTail,r=n;for(;r;){const s=r.prevDep;r.version===-1?(r===n&&(n=s),om(r),iC(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s}t.deps=e,t.depsTail=n}function xf(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(HT(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function HT(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===jc)||(t.globalVersion=jc,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!xf(t))))return;t.flags|=2;const e=t.dep,n=We,r=Bn;We=t,Bn=!0;try{jT(t);const s=t.fn(t._value);(e.version===0||ys(s,t._value))&&(t.flags|=128,t._value=s,e.version++)}catch(s){throw e.version++,s}finally{We=n,Bn=r,qT(t),t.flags&=-3}}function om(t,e=!1){const{dep:n,prevSub:r,nextSub:s}=t;if(r&&(r.nextSub=s,t.prevSub=void 0),s&&(s.prevSub=r,t.nextSub=void 0),n.subs===t&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)om(i,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function iC(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let Bn=!0;const $T=[];function Dr(){$T.push(Bn),Bn=!1}function Vr(){const t=$T.pop();Bn=t===void 0?!0:t}function J_(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=We;We=void 0;try{e()}finally{We=n}}}let jc=0;class oC{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class am{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!We||!Bn||We===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==We)n=this.activeLink=new oC(We,this),We.deps?(n.prevDep=We.depsTail,We.depsTail.nextDep=n,We.depsTail=n):We.deps=We.depsTail=n,GT(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=We.depsTail,n.nextDep=void 0,We.depsTail.nextDep=n,We.depsTail=n,We.deps===n&&(We.deps=r)}return n}trigger(e){this.version++,jc++,this.notify(e)}notify(e){sm();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{im()}}}function GT(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)GT(r)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const Fu=new WeakMap,Ei=Symbol(""),Of=Symbol(""),qc=Symbol("");function Gt(t,e,n){if(Bn&&We){let r=Fu.get(t);r||Fu.set(t,r=new Map);let s=r.get(n);s||(r.set(n,s=new am),s.map=r,s.key=n),s.track()}}function Ir(t,e,n,r,s,i){const o=Fu.get(t);if(!o){jc++;return}const a=c=>{c&&c.trigger()};if(sm(),e==="clear")o.forEach(a);else{const c=fe(t),u=c&&Sh(n);if(c&&n==="length"){const h=Number(r);o.forEach((d,f)=>{(f==="length"||f===qc||!cr(f)&&f>=h)&&a(d)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),u&&a(o.get(qc)),e){case"add":c?u&&a(o.get("length")):(a(o.get(Ei)),vo(t)&&a(o.get(Of)));break;case"delete":c||(a(o.get(Ei)),vo(t)&&a(o.get(Of)));break;case"set":vo(t)&&a(o.get(Ei));break}}im()}function aC(t,e){const n=Fu.get(t);return n&&n.get(e)}function ro(t){const e=Ne(t);return e===t?e:(Gt(e,"iterate",qc),Tn(t)?e:e.map(Hn))}function Vh(t){return Gt(t=Ne(t),"iterate",qc),t}function ls(t,e){return lr(t)?ir(t)?Oo(Hn(e)):Oo(e):Hn(e)}const cC={__proto__:null,[Symbol.iterator](){return Kd(this,Symbol.iterator,t=>ls(this,t))},concat(...t){return ro(this).concat(...t.map(e=>fe(e)?ro(e):e))},entries(){return Kd(this,"entries",t=>(t[1]=ls(this,t[1]),t))},every(t,e){return pr(this,"every",t,e,void 0,arguments)},filter(t,e){return pr(this,"filter",t,e,n=>n.map(r=>ls(this,r)),arguments)},find(t,e){return pr(this,"find",t,e,n=>ls(this,n),arguments)},findIndex(t,e){return pr(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return pr(this,"findLast",t,e,n=>ls(this,n),arguments)},findLastIndex(t,e){return pr(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return pr(this,"forEach",t,e,void 0,arguments)},includes(...t){return Wd(this,"includes",t)},indexOf(...t){return Wd(this,"indexOf",t)},join(t){return ro(this).join(t)},lastIndexOf(...t){return Wd(this,"lastIndexOf",t)},map(t,e){return pr(this,"map",t,e,void 0,arguments)},pop(){return Ya(this,"pop")},push(...t){return Ya(this,"push",t)},reduce(t,...e){return Y_(this,"reduce",t,e)},reduceRight(t,...e){return Y_(this,"reduceRight",t,e)},shift(){return Ya(this,"shift")},some(t,e){return pr(this,"some",t,e,void 0,arguments)},splice(...t){return Ya(this,"splice",t)},toReversed(){return ro(this).toReversed()},toSorted(t){return ro(this).toSorted(t)},toSpliced(...t){return ro(this).toSpliced(...t)},unshift(...t){return Ya(this,"unshift",t)},values(){return Kd(this,"values",t=>ls(this,t))}};function Kd(t,e,n){const r=Vh(t),s=r[e]();return r!==t&&!Tn(t)&&(s._next=s.next,s.next=()=>{const i=s._next();return i.done||(i.value=n(i.value)),i}),s}const lC=Array.prototype;function pr(t,e,n,r,s,i){const o=Vh(t),a=o!==t&&!Tn(t),c=o[e];if(c!==lC[e]){const d=c.apply(t,i);return a?Hn(d):d}let u=n;o!==t&&(a?u=function(d,f){return n.call(this,ls(t,d),f,t)}:n.length>2&&(u=function(d,f){return n.call(this,d,f,t)}));const h=c.call(o,u,r);return a&&s?s(h):h}function Y_(t,e,n,r){const s=Vh(t);let i=n;return s!==t&&(Tn(t)?n.length>3&&(i=function(o,a,c){return n.call(this,o,a,c,t)}):i=function(o,a,c){return n.call(this,o,ls(t,a),c,t)}),s[e](i,...r)}function Wd(t,e,n){const r=Ne(t);Gt(r,"iterate",qc);const s=r[e](...n);return(s===-1||s===!1)&&xh(n[0])?(n[0]=Ne(n[0]),r[e](...n)):s}function Ya(t,e,n=[]){Dr(),sm();const r=Ne(t)[e].apply(t,n);return im(),Vr(),r}const uC=Yp("__proto__,__v_isRef,__isVue"),KT=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(cr));function hC(t){cr(t)||(t=String(t));const e=Ne(this);return Gt(e,"has",t),e.hasOwnProperty(t)}class WT{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){if(n==="__v_skip")return e.__v_skip;const s=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(s?i?TC:YT:i?JT:QT).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=fe(e);if(!s){let c;if(o&&(c=cC[n]))return c;if(n==="hasOwnProperty")return hC}const a=Reflect.get(e,n,it(e)?e:r);if((cr(n)?KT.has(n):uC(n))||(s||Gt(e,"get",n),i))return a;if(it(a)){const c=o&&Sh(n)?a:a.value;return s&&qe(c)?Mf(c):c}return qe(a)?s?Mf(a):jr(a):a}}class zT extends WT{constructor(e=!1){super(!1,e)}set(e,n,r,s){let i=e[n];const o=fe(e)&&Sh(n);if(!this._isShallow){const u=lr(i);if(!Tn(r)&&!lr(r)&&(i=Ne(i),r=Ne(r)),!o&&it(i)&&!it(r))return u||(i.value=r),!0}const a=o?Number(n)<e.length:Me(e,n),c=Reflect.set(e,n,r,it(e)?e:s);return e===Ne(s)&&(a?ys(r,i)&&Ir(e,"set",n,r):Ir(e,"add",n,r)),c}deleteProperty(e,n){const r=Me(e,n);e[n];const s=Reflect.deleteProperty(e,n);return s&&r&&Ir(e,"delete",n,void 0),s}has(e,n){const r=Reflect.has(e,n);return(!cr(n)||!KT.has(n))&&Gt(e,"has",n),r}ownKeys(e){return Gt(e,"iterate",fe(e)?"length":Ei),Reflect.ownKeys(e)}}class dC extends WT{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const fC=new zT,pC=new dC,mC=new zT(!0);const Lf=t=>t,zl=t=>Reflect.getPrototypeOf(t);function gC(t,e,n){return function(...r){const s=this.__v_raw,i=Ne(s),o=vo(i),a=t==="entries"||t===Symbol.iterator&&o,c=t==="keys"&&o,u=s[t](...r),h=n?Lf:e?Oo:Hn;return!e&&Gt(i,"iterate",c?Of:Ei),{next(){const{value:d,done:f}=u.next();return f?{value:d,done:f}:{value:a?[h(d[0]),h(d[1])]:h(d),done:f}},[Symbol.iterator](){return this}}}}function Ql(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function _C(t,e){const n={get(s){const i=this.__v_raw,o=Ne(i),a=Ne(s);t||(ys(s,a)&&Gt(o,"get",s),Gt(o,"get",a));const{has:c}=zl(o),u=e?Lf:t?Oo:Hn;if(c.call(o,s))return u(i.get(s));if(c.call(o,a))return u(i.get(a));i!==o&&i.get(s)},get size(){const s=this.__v_raw;return!t&&Gt(Ne(s),"iterate",Ei),s.size},has(s){const i=this.__v_raw,o=Ne(i),a=Ne(s);return t||(ys(s,a)&&Gt(o,"has",s),Gt(o,"has",a)),s===a?i.has(s):i.has(s)||i.has(a)},forEach(s,i){const o=this,a=o.__v_raw,c=Ne(a),u=e?Lf:t?Oo:Hn;return!t&&Gt(c,"iterate",Ei),a.forEach((h,d)=>s.call(i,u(h),u(d),o))}};return Lt(n,t?{add:Ql("add"),set:Ql("set"),delete:Ql("delete"),clear:Ql("clear")}:{add(s){!e&&!Tn(s)&&!lr(s)&&(s=Ne(s));const i=Ne(this);return zl(i).has.call(i,s)||(i.add(s),Ir(i,"add",s,s)),this},set(s,i){!e&&!Tn(i)&&!lr(i)&&(i=Ne(i));const o=Ne(this),{has:a,get:c}=zl(o);let u=a.call(o,s);u||(s=Ne(s),u=a.call(o,s));const h=c.call(o,s);return o.set(s,i),u?ys(i,h)&&Ir(o,"set",s,i):Ir(o,"add",s,i),this},delete(s){const i=Ne(this),{has:o,get:a}=zl(i);let c=o.call(i,s);c||(s=Ne(s),c=o.call(i,s)),a&&a.call(i,s);const u=i.delete(s);return c&&Ir(i,"delete",s,void 0),u},clear(){const s=Ne(this),i=s.size!==0,o=s.clear();return i&&Ir(s,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=gC(s,t,e)}),n}function cm(t,e){const n=_C(t,e);return(r,s,i)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?r:Reflect.get(Me(n,s)&&s in r?n:r,s,i)}const yC={get:cm(!1,!1)},IC={get:cm(!1,!0)},EC={get:cm(!0,!1)};const QT=new WeakMap,JT=new WeakMap,YT=new WeakMap,TC=new WeakMap;function wC(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function vC(t){return t.__v_skip||!Object.isExtensible(t)?0:wC(WP(t))}function jr(t){return lr(t)?t:lm(t,!1,fC,yC,QT)}function er(t){return lm(t,!1,mC,IC,JT)}function Mf(t){return lm(t,!0,pC,EC,YT)}function lm(t,e,n,r,s){if(!qe(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=vC(t);if(i===0)return t;const o=s.get(t);if(o)return o;const a=new Proxy(t,i===2?r:n);return s.set(t,a),a}function ir(t){return lr(t)?ir(t.__v_raw):!!(t&&t.__v_isReactive)}function lr(t){return!!(t&&t.__v_isReadonly)}function Tn(t){return!!(t&&t.__v_isShallow)}function xh(t){return t?!!t.__v_raw:!1}function Ne(t){const e=t&&t.__v_raw;return e?Ne(e):t}function um(t){return!Me(t,"__v_skip")&&Object.isExtensible(t)&&DT(t,"__v_skip",!0),t}const Hn=t=>qe(t)?jr(t):t,Oo=t=>qe(t)?Mf(t):t;function it(t){return t?t.__v_isRef===!0:!1}function ft(t){return XT(t,!1)}function Lo(t){return XT(t,!0)}function XT(t,e){return it(t)?t:new AC(t,e)}class AC{constructor(e,n){this.dep=new am,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:Ne(e),this._value=n?e:Hn(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||Tn(e)||lr(e);e=r?e:Ne(e),ys(e,n)&&(this._rawValue=e,this._value=r?e:Hn(e),this.dep.trigger())}}function me(t){return it(t)?t.value:t}function bC(t){return Ie(t)?t():me(t)}const RC={get:(t,e,n)=>e==="__v_raw"?t:me(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const s=t[e];return it(s)&&!it(n)?(s.value=n,!0):Reflect.set(t,e,n,r)}};function ZT(t){return ir(t)?t:new Proxy(t,RC)}function SC(t){const e=fe(t)?new Array(t.length):{};for(const n in t)e[n]=ew(t,n);return e}class PC{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0,this._raw=Ne(e);let s=!0,i=e;if(!fe(e)||!Sh(String(n)))do s=!xh(i)||Tn(i);while(s&&(i=i.__v_raw));this._shallow=s}get value(){let e=this._object[this._key];return this._shallow&&(e=me(e)),this._value=e===void 0?this._defaultValue:e}set value(e){if(this._shallow&&it(this._raw[this._key])){const n=this._object[this._key];if(it(n)){n.value=e;return}}this._object[this._key]=e}get dep(){return aC(this._raw,this._key)}}class CC{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function kC(t,e,n){return it(t)?t:Ie(t)?new CC(t):qe(t)&&arguments.length>1?ew(t,e,n):ft(t)}function ew(t,e,n){return new PC(t,e,n)}class NC{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new am(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=jc-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&We!==this)return BT(this,!0),!0}get value(){const e=this.dep.track();return HT(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function DC(t,e,n=!1){let r,s;return Ie(t)?r=t:(r=t.get,s=t.set),new NC(r,s,n)}const Jl={},Uu=new WeakMap;let oi;function VC(t,e=!1,n=oi){if(n){let r=Uu.get(n);r||Uu.set(n,r=[]),r.push(t)}}function xC(t,e,n=Ke){const{immediate:r,deep:s,once:i,scheduler:o,augmentJob:a,call:c}=n,u=C=>s?C:Tn(C)||s===!1||s===0?Er(C,1):Er(C);let h,d,f,m,I=!1,T=!1;if(it(t)?(d=()=>t.value,I=Tn(t)):ir(t)?(d=()=>u(t),I=!0):fe(t)?(T=!0,I=t.some(C=>ir(C)||Tn(C)),d=()=>t.map(C=>{if(it(C))return C.value;if(ir(C))return u(C);if(Ie(C))return c?c(C,2):C()})):Ie(t)?e?d=c?()=>c(t,2):t:d=()=>{if(f){Dr();try{f()}finally{Vr()}}const C=oi;oi=h;try{return c?c(t,3,[m]):t(m)}finally{oi=C}}:d=sr,e&&s){const C=d,x=s===!0?1/0:s;d=()=>Er(C(),x)}const k=rm(),V=()=>{h.stop(),k&&k.active&&Zp(k.effects,h)};if(i&&e){const C=e;e=(...x)=>{C(...x),V()}}let N=T?new Array(t.length).fill(Jl):Jl;const _=C=>{if(!(!(h.flags&1)||!h.dirty&&!C))if(e){const x=h.run();if(s||I||(T?x.some((U,v)=>ys(U,N[v])):ys(x,N))){f&&f();const U=oi;oi=h;try{const v=[x,N===Jl?void 0:T&&N[0]===Jl?[]:N,m];N=x,c?c(e,3,v):e(...v)}finally{oi=U}}}else h.run()};return a&&a(_),h=new FT(d),h.scheduler=o?()=>o(_,!1):_,m=C=>VC(C,!1,h),f=h.onStop=()=>{const C=Uu.get(h);if(C){if(c)c(C,4);else for(const x of C)x();Uu.delete(h)}},e?r?_(!0):N=h.run():o?o(_.bind(null,!0),!0):h.run(),V.pause=h.pause.bind(h),V.resume=h.resume.bind(h),V.stop=V,V}function Er(t,e=1/0,n){if(e<=0||!qe(t)||t.__v_skip||(n=n||new Map,(n.get(t)||0)>=e))return t;if(n.set(t,e),e--,it(t))Er(t.value,e,n);else if(fe(t))for(let r=0;r<t.length;r++)Er(t[r],e,n);else if(ma(t)||vo(t))t.forEach(r=>{Er(r,e,n)});else if(NT(t)){for(const r in t)Er(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&Er(t[r],e,n)}return t}function fl(t,e,n,r){try{return r?t(...r):t()}catch(s){_a(s,e,n)}}function $n(t,e,n,r){if(Ie(t)){const s=fl(t,e,n,r);return s&&em(s)&&s.catch(i=>{_a(i,e,n)}),s}if(fe(t)){const s=[];for(let i=0;i<t.length;i++)s.push($n(t[i],e,n,r));return s}}function _a(t,e,n,r=!0){const s=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||Ke;if(e){let a=e.parent;const c=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const h=a.ec;if(h){for(let d=0;d<h.length;d++)if(h[d](t,c,u)===!1)return}a=a.parent}if(i){Dr(),fl(i,null,10,[t,c,u]),Vr();return}}OC(t,n,s,r,o)}function OC(t,e,n,r=!0,s=!1){if(s)throw t;console.error(t)}const en=[];let Jn=-1;const Ro=[];let us=null,po=0;const tw=Promise.resolve();let Bu=null;function Cs(t){const e=Bu||tw;return t?e.then(this?t.bind(this):t):e}function LC(t){let e=Jn+1,n=en.length;for(;e<n;){const r=e+n>>>1,s=en[r],i=Hc(s);i<t||i===t&&s.flags&2?e=r+1:n=r}return e}function hm(t){if(!(t.flags&1)){const e=Hc(t),n=en[en.length-1];!n||!(t.flags&2)&&e>=Hc(n)?en.push(t):en.splice(LC(e),0,t),t.flags|=1,nw()}}function nw(){Bu||(Bu=tw.then(rw))}function Ff(t){fe(t)?Ro.push(...t):us&&t.id===-1?us.splice(po+1,0,t):t.flags&1||(Ro.push(t),t.flags|=1),nw()}function X_(t,e,n=Jn+1){for(;n<en.length;n++){const r=en[n];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;en.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function ju(t){if(Ro.length){const e=[...new Set(Ro)].sort((n,r)=>Hc(n)-Hc(r));if(Ro.length=0,us){us.push(...e);return}for(us=e,po=0;po<us.length;po++){const n=us[po];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}us=null,po=0}}const Hc=t=>t.id==null?t.flags&2?-1:1/0:t.id;function rw(t){try{for(Jn=0;Jn<en.length;Jn++){const e=en[Jn];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),fl(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Jn<en.length;Jn++){const e=en[Jn];e&&(e.flags&=-2)}Jn=-1,en.length=0,ju(),Bu=null,(en.length||Ro.length)&&rw()}}let En=null,sw=null;function qu(t){const e=En;return En=t,sw=t&&t.type.__scopeId||null,e}function ks(t,e=En,n){if(!e||t._n)return t;const r=(...s)=>{r._d&&Wu(-1);const i=qu(e);let o;try{o=t(...s)}finally{qu(i),r._d&&Wu(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function ai(t,e){if(En===null)return t;const n=jh(En),r=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[i,o,a,c=Ke]=e[s];i&&(Ie(i)&&(i={mounted:i,updated:i}),i.deep&&Er(o),r.push({dir:i,instance:n,value:o,oldValue:void 0,arg:a,modifiers:c}))}return t}function Yn(t,e,n,r){const s=t.dirs,i=e&&e.dirs;for(let o=0;o<s.length;o++){const a=s[o];i&&(a.oldValue=i[o].value);let c=a.dir[r];c&&(Dr(),$n(c,n,8,[t.el,a,t,e]),Vr())}}function Is(t,e){if(Ut){let n=Ut.provides;const r=Ut.parent&&Ut.parent.provides;r===n&&(n=Ut.provides=Object.create(r)),n[t]=e}}function Vt(t,e,n=!1){const r=Hi();if(r||Ti){let s=Ti?Ti._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&t in s)return s[t];if(arguments.length>1)return n&&Ie(e)?e.call(r&&r.proxy):e}}function Oh(){return!!(Hi()||Ti)}const MC=Symbol.for("v-scx"),FC=()=>Vt(MC);function UC(t,e){return dm(t,null,e)}function kr(t,e,n){return dm(t,e,n)}function dm(t,e,n=Ke){const{immediate:r,deep:s,flush:i,once:o}=n,a=Lt({},n),c=e&&r||!e&&i!=="post";let u;if(Bo){if(i==="sync"){const m=FC();u=m.__watcherHandles||(m.__watcherHandles=[])}else if(!c){const m=()=>{};return m.stop=sr,m.resume=sr,m.pause=sr,m}}const h=Ut;a.call=(m,I,T)=>$n(m,h,I,T);let d=!1;i==="post"?a.scheduler=m=>{_t(m,h&&h.suspense)}:i!=="sync"&&(d=!0,a.scheduler=(m,I)=>{I?m():hm(m)}),a.augmentJob=m=>{e&&(m.flags|=4),d&&(m.flags|=2,h&&(m.id=h.uid,m.i=h))};const f=xC(t,e,a);return Bo&&(u?u.push(f):c&&f()),f}function BC(t,e,n){const r=this.proxy,s=et(t)?t.includes(".")?iw(r,t):()=>r[t]:t.bind(r,r);let i;Ie(e)?i=e:(i=e.handler,n=e);const o=ki(this),a=dm(s,i.bind(r),n);return o(),a}function iw(t,e){const n=e.split(".");return()=>{let r=t;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}const ow=Symbol("_vte"),aw=t=>t.__isTeleport,Ec=t=>t&&(t.disabled||t.disabled===""),Z_=t=>t&&(t.defer||t.defer===""),ey=t=>typeof SVGElement<"u"&&t instanceof SVGElement,ty=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,Uf=(t,e)=>{const n=t&&t.to;return et(n)?e?e(n):null:n},cw={name:"Teleport",__isTeleport:!0,process(t,e,n,r,s,i,o,a,c,u){const{mc:h,pc:d,pbc:f,o:{insert:m,querySelector:I,createText:T,createComment:k}}=u,V=Ec(e.props);let{shapeFlag:N,children:_,dynamicChildren:C}=e;if(t==null){const x=e.el=T(""),U=e.anchor=T("");m(x,n,r),m(U,n,r);const v=(y,A)=>{N&16&&h(_,y,A,s,i,o,a,c)},E=()=>{const y=e.target=Uf(e.props,I),A=lw(y,e,T,m);y&&(o!=="svg"&&ey(y)?o="svg":o!=="mathml"&&ty(y)&&(o="mathml"),s&&s.isCE&&(s.ce._teleportTargets||(s.ce._teleportTargets=new Set)).add(y),V||(v(y,A),yu(e,!1)))};V&&(v(n,U),yu(e,!0)),Z_(e.props)?(e.el.__isMounted=!1,_t(()=>{E(),delete e.el.__isMounted},i)):E()}else{if(Z_(e.props)&&t.el.__isMounted===!1){_t(()=>{cw.process(t,e,n,r,s,i,o,a,c,u)},i);return}e.el=t.el,e.targetStart=t.targetStart;const x=e.anchor=t.anchor,U=e.target=t.target,v=e.targetAnchor=t.targetAnchor,E=Ec(t.props),y=E?n:U,A=E?x:v;if(o==="svg"||ey(U)?o="svg":(o==="mathml"||ty(U))&&(o="mathml"),C?(f(t.dynamicChildren,C,y,s,i,o,a),gm(t,e,!0)):c||d(t,e,y,A,s,i,o,a,!1),V)E?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):Yl(e,n,x,u,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const P=e.target=Uf(e.props,I);P&&Yl(e,P,null,u,0)}else E&&Yl(e,U,v,u,1);yu(e,V)}},remove(t,e,n,{um:r,o:{remove:s}},i){const{shapeFlag:o,children:a,anchor:c,targetStart:u,targetAnchor:h,target:d,props:f}=t;if(d&&(s(u),s(h)),i&&s(c),o&16){const m=i||!Ec(f);for(let I=0;I<a.length;I++){const T=a[I];r(T,e,n,m,!!T.dynamicChildren)}}},move:Yl,hydrate:jC};function Yl(t,e,n,{o:{insert:r},m:s},i=2){i===0&&r(t.targetAnchor,e,n);const{el:o,anchor:a,shapeFlag:c,children:u,props:h}=t,d=i===2;if(d&&r(o,e,n),(!d||Ec(h))&&c&16)for(let f=0;f<u.length;f++)s(u[f],e,n,2);d&&r(a,e,n)}function jC(t,e,n,r,s,i,{o:{nextSibling:o,parentNode:a,querySelector:c,insert:u,createText:h}},d){function f(T,k,V,N){k.anchor=d(o(T),k,a(T),n,r,s,i),k.targetStart=V,k.targetAnchor=N}const m=e.target=Uf(e.props,c),I=Ec(e.props);if(m){const T=m._lpa||m.firstChild;if(e.shapeFlag&16)if(I)f(t,e,T,T&&o(T));else{e.anchor=o(t);let k=T;for(;k;){if(k&&k.nodeType===8){if(k.data==="teleport start anchor")e.targetStart=k;else if(k.data==="teleport anchor"){e.targetAnchor=k,m._lpa=e.targetAnchor&&o(e.targetAnchor);break}}k=o(k)}e.targetAnchor||lw(m,e,h,u),d(T&&o(T),e,m,n,r,s,i)}yu(e,I)}else I&&e.shapeFlag&16&&f(t,e,t,o(t));return e.anchor&&o(e.anchor)}const qC=cw;function yu(t,e){const n=t.ctx;if(n&&n.ut){let r,s;for(e?(r=t.el,s=t.anchor):(r=t.targetStart,s=t.targetAnchor);r&&r!==s;)r.nodeType===1&&r.setAttribute("data-v-owner",n.uid),r=r.nextSibling;n.ut()}}function lw(t,e,n,r){const s=e.targetStart=n(""),i=e.targetAnchor=n("");return s[ow]=i,t&&(r(s,t),r(i,t)),i}const yr=Symbol("_leaveCb"),Xl=Symbol("_enterCb");function HC(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Mh(()=>{t.isMounted=!0}),ml(()=>{t.isUnmounting=!0}),t}const Sn=[Function,Array],uw={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Sn,onEnter:Sn,onAfterEnter:Sn,onEnterCancelled:Sn,onBeforeLeave:Sn,onLeave:Sn,onAfterLeave:Sn,onLeaveCancelled:Sn,onBeforeAppear:Sn,onAppear:Sn,onAfterAppear:Sn,onAppearCancelled:Sn},hw=t=>{const e=t.subTree;return e.component?hw(e.component):e},$C={name:"BaseTransition",props:uw,setup(t,{slots:e}){const n=Hi(),r=HC();return()=>{const s=e.default&&pw(e.default(),!0);if(!s||!s.length)return;const i=dw(s),o=Ne(t),{mode:a}=o;if(r.isLeaving)return zd(i);const c=ny(i);if(!c)return zd(i);let u=Bf(c,o,r,n,d=>u=d);c.type!==bt&&Mo(c,u);let h=n.subTree&&ny(n.subTree);if(h&&h.type!==bt&&!Ln(h,c)&&hw(n).type!==bt){let d=Bf(h,o,r,n);if(Mo(h,d),a==="out-in"&&c.type!==bt)return r.isLeaving=!0,d.afterLeave=()=>{r.isLeaving=!1,n.job.flags&8||n.update(),delete d.afterLeave,h=void 0},zd(i);a==="in-out"&&c.type!==bt?d.delayLeave=(f,m,I)=>{const T=fw(r,h);T[String(h.key)]=h,f[yr]=()=>{m(),f[yr]=void 0,delete u.delayedLeave,h=void 0},u.delayedLeave=()=>{I(),delete u.delayedLeave,h=void 0}}:h=void 0}else h&&(h=void 0);return i}}};function dw(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==bt){e=n;break}}return e}const GC=$C;function fw(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function Bf(t,e,n,r,s){const{appear:i,mode:o,persisted:a=!1,onBeforeEnter:c,onEnter:u,onAfterEnter:h,onEnterCancelled:d,onBeforeLeave:f,onLeave:m,onAfterLeave:I,onLeaveCancelled:T,onBeforeAppear:k,onAppear:V,onAfterAppear:N,onAppearCancelled:_}=e,C=String(t.key),x=fw(n,t),U=(y,A)=>{y&&$n(y,r,9,A)},v=(y,A)=>{const P=A[1];U(y,A),fe(y)?y.every(S=>S.length<=1)&&P():y.length<=1&&P()},E={mode:o,persisted:a,beforeEnter(y){let A=c;if(!n.isMounted)if(i)A=k||c;else return;y[yr]&&y[yr](!0);const P=x[C];P&&Ln(t,P)&&P.el[yr]&&P.el[yr](),U(A,[y])},enter(y){let A=u,P=h,S=d;if(!n.isMounted)if(i)A=V||u,P=N||h,S=_||d;else return;let b=!1;const ge=y[Xl]=Ae=>{b||(b=!0,Ae?U(S,[y]):U(P,[y]),E.delayedLeave&&E.delayedLeave(),y[Xl]=void 0)};A?v(A,[y,ge]):ge()},leave(y,A){const P=String(t.key);if(y[Xl]&&y[Xl](!0),n.isUnmounting)return A();U(f,[y]);let S=!1;const b=y[yr]=ge=>{S||(S=!0,A(),ge?U(T,[y]):U(I,[y]),y[yr]=void 0,x[P]===t&&delete x[P])};x[P]=t,m?v(m,[y,b]):b()},clone(y){const A=Bf(y,e,n,r,s);return s&&s(A),A}};return E}function zd(t){if(pl(t))return t=xr(t),t.children=null,t}function ny(t){if(!pl(t))return aw(t.type)&&t.children?dw(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&Ie(n.default))return n.default()}}function Mo(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Mo(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function pw(t,e=!1,n){let r=[],s=0;for(let i=0;i<t.length;i++){let o=t[i];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:i);o.type===sn?(o.patchFlag&128&&s++,r=r.concat(pw(o.children,e,a))):(e||o.type!==bt)&&r.push(a!=null?xr(o,{key:a}):o)}if(s>1)for(let i=0;i<r.length;i++)r[i].patchFlag=-2;return r}function js(t,e){return Ie(t)?Lt({name:t.name},e,{setup:t}):t}function fm(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}const Hu=new WeakMap;function So(t,e,n,r,s=!1){if(fe(t)){t.forEach((I,T)=>So(I,e&&(fe(e)?e[T]:e),n,r,s));return}if(Es(r)&&!s){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&So(t,e,n,r.component.subTree);return}const i=r.shapeFlag&4?jh(r.component):r.el,o=s?null:i,{i:a,r:c}=t,u=e&&e.r,h=a.refs===Ke?a.refs={}:a.refs,d=a.setupState,f=Ne(d),m=d===Ke?CT:I=>Me(f,I);if(u!=null&&u!==c){if(ry(e),et(u))h[u]=null,m(u)&&(d[u]=null);else if(it(u)){u.value=null;const I=e;I.k&&(h[I.k]=null)}}if(Ie(c))fl(c,a,12,[o,h]);else{const I=et(c),T=it(c);if(I||T){const k=()=>{if(t.f){const V=I?m(c)?d[c]:h[c]:c.value;if(s)fe(V)&&Zp(V,i);else if(fe(V))V.includes(i)||V.push(i);else if(I)h[c]=[i],m(c)&&(d[c]=h[c]);else{const N=[i];c.value=N,t.k&&(h[t.k]=N)}}else I?(h[c]=o,m(c)&&(d[c]=o)):T&&(c.value=o,t.k&&(h[t.k]=o))};if(o){const V=()=>{k(),Hu.delete(t)};V.id=-1,Hu.set(t,V),_t(V,n)}else ry(t),k()}}}function ry(t){const e=Hu.get(t);e&&(e.flags|=8,Hu.delete(t))}let sy=!1;const so=()=>{sy||(console.error("Hydration completed but contains mismatches."),sy=!0)},KC=t=>t.namespaceURI.includes("svg")&&t.tagName!=="foreignObject",WC=t=>t.namespaceURI.includes("MathML"),Zl=t=>{if(t.nodeType===1){if(KC(t))return"svg";if(WC(t))return"mathml"}},Eo=t=>t.nodeType===8;function zC(t){const{mt:e,p:n,o:{patchProp:r,createText:s,nextSibling:i,parentNode:o,remove:a,insert:c,createComment:u}}=t,h=(_,C)=>{if(!C.hasChildNodes()){n(null,_,C),ju(),C._vnode=_;return}d(C.firstChild,_,null,null,null),ju(),C._vnode=_},d=(_,C,x,U,v,E=!1)=>{E=E||!!C.dynamicChildren;const y=Eo(_)&&_.data==="[",A=()=>T(_,C,x,U,v,y),{type:P,ref:S,shapeFlag:b,patchFlag:ge}=C;let Ae=_.nodeType;C.el=_,ge===-2&&(E=!1,C.dynamicChildren=null);let se=null;switch(P){case wi:Ae!==3?C.children===""?(c(C.el=s(""),o(_),_),se=_):se=A():(_.data!==C.children&&(so(),_.data=C.children),se=i(_));break;case bt:N(_)?(se=i(_),V(C.el=_.content.firstChild,_,x)):Ae!==8||y?se=A():se=i(_);break;case Iu:if(y&&(_=i(_),Ae=_.nodeType),Ae===1||Ae===3){se=_;const le=!C.children.length;for(let ie=0;ie<C.staticCount;ie++)le&&(C.children+=se.nodeType===1?se.outerHTML:se.data),ie===C.staticCount-1&&(C.anchor=se),se=i(se);return y?i(se):se}else A();break;case sn:y?se=I(_,C,x,U,v,E):se=A();break;default:if(b&1)(Ae!==1||C.type.toLowerCase()!==_.tagName.toLowerCase())&&!N(_)?se=A():se=f(_,C,x,U,v,E);else if(b&6){C.slotScopeIds=v;const le=o(_);if(y?se=k(_):Eo(_)&&_.data==="teleport start"?se=k(_,_.data,"teleport end"):se=i(_),e(C,le,null,x,U,Zl(le),E),Es(C)&&!C.type.__asyncResolved){let ie;y?(ie=Ze(sn),ie.anchor=se?se.previousSibling:le.lastChild):ie=_.nodeType===3?zu(""):Ze("div"),ie.el=_,C.component.subTree=ie}}else b&64?Ae!==8?se=A():se=C.type.hydrate(_,C,x,U,v,E,t,m):b&128&&(se=C.type.hydrate(_,C,x,U,Zl(o(_)),v,E,t,d))}return S!=null&&So(S,null,U,C),se},f=(_,C,x,U,v,E)=>{E=E||!!C.dynamicChildren;const{type:y,props:A,patchFlag:P,shapeFlag:S,dirs:b,transition:ge}=C,Ae=y==="input"||y==="option";if(Ae||P!==-1){b&&Yn(C,null,x,"created");let se=!1;if(N(_)){se=Lw(null,ge)&&x&&x.vnode.props&&x.vnode.props.appear;const ie=_.content.firstChild;if(se){const xe=ie.getAttribute("class");xe&&(ie.$cls=xe),ge.beforeEnter(ie)}V(ie,_,x),C.el=_=ie}if(S&16&&!(A&&(A.innerHTML||A.textContent))){let ie=m(_.firstChild,C,_,x,U,v,E);for(;ie;){eu(_,1)||so();const xe=ie;ie=ie.nextSibling,a(xe)}}else if(S&8){let ie=C.children;ie[0]===`
`&&(_.tagName==="PRE"||_.tagName==="TEXTAREA")&&(ie=ie.slice(1));const{textContent:xe}=_;xe!==ie&&xe!==ie.replace(/\r\n|\r/g,`
`)&&(eu(_,0)||so(),_.textContent=C.children)}if(A){if(Ae||!E||P&48){const ie=_.tagName.includes("-");for(const xe in A)(Ae&&(xe.endsWith("value")||xe==="indeterminate")||dl(xe)&&!Ao(xe)||xe[0]==="."||ie)&&r(_,xe,null,A[xe],void 0,x)}else if(A.onClick)r(_,"onClick",null,A.onClick,void 0,x);else if(P&4&&ir(A.style))for(const ie in A.style)A.style[ie]}let le;(le=A&&A.onVnodeBeforeMount)&&rn(le,x,C),b&&Yn(C,null,x,"beforeMount"),((le=A&&A.onVnodeMounted)||b||se)&&Bw(()=>{le&&rn(le,x,C),se&&ge.enter(_),b&&Yn(C,null,x,"mounted")},U)}return _.nextSibling},m=(_,C,x,U,v,E,y)=>{y=y||!!C.dynamicChildren;const A=C.children,P=A.length;for(let S=0;S<P;S++){const b=y?A[S]:A[S]=yn(A[S]),ge=b.type===wi;_?(ge&&!y&&S+1<P&&yn(A[S+1]).type===wi&&(c(s(_.data.slice(b.children.length)),x,i(_)),_.data=b.children),_=d(_,b,U,v,E,y)):ge&&!b.children?c(b.el=s(""),x):(eu(x,1)||so(),n(null,b,x,null,U,v,Zl(x),E))}return _},I=(_,C,x,U,v,E)=>{const{slotScopeIds:y}=C;y&&(v=v?v.concat(y):y);const A=o(_),P=m(i(_),C,A,x,U,v,E);return P&&Eo(P)&&P.data==="]"?i(C.anchor=P):(so(),c(C.anchor=u("]"),A,P),P)},T=(_,C,x,U,v,E)=>{if(eu(_.parentElement,1)||so(),C.el=null,E){const P=k(_);for(;;){const S=i(_);if(S&&S!==P)a(S);else break}}const y=i(_),A=o(_);return a(_),n(null,C,A,y,x,U,Zl(A),v),x&&(x.vnode.el=C.el,Bh(x,C.el)),y},k=(_,C="[",x="]")=>{let U=0;for(;_;)if(_=i(_),_&&Eo(_)&&(_.data===C&&U++,_.data===x)){if(U===0)return i(_);U--}return _},V=(_,C,x)=>{const U=C.parentNode;U&&U.replaceChild(_,C);let v=x;for(;v;)v.vnode.el===C&&(v.vnode.el=v.subTree.el=_),v=v.parent},N=_=>_.nodeType===1&&_.tagName==="TEMPLATE";return[h,d]}const iy="data-allow-mismatch",QC={0:"text",1:"children",2:"class",3:"style",4:"attribute"};function eu(t,e){if(e===0||e===1)for(;t&&!t.hasAttribute(iy);)t=t.parentElement;const n=t&&t.getAttribute(iy);if(n==null)return!1;if(n==="")return!0;{const r=n.split(",");return e===0&&r.includes("children")?!0:r.includes(QC[e])}}Nh().requestIdleCallback;Nh().cancelIdleCallback;function JC(t,e){if(Eo(t)&&t.data==="["){let n=1,r=t.nextSibling;for(;r;){if(r.nodeType===1){if(e(r)===!1)break}else if(Eo(r))if(r.data==="]"){if(--n===0)break}else r.data==="["&&n++;r=r.nextSibling}}else e(t)}const Es=t=>!!t.type.__asyncLoader;function oy(t){Ie(t)&&(t={loader:t});const{loader:e,loadingComponent:n,errorComponent:r,delay:s=200,hydrate:i,timeout:o,suspensible:a=!0,onError:c}=t;let u=null,h,d=0;const f=()=>(d++,u=null,m()),m=()=>{let I;return u||(I=u=e().catch(T=>{if(T=T instanceof Error?T:new Error(String(T)),c)return new Promise((k,V)=>{c(T,()=>k(f()),()=>V(T),d+1)});throw T}).then(T=>I!==u&&u?u:(T&&(T.__esModule||T[Symbol.toStringTag]==="Module")&&(T=T.default),h=T,T)))};return js({name:"AsyncComponentWrapper",__asyncLoader:m,__asyncHydrate(I,T,k){let V=!1;(T.bu||(T.bu=[])).push(()=>V=!0);const N=()=>{V||k()},_=i?()=>{const C=i(N,x=>JC(I,x));C&&(T.bum||(T.bum=[])).push(C)}:N;h?_():m().then(()=>!T.isUnmounted&&_())},get __asyncResolved(){return h},setup(){const I=Ut;if(fm(I),h)return()=>tu(h,I);const T=_=>{u=null,_a(_,I,13,!r)};if(a&&I.suspense||Bo)return m().then(_=>()=>tu(_,I)).catch(_=>(T(_),()=>r?Ze(r,{error:_}):null));const k=ft(!1),V=ft(),N=ft(!!s);return s&&setTimeout(()=>{N.value=!1},s),o!=null&&setTimeout(()=>{if(!k.value&&!V.value){const _=new Error(`Async component timed out after ${o}ms.`);T(_),V.value=_}},o),m().then(()=>{k.value=!0,I.parent&&pl(I.parent.vnode)&&I.parent.update()}).catch(_=>{T(_),V.value=_}),()=>{if(k.value&&h)return tu(h,I);if(V.value&&r)return Ze(r,{error:V.value});if(n&&!N.value)return tu(n,I)}}})}function tu(t,e){const{ref:n,props:r,children:s,ce:i}=e.vnode,o=Ze(t,r,s);return o.ref=n,o.ce=i,delete e.vnode.ce,o}const pl=t=>t.type.__isKeepAlive,YC={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(t,{slots:e}){const n=Hi(),r=n.ctx;if(!r.renderer)return()=>{const N=e.default&&e.default();return N&&N.length===1?N[0]:N};const s=new Map,i=new Set;let o=null;const a=n.suspense,{renderer:{p:c,m:u,um:h,o:{createElement:d}}}=r,f=d("div");r.activate=(N,_,C,x,U)=>{const v=N.component;u(N,_,C,0,a),c(v.vnode,N,_,C,v,a,x,N.slotScopeIds,U),_t(()=>{v.isDeactivated=!1,v.a&&bo(v.a);const E=N.props&&N.props.onVnodeMounted;E&&rn(E,v.parent,N)},a)},r.deactivate=N=>{const _=N.component;Gu(_.m),Gu(_.a),u(N,f,null,1,a),_t(()=>{_.da&&bo(_.da);const C=N.props&&N.props.onVnodeUnmounted;C&&rn(C,_.parent,N),_.isDeactivated=!0},a)};function m(N){Qd(N),h(N,n,a,!0)}function I(N){s.forEach((_,C)=>{const x=Qf(Es(_)?_.type.__asyncResolved||{}:_.type);x&&!N(x)&&T(C)})}function T(N){const _=s.get(N);_&&(!o||!Ln(_,o))?m(_):o&&Qd(o),s.delete(N),i.delete(N)}kr(()=>[t.include,t.exclude],([N,_])=>{N&&I(C=>lc(N,C)),_&&I(C=>!lc(_,C))},{flush:"post",deep:!0});let k=null;const V=()=>{k!=null&&(Ku(n.subTree.type)?_t(()=>{s.set(k,nu(n.subTree))},n.subTree.suspense):s.set(k,nu(n.subTree)))};return Mh(V),yw(V),ml(()=>{s.forEach(N=>{const{subTree:_,suspense:C}=n,x=nu(_);if(N.type===x.type&&N.key===x.key){Qd(x);const U=x.component.da;U&&_t(U,C);return}m(N)})}),()=>{if(k=null,!e.default)return o=null;const N=e.default(),_=N[0];if(N.length>1)return o=null,N;if(!Uo(_)||!(_.shapeFlag&4)&&!(_.shapeFlag&128))return o=null,_;let C=nu(_);if(C.type===bt)return o=null,C;const x=C.type,U=Qf(Es(C)?C.type.__asyncResolved||{}:x),{include:v,exclude:E,max:y}=t;if(v&&(!U||!lc(v,U))||E&&U&&lc(E,U))return C.shapeFlag&=-257,o=C,_;const A=C.key==null?x:C.key,P=s.get(A);return C.el&&(C=xr(C),_.shapeFlag&128&&(_.ssContent=C)),k=A,P?(C.el=P.el,C.component=P.component,C.transition&&Mo(C,C.transition),C.shapeFlag|=512,i.delete(A),i.add(A)):(i.add(A),y&&i.size>parseInt(y,10)&&T(i.values().next().value)),C.shapeFlag|=256,o=C,Ku(_.type)?_:C}}},XC=YC;function lc(t,e){return fe(t)?t.some(n=>lc(n,e)):et(t)?t.split(",").includes(e):KP(t)?(t.lastIndex=0,t.test(e)):!1}function mw(t,e){_w(t,"a",e)}function gw(t,e){_w(t,"da",e)}function _w(t,e,n=Ut){const r=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(Lh(e,r,n),n){let s=n.parent;for(;s&&s.parent;)pl(s.parent.vnode)&&ZC(r,e,n,s),s=s.parent}}function ZC(t,e,n,r){const s=Lh(e,t,r,!0);Fh(()=>{Zp(r[e],s)},n)}function Qd(t){t.shapeFlag&=-257,t.shapeFlag&=-513}function nu(t){return t.shapeFlag&128?t.ssContent:t}function Lh(t,e,n=Ut,r=!1){if(n){const s=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{Dr();const a=ki(n),c=$n(e,n,t,o);return a(),Vr(),c});return r?s.unshift(i):s.push(i),i}}const qr=t=>(e,n=Ut)=>{(!Bo||t==="sp")&&Lh(t,(...r)=>e(...r),n)},e0=qr("bm"),Mh=qr("m"),t0=qr("bu"),yw=qr("u"),ml=qr("bum"),Fh=qr("um"),n0=qr("sp"),r0=qr("rtg"),s0=qr("rtc");function Iw(t,e=Ut){Lh("ec",t,e)}const Ew="components";function Mj(t,e){return ww(Ew,t,!0,e)||t}const Tw=Symbol.for("v-ndc");function i0(t){return et(t)?ww(Ew,t,!1)||t:t||Tw}function ww(t,e,n=!0,r=!1){const s=En||Ut;if(s){const i=s.type;{const a=Qf(i,!1);if(a&&(a===e||a===kn(e)||a===Ch(kn(e))))return i}const o=ay(s[t]||i[t],e)||ay(s.appContext[t],e);return!o&&r?i:o}}function ay(t,e){return t&&(t[e]||t[kn(e)]||t[Ch(kn(e))])}function Fj(t,e,n,r){let s;const i=n,o=fe(t);if(o||et(t)){const a=o&&ir(t);let c=!1,u=!1;a&&(c=!Tn(t),u=lr(t),t=Vh(t)),s=new Array(t.length);for(let h=0,d=t.length;h<d;h++)s[h]=e(c?u?Oo(Hn(t[h])):Hn(t[h]):t[h],h,void 0,i)}else if(typeof t=="number"){s=new Array(t);for(let a=0;a<t;a++)s[a]=e(a+1,a,void 0,i)}else if(qe(t))if(t[Symbol.iterator])s=Array.from(t,(a,c)=>e(a,c,void 0,i));else{const a=Object.keys(t);s=new Array(a.length);for(let c=0,u=a.length;c<u;c++){const h=a[c];s[c]=e(t[h],h,c,i)}}else s=[];return s}const jf=t=>t?Kw(t)?jh(t):jf(t.parent):null,Tc=Lt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>jf(t.parent),$root:t=>jf(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>Aw(t),$forceUpdate:t=>t.f||(t.f=()=>{hm(t.update)}),$nextTick:t=>t.n||(t.n=Cs.bind(t.proxy)),$watch:t=>BC.bind(t)}),Jd=(t,e)=>t!==Ke&&!t.__isScriptSetup&&Me(t,e),o0={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:s,props:i,accessCache:o,type:a,appContext:c}=t;if(e[0]!=="$"){const f=o[e];if(f!==void 0)switch(f){case 1:return r[e];case 2:return s[e];case 4:return n[e];case 3:return i[e]}else{if(Jd(r,e))return o[e]=1,r[e];if(s!==Ke&&Me(s,e))return o[e]=2,s[e];if(Me(i,e))return o[e]=3,i[e];if(n!==Ke&&Me(n,e))return o[e]=4,n[e];qf&&(o[e]=0)}}const u=Tc[e];let h,d;if(u)return e==="$attrs"&&Gt(t.attrs,"get",""),u(t);if((h=a.__cssModules)&&(h=h[e]))return h;if(n!==Ke&&Me(n,e))return o[e]=4,n[e];if(d=c.config.globalProperties,Me(d,e))return d[e]},set({_:t},e,n){const{data:r,setupState:s,ctx:i}=t;return Jd(s,e)?(s[e]=n,!0):r!==Ke&&Me(r,e)?(r[e]=n,!0):Me(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:s,props:i,type:o}},a){let c;return!!(n[a]||t!==Ke&&a[0]!=="$"&&Me(t,a)||Jd(e,a)||Me(i,a)||Me(r,a)||Me(Tc,a)||Me(s.config.globalProperties,a)||(c=o.__cssModules)&&c[a])},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Me(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function cy(t){return fe(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}function Uj(t){const e=Hi();let n=t();return Wf(),em(n)&&(n=n.catch(r=>{throw ki(e),r})),[n,()=>ki(e)]}let qf=!0;function a0(t){const e=Aw(t),n=t.proxy,r=t.ctx;qf=!1,e.beforeCreate&&ly(e.beforeCreate,t,"bc");const{data:s,computed:i,methods:o,watch:a,provide:c,inject:u,created:h,beforeMount:d,mounted:f,beforeUpdate:m,updated:I,activated:T,deactivated:k,beforeDestroy:V,beforeUnmount:N,destroyed:_,unmounted:C,render:x,renderTracked:U,renderTriggered:v,errorCaptured:E,serverPrefetch:y,expose:A,inheritAttrs:P,components:S,directives:b,filters:ge}=e;if(u&&c0(u,r,null),o)for(const le in o){const ie=o[le];Ie(ie)&&(r[le]=ie.bind(n))}if(s){const le=s.call(n,n);qe(le)&&(t.data=jr(le))}if(qf=!0,i)for(const le in i){const ie=i[le],xe=Ie(ie)?ie.bind(n,n):Ie(ie.get)?ie.get.bind(n,n):sr,Wn=!Ie(ie)&&Ie(ie.set)?ie.set.bind(n):sr,pn=Kt({get:xe,set:Wn});Object.defineProperty(r,le,{enumerable:!0,configurable:!0,get:()=>pn.value,set:Mt=>pn.value=Mt})}if(a)for(const le in a)vw(a[le],r,n,le);if(c){const le=Ie(c)?c.call(n):c;Reflect.ownKeys(le).forEach(ie=>{Is(ie,le[ie])})}h&&ly(h,t,"c");function se(le,ie){fe(ie)?ie.forEach(xe=>le(xe.bind(n))):ie&&le(ie.bind(n))}if(se(e0,d),se(Mh,f),se(t0,m),se(yw,I),se(mw,T),se(gw,k),se(Iw,E),se(s0,U),se(r0,v),se(ml,N),se(Fh,C),se(n0,y),fe(A))if(A.length){const le=t.exposed||(t.exposed={});A.forEach(ie=>{Object.defineProperty(le,ie,{get:()=>n[ie],set:xe=>n[ie]=xe,enumerable:!0})})}else t.exposed||(t.exposed={});x&&t.render===sr&&(t.render=x),P!=null&&(t.inheritAttrs=P),S&&(t.components=S),b&&(t.directives=b),y&&fm(t)}function c0(t,e,n=sr){fe(t)&&(t=Hf(t));for(const r in t){const s=t[r];let i;qe(s)?"default"in s?i=Vt(s.from||r,s.default,!0):i=Vt(s.from||r):i=Vt(s),it(i)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[r]=i}}function ly(t,e,n){$n(fe(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function vw(t,e,n,r){let s=r.includes(".")?iw(n,r):()=>n[r];if(et(t)){const i=e[t];Ie(i)&&kr(s,i)}else if(Ie(t))kr(s,t.bind(n));else if(qe(t))if(fe(t))t.forEach(i=>vw(i,e,n,r));else{const i=Ie(t.handler)?t.handler.bind(n):e[t.handler];Ie(i)&&kr(s,i,t)}}function Aw(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,a=i.get(e);let c;return a?c=a:!s.length&&!n&&!r?c=e:(c={},s.length&&s.forEach(u=>$u(c,u,o,!0)),$u(c,e,o)),qe(e)&&i.set(e,c),c}function $u(t,e,n,r=!1){const{mixins:s,extends:i}=e;i&&$u(t,i,n,!0),s&&s.forEach(o=>$u(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const a=l0[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const l0={data:uy,props:hy,emits:hy,methods:uc,computed:uc,beforeCreate:Xt,created:Xt,beforeMount:Xt,mounted:Xt,beforeUpdate:Xt,updated:Xt,beforeDestroy:Xt,beforeUnmount:Xt,destroyed:Xt,unmounted:Xt,activated:Xt,deactivated:Xt,errorCaptured:Xt,serverPrefetch:Xt,components:uc,directives:uc,watch:h0,provide:uy,inject:u0};function uy(t,e){return e?t?function(){return Lt(Ie(t)?t.call(this,this):t,Ie(e)?e.call(this,this):e)}:e:t}function u0(t,e){return uc(Hf(t),Hf(e))}function Hf(t){if(fe(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Xt(t,e){return t?[...new Set([].concat(t,e))]:e}function uc(t,e){return t?Lt(Object.create(null),t,e):e}function hy(t,e){return t?fe(t)&&fe(e)?[...new Set([...t,...e])]:Lt(Object.create(null),cy(t),cy(e??{})):e}function h0(t,e){if(!t)return e;if(!e)return t;const n=Lt(Object.create(null),t);for(const r in e)n[r]=Xt(t[r],e[r]);return n}function bw(){return{app:null,config:{isNativeTag:CT,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let d0=0;function f0(t,e){return function(r,s=null){Ie(r)||(r=Lt({},r)),s!=null&&!qe(s)&&(s=null);const i=bw(),o=new WeakSet,a=[];let c=!1;const u=i.app={_uid:d0++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:G0,get config(){return i.config},set config(h){},use(h,...d){return o.has(h)||(h&&Ie(h.install)?(o.add(h),h.install(u,...d)):Ie(h)&&(o.add(h),h(u,...d))),u},mixin(h){return i.mixins.includes(h)||i.mixins.push(h),u},component(h,d){return d?(i.components[h]=d,u):i.components[h]},directive(h,d){return d?(i.directives[h]=d,u):i.directives[h]},mount(h,d,f){if(!c){const m=u._ceVNode||Ze(r,s);return m.appContext=i,f===!0?f="svg":f===!1&&(f=void 0),d&&e?e(m,h):t(m,h,f),c=!0,u._container=h,h.__vue_app__=u,jh(m.component)}},onUnmount(h){a.push(h)},unmount(){c&&($n(a,u._instance,16),t(null,u._container),delete u._container.__vue_app__)},provide(h,d){return i.provides[h]=d,u},runWithContext(h){const d=Ti;Ti=u;try{return h()}finally{Ti=d}}};return u}}let Ti=null;const p0=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${kn(e)}Modifiers`]||t[`${Bs(e)}Modifiers`];function m0(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||Ke;let s=n;const i=e.startsWith("update:"),o=i&&p0(r,e.slice(7));o&&(o.trim&&(s=n.map(h=>et(h)?h.trim():h)),o.number&&(s=n.map(kh)));let a,c=r[a=Hd(e)]||r[a=Hd(kn(e))];!c&&i&&(c=r[a=Hd(Bs(e))]),c&&$n(c,t,6,s);const u=r[a+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,$n(u,t,6,s)}}const g0=new WeakMap;function Rw(t,e,n=!1){const r=n?g0:e.emitsCache,s=r.get(t);if(s!==void 0)return s;const i=t.emits;let o={},a=!1;if(!Ie(t)){const c=u=>{const h=Rw(u,e,!0);h&&(a=!0,Lt(o,h))};!n&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}return!i&&!a?(qe(t)&&r.set(t,null),null):(fe(i)?i.forEach(c=>o[c]=null):Lt(o,i),qe(t)&&r.set(t,o),o)}function Uh(t,e){return!t||!dl(e)?!1:(e=e.slice(2).replace(/Once$/,""),Me(t,e[0].toLowerCase()+e.slice(1))||Me(t,Bs(e))||Me(t,e))}function Yd(t){const{type:e,vnode:n,proxy:r,withProxy:s,propsOptions:[i],slots:o,attrs:a,emit:c,render:u,renderCache:h,props:d,data:f,setupState:m,ctx:I,inheritAttrs:T}=t,k=qu(t);let V,N;try{if(n.shapeFlag&4){const C=s||r,x=C;V=yn(u.call(x,C,h,d,m,f,I)),N=a}else{const C=e;V=yn(C.length>1?C(d,{attrs:a,slots:o,emit:c}):C(d,null)),N=e.props?a:y0(a)}}catch(C){wc.length=0,_a(C,t,1),V=Ze(bt)}let _=V;if(N&&T!==!1){const C=Object.keys(N),{shapeFlag:x}=_;C.length&&x&7&&(i&&C.some(Xp)&&(N=I0(N,i)),_=xr(_,N,!1,!0))}return n.dirs&&(_=xr(_,null,!1,!0),_.dirs=_.dirs?_.dirs.concat(n.dirs):n.dirs),n.transition&&Mo(_,n.transition),V=_,qu(k),V}function _0(t,e=!0){let n;for(let r=0;r<t.length;r++){const s=t[r];if(Uo(s)){if(s.type!==bt||s.children==="v-if"){if(n)return;n=s}}else return}return n}const y0=t=>{let e;for(const n in t)(n==="class"||n==="style"||dl(n))&&((e||(e={}))[n]=t[n]);return e},I0=(t,e)=>{const n={};for(const r in t)(!Xp(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function E0(t,e,n){const{props:r,children:s,component:i}=t,{props:o,children:a,patchFlag:c}=e,u=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return r?dy(r,o,u):!!o;if(c&8){const h=e.dynamicProps;for(let d=0;d<h.length;d++){const f=h[d];if(o[f]!==r[f]&&!Uh(u,f))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?dy(r,o,u):!0:!!o;return!1}function dy(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(e[i]!==t[i]&&!Uh(n,i))return!0}return!1}function Bh({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const Sw={},Pw=()=>Object.create(Sw),Cw=t=>Object.getPrototypeOf(t)===Sw;function T0(t,e,n,r=!1){const s={},i=Pw();t.propsDefaults=Object.create(null),kw(t,e,s,i);for(const o in t.propsOptions[0])o in s||(s[o]=void 0);n?t.props=r?s:er(s):t.type.props?t.props=s:t.props=i,t.attrs=i}function w0(t,e,n,r){const{props:s,attrs:i,vnode:{patchFlag:o}}=t,a=Ne(s),[c]=t.propsOptions;let u=!1;if((r||o>0)&&!(o&16)){if(o&8){const h=t.vnode.dynamicProps;for(let d=0;d<h.length;d++){let f=h[d];if(Uh(t.emitsOptions,f))continue;const m=e[f];if(c)if(Me(i,f))m!==i[f]&&(i[f]=m,u=!0);else{const I=kn(f);s[I]=$f(c,a,I,m,t,!1)}else m!==i[f]&&(i[f]=m,u=!0)}}}else{kw(t,e,s,i)&&(u=!0);let h;for(const d in a)(!e||!Me(e,d)&&((h=Bs(d))===d||!Me(e,h)))&&(c?n&&(n[d]!==void 0||n[h]!==void 0)&&(s[d]=$f(c,a,d,void 0,t,!0)):delete s[d]);if(i!==a)for(const d in i)(!e||!Me(e,d))&&(delete i[d],u=!0)}u&&Ir(t.attrs,"set","")}function kw(t,e,n,r){const[s,i]=t.propsOptions;let o=!1,a;if(e)for(let c in e){if(Ao(c))continue;const u=e[c];let h;s&&Me(s,h=kn(c))?!i||!i.includes(h)?n[h]=u:(a||(a={}))[h]=u:Uh(t.emitsOptions,c)||(!(c in r)||u!==r[c])&&(r[c]=u,o=!0)}if(i){const c=Ne(n),u=a||Ke;for(let h=0;h<i.length;h++){const d=i[h];n[d]=$f(s,c,d,u[d],t,!Me(u,d))}}return o}function $f(t,e,n,r,s,i){const o=t[n];if(o!=null){const a=Me(o,"default");if(a&&r===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&Ie(c)){const{propsDefaults:u}=s;if(n in u)r=u[n];else{const h=ki(s);r=u[n]=c.call(null,e),h()}}else r=c;s.ce&&s.ce._setProp(n,r)}o[0]&&(i&&!a?r=!1:o[1]&&(r===""||r===Bs(n))&&(r=!0))}return r}const v0=new WeakMap;function Nw(t,e,n=!1){const r=n?v0:e.propsCache,s=r.get(t);if(s)return s;const i=t.props,o={},a=[];let c=!1;if(!Ie(t)){const h=d=>{c=!0;const[f,m]=Nw(d,e,!0);Lt(o,f),m&&a.push(...m)};!n&&e.mixins.length&&e.mixins.forEach(h),t.extends&&h(t.extends),t.mixins&&t.mixins.forEach(h)}if(!i&&!c)return qe(t)&&r.set(t,wo),wo;if(fe(i))for(let h=0;h<i.length;h++){const d=kn(i[h]);fy(d)&&(o[d]=Ke)}else if(i)for(const h in i){const d=kn(h);if(fy(d)){const f=i[h],m=o[d]=fe(f)||Ie(f)?{type:f}:Lt({},f),I=m.type;let T=!1,k=!0;if(fe(I))for(let V=0;V<I.length;++V){const N=I[V],_=Ie(N)&&N.name;if(_==="Boolean"){T=!0;break}else _==="String"&&(k=!1)}else T=Ie(I)&&I.name==="Boolean";m[0]=T,m[1]=k,(T||Me(m,"default"))&&a.push(d)}}const u=[o,a];return qe(t)&&r.set(t,u),u}function fy(t){return t[0]!=="$"&&!Ao(t)}const pm=t=>t==="_"||t==="_ctx"||t==="$stable",mm=t=>fe(t)?t.map(yn):[yn(t)],A0=(t,e,n)=>{if(e._n)return e;const r=ks((...s)=>mm(e(...s)),n);return r._c=!1,r},Dw=(t,e,n)=>{const r=t._ctx;for(const s in t){if(pm(s))continue;const i=t[s];if(Ie(i))e[s]=A0(s,i,r);else if(i!=null){const o=mm(i);e[s]=()=>o}}},Vw=(t,e)=>{const n=mm(e);t.slots.default=()=>n},xw=(t,e,n)=>{for(const r in e)(n||!pm(r))&&(t[r]=e[r])},b0=(t,e,n)=>{const r=t.slots=Pw();if(t.vnode.shapeFlag&32){const s=e._;s?(xw(r,e,n),n&&DT(r,"_",s,!0)):Dw(e,r)}else e&&Vw(t,e)},R0=(t,e,n)=>{const{vnode:r,slots:s}=t;let i=!0,o=Ke;if(r.shapeFlag&32){const a=e._;a?n&&a===1?i=!1:xw(s,e,n):(i=!e.$stable,Dw(e,s)),o=e}else e&&(Vw(t,e),o={default:1});if(i)for(const a in s)!pm(a)&&o[a]==null&&delete s[a]},_t=Bw;function S0(t){return Ow(t)}function P0(t){return Ow(t,zC)}function Ow(t,e){const n=Nh();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:o,createText:a,createComment:c,setText:u,setElementText:h,parentNode:d,nextSibling:f,setScopeId:m=sr,insertStaticContent:I}=t,T=(R,D,F,$=null,j=null,K=null,J=void 0,z=null,Y=!!D.dynamicChildren)=>{if(R===D)return;R&&!Ln(R,D)&&($=H(R),Mt(R,j,K,!0),R=null),D.patchFlag===-2&&(Y=!1,D.dynamicChildren=null);const{type:W,ref:pe,shapeFlag:ne}=D;switch(W){case wi:k(R,D,F,$);break;case bt:V(R,D,F,$);break;case Iu:R==null&&N(D,F,$,J);break;case sn:S(R,D,F,$,j,K,J,z,Y);break;default:ne&1?x(R,D,F,$,j,K,J,z,Y):ne&6?b(R,D,F,$,j,K,J,z,Y):(ne&64||ne&128)&&W.process(R,D,F,$,j,K,J,z,Y,de)}pe!=null&&j?So(pe,R&&R.ref,K,D||R,!D):pe==null&&R&&R.ref!=null&&So(R.ref,null,K,R,!0)},k=(R,D,F,$)=>{if(R==null)r(D.el=a(D.children),F,$);else{const j=D.el=R.el;D.children!==R.children&&u(j,D.children)}},V=(R,D,F,$)=>{R==null?r(D.el=c(D.children||""),F,$):D.el=R.el},N=(R,D,F,$)=>{[R.el,R.anchor]=I(R.children,D,F,$,R.el,R.anchor)},_=({el:R,anchor:D},F,$)=>{let j;for(;R&&R!==D;)j=f(R),r(R,F,$),R=j;r(D,F,$)},C=({el:R,anchor:D})=>{let F;for(;R&&R!==D;)F=f(R),s(R),R=F;s(D)},x=(R,D,F,$,j,K,J,z,Y)=>{if(D.type==="svg"?J="svg":D.type==="math"&&(J="mathml"),R==null)U(D,F,$,j,K,J,z,Y);else{const W=R.el&&R.el._isVueCE?R.el:null;try{W&&W._beginPatch(),y(R,D,j,K,J,z,Y)}finally{W&&W._endPatch()}}},U=(R,D,F,$,j,K,J,z)=>{let Y,W;const{props:pe,shapeFlag:ne,transition:ce,dirs:Ee}=R;if(Y=R.el=o(R.type,K,pe&&pe.is,pe),ne&8?h(Y,R.children):ne&16&&E(R.children,Y,null,$,j,Xd(R,K),J,z),Ee&&Yn(R,null,$,"created"),v(Y,R,R.scopeId,J,$),pe){for(const Oe in pe)Oe!=="value"&&!Ao(Oe)&&i(Y,Oe,null,pe[Oe],K,$);"value"in pe&&i(Y,"value",null,pe.value,K),(W=pe.onVnodeBeforeMount)&&rn(W,$,R)}Ee&&Yn(R,null,$,"beforeMount");const Se=Lw(j,ce);Se&&ce.beforeEnter(Y),r(Y,D,F),((W=pe&&pe.onVnodeMounted)||Se||Ee)&&_t(()=>{W&&rn(W,$,R),Se&&ce.enter(Y),Ee&&Yn(R,null,$,"mounted")},j)},v=(R,D,F,$,j)=>{if(F&&m(R,F),$)for(let K=0;K<$.length;K++)m(R,$[K]);if(j){let K=j.subTree;if(D===K||Ku(K.type)&&(K.ssContent===D||K.ssFallback===D)){const J=j.vnode;v(R,J,J.scopeId,J.slotScopeIds,j.parent)}}},E=(R,D,F,$,j,K,J,z,Y=0)=>{for(let W=Y;W<R.length;W++){const pe=R[W]=z?hs(R[W]):yn(R[W]);T(null,pe,D,F,$,j,K,J,z)}},y=(R,D,F,$,j,K,J)=>{const z=D.el=R.el;let{patchFlag:Y,dynamicChildren:W,dirs:pe}=D;Y|=R.patchFlag&16;const ne=R.props||Ke,ce=D.props||Ke;let Ee;if(F&&ti(F,!1),(Ee=ce.onVnodeBeforeUpdate)&&rn(Ee,F,D,R),pe&&Yn(D,R,F,"beforeUpdate"),F&&ti(F,!0),(ne.innerHTML&&ce.innerHTML==null||ne.textContent&&ce.textContent==null)&&h(z,""),W?A(R.dynamicChildren,W,z,F,$,Xd(D,j),K):J||ie(R,D,z,null,F,$,Xd(D,j),K,!1),Y>0){if(Y&16)P(z,ne,ce,F,j);else if(Y&2&&ne.class!==ce.class&&i(z,"class",null,ce.class,j),Y&4&&i(z,"style",ne.style,ce.style,j),Y&8){const Se=D.dynamicProps;for(let Oe=0;Oe<Se.length;Oe++){const Ve=Se[Oe],jt=ne[Ve],Tt=ce[Ve];(Tt!==jt||Ve==="value")&&i(z,Ve,jt,Tt,j,F)}}Y&1&&R.children!==D.children&&h(z,D.children)}else!J&&W==null&&P(z,ne,ce,F,j);((Ee=ce.onVnodeUpdated)||pe)&&_t(()=>{Ee&&rn(Ee,F,D,R),pe&&Yn(D,R,F,"updated")},$)},A=(R,D,F,$,j,K,J)=>{for(let z=0;z<D.length;z++){const Y=R[z],W=D[z],pe=Y.el&&(Y.type===sn||!Ln(Y,W)||Y.shapeFlag&198)?d(Y.el):F;T(Y,W,pe,null,$,j,K,J,!0)}},P=(R,D,F,$,j)=>{if(D!==F){if(D!==Ke)for(const K in D)!Ao(K)&&!(K in F)&&i(R,K,D[K],null,j,$);for(const K in F){if(Ao(K))continue;const J=F[K],z=D[K];J!==z&&K!=="value"&&i(R,K,z,J,j,$)}"value"in F&&i(R,"value",D.value,F.value,j)}},S=(R,D,F,$,j,K,J,z,Y)=>{const W=D.el=R?R.el:a(""),pe=D.anchor=R?R.anchor:a("");let{patchFlag:ne,dynamicChildren:ce,slotScopeIds:Ee}=D;Ee&&(z=z?z.concat(Ee):Ee),R==null?(r(W,F,$),r(pe,F,$),E(D.children||[],F,pe,j,K,J,z,Y)):ne>0&&ne&64&&ce&&R.dynamicChildren&&R.dynamicChildren.length===ce.length?(A(R.dynamicChildren,ce,F,j,K,J,z),(D.key!=null||j&&D===j.subTree)&&gm(R,D,!0)):ie(R,D,F,pe,j,K,J,z,Y)},b=(R,D,F,$,j,K,J,z,Y)=>{D.slotScopeIds=z,R==null?D.shapeFlag&512?j.ctx.activate(D,F,$,J,Y):ge(D,F,$,j,K,J,Y):Ae(R,D,Y)},ge=(R,D,F,$,j,K,J)=>{const z=R.component=U0(R,$,j);if(pl(R)&&(z.ctx.renderer=de),B0(z,!1,J),z.asyncDep){if(j&&j.registerDep(z,se,J),!R.el){const Y=z.subTree=Ze(bt);V(null,Y,D,F),R.placeholder=Y.el}}else se(z,R,D,F,j,K,J)},Ae=(R,D,F)=>{const $=D.component=R.component;if(E0(R,D,F))if($.asyncDep&&!$.asyncResolved){le($,D,F);return}else $.next=D,$.update();else D.el=R.el,$.vnode=D},se=(R,D,F,$,j,K,J)=>{const z=()=>{if(R.isMounted){let{next:ne,bu:ce,u:Ee,parent:Se,vnode:Oe}=R;{const wt=Mw(R);if(wt){ne&&(ne.el=Oe.el,le(R,ne,J)),wt.asyncDep.then(()=>{R.isUnmounted||z()});return}}let Ve=ne,jt;ti(R,!1),ne?(ne.el=Oe.el,le(R,ne,J)):ne=Oe,ce&&bo(ce),(jt=ne.props&&ne.props.onVnodeBeforeUpdate)&&rn(jt,Se,ne,Oe),ti(R,!0);const Tt=Yd(R),nn=R.subTree;R.subTree=Tt,T(nn,Tt,d(nn.el),H(nn),R,j,K),ne.el=Tt.el,Ve===null&&Bh(R,Tt.el),Ee&&_t(Ee,j),(jt=ne.props&&ne.props.onVnodeUpdated)&&_t(()=>rn(jt,Se,ne,Oe),j)}else{let ne;const{el:ce,props:Ee}=D,{bm:Se,m:Oe,parent:Ve,root:jt,type:Tt}=R,nn=Es(D);if(ti(R,!1),Se&&bo(Se),!nn&&(ne=Ee&&Ee.onVnodeBeforeMount)&&rn(ne,Ve,D),ti(R,!0),ce&&$e){const wt=()=>{R.subTree=Yd(R),$e(ce,R.subTree,R,j,null)};nn&&Tt.__asyncHydrate?Tt.__asyncHydrate(ce,R,wt):wt()}else{jt.ce&&jt.ce._def.shadowRoot!==!1&&jt.ce._injectChildStyle(Tt);const wt=R.subTree=Yd(R);T(null,wt,F,$,R,j,K),D.el=wt.el}if(Oe&&_t(Oe,j),!nn&&(ne=Ee&&Ee.onVnodeMounted)){const wt=D;_t(()=>rn(ne,Ve,wt),j)}(D.shapeFlag&256||Ve&&Es(Ve.vnode)&&Ve.vnode.shapeFlag&256)&&R.a&&_t(R.a,j),R.isMounted=!0,D=F=$=null}};R.scope.on();const Y=R.effect=new FT(z);R.scope.off();const W=R.update=Y.run.bind(Y),pe=R.job=Y.runIfDirty.bind(Y);pe.i=R,pe.id=R.uid,Y.scheduler=()=>hm(pe),ti(R,!0),W()},le=(R,D,F)=>{D.component=R;const $=R.vnode.props;R.vnode=D,R.next=null,w0(R,D.props,$,F),R0(R,D.children,F),Dr(),X_(R),Vr()},ie=(R,D,F,$,j,K,J,z,Y=!1)=>{const W=R&&R.children,pe=R?R.shapeFlag:0,ne=D.children,{patchFlag:ce,shapeFlag:Ee}=D;if(ce>0){if(ce&128){Wn(W,ne,F,$,j,K,J,z,Y);return}else if(ce&256){xe(W,ne,F,$,j,K,J,z,Y);return}}Ee&8?(pe&16&&Bt(W,j,K),ne!==W&&h(F,ne)):pe&16?Ee&16?Wn(W,ne,F,$,j,K,J,z,Y):Bt(W,j,K,!0):(pe&8&&h(F,""),Ee&16&&E(ne,F,$,j,K,J,z,Y))},xe=(R,D,F,$,j,K,J,z,Y)=>{R=R||wo,D=D||wo;const W=R.length,pe=D.length,ne=Math.min(W,pe);let ce;for(ce=0;ce<ne;ce++){const Ee=D[ce]=Y?hs(D[ce]):yn(D[ce]);T(R[ce],Ee,F,null,j,K,J,z,Y)}W>pe?Bt(R,j,K,!0,!1,ne):E(D,F,$,j,K,J,z,Y,ne)},Wn=(R,D,F,$,j,K,J,z,Y)=>{let W=0;const pe=D.length;let ne=R.length-1,ce=pe-1;for(;W<=ne&&W<=ce;){const Ee=R[W],Se=D[W]=Y?hs(D[W]):yn(D[W]);if(Ln(Ee,Se))T(Ee,Se,F,null,j,K,J,z,Y);else break;W++}for(;W<=ne&&W<=ce;){const Ee=R[ne],Se=D[ce]=Y?hs(D[ce]):yn(D[ce]);if(Ln(Ee,Se))T(Ee,Se,F,null,j,K,J,z,Y);else break;ne--,ce--}if(W>ne){if(W<=ce){const Ee=ce+1,Se=Ee<pe?D[Ee].el:$;for(;W<=ce;)T(null,D[W]=Y?hs(D[W]):yn(D[W]),F,Se,j,K,J,z,Y),W++}}else if(W>ce)for(;W<=ne;)Mt(R[W],j,K,!0),W++;else{const Ee=W,Se=W,Oe=new Map;for(W=Se;W<=ce;W++){const dt=D[W]=Y?hs(D[W]):yn(D[W]);dt.key!=null&&Oe.set(dt.key,W)}let Ve,jt=0;const Tt=ce-Se+1;let nn=!1,wt=0;const fr=new Array(Tt);for(W=0;W<Tt;W++)fr[W]=0;for(W=Ee;W<=ne;W++){const dt=R[W];if(jt>=Tt){Mt(dt,j,K,!0);continue}let mn;if(dt.key!=null)mn=Oe.get(dt.key);else for(Ve=Se;Ve<=ce;Ve++)if(fr[Ve-Se]===0&&Ln(dt,D[Ve])){mn=Ve;break}mn===void 0?Mt(dt,j,K,!0):(fr[mn-Se]=W+1,mn>=wt?wt=mn:nn=!0,T(dt,D[mn],F,null,j,K,J,z,Y),jt++)}const Zi=nn?C0(fr):wo;for(Ve=Zi.length-1,W=Tt-1;W>=0;W--){const dt=Se+W,mn=D[dt],Js=D[dt+1],La=dt+1<pe?Js.el||Fw(Js):$;fr[W]===0?T(null,mn,F,La,j,K,J,z,Y):nn&&(Ve<0||W!==Zi[Ve]?pn(mn,F,La,2):Ve--)}}},pn=(R,D,F,$,j=null)=>{const{el:K,type:J,transition:z,children:Y,shapeFlag:W}=R;if(W&6){pn(R.component.subTree,D,F,$);return}if(W&128){R.suspense.move(D,F,$);return}if(W&64){J.move(R,D,F,de);return}if(J===sn){r(K,D,F);for(let ne=0;ne<Y.length;ne++)pn(Y[ne],D,F,$);r(R.anchor,D,F);return}if(J===Iu){_(R,D,F);return}if($!==2&&W&1&&z)if($===0)z.beforeEnter(K),r(K,D,F),_t(()=>z.enter(K),j);else{const{leave:ne,delayLeave:ce,afterLeave:Ee}=z,Se=()=>{R.ctx.isUnmounted?s(K):r(K,D,F)},Oe=()=>{K._isLeaving&&K[yr](!0),ne(K,()=>{Se(),Ee&&Ee()})};ce?ce(K,Se,Oe):Oe()}else r(K,D,F)},Mt=(R,D,F,$=!1,j=!1)=>{const{type:K,props:J,ref:z,children:Y,dynamicChildren:W,shapeFlag:pe,patchFlag:ne,dirs:ce,cacheIndex:Ee}=R;if(ne===-2&&(j=!1),z!=null&&(Dr(),So(z,null,F,R,!0),Vr()),Ee!=null&&(D.renderCache[Ee]=void 0),pe&256){D.ctx.deactivate(R);return}const Se=pe&1&&ce,Oe=!Es(R);let Ve;if(Oe&&(Ve=J&&J.onVnodeBeforeUnmount)&&rn(Ve,D,R),pe&6)xn(R.component,F,$);else{if(pe&128){R.suspense.unmount(F,$);return}Se&&Yn(R,null,D,"beforeUnmount"),pe&64?R.type.remove(R,D,F,de,$):W&&!W.hasOnce&&(K!==sn||ne>0&&ne&64)?Bt(W,D,F,!1,!0):(K===sn&&ne&384||!j&&pe&16)&&Bt(Y,D,F),$&&dr(R)}(Oe&&(Ve=J&&J.onVnodeUnmounted)||Se)&&_t(()=>{Ve&&rn(Ve,D,R),Se&&Yn(R,null,D,"unmounted")},F)},dr=R=>{const{type:D,el:F,anchor:$,transition:j}=R;if(D===sn){Vn(F,$);return}if(D===Iu){C(R);return}const K=()=>{s(F),j&&!j.persisted&&j.afterLeave&&j.afterLeave()};if(R.shapeFlag&1&&j&&!j.persisted){const{leave:J,delayLeave:z}=j,Y=()=>J(F,K);z?z(R.el,K,Y):Y()}else K()},Vn=(R,D)=>{let F;for(;R!==D;)F=f(R),s(R),R=F;s(D)},xn=(R,D,F)=>{const{bum:$,scope:j,job:K,subTree:J,um:z,m:Y,a:W}=R;Gu(Y),Gu(W),$&&bo($),j.stop(),K&&(K.flags|=8,Mt(J,R,D,F)),z&&_t(z,D),_t(()=>{R.isUnmounted=!0},D)},Bt=(R,D,F,$=!1,j=!1,K=0)=>{for(let J=K;J<R.length;J++)Mt(R[J],D,F,$,j)},H=R=>{if(R.shapeFlag&6)return H(R.component.subTree);if(R.shapeFlag&128)return R.suspense.next();const D=f(R.anchor||R.el),F=D&&D[ow];return F?f(F):D};let oe=!1;const te=(R,D,F)=>{let $;R==null?D._vnode&&(Mt(D._vnode,null,null,!0),$=D._vnode.component):T(D._vnode||null,R,D,null,null,null,F),D._vnode=R,oe||(oe=!0,X_($),ju(),oe=!1)},de={p:T,um:Mt,m:pn,r:dr,mt:ge,mc:E,pc:ie,pbc:A,n:H,o:t};let ve,$e;return e&&([ve,$e]=e(de)),{render:te,hydrate:ve,createApp:f0(te,ve)}}function Xd({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function ti({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function Lw(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function gm(t,e,n=!1){const r=t.children,s=e.children;if(fe(r)&&fe(s))for(let i=0;i<r.length;i++){const o=r[i];let a=s[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[i]=hs(s[i]),a.el=o.el),!n&&a.patchFlag!==-2&&gm(o,a)),a.type===wi&&(a.patchFlag!==-1?a.el=o.el:a.__elIndex=i+(t.type===sn?1:0)),a.type===bt&&!a.el&&(a.el=o.el)}}function C0(t){const e=t.slice(),n=[0];let r,s,i,o,a;const c=t.length;for(r=0;r<c;r++){const u=t[r];if(u!==0){if(s=n[n.length-1],t[s]<u){e[r]=s,n.push(r);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,t[n[a]]<u?i=a+1:o=a;u<t[n[i]]&&(i>0&&(e[r]=n[i-1]),n[i]=r)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function Mw(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Mw(e)}function Gu(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}function Fw(t){if(t.placeholder)return t.placeholder;const e=t.component;return e?Fw(e.subTree):null}const Ku=t=>t.__isSuspense;let Gf=0;const k0={name:"Suspense",__isSuspense:!0,process(t,e,n,r,s,i,o,a,c,u){if(t==null)N0(e,n,r,s,i,o,a,c,u);else{if(i&&i.deps>0&&!t.suspense.isInFallback){e.suspense=t.suspense,e.suspense.vnode=e,e.el=t.el;return}D0(t,e,n,r,s,o,a,c,u)}},hydrate:V0,normalize:x0},_m=k0;function $c(t,e){const n=t.props&&t.props[e];Ie(n)&&n()}function N0(t,e,n,r,s,i,o,a,c){const{p:u,o:{createElement:h}}=c,d=h("div"),f=t.suspense=Uw(t,s,r,e,d,n,i,o,a,c);u(null,f.pendingBranch=t.ssContent,d,null,r,f,i,o),f.deps>0?($c(t,"onPending"),$c(t,"onFallback"),u(null,t.ssFallback,e,n,r,null,i,o),Po(f,t.ssFallback)):f.resolve(!1,!0)}function D0(t,e,n,r,s,i,o,a,{p:c,um:u,o:{createElement:h}}){const d=e.suspense=t.suspense;d.vnode=e,e.el=t.el;const f=e.ssContent,m=e.ssFallback,{activeBranch:I,pendingBranch:T,isInFallback:k,isHydrating:V}=d;if(T)d.pendingBranch=f,Ln(T,f)?(c(T,f,d.hiddenContainer,null,s,d,i,o,a),d.deps<=0?d.resolve():k&&(V||(c(I,m,n,r,s,null,i,o,a),Po(d,m)))):(d.pendingId=Gf++,V?(d.isHydrating=!1,d.activeBranch=T):u(T,s,d),d.deps=0,d.effects.length=0,d.hiddenContainer=h("div"),k?(c(null,f,d.hiddenContainer,null,s,d,i,o,a),d.deps<=0?d.resolve():(c(I,m,n,r,s,null,i,o,a),Po(d,m))):I&&Ln(I,f)?(c(I,f,n,r,s,d,i,o,a),d.resolve(!0)):(c(null,f,d.hiddenContainer,null,s,d,i,o,a),d.deps<=0&&d.resolve()));else if(I&&Ln(I,f))c(I,f,n,r,s,d,i,o,a),Po(d,f);else if($c(e,"onPending"),d.pendingBranch=f,f.shapeFlag&512?d.pendingId=f.component.suspenseId:d.pendingId=Gf++,c(null,f,d.hiddenContainer,null,s,d,i,o,a),d.deps<=0)d.resolve();else{const{timeout:N,pendingId:_}=d;N>0?setTimeout(()=>{d.pendingId===_&&d.fallback(m)},N):N===0&&d.fallback(m)}}function Uw(t,e,n,r,s,i,o,a,c,u,h=!1){const{p:d,m:f,um:m,n:I,o:{parentNode:T,remove:k}}=u;let V;const N=O0(t);N&&e&&e.pendingBranch&&(V=e.pendingId,e.deps++);const _=t.props?VT(t.props.timeout):void 0,C=i,x={vnode:t,parent:e,parentComponent:n,namespace:o,container:r,hiddenContainer:s,deps:0,pendingId:Gf++,timeout:typeof _=="number"?_:-1,activeBranch:null,pendingBranch:null,isInFallback:!h,isHydrating:h,isUnmounted:!1,effects:[],resolve(U=!1,v=!1){const{vnode:E,activeBranch:y,pendingBranch:A,pendingId:P,effects:S,parentComponent:b,container:ge,isInFallback:Ae}=x;let se=!1;x.isHydrating?x.isHydrating=!1:U||(se=y&&A.transition&&A.transition.mode==="out-in",se&&(y.transition.afterLeave=()=>{P===x.pendingId&&(f(A,ge,i===C?I(y):i,0),Ff(S),Ae&&E.ssFallback&&(E.ssFallback.el=null))}),y&&(T(y.el)===ge&&(i=I(y)),m(y,b,x,!0),!se&&Ae&&E.ssFallback&&_t(()=>E.ssFallback.el=null,x)),se||f(A,ge,i,0)),Po(x,A),x.pendingBranch=null,x.isInFallback=!1;let le=x.parent,ie=!1;for(;le;){if(le.pendingBranch){le.effects.push(...S),ie=!0;break}le=le.parent}!ie&&!se&&Ff(S),x.effects=[],N&&e&&e.pendingBranch&&V===e.pendingId&&(e.deps--,e.deps===0&&!v&&e.resolve()),$c(E,"onResolve")},fallback(U){if(!x.pendingBranch)return;const{vnode:v,activeBranch:E,parentComponent:y,container:A,namespace:P}=x;$c(v,"onFallback");const S=I(E),b=()=>{x.isInFallback&&(d(null,U,A,S,y,null,P,a,c),Po(x,U))},ge=U.transition&&U.transition.mode==="out-in";ge&&(E.transition.afterLeave=b),x.isInFallback=!0,m(E,y,null,!0),ge||b()},move(U,v,E){x.activeBranch&&f(x.activeBranch,U,v,E),x.container=U},next(){return x.activeBranch&&I(x.activeBranch)},registerDep(U,v,E){const y=!!x.pendingBranch;y&&x.deps++;const A=U.vnode.el;U.asyncDep.catch(P=>{_a(P,U,0)}).then(P=>{if(U.isUnmounted||x.isUnmounted||x.pendingId!==U.suspenseId)return;U.asyncResolved=!0;const{vnode:S}=U;zf(U,P),A&&(S.el=A);const b=!A&&U.subTree.el;v(U,S,T(A||U.subTree.el),A?null:I(U.subTree),x,o,E),b&&(S.placeholder=null,k(b)),Bh(U,S.el),y&&--x.deps===0&&x.resolve()})},unmount(U,v){x.isUnmounted=!0,x.activeBranch&&m(x.activeBranch,n,U,v),x.pendingBranch&&m(x.pendingBranch,n,U,v)}};return x}function V0(t,e,n,r,s,i,o,a,c){const u=e.suspense=Uw(e,r,n,t.parentNode,document.createElement("div"),null,s,i,o,a,!0),h=c(t,u.pendingBranch=e.ssContent,n,u,i,o);return u.deps===0&&u.resolve(!1,!0),h}function x0(t){const{shapeFlag:e,children:n}=t,r=e&32;t.ssContent=py(r?n.default:n),t.ssFallback=r?py(n.fallback):Ze(bt)}function py(t){let e;if(Ie(t)){const n=Fo&&t._c;n&&(t._d=!1,De()),t=t(),n&&(t._d=!0,e=an,jw())}return fe(t)&&(t=_0(t)),t=yn(t),e&&!t.dynamicChildren&&(t.dynamicChildren=e.filter(n=>n!==t)),t}function Bw(t,e){e&&e.pendingBranch?fe(t)?e.effects.push(...t):e.effects.push(t):Ff(t)}function Po(t,e){t.activeBranch=e;const{vnode:n,parentComponent:r}=t;let s=e.el;for(;!s&&e.component;)e=e.component.subTree,s=e.el;n.el=s,r&&r.subTree===n&&(r.vnode.el=s,Bh(r,s))}function O0(t){const e=t.props&&t.props.suspensible;return e!=null&&e!==!1}const sn=Symbol.for("v-fgt"),wi=Symbol.for("v-txt"),bt=Symbol.for("v-cmt"),Iu=Symbol.for("v-stc"),wc=[];let an=null;function De(t=!1){wc.push(an=t?null:[])}function jw(){wc.pop(),an=wc[wc.length-1]||null}let Fo=1;function Wu(t,e=!1){Fo+=t,t<0&&an&&e&&(an.hasOnce=!0)}function qw(t){return t.dynamicChildren=Fo>0?an||wo:null,jw(),Fo>0&&an&&an.push(t),t}function yt(t,e,n,r,s,i){return qw(_e(t,e,n,r,s,i,!0))}function In(t,e,n,r,s){return qw(Ze(t,e,n,r,s,!0))}function Uo(t){return t?t.__v_isVNode===!0:!1}function Ln(t,e){return t.type===e.type&&t.key===e.key}const Hw=({key:t})=>t??null,Eu=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?et(t)||it(t)||Ie(t)?{i:En,r:t,k:e,f:!!n}:t:null);function _e(t,e=null,n=null,r=0,s=null,i=t===sn?0:1,o=!1,a=!1){const c={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Hw(e),ref:e&&Eu(e),scopeId:sw,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:En};return a?(ym(c,n),i&128&&t.normalize(c)):n&&(c.shapeFlag|=et(n)?8:16),Fo>0&&!o&&an&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&an.push(c),c}const Ze=L0;function L0(t,e=null,n=null,r=0,s=null,i=!1){if((!t||t===Tw)&&(t=bt),Uo(t)){const a=xr(t,e,!0);return n&&ym(a,n),Fo>0&&!i&&an&&(a.shapeFlag&6?an[an.indexOf(t)]=a:an.push(a)),a.patchFlag=-2,a}if($0(t)&&(t=t.__vccOpts),e){e=$w(e);let{class:a,style:c}=e;a&&!et(a)&&(e.class=Pi(a)),qe(c)&&(xh(c)&&!fe(c)&&(c=Lt({},c)),e.style=Dh(c))}const o=et(t)?1:Ku(t)?128:aw(t)?64:qe(t)?4:Ie(t)?2:0;return _e(t,e,n,r,s,o,i,!0)}function $w(t){return t?xh(t)||Cw(t)?Lt({},t):t:null}function xr(t,e,n=!1,r=!1){const{props:s,ref:i,patchFlag:o,children:a,transition:c}=t,u=e?Gw(s||{},e):s,h={__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&Hw(u),ref:e&&e.ref?n&&i?fe(i)?i.concat(Eu(e)):[i,Eu(e)]:Eu(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==sn?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:c,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&xr(t.ssContent),ssFallback:t.ssFallback&&xr(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return c&&r&&Mo(h,c.clone(h)),h}function zu(t=" ",e=0){return Ze(wi,null,t,e)}function Fn(t="",e=!1){return e?(De(),In(bt,null,t)):Ze(bt,null,t)}function yn(t){return t==null||typeof t=="boolean"?Ze(bt):fe(t)?Ze(sn,null,t.slice()):Uo(t)?hs(t):Ze(wi,null,String(t))}function hs(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:xr(t)}function ym(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(fe(e))n=16;else if(typeof e=="object")if(r&65){const s=e.default;s&&(s._c&&(s._d=!1),ym(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!Cw(e)?e._ctx=En:s===3&&En&&(En.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Ie(e)?(e={default:e,_ctx:En},n=32):(e=String(e),r&64?(n=16,e=[zu(e)]):n=8);t.children=e,t.shapeFlag|=n}function Gw(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const s in r)if(s==="class")e.class!==r.class&&(e.class=Pi([e.class,r.class]));else if(s==="style")e.style=Dh([e.style,r.style]);else if(dl(s)){const i=e[s],o=r[s];o&&i!==o&&!(fe(i)&&i.includes(o))&&(e[s]=i?[].concat(i,o):o)}else s!==""&&(e[s]=r[s])}return e}function rn(t,e,n,r=null){$n(t,e,7,[n,r])}const M0=bw();let F0=0;function U0(t,e,n){const r=t.type,s=(e?e.appContext:t.appContext)||M0,i={uid:F0++,vnode:t,type:r,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new MT(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Nw(r,s),emitsOptions:Rw(r,s),emit:null,emitted:null,propsDefaults:Ke,inheritAttrs:r.inheritAttrs,ctx:Ke,data:Ke,props:Ke,attrs:Ke,slots:Ke,refs:Ke,setupState:Ke,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=m0.bind(null,i),t.ce&&t.ce(i),i}let Ut=null;const Hi=()=>Ut||En;let Qu,Kf;{const t=Nh(),e=(n,r)=>{let s;return(s=t[n])||(s=t[n]=[]),s.push(r),i=>{s.length>1?s.forEach(o=>o(i)):s[0](i)}};Qu=e("__VUE_INSTANCE_SETTERS__",n=>Ut=n),Kf=e("__VUE_SSR_SETTERS__",n=>Bo=n)}const ki=t=>{const e=Ut;return Qu(t),t.scope.on(),()=>{t.scope.off(),Qu(e)}},Wf=()=>{Ut&&Ut.scope.off(),Qu(null)};function Kw(t){return t.vnode.shapeFlag&4}let Bo=!1;function B0(t,e=!1,n=!1){e&&Kf(e);const{props:r,children:s}=t.vnode,i=Kw(t);T0(t,r,i,e),b0(t,s,n||e);const o=i?j0(t,e):void 0;return e&&Kf(!1),o}function j0(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,o0);const{setup:r}=n;if(r){Dr();const s=t.setupContext=r.length>1?H0(t):null,i=ki(t),o=fl(r,t,0,[t.props,s]),a=em(o);if(Vr(),i(),(a||t.sp)&&!Es(t)&&fm(t),a){if(o.then(Wf,Wf),e)return o.then(c=>{zf(t,c)}).catch(c=>{_a(c,t,0)});t.asyncDep=o}else zf(t,o)}else Ww(t)}function zf(t,e,n){Ie(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:qe(e)&&(t.setupState=ZT(e)),Ww(t)}function Ww(t,e,n){const r=t.type;t.render||(t.render=r.render||sr);{const s=ki(t);Dr();try{a0(t)}finally{Vr(),s()}}}const q0={get(t,e){return Gt(t,"get",""),t[e]}};function H0(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,q0),slots:t.slots,emit:t.emit,expose:e}}function jh(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(ZT(um(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Tc)return Tc[n](t)},has(e,n){return n in e||n in Tc}})):t.proxy}function Qf(t,e=!0){return Ie(t)?t.displayName||t.name:t.name||e&&t.__name}function $0(t){return Ie(t)&&"__vccOpts"in t}const Kt=(t,e)=>DC(t,e,Bo);function Wt(t,e,n){try{Wu(-1);const r=arguments.length;return r===2?qe(e)&&!fe(e)?Uo(e)?Ze(t,null,[e]):Ze(t,e):Ze(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&Uo(n)&&(n=[n]),Ze(t,e,n))}finally{Wu(1)}}const G0="3.5.26";let Jf;const my=typeof window<"u"&&window.trustedTypes;if(my)try{Jf=my.createPolicy("vue",{createHTML:t=>t})}catch{}const zw=Jf?t=>Jf.createHTML(t):t=>t,K0="http://www.w3.org/2000/svg",W0="http://www.w3.org/1998/Math/MathML",_r=typeof document<"u"?document:null,gy=_r&&_r.createElement("template"),z0={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const s=e==="svg"?_r.createElementNS(K0,t):e==="mathml"?_r.createElementNS(W0,t):n?_r.createElement(t,{is:n}):_r.createElement(t);return t==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:t=>_r.createTextNode(t),createComment:t=>_r.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>_r.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,s,i){const o=n?n.previousSibling:e.lastChild;if(s&&(s===i||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{gy.innerHTML=zw(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const a=gy.content;if(r==="svg"||r==="mathml"){const c=a.firstChild;for(;c.firstChild;)a.appendChild(c.firstChild);a.removeChild(c)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},ns="transition",Xa="animation",Gc=Symbol("_vtc"),Qw={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Q0=Lt({},uw,Qw),J0=t=>(t.displayName="Transition",t.props=Q0,t),jo=J0((t,{slots:e})=>Wt(GC,Y0(t),e)),ni=(t,e=[])=>{fe(t)?t.forEach(n=>n(...e)):t&&t(...e)},_y=t=>t?fe(t)?t.some(e=>e.length>1):t.length>1:!1;function Y0(t){const e={};for(const S in t)S in Qw||(e[S]=t[S]);if(t.css===!1)return e;const{name:n="v",type:r,duration:s,enterFromClass:i=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:c=i,appearActiveClass:u=o,appearToClass:h=a,leaveFromClass:d=`${n}-leave-from`,leaveActiveClass:f=`${n}-leave-active`,leaveToClass:m=`${n}-leave-to`}=t,I=X0(s),T=I&&I[0],k=I&&I[1],{onBeforeEnter:V,onEnter:N,onEnterCancelled:_,onLeave:C,onLeaveCancelled:x,onBeforeAppear:U=V,onAppear:v=N,onAppearCancelled:E=_}=e,y=(S,b,ge,Ae)=>{S._enterCancelled=Ae,ri(S,b?h:a),ri(S,b?u:o),ge&&ge()},A=(S,b)=>{S._isLeaving=!1,ri(S,d),ri(S,m),ri(S,f),b&&b()},P=S=>(b,ge)=>{const Ae=S?v:N,se=()=>y(b,S,ge);ni(Ae,[b,se]),yy(()=>{ri(b,S?c:i),mr(b,S?h:a),_y(Ae)||Iy(b,r,T,se)})};return Lt(e,{onBeforeEnter(S){ni(V,[S]),mr(S,i),mr(S,o)},onBeforeAppear(S){ni(U,[S]),mr(S,c),mr(S,u)},onEnter:P(!1),onAppear:P(!0),onLeave(S,b){S._isLeaving=!0;const ge=()=>A(S,b);mr(S,d),S._enterCancelled?(mr(S,f),wy(S)):(wy(S),mr(S,f)),yy(()=>{S._isLeaving&&(ri(S,d),mr(S,m),_y(C)||Iy(S,r,k,ge))}),ni(C,[S,ge])},onEnterCancelled(S){y(S,!1,void 0,!0),ni(_,[S])},onAppearCancelled(S){y(S,!0,void 0,!0),ni(E,[S])},onLeaveCancelled(S){A(S),ni(x,[S])}})}function X0(t){if(t==null)return null;if(qe(t))return[Zd(t.enter),Zd(t.leave)];{const e=Zd(t);return[e,e]}}function Zd(t){return VT(t)}function mr(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[Gc]||(t[Gc]=new Set)).add(e)}function ri(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const n=t[Gc];n&&(n.delete(e),n.size||(t[Gc]=void 0))}function yy(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let Z0=0;function Iy(t,e,n,r){const s=t._endId=++Z0,i=()=>{s===t._endId&&r()};if(n!=null)return setTimeout(i,n);const{type:o,timeout:a,propCount:c}=ek(t,e);if(!o)return r();const u=o+"end";let h=0;const d=()=>{t.removeEventListener(u,f),i()},f=m=>{m.target===t&&++h>=c&&d()};setTimeout(()=>{h<c&&d()},a+1),t.addEventListener(u,f)}function ek(t,e){const n=window.getComputedStyle(t),r=I=>(n[I]||"").split(", "),s=r(`${ns}Delay`),i=r(`${ns}Duration`),o=Ey(s,i),a=r(`${Xa}Delay`),c=r(`${Xa}Duration`),u=Ey(a,c);let h=null,d=0,f=0;e===ns?o>0&&(h=ns,d=o,f=i.length):e===Xa?u>0&&(h=Xa,d=u,f=c.length):(d=Math.max(o,u),h=d>0?o>u?ns:Xa:null,f=h?h===ns?i.length:c.length:0);const m=h===ns&&/\b(?:transform|all)(?:,|$)/.test(r(`${ns}Property`).toString());return{type:h,timeout:d,propCount:f,hasTransform:m}}function Ey(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>Ty(n)+Ty(t[r])))}function Ty(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function wy(t){return(t?t.ownerDocument:document).body.offsetHeight}function tk(t,e,n){const r=t[Gc];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const Ju=Symbol("_vod"),Jw=Symbol("_vsh"),nk={name:"show",beforeMount(t,{value:e},{transition:n}){t[Ju]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):Za(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:r}){!e!=!n&&(r?e?(r.beforeEnter(t),Za(t,!0),r.enter(t)):r.leave(t,()=>{Za(t,!1)}):Za(t,e))},beforeUnmount(t,{value:e}){Za(t,e)}};function Za(t,e){t.style.display=e?t[Ju]:"none",t[Jw]=!e}const rk=Symbol(""),sk=/(?:^|;)\s*display\s*:/;function ik(t,e,n){const r=t.style,s=et(n);let i=!1;if(n&&!s){if(e)if(et(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&Tu(r,a,"")}else for(const o in e)n[o]==null&&Tu(r,o,"");for(const o in n)o==="display"&&(i=!0),Tu(r,o,n[o])}else if(s){if(e!==n){const o=r[rk];o&&(n+=";"+o),r.cssText=n,i=sk.test(n)}}else e&&t.removeAttribute("style");Ju in t&&(t[Ju]=i?r.display:"",t[Jw]&&(r.display="none"))}const vy=/\s*!important$/;function Tu(t,e,n){if(fe(n))n.forEach(r=>Tu(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=ok(t,e);vy.test(n)?t.setProperty(Bs(r),n.replace(vy,""),"important"):t[r]=n}}const Ay=["Webkit","Moz","ms"],ef={};function ok(t,e){const n=ef[e];if(n)return n;let r=kn(e);if(r!=="filter"&&r in t)return ef[e]=r;r=Ch(r);for(let s=0;s<Ay.length;s++){const i=Ay[s]+r;if(i in t)return ef[e]=i}return e}const by="http://www.w3.org/1999/xlink";function Ry(t,e,n,r,s,i=nC(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(by,e.slice(6,e.length)):t.setAttributeNS(by,e,n):n==null||i&&!xT(n)?t.removeAttribute(e):t.setAttribute(e,i?"":cr(n)?String(n):n)}function Sy(t,e,n,r,s){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?zw(n):n);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const a=i==="OPTION"?t.getAttribute("value")||"":t.value,c=n==null?t.type==="checkbox"?"on":"":String(n);(a!==c||!("_value"in t))&&(t.value=c),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const a=typeof t[e];a==="boolean"?n=xT(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(s||e)}function Tr(t,e,n,r){t.addEventListener(e,n,r)}function ak(t,e,n,r){t.removeEventListener(e,n,r)}const Py=Symbol("_vei");function ck(t,e,n,r,s=null){const i=t[Py]||(t[Py]={}),o=i[e];if(r&&o)o.value=r;else{const[a,c]=lk(e);if(r){const u=i[e]=dk(r,s);Tr(t,a,u,c)}else o&&(ak(t,a,o,c),i[e]=void 0)}}const Cy=/(?:Once|Passive|Capture)$/;function lk(t){let e;if(Cy.test(t)){e={};let r;for(;r=t.match(Cy);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Bs(t.slice(2)),e]}let tf=0;const uk=Promise.resolve(),hk=()=>tf||(uk.then(()=>tf=0),tf=Date.now());function dk(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;$n(fk(r,n.value),e,5,[r])};return n.value=t,n.attached=hk(),n}function fk(t,e){if(fe(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>s=>!s._stopped&&r&&r(s))}else return e}const ky=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,pk=(t,e,n,r,s,i)=>{const o=s==="svg";e==="class"?tk(t,r,o):e==="style"?ik(t,n,r):dl(e)?Xp(e)||ck(t,e,n,r,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):mk(t,e,r,o))?(Sy(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Ry(t,e,r,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!et(r))?Sy(t,kn(e),r,i,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),Ry(t,e,r,o))};function mk(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&ky(e)&&Ie(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="sandbox"&&t.tagName==="IFRAME"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return ky(e)&&et(n)?!1:e in t}const Ns=t=>{const e=t.props["onUpdate:modelValue"]||!1;return fe(e)?n=>bo(e,n):e};function gk(t){t.target.composing=!0}function Ny(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Cn=Symbol("_assign");function Dy(t,e,n){return e&&(t=t.trim()),n&&(t=kh(t)),t}const To={created(t,{modifiers:{lazy:e,trim:n,number:r}},s){t[Cn]=Ns(s);const i=r||s.props&&s.props.type==="number";Tr(t,e?"change":"input",o=>{o.target.composing||t[Cn](Dy(t.value,n,i))}),(n||i)&&Tr(t,"change",()=>{t.value=Dy(t.value,n,i)}),e||(Tr(t,"compositionstart",gk),Tr(t,"compositionend",Ny),Tr(t,"change",Ny))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:r,trim:s,number:i}},o){if(t[Cn]=Ns(o),t.composing)return;const a=(i||t.type==="number")&&!/^0\d/.test(t.value)?kh(t.value):t.value,c=e??"";a!==c&&(document.activeElement===t&&t.type!=="range"&&(r&&e===n||s&&t.value.trim()===c)||(t.value=c))}},_k={deep:!0,created(t,e,n){t[Cn]=Ns(n),Tr(t,"change",()=>{const r=t._modelValue,s=qo(t),i=t.checked,o=t[Cn];if(fe(r)){const a=tm(r,s),c=a!==-1;if(i&&!c)o(r.concat(s));else if(!i&&c){const u=[...r];u.splice(a,1),o(u)}}else if(ma(r)){const a=new Set(r);i?a.add(s):a.delete(s),o(a)}else o(Yw(t,i))})},mounted:Vy,beforeUpdate(t,e,n){t[Cn]=Ns(n),Vy(t,e,n)}};function Vy(t,{value:e,oldValue:n},r){t._modelValue=e;let s;if(fe(e))s=tm(e,r.props.value)>-1;else if(ma(e))s=e.has(r.props.value);else{if(e===n)return;s=Ci(e,Yw(t,!0))}t.checked!==s&&(t.checked=s)}const yk={created(t,{value:e},n){t.checked=Ci(e,n.props.value),t[Cn]=Ns(n),Tr(t,"change",()=>{t[Cn](qo(t))})},beforeUpdate(t,{value:e,oldValue:n},r){t[Cn]=Ns(r),e!==n&&(t.checked=Ci(e,r.props.value))}},Ik={deep:!0,created(t,{value:e,modifiers:{number:n}},r){const s=ma(e);Tr(t,"change",()=>{const i=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>n?kh(qo(o)):qo(o));t[Cn](t.multiple?s?new Set(i):i:i[0]),t._assigning=!0,Cs(()=>{t._assigning=!1})}),t[Cn]=Ns(r)},mounted(t,{value:e}){xy(t,e)},beforeUpdate(t,e,n){t[Cn]=Ns(n)},updated(t,{value:e}){t._assigning||xy(t,e)}};function xy(t,e){const n=t.multiple,r=fe(e);if(!(n&&!r&&!ma(e))){for(let s=0,i=t.options.length;s<i;s++){const o=t.options[s],a=qo(o);if(n)if(r){const c=typeof a;c==="string"||c==="number"?o.selected=e.some(u=>String(u)===String(a)):o.selected=tm(e,a)>-1}else o.selected=e.has(a);else if(Ci(qo(o),e)){t.selectedIndex!==s&&(t.selectedIndex=s);return}}!n&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function qo(t){return"_value"in t?t._value:t.value}function Yw(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const Oy={created(t,e,n){ru(t,e,n,null,"created")},mounted(t,e,n){ru(t,e,n,null,"mounted")},beforeUpdate(t,e,n,r){ru(t,e,n,r,"beforeUpdate")},updated(t,e,n,r){ru(t,e,n,r,"updated")}};function Ek(t,e){switch(t){case"SELECT":return Ik;case"TEXTAREA":return To;default:switch(e){case"checkbox":return _k;case"radio":return yk;default:return To}}}function ru(t,e,n,r,s){const o=Ek(t.tagName,n.props&&n.props.type)[s];o&&o(t,e,n,r)}const Tk=["ctrl","shift","alt","meta"],wk={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>Tk.some(n=>t[`${n}Key`]&&!e.includes(n))},Xw=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=((s,...i)=>{for(let o=0;o<e.length;o++){const a=wk[e[o]];if(a&&a(s,e))return}return t(s,...i)}))},vk={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},io=(t,e)=>{const n=t._withKeys||(t._withKeys={}),r=e.join(".");return n[r]||(n[r]=(s=>{if(!("key"in s))return;const i=Bs(s.key);if(e.some(o=>o===i||vk[o]===i))return t(s)}))},Zw=Lt({patchProp:pk},z0);let vc,Ly=!1;function Ak(){return vc||(vc=S0(Zw))}function bk(){return vc=Ly?vc:P0(Zw),Ly=!0,vc}const Rk=((...t)=>{const e=Ak().createApp(...t),{mount:n}=e;return e.mount=r=>{const s=tv(r);if(!s)return;const i=e._component;!Ie(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const o=n(s,!1,ev(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e}),Sk=((...t)=>{const e=bk().createApp(...t),{mount:n}=e;return e.mount=r=>{const s=tv(r);if(s)return n(s,!0,ev(s))},e});function ev(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function tv(t){return et(t)?document.querySelector(t):t}const Pk=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,Ck=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,kk=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function Nk(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){Dk(t);return}return e}function Dk(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function Yu(t,e={}){if(typeof t!="string")return t;if(t[0]==='"'&&t[t.length-1]==='"'&&t.indexOf("\\")===-1)return t.slice(1,-1);const n=t.trim();if(n.length<=9)switch(n.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!kk.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(Pk.test(t)||Ck.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,Nk)}return JSON.parse(t)}catch(r){if(e.strict)throw r;return t}}const Vk=/#/g,xk=/&/g,Ok=/\//g,Lk=/=/g,Im=/\+/g,Mk=/%5e/gi,Fk=/%60/gi,Uk=/%7c/gi,Bk=/%20/gi;function jk(t){return encodeURI(""+t).replace(Uk,"|")}function Yf(t){return jk(typeof t=="string"?t:JSON.stringify(t)).replace(Im,"%2B").replace(Bk,"+").replace(Vk,"%23").replace(xk,"%26").replace(Fk,"`").replace(Mk,"^").replace(Ok,"%2F")}function nf(t){return Yf(t).replace(Lk,"%3D")}function Xu(t=""){try{return decodeURIComponent(""+t)}catch{return""+t}}function qk(t){return Xu(t.replace(Im," "))}function Hk(t){return Xu(t.replace(Im," "))}function nv(t=""){const e=Object.create(null);t[0]==="?"&&(t=t.slice(1));for(const n of t.split("&")){const r=n.match(/([^=]+)=?(.*)/)||[];if(r.length<2)continue;const s=qk(r[1]);if(s==="__proto__"||s==="constructor")continue;const i=Hk(r[2]||"");e[s]===void 0?e[s]=i:Array.isArray(e[s])?e[s].push(i):e[s]=[e[s],i]}return e}function $k(t,e){return(typeof e=="number"||typeof e=="boolean")&&(e=String(e)),e?Array.isArray(e)?e.map(n=>`${nf(t)}=${Yf(n)}`).join("&"):`${nf(t)}=${Yf(e)}`:nf(t)}function Gk(t){return Object.keys(t).filter(e=>t[e]!==void 0).map(e=>$k(e,t[e])).filter(Boolean).join("&")}const Kk=/^[\s\w\0+.-]{2,}:([/\\]{1,2})/,Wk=/^[\s\w\0+.-]{2,}:([/\\]{2})?/,zk=/^([/\\]\s*){2,}[^/\\]/,Qk=/^[\s\0]*(blob|data|javascript|vbscript):$/i,Jk=/\/$|\/\?|\/#/,Yk=/^\.?\//;function $i(t,e={}){return typeof e=="boolean"&&(e={acceptRelative:e}),e.strict?Kk.test(t):Wk.test(t)||(e.acceptRelative?zk.test(t):!1)}function Xk(t){return!!t&&Qk.test(t)}function Xf(t="",e){return e?Jk.test(t):t.endsWith("/")}function Zu(t="",e){if(!e)return(Xf(t)?t.slice(0,-1):t)||"/";if(!Xf(t,!0))return t||"/";let n=t,r="";const s=t.indexOf("#");s!==-1&&(n=t.slice(0,s),r=t.slice(s));const[i,...o]=n.split("?");return((i.endsWith("/")?i.slice(0,-1):i)||"/")+(o.length>0?`?${o.join("?")}`:"")+r}function Zk(t="",e){if(!e)return t.endsWith("/")?t:t+"/";if(Xf(t,!0))return t||"/";let n=t,r="";const s=t.indexOf("#");if(s!==-1&&(n=t.slice(0,s),r=t.slice(s),!n))return r;const[i,...o]=n.split("?");return i+"/"+(o.length>0?`?${o.join("?")}`:"")+r}function eN(t,e){if(sv(e)||$i(t))return t;const n=Zu(e);return t.startsWith(n)?t:Em(n,t)}function My(t,e){if(sv(e))return t;const n=Zu(e);if(!t.startsWith(n))return t;const r=t.slice(n.length);return r[0]==="/"?r:"/"+r}function rv(t,e){const n=av(t),r={...nv(n.search),...e};return n.search=Gk(r),rN(n)}function sv(t){return!t||t==="/"}function tN(t){return t&&t!=="/"}function Em(t,...e){let n=t||"";for(const r of e.filter(s=>tN(s)))if(n){const s=r.replace(Yk,"");n=Zk(n)+s}else n=r;return n}function iv(...t){const e=/\/(?!\/)/,n=t.filter(Boolean),r=[];let s=0;for(const o of n)if(!(!o||o==="/")){for(const[a,c]of o.split(e).entries())if(!(!c||c===".")){if(c===".."){if(r.length===1&&$i(r[0]))continue;r.pop(),s--;continue}if(a===1&&r[r.length-1]?.endsWith(":/")){r[r.length-1]+="/"+c;continue}r.push(c),s++}}let i=r.join("/");return s>=0?n[0]?.startsWith("/")&&!i.startsWith("/")?i="/"+i:n[0]?.startsWith("./")&&!i.startsWith("./")&&(i="./"+i):i="../".repeat(-1*s)+i,n[n.length-1]?.endsWith("/")&&!i.endsWith("/")&&(i+="/"),i}function nN(t,e){return Xu(Zu(t))===Xu(Zu(e))}const ov=Symbol.for("ufo:protocolRelative");function av(t="",e){const n=t.match(/^[\s\0]*(blob:|data:|javascript:|vbscript:)(.*)/i);if(n){const[,d,f=""]=n;return{protocol:d.toLowerCase(),pathname:f,href:d+f,auth:"",host:"",search:"",hash:""}}if(!$i(t,{acceptRelative:!0}))return Fy(t);const[,r="",s,i=""]=t.replace(/\\/g,"/").match(/^[\s\0]*([\w+.-]{2,}:)?\/\/([^/@]+@)?(.*)/)||[];let[,o="",a=""]=i.match(/([^#/?]*)(.*)?/)||[];r==="file:"&&(a=a.replace(/\/(?=[A-Za-z]:)/,""));const{pathname:c,search:u,hash:h}=Fy(a);return{protocol:r.toLowerCase(),auth:s?s.slice(0,Math.max(0,s.length-1)):"",host:o,pathname:c,search:u,hash:h,[ov]:!r}}function Fy(t=""){const[e="",n="",r=""]=(t.match(/([^#?]*)(\?[^#]*)?(#.*)?/)||[]).splice(1);return{pathname:e,search:n,hash:r}}function rN(t){const e=t.pathname||"",n=t.search?(t.search.startsWith("?")?"":"?")+t.search:"",r=t.hash||"",s=t.auth?t.auth+"@":"",i=t.host||"";return(t.protocol||t[ov]?(t.protocol||"")+"//":"")+s+i+e+n+r}class sN extends Error{constructor(e,n){super(e,n),this.name="FetchError",n?.cause&&!this.cause&&(this.cause=n.cause)}}function iN(t){const e=t.error?.message||t.error?.toString()||"",n=t.request?.method||t.options?.method||"GET",r=t.request?.url||String(t.request)||"/",s=`[${n}] ${JSON.stringify(r)}`,i=t.response?`${t.response.status} ${t.response.statusText}`:"<no response>",o=`${s}: ${i}${e?` ${e}`:""}`,a=new sN(o,t.error?{cause:t.error}:void 0);for(const c of["request","options","response"])Object.defineProperty(a,c,{get(){return t[c]}});for(const[c,u]of[["data","_data"],["status","status"],["statusCode","status"],["statusText","statusText"],["statusMessage","statusText"]])Object.defineProperty(a,c,{get(){return t.response&&t.response[u]}});return a}const oN=new Set(Object.freeze(["PATCH","POST","PUT","DELETE"]));function Uy(t="GET"){return oN.has(t.toUpperCase())}function aN(t){if(t===void 0)return!1;const e=typeof t;return e==="string"||e==="number"||e==="boolean"||e===null?!0:e!=="object"?!1:Array.isArray(t)?!0:t.buffer||t instanceof FormData||t instanceof URLSearchParams?!1:t.constructor&&t.constructor.name==="Object"||typeof t.toJSON=="function"}const cN=new Set(["image/svg","application/xml","application/xhtml","application/html"]),lN=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function uN(t=""){if(!t)return"json";const e=t.split(";").shift()||"";return lN.test(e)?"json":e==="text/event-stream"?"stream":cN.has(e)||e.startsWith("text/")?"text":"blob"}function hN(t,e,n,r){const s=dN(e?.headers??t?.headers,n?.headers,r);let i;return(n?.query||n?.params||e?.params||e?.query)&&(i={...n?.params,...n?.query,...e?.params,...e?.query}),{...n,...e,query:i,params:i,headers:s}}function dN(t,e,n){if(!e)return new n(t);const r=new n(e);if(t)for(const[s,i]of Symbol.iterator in t||Array.isArray(t)?t:new n(t))r.set(s,i);return r}async function su(t,e){if(e)if(Array.isArray(e))for(const n of e)await n(t);else await e(t)}const fN=new Set([408,409,425,429,500,502,503,504]),pN=new Set([101,204,205,304]);function cv(t={}){const{fetch:e=globalThis.fetch,Headers:n=globalThis.Headers,AbortController:r=globalThis.AbortController}=t;async function s(a){const c=a.error&&a.error.name==="AbortError"&&!a.options.timeout||!1;if(a.options.retry!==!1&&!c){let h;typeof a.options.retry=="number"?h=a.options.retry:h=Uy(a.options.method)?0:1;const d=a.response&&a.response.status||500;if(h>0&&(Array.isArray(a.options.retryStatusCodes)?a.options.retryStatusCodes.includes(d):fN.has(d))){const f=typeof a.options.retryDelay=="function"?a.options.retryDelay(a):a.options.retryDelay||0;return f>0&&await new Promise(m=>setTimeout(m,f)),i(a.request,{...a.options,retry:h-1})}}const u=iN(a);throw Error.captureStackTrace&&Error.captureStackTrace(u,i),u}const i=async function(c,u={}){const h={request:c,options:hN(c,u,t.defaults,n),response:void 0,error:void 0};if(h.options.method&&(h.options.method=h.options.method.toUpperCase()),h.options.onRequest&&(await su(h,h.options.onRequest),h.options.headers instanceof n||(h.options.headers=new n(h.options.headers||{}))),typeof h.request=="string"&&(h.options.baseURL&&(h.request=eN(h.request,h.options.baseURL)),h.options.query&&(h.request=rv(h.request,h.options.query),delete h.options.query),"query"in h.options&&delete h.options.query,"params"in h.options&&delete h.options.params),h.options.body&&Uy(h.options.method))if(aN(h.options.body)){const m=h.options.headers.get("content-type");typeof h.options.body!="string"&&(h.options.body=m==="application/x-www-form-urlencoded"?new URLSearchParams(h.options.body).toString():JSON.stringify(h.options.body)),m||h.options.headers.set("content-type","application/json"),h.options.headers.has("accept")||h.options.headers.set("accept","application/json")}else("pipeTo"in h.options.body&&typeof h.options.body.pipeTo=="function"||typeof h.options.body.pipe=="function")&&("duplex"in h.options||(h.options.duplex="half"));let d;if(!h.options.signal&&h.options.timeout){const m=new r;d=setTimeout(()=>{const I=new Error("[TimeoutError]: The operation was aborted due to timeout");I.name="TimeoutError",I.code=23,m.abort(I)},h.options.timeout),h.options.signal=m.signal}try{h.response=await e(h.request,h.options)}catch(m){return h.error=m,h.options.onRequestError&&await su(h,h.options.onRequestError),await s(h)}finally{d&&clearTimeout(d)}if((h.response.body||h.response._bodyInit)&&!pN.has(h.response.status)&&h.options.method!=="HEAD"){const m=(h.options.parseResponse?"json":h.options.responseType)||uN(h.response.headers.get("content-type")||"");switch(m){case"json":{const I=await h.response.text(),T=h.options.parseResponse||Yu;h.response._data=T(I);break}case"stream":{h.response._data=h.response.body||h.response._bodyInit;break}default:h.response._data=await h.response[m]()}}return h.options.onResponse&&await su(h,h.options.onResponse),!h.options.ignoreResponseError&&h.response.status>=400&&h.response.status<600?(h.options.onResponseError&&await su(h,h.options.onResponseError),await s(h)):h.response},o=async function(c,u){return(await i(c,u))._data};return o.raw=i,o.native=(...a)=>e(...a),o.create=(a={},c={})=>cv({...t,...c,defaults:{...t.defaults,...c.defaults,...a}}),o}const eh=(function(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")})(),mN=eh.fetch?(...t)=>eh.fetch(...t):()=>Promise.reject(new Error("[ofetch] global.fetch is not supported!")),gN=eh.Headers,_N=eh.AbortController,yN=cv({fetch:mN,Headers:gN,AbortController:_N}),IN=yN,EN=()=>window?.__NUXT__?.config||window?.useNuxtApp?.().payload?.config,Tm=()=>EN().app,TN=()=>Tm().baseURL,wN=()=>Tm().buildAssetsDir,wm=(...t)=>iv(lv(),wN(),...t),lv=(...t)=>{const e=Tm(),n=e.cdnURL||e.baseURL;return t.length?iv(n,...t):n};globalThis.__buildAssetsURL=wm,globalThis.__publicAssetsURL=lv;globalThis.$fetch||(globalThis.$fetch=IN.create({baseURL:TN()}));"global"in globalThis||(globalThis.global=globalThis);function Zf(t,e={},n){for(const r in t){const s=t[r],i=n?`${n}:${r}`:r;typeof s=="object"&&s!==null?Zf(s,e,i):typeof s=="function"&&(e[i]=s)}return e}const vN={run:t=>t()},AN=()=>vN,uv=typeof console.createTask<"u"?console.createTask:AN;function bN(t,e){const n=e.shift(),r=uv(n);return t.reduce((s,i)=>s.then(()=>r.run(()=>i(...e))),Promise.resolve())}function RN(t,e){const n=e.shift(),r=uv(n);return Promise.all(t.map(s=>r.run(()=>s(...e))))}function rf(t,e){for(const n of[...t])n(e)}class SN{constructor(){this._hooks={},this._before=void 0,this._after=void 0,this._deprecatedMessages=void 0,this._deprecatedHooks={},this.hook=this.hook.bind(this),this.callHook=this.callHook.bind(this),this.callHookWith=this.callHookWith.bind(this)}hook(e,n,r={}){if(!e||typeof n!="function")return()=>{};const s=e;let i;for(;this._deprecatedHooks[e];)i=this._deprecatedHooks[e],e=i.to;if(i&&!r.allowDeprecated){let o=i.message;o||(o=`${s} hook has been deprecated`+(i.to?`, please use ${i.to}`:"")),this._deprecatedMessages||(this._deprecatedMessages=new Set),this._deprecatedMessages.has(o)||(console.warn(o),this._deprecatedMessages.add(o))}if(!n.name)try{Object.defineProperty(n,"name",{get:()=>"_"+e.replace(/\W+/g,"_")+"_hook_cb",configurable:!0})}catch{}return this._hooks[e]=this._hooks[e]||[],this._hooks[e].push(n),()=>{n&&(this.removeHook(e,n),n=void 0)}}hookOnce(e,n){let r,s=(...i)=>(typeof r=="function"&&r(),r=void 0,s=void 0,n(...i));return r=this.hook(e,s),r}removeHook(e,n){if(this._hooks[e]){const r=this._hooks[e].indexOf(n);r!==-1&&this._hooks[e].splice(r,1),this._hooks[e].length===0&&delete this._hooks[e]}}deprecateHook(e,n){this._deprecatedHooks[e]=typeof n=="string"?{to:n}:n;const r=this._hooks[e]||[];delete this._hooks[e];for(const s of r)this.hook(e,s)}deprecateHooks(e){Object.assign(this._deprecatedHooks,e);for(const n in e)this.deprecateHook(n,e[n])}addHooks(e){const n=Zf(e),r=Object.keys(n).map(s=>this.hook(s,n[s]));return()=>{for(const s of r.splice(0,r.length))s()}}removeHooks(e){const n=Zf(e);for(const r in n)this.removeHook(r,n[r])}removeAllHooks(){for(const e in this._hooks)delete this._hooks[e]}callHook(e,...n){return n.unshift(e),this.callHookWith(bN,e,...n)}callHookParallel(e,...n){return n.unshift(e),this.callHookWith(RN,e,...n)}callHookWith(e,n,...r){const s=this._before||this._after?{name:n,args:r,context:{}}:void 0;this._before&&rf(this._before,s);const i=e(n in this._hooks?[...this._hooks[n]]:[],r);return i instanceof Promise?i.finally(()=>{this._after&&s&&rf(this._after,s)}):(this._after&&s&&rf(this._after,s),i)}beforeEach(e){return this._before=this._before||[],this._before.push(e),()=>{if(this._before!==void 0){const n=this._before.indexOf(e);n!==-1&&this._before.splice(n,1)}}}afterEach(e){return this._after=this._after||[],this._after.push(e),()=>{if(this._after!==void 0){const n=this._after.indexOf(e);n!==-1&&this._after.splice(n,1)}}}}function hv(){return new SN}function PN(t={}){let e,n=!1;const r=o=>{if(e&&e!==o)throw new Error("Context conflict")};let s;if(t.asyncContext){const o=t.AsyncLocalStorage||globalThis.AsyncLocalStorage;o?s=new o:console.warn("[unctx] `AsyncLocalStorage` is not provided.")}const i=()=>{if(s){const o=s.getStore();if(o!==void 0)return o}return e};return{use:()=>{const o=i();if(o===void 0)throw new Error("Context is not available");return o},tryUse:()=>i(),set:(o,a)=>{a||r(o),e=o,n=!0},unset:()=>{e=void 0,n=!1},call:(o,a)=>{r(o),e=o;try{return s?s.run(o,a):a()}finally{n||(e=void 0)}},async callAsync(o,a){e=o;const c=()=>{e=o},u=()=>e===o?c:void 0;ep.add(u);try{const h=s?s.run(o,a):a();return n||(e=void 0),await h}finally{ep.delete(u)}}}}function CN(t={}){const e={};return{get(n,r={}){return e[n]||(e[n]=PN({...t,...r})),e[n]}}}const th=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof global<"u"?global:typeof window<"u"?window:{},By="__unctx__",kN=th[By]||(th[By]=CN()),NN=(t,e={})=>kN.get(t,e),jy="__unctx_async_handlers__",ep=th[jy]||(th[jy]=new Set);function Ts(t){const e=[];for(const s of ep){const i=s();i&&e.push(i)}const n=()=>{for(const s of e)s()};let r=t();return r&&typeof r=="object"&&"catch"in r&&(r=r.catch(s=>{throw n(),s})),[r,n]}const DN=!1,qy=!1,VN=!1,Hy={id:"__nuxt-loader"},Bj={componentName:"NuxtLink",prefetch:!0,prefetchOn:{visibility:!0}},jj={deep:!1},qj={},xN="#__nuxt",dv="nuxt-app",$y=36e5,ON="vite:preloadError";function fv(t=dv){return NN(t,{asyncContext:!1})}const LN="__nuxt_plugin";function MN(t){let e=0;const n={_id:t.id||dv||"nuxt-app",_scope:nm(),provide:void 0,versions:{get nuxt(){return"4.2.2"},get vue(){return n.vueApp.version}},payload:er({...t.ssrContext?.payload||{},data:er({}),state:jr({}),once:new Set,_errors:er({})}),static:{data:{}},runWithContext(s){return n._scope.active&&!rm()?n._scope.run(()=>Gy(n,s)):Gy(n,s)},isHydrating:!0,deferHydration(){if(!n.isHydrating)return()=>{};e++;let s=!1;return()=>{if(!s&&(s=!0,e--,e===0))return n.isHydrating=!1,n.callHook("app:suspense:resolve")}},_asyncDataPromises:{},_asyncData:er({}),_payloadRevivers:{},...t};{const s=window.__NUXT__;if(s)for(const i in s)switch(i){case"data":case"state":case"_errors":Object.assign(n.payload[i],s[i]);break;default:n.payload[i]=s[i]}}n.hooks=hv(),n.hook=n.hooks.hook,n.callHook=n.hooks.callHook,n.provide=(s,i)=>{const o="$"+s;iu(n,o,i),iu(n.vueApp.config.globalProperties,o,i)},iu(n.vueApp,"$nuxt",n),iu(n.vueApp.config.globalProperties,"$nuxt",n);{window.addEventListener(ON,i=>{n.callHook("app:chunkError",{error:i.payload}),i.payload.message.includes("Unable to preload CSS")&&i.preventDefault()}),window.useNuxtApp||=ze;const s=n.hook("app:error",(...i)=>{console.error("[nuxt] error caught during app initialization",...i)});n.hook("app:mounted",s)}const r=n.payload.config;return n.provide("config",r),n}function FN(t,e){e.hooks&&t.hooks.addHooks(e.hooks)}async function UN(t,e){if(typeof e=="function"){const{provide:n}=await t.runWithContext(()=>e(t))||{};if(n&&typeof n=="object")for(const r in n)t.provide(r,n[r])}}async function BN(t,e){const n=new Set,r=[],s=[];let i,o=0;async function a(c){const u=c.dependsOn?.filter(h=>e.some(d=>d._name===h)&&!n.has(h))??[];if(u.length>0)r.push([new Set(u),c]);else{const h=UN(t,c).then(async()=>{c._name&&(n.add(c._name),await Promise.all(r.map(async([d,f])=>{d.has(c._name)&&(d.delete(c._name),d.size===0&&(o++,await a(f)))})))}).catch(d=>{if(!c.parallel&&!t.payload.error)throw d;i||=d});c.parallel?s.push(h):await h}}for(const c of e)FN(t,c);for(const c of e)await a(c);if(await Promise.all(s),o)for(let c=0;c<o;c++)await Promise.all(s);if(i)throw t.payload.error||i}function Dn(t){if(typeof t=="function")return t;const e=t._name||t.name;return delete t.name,Object.assign(t.setup||(()=>{}),t,{[LN]:!0,_name:e})}const jN=Dn;function Gy(t,e,n){const r=()=>e();return fv(t._id).set(t),t.vueApp.runWithContext(r)}function qN(t){let e;return Oh()&&(e=Hi()?.appContext.app.$nuxt),e||=fv(t).tryUse(),e||null}function ze(t){const e=qN(t);if(!e)throw new Error("[nuxt] instance unavailable");return e}function gl(t){return ze().$config}function iu(t,e,n){Object.defineProperty(t,e,{get:()=>n})}function HN(t,e){return{ctx:{table:t},matchAll:n=>mv(n,t)}}function pv(t){const e={};for(const n in t)e[n]=n==="dynamic"?new Map(Object.entries(t[n]).map(([r,s])=>[r,pv(s)])):new Map(Object.entries(t[n]));return e}function $N(t){return HN(pv(t))}function mv(t,e,n){t.endsWith("/")&&(t=t.slice(0,-1)||"/");const r=[];for(const[i,o]of Ky(e.wildcard))(t===i||t.startsWith(i+"/"))&&r.push(o);for(const[i,o]of Ky(e.dynamic))if(t.startsWith(i+"/")){const a="/"+t.slice(i.length).split("/").splice(2).join("/");r.push(...mv(a,o))}const s=e.static.get(t);return s&&r.push(s),r.filter(Boolean)}function Ky(t){return[...t.entries()].sort((e,n)=>e[0].length-n[0].length)}function sf(t){if(t===null||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e!==null&&e!==Object.prototype&&Object.getPrototypeOf(e)!==null||Symbol.iterator in t?!1:Symbol.toStringTag in t?Object.prototype.toString.call(t)==="[object Module]":!0}function tp(t,e,n=".",r){if(!sf(e))return tp(t,{},n,r);const s=Object.assign({},e);for(const i in t){if(i==="__proto__"||i==="constructor")continue;const o=t[i];o!=null&&(r&&r(s,i,o,n)||(Array.isArray(o)&&Array.isArray(s[i])?s[i]=[...o,...s[i]]:sf(o)&&sf(s[i])?s[i]=tp(o,s[i],(n?`${n}.`:"")+i.toString(),r):s[i]=o))}return s}function GN(t){return(...e)=>e.reduce((n,r)=>tp(n,r,"",t),{})}const gv=GN();function KN(t,e){try{return e in t}catch{return!1}}class Wy extends Error{static __h3_error__=!0;statusCode=500;fatal=!1;unhandled=!1;statusMessage;data;cause;constructor(e,n={}){super(e,n),n.cause&&!this.cause&&(this.cause=n.cause)}toJSON(){const e={message:this.message,statusCode:np(this.statusCode,500)};return this.statusMessage&&(e.statusMessage=_v(this.statusMessage)),this.data!==void 0&&(e.data=this.data),e}}function WN(t){if(typeof t=="string")return new Wy(t);if(zN(t))return t;const e=new Wy(t.message??t.statusMessage??"",{cause:t.cause||t});if(KN(t,"stack"))try{Object.defineProperty(e,"stack",{get(){return t.stack}})}catch{try{e.stack=t.stack}catch{}}if(t.data&&(e.data=t.data),t.statusCode?e.statusCode=np(t.statusCode,e.statusCode):t.status&&(e.statusCode=np(t.status,e.statusCode)),t.statusMessage?e.statusMessage=t.statusMessage:t.statusText&&(e.statusMessage=t.statusText),e.statusMessage){const n=e.statusMessage;_v(e.statusMessage)!==n&&console.warn("[h3] Please prefer using `message` for longer error messages instead of `statusMessage`. In the future, `statusMessage` will be sanitized by default.")}return t.fatal!==void 0&&(e.fatal=t.fatal),t.unhandled!==void 0&&(e.unhandled=t.unhandled),e}function zN(t){return t?.constructor?.__h3_error__===!0}const QN=/[^\u0009\u0020-\u007E]/g;function _v(t=""){return t.replace(QN,"")}function np(t,e=200){return!t||(typeof t=="string"&&(t=Number.parseInt(t,10)),t<100||t>999)?e:t}const yv=Symbol("layout-meta"),Ni=Symbol("route");import.meta.url.replace(/\/app\/.*$/,"/");const An=()=>ze()?.$router,qh=()=>Oh()?Vt(Ni,ze()._route):ze()._route;const JN=()=>{try{if(ze()._processingMiddleware)return!0}catch{return!1}return!1},Hj=(t,e)=>{t||="/";const n=typeof t=="string"?t:"path"in t?YN(t):An().resolve(t).href;if(e?.open){const{target:c="_blank",windowFeatures:u={}}=e.open,h=[];for(const[d,f]of Object.entries(u))f!==void 0&&h.push(`${d.toLowerCase()}=${f}`);return open(n,c,h.join(", ")),Promise.resolve()}const r=$i(n,{acceptRelative:!0}),s=e?.external||r;if(s){if(!e?.external)throw new Error("Navigating to an external URL is not allowed by default. Use `navigateTo(url, { external: true })`.");const{protocol:c}=new URL(n,window.location.href);if(c&&Xk(c))throw new Error(`Cannot navigate to a URL with '${c}' protocol.`)}const i=JN();if(!s&&i){if(e?.replace){if(typeof t=="string"){const{pathname:c,search:u,hash:h}=av(t);return{path:c,...u&&{query:nv(u)},...h&&{hash:h},replace:!0}}return{...t,replace:!0}}return t}const o=An(),a=ze();return s?(a._scope.stop(),e?.replace?location.replace(n):location.href=n,i?a.isHydrating?new Promise(()=>{}):!1:Promise.resolve()):e?.replace?o.replace(t):o.push(t)};function YN(t){return rv(t.path||"",t.query||{})+(t.hash||"")}const Iv="__nuxt_error",Hh=()=>kC(ze().payload,"error"),ci=t=>{const e=vi(t);try{const n=Hh();ze().hooks.callHook("app:error",e),n.value||=e}catch{throw e}return e},XN=async(t={})=>{const e=ze(),n=Hh();e.callHook("app:error:cleared",t),t.redirect&&await An().replace(t.redirect),n.value=void 0},Ev=t=>!!t&&typeof t=="object"&&Iv in t,vi=t=>{const e=WN(t);return Object.defineProperty(e,Iv,{value:!0,configurable:!1,writable:!1}),e};let Tv;const Ho=t=>Tv=t,wv=Symbol();function rp(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var Ac;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(Ac||(Ac={}));function ZN(){const t=nm(!0),e=t.run(()=>ft({}));let n=[],r=[];const s=um({install(i){Ho(s),s._a=i,i.provide(wv,s),i.config.globalProperties.$pinia=s,r.forEach(o=>n.push(o)),r=[]},use(i){return this._a?n.push(i):r.push(i),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return s}const vv=()=>{};function zy(t,e,n,r=vv){t.add(e);const s=()=>{t.delete(e)&&r()};return!n&&rm()&&sC(s),s}function oo(t,...e){t.forEach(n=>{n(...e)})}const eD=t=>t(),Qy=Symbol(),of=Symbol();function sp(t,e){t instanceof Map&&e instanceof Map?e.forEach((n,r)=>t.set(r,n)):t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const r=e[n],s=t[n];rp(s)&&rp(r)&&t.hasOwnProperty(n)&&!it(r)&&!ir(r)?t[n]=sp(s,r):t[n]=r}return t}const tD=Symbol();function nD(t){return!rp(t)||!Object.prototype.hasOwnProperty.call(t,tD)}const{assign:cs}=Object;function rD(t){return!!(it(t)&&t.effect)}function sD(t,e,n,r){const{state:s,actions:i,getters:o}=e,a=n.state.value[t];let c;function u(){a||(n.state.value[t]=s?s():{});const h=SC(n.state.value[t]);return cs(h,i,Object.keys(o||{}).reduce((d,f)=>(d[f]=um(Kt(()=>{Ho(n);const m=n._s.get(t);return o[f].call(m,m)})),d),{}))}return c=Av(t,u,e,n,r,!0),c}function Av(t,e,n={},r,s,i){let o;const a=cs({actions:{}},n),c={deep:!0};let u,h,d=new Set,f=new Set,m;const I=r.state.value[t];!i&&!I&&(r.state.value[t]={}),ft({});let T;function k(E){let y;u=h=!1,typeof E=="function"?(E(r.state.value[t]),y={type:Ac.patchFunction,storeId:t,events:m}):(sp(r.state.value[t],E),y={type:Ac.patchObject,payload:E,storeId:t,events:m});const A=T=Symbol();Cs().then(()=>{T===A&&(u=!0)}),h=!0,oo(d,y,r.state.value[t])}const V=i?function(){const{state:y}=n,A=y?y():{};this.$patch(P=>{cs(P,A)})}:vv;function N(){o.stop(),d.clear(),f.clear(),r._s.delete(t)}const _=(E,y="")=>{if(Qy in E)return E[of]=y,E;const A=function(){Ho(r);const P=Array.from(arguments),S=new Set,b=new Set;function ge(le){S.add(le)}function Ae(le){b.add(le)}oo(f,{args:P,name:A[of],store:x,after:ge,onError:Ae});let se;try{se=E.apply(this&&this.$id===t?this:x,P)}catch(le){throw oo(b,le),le}return se instanceof Promise?se.then(le=>(oo(S,le),le)).catch(le=>(oo(b,le),Promise.reject(le))):(oo(S,se),se)};return A[Qy]=!0,A[of]=y,A},C={_p:r,$id:t,$onAction:zy.bind(null,f),$patch:k,$reset:V,$subscribe(E,y={}){const A=zy(d,E,y.detached,()=>P()),P=o.run(()=>kr(()=>r.state.value[t],S=>{(y.flush==="sync"?h:u)&&E({storeId:t,type:Ac.direct,events:m},S)},cs({},c,y)));return A},$dispose:N},x=jr(C);r._s.set(t,x);const v=(r._a&&r._a.runWithContext||eD)(()=>r._e.run(()=>(o=nm()).run(()=>e({action:_}))));for(const E in v){const y=v[E];if(it(y)&&!rD(y)||ir(y))i||(I&&nD(y)&&(it(y)?y.value=I[E]:sp(y,I[E])),r.state.value[t][E]=y);else if(typeof y=="function"){const A=_(y,E);v[E]=A,a.actions[E]=y}}return cs(x,v),cs(Ne(x),v),Object.defineProperty(x,"$state",{get:()=>r.state.value[t],set:E=>{k(y=>{cs(y,E)})}}),r._p.forEach(E=>{cs(x,o.run(()=>E({store:x,app:r._a,pinia:r,options:a})))}),I&&i&&n.hydrate&&n.hydrate(x.$state,I),u=!0,h=!0,x}function iD(t,e,n){let r;const s=typeof e=="function";r=s?n:e;function i(o,a){const c=Oh();return o=o||(c?Vt(wv,null):null),o&&Ho(o),o=Tv,o._s.has(t)||(s?Av(t,e,r,o):sD(t,r,o)),o._s.get(t)}return i.$id=t,i}function oD(t){const e=cD(t),n=new ArrayBuffer(e.length),r=new DataView(n);for(let s=0;s<n.byteLength;s++)r.setUint8(s,e.charCodeAt(s));return n}const aD="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function cD(t){t.length%4===0&&(t=t.replace(/==?$/,""));let e="",n=0,r=0;for(let s=0;s<t.length;s++)n<<=6,n|=aD.indexOf(t[s]),r+=6,r===24&&(e+=String.fromCharCode((n&16711680)>>16),e+=String.fromCharCode((n&65280)>>8),e+=String.fromCharCode(n&255),n=r=0);return r===12?(n>>=4,e+=String.fromCharCode(n)):r===18&&(n>>=2,e+=String.fromCharCode((n&65280)>>8),e+=String.fromCharCode(n&255)),e}const lD=-1,uD=-2,hD=-3,dD=-4,fD=-5,pD=-6;function mD(t,e){return gD(JSON.parse(t),e)}function gD(t,e){if(typeof t=="number")return s(t,!0);if(!Array.isArray(t)||t.length===0)throw new Error("Invalid input");const n=t,r=Array(n.length);function s(i,o=!1){if(i===lD)return;if(i===hD)return NaN;if(i===dD)return 1/0;if(i===fD)return-1/0;if(i===pD)return-0;if(o||typeof i!="number")throw new Error("Invalid input");if(i in r)return r[i];const a=n[i];if(!a||typeof a!="object")r[i]=a;else if(Array.isArray(a))if(typeof a[0]=="string"){const c=a[0],u=e&&Object.hasOwn(e,c)?e[c]:void 0;if(u){let h=a[1];return typeof h!="number"&&(h=n.push(a[1])-1),r[i]=u(s(h))}switch(c){case"Date":r[i]=new Date(a[1]);break;case"Set":const h=new Set;r[i]=h;for(let m=1;m<a.length;m+=1)h.add(s(a[m]));break;case"Map":const d=new Map;r[i]=d;for(let m=1;m<a.length;m+=2)d.set(s(a[m]),s(a[m+1]));break;case"RegExp":r[i]=new RegExp(a[1],a[2]);break;case"Object":r[i]=Object(a[1]);break;case"BigInt":r[i]=BigInt(a[1]);break;case"null":const f=Object.create(null);r[i]=f;for(let m=1;m<a.length;m+=2)f[a[m]]=s(a[m+1]);break;case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":{const m=globalThis[c],I=new m(s(a[1]));r[i]=a[2]!==void 0?I.subarray(a[2],a[3]):I;break}case"ArrayBuffer":{const m=a[1],I=oD(m);r[i]=I;break}case"Temporal.Duration":case"Temporal.Instant":case"Temporal.PlainDate":case"Temporal.PlainTime":case"Temporal.PlainDateTime":case"Temporal.PlainMonthDay":case"Temporal.PlainYearMonth":case"Temporal.ZonedDateTime":{const m=c.slice(9);r[i]=Temporal[m].from(a[1]);break}case"URL":{const m=new URL(a[1]);r[i]=m;break}case"URLSearchParams":{const m=new URLSearchParams(a[1]);r[i]=m;break}default:throw new Error(`Unknown type ${c}`)}}else{const c=new Array(a.length);r[i]=c;for(let u=0;u<a.length;u+=1){const h=a[u];h!==uD&&(c[u]=s(h))}}else{const c={};r[i]=c;for(const u in a){if(u==="__proto__")throw new Error("Cannot parse an object with a `__proto__` property");const h=a[u];c[u]=s(h)}}return r[i]}return s(0)}const _D=new Set(["link","style","script","noscript"]),yD=new Set(["title","titleTemplate","script","style","noscript"]),Jy=new Set(["base","meta","link","style","script","noscript"]),ID=new Set(["title","base","htmlAttrs","bodyAttrs","meta","link","style","script","noscript"]),ED=new Set(["base","title","titleTemplate","bodyAttrs","htmlAttrs","templateParams"]),TD=new Set(["key","tagPosition","tagPriority","tagDuplicateStrategy","innerHTML","textContent","processTemplateParams"]),wD=new Set(["templateParams","htmlAttrs","bodyAttrs"]),vD=new Set(["theme-color","google-site-verification","og","article","book","profile","twitter","author"]),AD=["name","property","http-equiv"],bD=new Set(["viewport","description","keywords","robots"]);function bv(t){const e=t.split(":");return e.length?vD.has(e[1]):!1}function ip(t){const{props:e,tag:n}=t;if(ED.has(n))return n;if(n==="link"&&e.rel==="canonical")return"canonical";if(e.charset)return"charset";if(t.tag==="meta"){for(const r of AD)if(e[r]!==void 0){const s=e[r],i=s&&typeof s=="string"&&s.includes(":"),o=s&&bD.has(s),c=!(i||o)&&t.key?`:key:${t.key}`:"";return`${n}:${s}${c}`}}if(t.key)return`${n}:key:${t.key}`;if(e.id)return`${n}:id:${e.id}`;if(yD.has(n)){const r=t.textContent||t.innerHTML;if(r)return`${n}:content:${r}`}}function Yy(t){const e=t._h||t._d;if(e)return e;const n=t.textContent||t.innerHTML;return n||`${t.tag}:${Object.entries(t.props).map(([r,s])=>`${r}:${String(s)}`).join(",")}`}function nh(t,e,n){typeof t==="function"&&(!n||n!=="titleTemplate"&&!(n[0]==="o"&&n[1]==="n"))&&(t=t());const s=e?e(n,t):t;if(Array.isArray(s))return s.map(i=>nh(i,e));if(s?.constructor===Object){const i={};for(const o of Object.keys(s))i[o]=nh(s[o],e,o);return i}return s}function RD(t,e){const n=t==="style"?new Map:new Set;function r(s){if(s==null||s===void 0)return;const i=String(s).trim();if(i)if(t==="style"){const[o,...a]=i.split(":").map(c=>c?c.trim():"");o&&a.length&&n.set(o,a.join(":"))}else i.split(" ").filter(Boolean).forEach(o=>n.add(o))}return typeof e=="string"?t==="style"?e.split(";").forEach(r):r(e):Array.isArray(e)?e.forEach(s=>r(s)):e&&typeof e=="object"&&Object.entries(e).forEach(([s,i])=>{i&&i!=="false"&&(t==="style"?n.set(String(s).trim(),String(i)):r(s))}),n}function Rv(t,e){return t.props=t.props||{},e?t.tag==="templateParams"?(t.props=e,t):(Object.entries(e).forEach(([n,r])=>{if(r===null){t.props[n]=null;return}if(n==="class"||n==="style"){t.props[n]=RD(n,r);return}if(TD.has(n)){if(["textContent","innerHTML"].includes(n)&&typeof r=="object"){let a=e.type;if(e.type||(a="application/json"),!a?.endsWith("json")&&a!=="speculationrules")return;e.type=a,t.props.type=a,t[n]=JSON.stringify(r)}else t[n]=r;return}const s=String(r),i=n.startsWith("data-"),o=t.tag==="meta"&&n==="content";s==="true"||s===""?t.props[n]=i||o?s:!0:!r&&i&&s==="false"?t.props[n]="false":r!==void 0&&(t.props[n]=r)}),t):t}function SD(t,e){const n=typeof e=="object"&&typeof e!="function"?e:{[t==="script"||t==="noscript"||t==="style"?"innerHTML":"textContent"]:e},r=Rv({tag:t,props:{}},n);return r.key&&_D.has(r.tag)&&(r.props["data-hid"]=r._h=r.key),r.tag==="script"&&typeof r.innerHTML=="object"&&(r.innerHTML=JSON.stringify(r.innerHTML),r.props.type=r.props.type||"application/json"),Array.isArray(r.props.content)?r.props.content.map(s=>({...r,props:{...r.props,content:s}})):r}function PD(t,e){if(!t)return[];typeof t=="function"&&(t=t());const n=(s,i)=>{for(let o=0;o<e.length;o++)i=e[o](s,i);return i};t=n(void 0,t);const r=[];return t=nh(t,n),Object.entries(t||{}).forEach(([s,i])=>{if(i!==void 0)for(const o of Array.isArray(i)?i:[i])r.push(SD(s,o))}),r.flat()}const Xy=(t,e)=>t._w===e._w?t._p-e._p:t._w-e._w,Zy={base:-10,title:10},CD={critical:-8,high:-1,low:2},eI={meta:{"content-security-policy":-30,charset:-20,viewport:-15},link:{preconnect:20,stylesheet:60,preload:70,modulepreload:70,prefetch:90,"dns-prefetch":90,prerender:90},script:{async:30,defer:80,sync:50},style:{imported:40,sync:60}},kD=/@import/,ec=t=>t===""||t===!0;function ND(t,e){if(typeof e.tagPriority=="number")return e.tagPriority;let n=100;const r=CD[e.tagPriority]||0,s=t.resolvedOptions.disableCapoSorting?{link:{},script:{},style:{}}:eI;if(e.tag in Zy)n=Zy[e.tag];else if(e.tag==="meta"){const i=e.props["http-equiv"]==="content-security-policy"?"content-security-policy":e.props.charset?"charset":e.props.name==="viewport"?"viewport":null;i&&(n=eI.meta[i])}else if(e.tag==="link"&&e.props.rel)n=s.link[e.props.rel];else if(e.tag==="script"){const i=String(e.props.type);ec(e.props.async)?n=s.script.async:e.props.src&&!ec(e.props.defer)&&!ec(e.props.async)&&i!=="module"&&!i.endsWith("json")||e.innerHTML&&!i.endsWith("json")?n=s.script.sync:(ec(e.props.defer)&&e.props.src&&!ec(e.props.async)||i==="module")&&(n=s.script.defer)}else e.tag==="style"&&(n=e.innerHTML&&kD.test(e.innerHTML)?s.style.imported:s.style.sync);return(n||100)+r}function tI(t,e){const n=typeof e=="function"?e(t):e,r=n.key||String(t.plugins.size+1);t.plugins.get(r)||(t.plugins.set(r,n),t.hooks.addHooks(n.hooks||{}))}function DD(t={}){const e=hv();e.addHooks(t.hooks||{});const n=!t.document,r=new Map,s=new Map,i=new Set,o={_entryCount:1,plugins:s,dirty:!1,resolvedOptions:t,hooks:e,ssr:n,entries:r,headEntries(){return[...r.values()]},use:a=>tI(o,a),push(a,c){const u={...c||{}};delete u.head;const h=u._index??o._entryCount++,d={_i:h,input:a,options:u},f={_poll(m=!1){o.dirty=!0,!m&&i.add(h),e.callHook("entries:updated",o)},dispose(){r.delete(h)&&o.invalidate()},patch(m){(!u.mode||u.mode==="server"&&n||u.mode==="client"&&!n)&&(d.input=m,r.set(h,d),f._poll())}};return f.patch(a),f},async resolveTags(){const a={tagMap:new Map,tags:[],entries:[...o.entries.values()]};for(await e.callHook("entries:resolve",a);i.size;){const f=i.values().next().value;i.delete(f);const m=r.get(f);if(m){const I={tags:PD(m.input,t.propResolvers||[]).map(T=>Object.assign(T,m.options)),entry:m};await e.callHook("entries:normalize",I),m._tags=I.tags.map((T,k)=>(T._w=ND(o,T),T._p=(m._i<<10)+k,T._d=ip(T),T))}}let c=!1;a.entries.flatMap(f=>(f._tags||[]).map(m=>({...m,props:{...m.props}}))).sort(Xy).reduce((f,m)=>{const I=String(m._d||m._p);if(!f.has(I))return f.set(I,m);const T=f.get(I);if((m?.tagDuplicateStrategy||(wD.has(m.tag)?"merge":null)||(m.key&&m.key===T.key?"merge":null))==="merge"){const V={...T.props};Object.entries(m.props).forEach(([N,_])=>V[N]=N==="style"?new Map([...T.props.style||new Map,..._]):N==="class"?new Set([...T.props.class||new Set,..._]):_),f.set(I,{...m,props:V})}else m._p>>10===T._p>>10&&m.tag==="meta"&&bv(I)?(f.set(I,Object.assign([...Array.isArray(T)?T:[T],m],m)),c=!0):(m._w===T._w?m._p>T._p:m?._w<T?._w)&&f.set(I,m);return f},a.tagMap);const u=a.tagMap.get("title"),h=a.tagMap.get("titleTemplate");if(o._title=u?.textContent,h){const f=h?.textContent;if(o._titleTemplate=f,f){let m=typeof f=="function"?f(u?.textContent):f;typeof m=="string"&&!o.plugins.has("template-params")&&(m=m.replace("%s",u?.textContent||"")),u?m===null?a.tagMap.delete("title"):a.tagMap.set("title",{...u,textContent:m}):(h.tag="title",h.textContent=m)}}a.tags=Array.from(a.tagMap.values()),c&&(a.tags=a.tags.flat().sort(Xy)),await e.callHook("tags:beforeResolve",a),await e.callHook("tags:resolve",a),await e.callHook("tags:afterResolve",a);const d=[];for(const f of a.tags){const{innerHTML:m,tag:I,props:T}=f;if(ID.has(I)&&!(Object.keys(T).length===0&&!f.innerHTML&&!f.textContent)&&!(I==="meta"&&!T.content&&!T["http-equiv"]&&!T.charset)){if(I==="script"&&m){if(String(T.type).endsWith("json")){const k=typeof m=="string"?m:JSON.stringify(m);f.innerHTML=k.replace(/</g,"\\u003C")}else typeof m=="string"&&(f.innerHTML=m.replace(new RegExp(`</${I}`,"g"),`<\\/${I}`));f._d=ip(f)}d.push(f)}}return d},invalidate(){for(const a of r.values())i.add(a._i);o.dirty=!0,e.callHook("entries:updated",o)}};return(t?.plugins||[]).forEach(a=>tI(o,a)),o.hooks.callHook("init",o),t.init?.forEach(a=>a&&o.push(a)),o}const VD=(t,e)=>it(e)?bC(e):e,Sv="usehead";function xD(t){return{install(n){n.config.globalProperties.$unhead=t,n.config.globalProperties.$head=t,n.provide(Sv,t)}}.install}function OD(){if(Oh()){const t=Vt(Sv);if(!t)throw new Error("useHead() was called without provide context, ensure you call it through the setup() function.");return t}throw new Error("useHead() was called without provide context, ensure you call it through the setup() function.")}function $j(t,e={}){const n=e.head||OD();return n.ssr?n.push(t||{},e):LD(n,t,e)}function LD(t,e,n={}){const r=ft(!1);let s;return UC(()=>{const o=r.value?{}:nh(e,VD);s?s.patch(o):s=t.push(o,n)}),Hi()&&(ml(()=>{s.dispose()}),gw(()=>{r.value=!0}),mw(()=>{r.value=!1})),s}let wu,vu;function MD(){return wu=$fetch(wm(`builds/meta/${gl().app.buildId}.json`),{responseType:"json"}),wu.then(t=>{vu=$N(t.matcher)}).catch(t=>{console.error("[nuxt] Error fetching app manifest.",t)}),wu}function $h(){return wu||MD()}async function vm(t){const e=typeof t=="string"?t:t.path;if(await $h(),!vu)return console.error("[nuxt] Error creating app manifest matcher.",vu),{};try{return gv({},...vu.matchAll(e).reverse())}catch(n){return console.error("[nuxt] Error matching route rules.",n),{}}}async function nI(t,e={}){if(!await Cv(t))return null;const r=await UD(t,e);return await Pv(r)||null}const FD="_payload.json";async function UD(t,e={}){const n=new URL(t,"http://localhost");if(n.host!=="localhost"||$i(n.pathname,{acceptRelative:!0}))throw new Error("Payload URL must not include hostname: "+t);const r=gl(),s=e.hash||(e.fresh?Date.now():r.app.buildId),i=r.app.cdnURL,o=i&&await Cv(t)?i:r.app.baseURL;return Em(o,n.pathname,FD+(s?`?${s}`:""))}async function Pv(t){const e=fetch(t,{cache:"force-cache"}).then(n=>n.text().then(kv));try{return await e}catch(n){console.warn("[nuxt] Cannot load payload ",t,n)}return null}async function Cv(t=qh().path){const e=ze();return t=t==="/"?t:t.replace(/\/$/,""),(await $h()).prerendered.includes(t)?!0:e.runWithContext(async()=>{const r=await vm({path:t});return!!r.prerender&&!r.redirect})}let si=null;async function BD(){if(si)return si;const t=document.getElementById("__NUXT_DATA__");if(!t)return{};const e=await kv(t.textContent||""),n=t.dataset.src?await Pv(t.dataset.src):void 0;return si={...e,...n,...window.__NUXT__},si.config?.public&&(si.config.public=jr(si.config.public)),si}async function kv(t){return await mD(t,ze()._payloadRevivers)}function Nv(t,e){ze()._payloadRevivers[t]=e}const jD=jN(()=>{Nv("skipHydrate",t=>{})}),qD=[["NuxtError",t=>vi(t)],["EmptyShallowRef",t=>Lo(t==="_"?void 0:t==="0n"?BigInt(0):Yu(t))],["EmptyRef",t=>ft(t==="_"?void 0:t==="0n"?BigInt(0):Yu(t))],["ShallowRef",t=>Lo(t)],["ShallowReactive",t=>er(t)],["Ref",t=>ft(t)],["Reactive",t=>jr(t)]],HD=Dn({name:"nuxt:revive-payload:client",order:-30,async setup(t){let e,n;for(const[r,s]of qD)Nv(r,s);Object.assign(t.payload,([e,n]=Ts(()=>t.runWithContext(BD)),e=await e,n(),e)),delete window.__NUXT__}});async function Am(t,e={}){const n=e.document||t.resolvedOptions.document;if(!n||!t.dirty)return;const r={shouldRender:!0,tags:[]};if(await t.hooks.callHook("dom:beforeRender",r),!!r.shouldRender)return t._domUpdatePromise||(t._domUpdatePromise=new Promise(async s=>{const i=new Map,o=new Promise(m=>{t.resolveTags().then(I=>{m(I.map(T=>{const k=i.get(T._d)||0,V={tag:T,id:(k?`${T._d}:${k}`:T._d)||Yy(T),shouldRender:!0};return T._d&&bv(T._d)&&i.set(T._d,k+1),V}))})});let a=t._dom;if(!a){a={title:n.title,elMap:new Map().set("htmlAttrs",n.documentElement).set("bodyAttrs",n.body)};for(const m of["body","head"]){const I=n[m]?.children;for(const T of I){const k=T.tagName.toLowerCase();if(!Jy.has(k))continue;const V=Rv({tag:k,props:{}},{innerHTML:T.innerHTML,...T.getAttributeNames().reduce((N,_)=>(N[_]=T.getAttribute(_),N),{})||{}});if(V.key=T.getAttribute("data-hid")||void 0,V._d=ip(V)||Yy(V),a.elMap.has(V._d)){let N=1,_=V._d;for(;a.elMap.has(_);)_=`${V._d}:${N++}`;a.elMap.set(_,T)}else a.elMap.set(V._d,T)}}}a.pendingSideEffects={...a.sideEffects},a.sideEffects={};function c(m,I,T){const k=`${m}:${I}`;a.sideEffects[k]=T,delete a.pendingSideEffects[k]}function u({id:m,$el:I,tag:T}){const k=T.tag.endsWith("Attrs");a.elMap.set(m,I),k||(T.textContent&&T.textContent!==I.textContent&&(I.textContent=T.textContent),T.innerHTML&&T.innerHTML!==I.innerHTML&&(I.innerHTML=T.innerHTML),c(m,"el",()=>{I?.remove(),a.elMap.delete(m)}));for(const V in T.props){if(!Object.prototype.hasOwnProperty.call(T.props,V))continue;const N=T.props[V];if(V.startsWith("on")&&typeof N=="function"){const C=I?.dataset;if(C&&C[`${V}fired`]){const x=V.slice(0,-5);N.call(I,new Event(x.substring(2)))}I.getAttribute(`data-${V}`)!==""&&((T.tag==="bodyAttrs"?n.defaultView:I).addEventListener(V.substring(2),N.bind(I)),I.setAttribute(`data-${V}`,""));continue}const _=`attr:${V}`;if(V==="class"){if(!N)continue;for(const C of N)k&&c(m,`${_}:${C}`,()=>I.classList.remove(C)),!I.classList.contains(C)&&I.classList.add(C)}else if(V==="style"){if(!N)continue;for(const[C,x]of N)c(m,`${_}:${C}`,()=>{I.style.removeProperty(C)}),I.style.setProperty(C,x)}else N!==!1&&N!==null&&(I.getAttribute(V)!==N&&I.setAttribute(V,N===!0?"":String(N)),k&&c(m,_,()=>I.removeAttribute(V)))}}const h=[],d={bodyClose:void 0,bodyOpen:void 0,head:void 0},f=await o;for(const m of f){const{tag:I,shouldRender:T,id:k}=m;if(T){if(I.tag==="title"){n.title=I.textContent,c("title","",()=>n.title=a.title);continue}m.$el=m.$el||a.elMap.get(k),m.$el?u(m):Jy.has(I.tag)&&h.push(m)}}for(const m of h){const I=m.tag.tagPosition||"head";m.$el=n.createElement(m.tag.tag),u(m),d[I]=d[I]||n.createDocumentFragment(),d[I].appendChild(m.$el)}for(const m of f)await t.hooks.callHook("dom:renderTag",m,n,c);d.head&&n.head.appendChild(d.head),d.bodyOpen&&n.body.insertBefore(d.bodyOpen,n.body.firstChild),d.bodyClose&&n.body.appendChild(d.bodyClose);for(const m in a.pendingSideEffects)a.pendingSideEffects[m]();t._dom=a,await t.hooks.callHook("dom:rendered",{renders:f}),s()}).finally(()=>{t._domUpdatePromise=void 0,t.dirty=!1})),t._domUpdatePromise}function $D(t={}){const e=t.domOptions?.render||Am;t.document=t.document||(typeof window<"u"?document:void 0);const n=t.document?.head.querySelector('script[id="unhead:payload"]')?.innerHTML||!1;return DD({...t,plugins:[...t.plugins||[],{key:"client",hooks:{"entries:updated":e}}],init:[n?JSON.parse(n):!1,...t.init||[]]})}function GD(t,e){let n=0;return()=>{const r=++n;e(()=>{n===r&&t()})}}function KD(t={}){const e=$D({domOptions:{render:GD(()=>Am(e),n=>setTimeout(n,0))},...t});return e.install=xD(e),e}const WD={disableDefaults:!0},zD=Dn({name:"nuxt:head",enforce:"pre",setup(t){const e=KD(WD);t.vueApp.use(e);{let n=!0;const r=async()=>{n=!1,await Am(e)};e.hooks.hook("dom:beforeRender",s=>{s.shouldRender=!n}),t.hooks.hook("page:start",()=>{n=!0}),t.hooks.hook("page:finish",()=>{t.isHydrating||r()}),t.hooks.hook("app:error",r),t.hooks.hook("app:suspense:resolve",r)}}});const mo=typeof document<"u";function Dv(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function QD(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&Dv(t.default)}const Le=Object.assign;function af(t,e){const n={};for(const r in e){const s=e[r];n[r]=Gn(s)?s.map(t):t(s)}return n}const bc=()=>{},Gn=Array.isArray;function rI(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}const Vv=/#/g,JD=/&/g,YD=/\//g,XD=/=/g,ZD=/\?/g,xv=/\+/g,eV=/%5B/g,tV=/%5D/g,Ov=/%5E/g,nV=/%60/g,Lv=/%7B/g,rV=/%7C/g,Mv=/%7D/g,sV=/%20/g;function bm(t){return t==null?"":encodeURI(""+t).replace(rV,"|").replace(eV,"[").replace(tV,"]")}function iV(t){return bm(t).replace(Lv,"{").replace(Mv,"}").replace(Ov,"^")}function op(t){return bm(t).replace(xv,"%2B").replace(sV,"+").replace(Vv,"%23").replace(JD,"%26").replace(nV,"`").replace(Lv,"{").replace(Mv,"}").replace(Ov,"^")}function oV(t){return op(t).replace(XD,"%3D")}function aV(t){return bm(t).replace(Vv,"%23").replace(ZD,"%3F")}function cV(t){return aV(t).replace(YD,"%2F")}function Kc(t){if(t==null)return null;try{return decodeURIComponent(""+t)}catch{}return""+t}const lV=/\/$/,uV=t=>t.replace(lV,"");function cf(t,e,n="/"){let r,s={},i="",o="";const a=e.indexOf("#");let c=e.indexOf("?");return c=a>=0&&c>a?-1:c,c>=0&&(r=e.slice(0,c),i=e.slice(c,a>0?a:e.length),s=t(i.slice(1))),a>=0&&(r=r||e.slice(0,a),o=e.slice(a,e.length)),r=pV(r??e,n),{fullPath:r+i+o,path:r,query:s,hash:Kc(o)}}function hV(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function sI(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function dV(t,e,n){const r=e.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&$o(e.matched[r],n.matched[s])&&Fv(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function $o(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function Fv(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var n in t)if(!fV(t[n],e[n]))return!1;return!0}function fV(t,e){return Gn(t)?iI(t,e):Gn(e)?iI(e,t):t?.valueOf()===e?.valueOf()}function iI(t,e){return Gn(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function pV(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),s=r[r.length-1];(s===".."||s===".")&&r.push("");let i=n.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+r.slice(o).join("/")}const Pn={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let ap=(function(t){return t.pop="pop",t.push="push",t})({}),lf=(function(t){return t.back="back",t.forward="forward",t.unknown="",t})({});function mV(t){if(!t)if(mo){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),uV(t)}const gV=/^[^#]+#/;function _V(t,e){return t.replace(gV,"#")+e}function yV(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const Gh=()=>({left:window.scrollX,top:window.scrollY});function IV(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;e=yV(s,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function oI(t,e){return(history.state?history.state.position-e:-1)+t}const cp=new Map;function EV(t,e){cp.set(t,e)}function TV(t){const e=cp.get(t);return cp.delete(t),e}function wV(t){return typeof t=="string"||t&&typeof t=="object"}function Uv(t){return typeof t=="string"||typeof t=="symbol"}let ut=(function(t){return t[t.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",t[t.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",t[t.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",t[t.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",t[t.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",t})({});const Bv=Symbol("");ut.MATCHER_NOT_FOUND+"",ut.NAVIGATION_GUARD_REDIRECT+"",ut.NAVIGATION_ABORTED+"",ut.NAVIGATION_CANCELLED+"",ut.NAVIGATION_DUPLICATED+"";function Go(t,e){return Le(new Error,{type:t,[Bv]:!0},e)}function gr(t,e){return t instanceof Error&&Bv in t&&(e==null||!!(t.type&e))}const vV=["params","query","hash"];function AV(t){if(typeof t=="string")return t;if(t.path!=null)return t.path;const e={};for(const n of vV)n in t&&(e[n]=t[n]);return JSON.stringify(e,null,2)}function bV(t){const e={};if(t===""||t==="?")return e;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let r=0;r<n.length;++r){const s=n[r].replace(xv," "),i=s.indexOf("="),o=Kc(i<0?s:s.slice(0,i)),a=i<0?null:Kc(s.slice(i+1));if(o in e){let c=e[o];Gn(c)||(c=e[o]=[c]),c.push(a)}else e[o]=a}return e}function aI(t){let e="";for(let n in t){const r=t[n];if(n=oV(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(Gn(r)?r.map(s=>s&&op(s)):[r&&op(r)]).forEach(s=>{s!==void 0&&(e+=(e.length?"&":"")+n,s!=null&&(e+="="+s))})}return e}function RV(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=Gn(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return e}const SV=Symbol(""),cI=Symbol(""),Kh=Symbol(""),Rm=Symbol(""),lp=Symbol("");function tc(){let t=[];function e(r){return t.push(r),()=>{const s=t.indexOf(r);s>-1&&t.splice(s,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function ds(t,e,n,r,s,i=o=>o()){const o=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((a,c)=>{const u=f=>{f===!1?c(Go(ut.NAVIGATION_ABORTED,{from:n,to:e})):f instanceof Error?c(f):wV(f)?c(Go(ut.NAVIGATION_GUARD_REDIRECT,{from:e,to:f})):(o&&r.enterCallbacks[s]===o&&typeof f=="function"&&o.push(f),a())},h=i(()=>t.call(r&&r.instances[s],e,n,u));let d=Promise.resolve(h);t.length<3&&(d=d.then(u)),d.catch(f=>c(f))})}function uf(t,e,n,r,s=i=>i()){const i=[];for(const o of t)for(const a in o.components){let c=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(Dv(c)){const u=(c.__vccOpts||c)[e];u&&i.push(ds(u,n,r,o,a,s))}else{let u=c();i.push(()=>u.then(h=>{if(!h)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const d=QD(h)?h.default:h;o.mods[a]=h,o.components[a]=d;const f=(d.__vccOpts||d)[e];return f&&ds(f,n,r,o,a,s)()}))}}return i}function PV(t,e){const n=[],r=[],s=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const a=e.matched[o];a&&(t.matched.find(u=>$o(u,a))?r.push(a):n.push(a));const c=t.matched[o];c&&(e.matched.find(u=>$o(u,c))||s.push(c))}return[n,r,s]}let CV=()=>location.protocol+"//"+location.host;function jv(t,e){const{pathname:n,search:r,hash:s}=e,i=t.indexOf("#");if(i>-1){let o=s.includes(t.slice(i))?t.slice(i).length:1,a=s.slice(o);return a[0]!=="/"&&(a="/"+a),sI(a,"")}return sI(n,t)+r+s}function kV(t,e,n,r){let s=[],i=[],o=null;const a=({state:f})=>{const m=jv(t,location),I=n.value,T=e.value;let k=0;if(f){if(n.value=m,e.value=f,o&&o===I){o=null;return}k=T?f.position-T.position:0}else r(m);s.forEach(V=>{V(n.value,I,{delta:k,type:ap.pop,direction:k?k>0?lf.forward:lf.back:lf.unknown})})};function c(){o=n.value}function u(f){s.push(f);const m=()=>{const I=s.indexOf(f);I>-1&&s.splice(I,1)};return i.push(m),m}function h(){if(document.visibilityState==="hidden"){const{history:f}=window;if(!f.state)return;f.replaceState(Le({},f.state,{scroll:Gh()}),"")}}function d(){for(const f of i)f();i=[],window.removeEventListener("popstate",a),window.removeEventListener("pagehide",h),document.removeEventListener("visibilitychange",h)}return window.addEventListener("popstate",a),window.addEventListener("pagehide",h),document.addEventListener("visibilitychange",h),{pauseListeners:c,listen:u,destroy:d}}function lI(t,e,n,r=!1,s=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:s?Gh():null}}function NV(t){const{history:e,location:n}=window,r={value:jv(t,n)},s={value:e.state};s.value||i(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(c,u,h){const d=t.indexOf("#"),f=d>-1?(n.host&&document.querySelector("base")?t:t.slice(d))+c:CV()+t+c;try{e[h?"replaceState":"pushState"](u,"",f),s.value=u}catch(m){console.error(m),n[h?"replace":"assign"](f)}}function o(c,u){i(c,Le({},e.state,lI(s.value.back,c,s.value.forward,!0),u,{position:s.value.position}),!0),r.value=c}function a(c,u){const h=Le({},s.value,e.state,{forward:c,scroll:Gh()});i(h.current,h,!0),i(c,Le({},lI(r.value,c,null),{position:h.position+1},u),!1),r.value=c}return{location:r,state:s,push:a,replace:o}}function DV(t){t=mV(t);const e=NV(t),n=kV(t,e.state,e.location,e.replace);function r(i,o=!0){o||n.pauseListeners(),history.go(i)}const s=Le({location:"",base:t,go:r,createHref:_V.bind(null,t)},e,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}let _i=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.Group=2]="Group",t})({});var At=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.ParamRegExp=2]="ParamRegExp",t[t.ParamRegExpEnd=3]="ParamRegExpEnd",t[t.EscapeNext=4]="EscapeNext",t})(At||{});const VV={type:_i.Static,value:""},xV=/[a-zA-Z0-9_]/;function OV(t){if(!t)return[[]];if(t==="/")return[[VV]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(m){throw new Error(`ERR (${n})/"${u}": ${m}`)}let n=At.Static,r=n;const s=[];let i;function o(){i&&s.push(i),i=[]}let a=0,c,u="",h="";function d(){u&&(n===At.Static?i.push({type:_i.Static,value:u}):n===At.Param||n===At.ParamRegExp||n===At.ParamRegExpEnd?(i.length>1&&(c==="*"||c==="+")&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),i.push({type:_i.Param,value:u,regexp:h,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):e("Invalid state to consume buffer"),u="")}function f(){u+=c}for(;a<t.length;){if(c=t[a++],c==="\\"&&n!==At.ParamRegExp){r=n,n=At.EscapeNext;continue}switch(n){case At.Static:c==="/"?(u&&d(),o()):c===":"?(d(),n=At.Param):f();break;case At.EscapeNext:f(),n=r;break;case At.Param:c==="("?n=At.ParamRegExp:xV.test(c)?f():(d(),n=At.Static,c!=="*"&&c!=="?"&&c!=="+"&&a--);break;case At.ParamRegExp:c===")"?h[h.length-1]=="\\"?h=h.slice(0,-1)+c:n=At.ParamRegExpEnd:h+=c;break;case At.ParamRegExpEnd:d(),n=At.Static,c!=="*"&&c!=="?"&&c!=="+"&&a--,h="";break;default:e("Unknown state");break}}return n===At.ParamRegExp&&e(`Unfinished custom RegExp for param "${u}"`),d(),o(),s}const uI="[^/]+?",LV={sensitive:!1,strict:!1,start:!0,end:!0};var Zt=(function(t){return t[t._multiplier=10]="_multiplier",t[t.Root=90]="Root",t[t.Segment=40]="Segment",t[t.SubSegment=30]="SubSegment",t[t.Static=40]="Static",t[t.Dynamic=20]="Dynamic",t[t.BonusCustomRegExp=10]="BonusCustomRegExp",t[t.BonusWildcard=-50]="BonusWildcard",t[t.BonusRepeatable=-20]="BonusRepeatable",t[t.BonusOptional=-8]="BonusOptional",t[t.BonusStrict=.7000000000000001]="BonusStrict",t[t.BonusCaseSensitive=.25]="BonusCaseSensitive",t})(Zt||{});const MV=/[.+*?^${}()[\]/\\]/g;function FV(t,e){const n=Le({},LV,e),r=[];let s=n.start?"^":"";const i=[];for(const u of t){const h=u.length?[]:[Zt.Root];n.strict&&!u.length&&(s+="/");for(let d=0;d<u.length;d++){const f=u[d];let m=Zt.Segment+(n.sensitive?Zt.BonusCaseSensitive:0);if(f.type===_i.Static)d||(s+="/"),s+=f.value.replace(MV,"\\$&"),m+=Zt.Static;else if(f.type===_i.Param){const{value:I,repeatable:T,optional:k,regexp:V}=f;i.push({name:I,repeatable:T,optional:k});const N=V||uI;if(N!==uI){m+=Zt.BonusCustomRegExp;try{`${N}`}catch(C){throw new Error(`Invalid custom RegExp for param "${I}" (${N}): `+C.message)}}let _=T?`((?:${N})(?:/(?:${N}))*)`:`(${N})`;d||(_=k&&u.length<2?`(?:/${_})`:"/"+_),k&&(_+="?"),s+=_,m+=Zt.Dynamic,k&&(m+=Zt.BonusOptional),T&&(m+=Zt.BonusRepeatable),N===".*"&&(m+=Zt.BonusWildcard)}h.push(m)}r.push(h)}if(n.strict&&n.end){const u=r.length-1;r[u][r[u].length-1]+=Zt.BonusStrict}n.strict||(s+="/?"),n.end?s+="$":n.strict&&!s.endsWith("/")&&(s+="(?:/|$)");const o=new RegExp(s,n.sensitive?"":"i");function a(u){const h=u.match(o),d={};if(!h)return null;for(let f=1;f<h.length;f++){const m=h[f]||"",I=i[f-1];d[I.name]=m&&I.repeatable?m.split("/"):m}return d}function c(u){let h="",d=!1;for(const f of t){(!d||!h.endsWith("/"))&&(h+="/"),d=!1;for(const m of f)if(m.type===_i.Static)h+=m.value;else if(m.type===_i.Param){const{value:I,repeatable:T,optional:k}=m,V=I in u?u[I]:"";if(Gn(V)&&!T)throw new Error(`Provided param "${I}" is an array but it is not repeatable (* or + modifiers)`);const N=Gn(V)?V.join("/"):V;if(!N)if(k)f.length<2&&(h.endsWith("/")?h=h.slice(0,-1):d=!0);else throw new Error(`Missing required param "${I}"`);h+=N}}return h||"/"}return{re:o,score:r,keys:i,parse:a,stringify:c}}function UV(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===Zt.Static+Zt.Segment?-1:1:t.length>e.length?e.length===1&&e[0]===Zt.Static+Zt.Segment?1:-1:0}function qv(t,e){let n=0;const r=t.score,s=e.score;for(;n<r.length&&n<s.length;){const i=UV(r[n],s[n]);if(i)return i;n++}if(Math.abs(s.length-r.length)===1){if(hI(r))return 1;if(hI(s))return-1}return s.length-r.length}function hI(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const BV={strict:!1,end:!0,sensitive:!1};function jV(t,e,n){const r=FV(OV(t.path),n),s=Le(r,{record:t,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function qV(t,e){const n=[],r=new Map;e=rI(BV,e);function s(d){return r.get(d)}function i(d,f,m){const I=!m,T=fI(d);T.aliasOf=m&&m.record;const k=rI(e,d),V=[T];if("alias"in d){const C=typeof d.alias=="string"?[d.alias]:d.alias;for(const x of C)V.push(fI(Le({},T,{components:m?m.record.components:T.components,path:x,aliasOf:m?m.record:T})))}let N,_;for(const C of V){const{path:x}=C;if(f&&x[0]!=="/"){const U=f.record.path,v=U[U.length-1]==="/"?"":"/";C.path=f.record.path+(x&&v+x)}if(N=jV(C,f,k),m?m.alias.push(N):(_=_||N,_!==N&&_.alias.push(N),I&&d.name&&!pI(N)&&o(d.name)),Hv(N)&&c(N),T.children){const U=T.children;for(let v=0;v<U.length;v++)i(U[v],N,m&&m.children[v])}m=m||N}return _?()=>{o(_)}:bc}function o(d){if(Uv(d)){const f=r.get(d);f&&(r.delete(d),n.splice(n.indexOf(f),1),f.children.forEach(o),f.alias.forEach(o))}else{const f=n.indexOf(d);f>-1&&(n.splice(f,1),d.record.name&&r.delete(d.record.name),d.children.forEach(o),d.alias.forEach(o))}}function a(){return n}function c(d){const f=GV(d,n);n.splice(f,0,d),d.record.name&&!pI(d)&&r.set(d.record.name,d)}function u(d,f){let m,I={},T,k;if("name"in d&&d.name){if(m=r.get(d.name),!m)throw Go(ut.MATCHER_NOT_FOUND,{location:d});k=m.record.name,I=Le(dI(f.params,m.keys.filter(_=>!_.optional).concat(m.parent?m.parent.keys.filter(_=>_.optional):[]).map(_=>_.name)),d.params&&dI(d.params,m.keys.map(_=>_.name))),T=m.stringify(I)}else if(d.path!=null)T=d.path,m=n.find(_=>_.re.test(T)),m&&(I=m.parse(T),k=m.record.name);else{if(m=f.name?r.get(f.name):n.find(_=>_.re.test(f.path)),!m)throw Go(ut.MATCHER_NOT_FOUND,{location:d,currentLocation:f});k=m.record.name,I=Le({},f.params,d.params),T=m.stringify(I)}const V=[];let N=m;for(;N;)V.unshift(N.record),N=N.parent;return{name:k,path:T,params:I,matched:V,meta:$V(V)}}t.forEach(d=>i(d));function h(){n.length=0,r.clear()}return{addRoute:i,resolve:u,removeRoute:o,clearRoutes:h,getRoutes:a,getRecordMatcher:s}}function dI(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function fI(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:HV(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function HV(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function pI(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function $V(t){return t.reduce((e,n)=>Le(e,n.meta),{})}function GV(t,e){let n=0,r=e.length;for(;n!==r;){const i=n+r>>1;qv(t,e[i])<0?r=i:n=i+1}const s=KV(t);return s&&(r=e.lastIndexOf(s,r-1)),r}function KV(t){let e=t;for(;e=e.parent;)if(Hv(e)&&qv(t,e)===0)return e}function Hv({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function mI(t){const e=Vt(Kh),n=Vt(Rm),r=Kt(()=>{const c=me(t.to);return e.resolve(c)}),s=Kt(()=>{const{matched:c}=r.value,{length:u}=c,h=c[u-1],d=n.matched;if(!h||!d.length)return-1;const f=d.findIndex($o.bind(null,h));if(f>-1)return f;const m=gI(c[u-2]);return u>1&&gI(h)===m&&d[d.length-1].path!==m?d.findIndex($o.bind(null,c[u-2])):f}),i=Kt(()=>s.value>-1&&YV(n.params,r.value.params)),o=Kt(()=>s.value>-1&&s.value===n.matched.length-1&&Fv(n.params,r.value.params));function a(c={}){if(JV(c)){const u=e[me(t.replace)?"replace":"push"](me(t.to)).catch(bc);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:r,href:Kt(()=>r.value.href),isActive:i,isExactActive:o,navigate:a}}function WV(t){return t.length===1?t[0]:t}const zV=js({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:mI,setup(t,{slots:e}){const n=jr(mI(t)),{options:r}=Vt(Kh),s=Kt(()=>({[_I(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[_I(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&WV(e.default(n));return t.custom?i:Wt("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},i)}}}),QV=zV;function JV(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function YV(t,e){for(const n in e){const r=e[n],s=t[n];if(typeof r=="string"){if(r!==s)return!1}else if(!Gn(s)||s.length!==r.length||r.some((i,o)=>i.valueOf()!==s[o].valueOf()))return!1}return!0}function gI(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const _I=(t,e,n)=>t??e??n,XV=js({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=Vt(lp),s=Kt(()=>t.route||r.value),i=Vt(cI,0),o=Kt(()=>{let u=me(i);const{matched:h}=s.value;let d;for(;(d=h[u])&&!d.components;)u++;return u}),a=Kt(()=>s.value.matched[o.value]);Is(cI,Kt(()=>o.value+1)),Is(SV,a),Is(lp,s);const c=ft();return kr(()=>[c.value,a.value,t.name],([u,h,d],[f,m,I])=>{h&&(h.instances[d]=u,m&&m!==h&&u&&u===f&&(h.leaveGuards.size||(h.leaveGuards=m.leaveGuards),h.updateGuards.size||(h.updateGuards=m.updateGuards))),u&&h&&(!m||!$o(h,m)||!f)&&(h.enterCallbacks[d]||[]).forEach(T=>T(u))},{flush:"post"}),()=>{const u=s.value,h=t.name,d=a.value,f=d&&d.components[h];if(!f)return yI(n.default,{Component:f,route:u});const m=d.props[h],I=m?m===!0?u.params:typeof m=="function"?m(u):m:null,k=Wt(f,Le({},I,e,{onVnodeUnmounted:V=>{V.component.isUnmounted&&(d.instances[h]=null)},ref:c}));return yI(n.default,{Component:k,route:u})||k}}});function yI(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const $v=XV;function ZV(t){const e=qV(t.routes,t),n=t.parseQuery||bV,r=t.stringifyQuery||aI,s=t.history,i=tc(),o=tc(),a=tc(),c=Lo(Pn);let u=Pn;mo&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const h=af.bind(null,H=>""+H),d=af.bind(null,cV),f=af.bind(null,Kc);function m(H,oe){let te,de;return Uv(H)?(te=e.getRecordMatcher(H),de=oe):de=H,e.addRoute(de,te)}function I(H){const oe=e.getRecordMatcher(H);oe&&e.removeRoute(oe)}function T(){return e.getRoutes().map(H=>H.record)}function k(H){return!!e.getRecordMatcher(H)}function V(H,oe){if(oe=Le({},oe||c.value),typeof H=="string"){const D=cf(n,H,oe.path),F=e.resolve({path:D.path},oe),$=s.createHref(D.fullPath);return Le(D,F,{params:f(F.params),hash:Kc(D.hash),redirectedFrom:void 0,href:$})}let te;if(H.path!=null)te=Le({},H,{path:cf(n,H.path,oe.path).path});else{const D=Le({},H.params);for(const F in D)D[F]==null&&delete D[F];te=Le({},H,{params:d(D)}),oe.params=d(oe.params)}const de=e.resolve(te,oe),ve=H.hash||"";de.params=h(f(de.params));const $e=hV(r,Le({},H,{hash:iV(ve),path:de.path})),R=s.createHref($e);return Le({fullPath:$e,hash:ve,query:r===aI?RV(H.query):H.query||{}},de,{redirectedFrom:void 0,href:R})}function N(H){return typeof H=="string"?cf(n,H,c.value.path):Le({},H)}function _(H,oe){if(u!==H)return Go(ut.NAVIGATION_CANCELLED,{from:oe,to:H})}function C(H){return v(H)}function x(H){return C(Le(N(H),{replace:!0}))}function U(H,oe){const te=H.matched[H.matched.length-1];if(te&&te.redirect){const{redirect:de}=te;let ve=typeof de=="function"?de(H,oe):de;return typeof ve=="string"&&(ve=ve.includes("?")||ve.includes("#")?ve=N(ve):{path:ve},ve.params={}),Le({query:H.query,hash:H.hash,params:ve.path!=null?{}:H.params},ve)}}function v(H,oe){const te=u=V(H),de=c.value,ve=H.state,$e=H.force,R=H.replace===!0,D=U(te,de);if(D)return v(Le(N(D),{state:typeof D=="object"?Le({},ve,D.state):ve,force:$e,replace:R}),oe||te);const F=te;F.redirectedFrom=oe;let $;return!$e&&dV(r,de,te)&&($=Go(ut.NAVIGATION_DUPLICATED,{to:F,from:de}),pn(de,de,!0,!1)),($?Promise.resolve($):A(F,de)).catch(j=>gr(j)?gr(j,ut.NAVIGATION_GUARD_REDIRECT)?j:Wn(j):ie(j,F,de)).then(j=>{if(j){if(gr(j,ut.NAVIGATION_GUARD_REDIRECT))return v(Le({replace:R},N(j.to),{state:typeof j.to=="object"?Le({},ve,j.to.state):ve,force:$e}),oe||F)}else j=S(F,de,!0,R,ve);return P(F,de,j),j})}function E(H,oe){const te=_(H,oe);return te?Promise.reject(te):Promise.resolve()}function y(H){const oe=Vn.values().next().value;return oe&&typeof oe.runWithContext=="function"?oe.runWithContext(H):H()}function A(H,oe){let te;const[de,ve,$e]=PV(H,oe);te=uf(de.reverse(),"beforeRouteLeave",H,oe);for(const D of de)D.leaveGuards.forEach(F=>{te.push(ds(F,H,oe))});const R=E.bind(null,H,oe);return te.push(R),Bt(te).then(()=>{te=[];for(const D of i.list())te.push(ds(D,H,oe));return te.push(R),Bt(te)}).then(()=>{te=uf(ve,"beforeRouteUpdate",H,oe);for(const D of ve)D.updateGuards.forEach(F=>{te.push(ds(F,H,oe))});return te.push(R),Bt(te)}).then(()=>{te=[];for(const D of $e)if(D.beforeEnter)if(Gn(D.beforeEnter))for(const F of D.beforeEnter)te.push(ds(F,H,oe));else te.push(ds(D.beforeEnter,H,oe));return te.push(R),Bt(te)}).then(()=>(H.matched.forEach(D=>D.enterCallbacks={}),te=uf($e,"beforeRouteEnter",H,oe,y),te.push(R),Bt(te))).then(()=>{te=[];for(const D of o.list())te.push(ds(D,H,oe));return te.push(R),Bt(te)}).catch(D=>gr(D,ut.NAVIGATION_CANCELLED)?D:Promise.reject(D))}function P(H,oe,te){a.list().forEach(de=>y(()=>de(H,oe,te)))}function S(H,oe,te,de,ve){const $e=_(H,oe);if($e)return $e;const R=oe===Pn,D=mo?history.state:{};te&&(de||R?s.replace(H.fullPath,Le({scroll:R&&D&&D.scroll},ve)):s.push(H.fullPath,ve)),c.value=H,pn(H,oe,te,R),Wn()}let b;function ge(){b||(b=s.listen((H,oe,te)=>{if(!xn.listening)return;const de=V(H),ve=U(de,xn.currentRoute.value);if(ve){v(Le(ve,{replace:!0,force:!0}),de).catch(bc);return}u=de;const $e=c.value;mo&&EV(oI($e.fullPath,te.delta),Gh()),A(de,$e).catch(R=>gr(R,ut.NAVIGATION_ABORTED|ut.NAVIGATION_CANCELLED)?R:gr(R,ut.NAVIGATION_GUARD_REDIRECT)?(v(Le(N(R.to),{force:!0}),de).then(D=>{gr(D,ut.NAVIGATION_ABORTED|ut.NAVIGATION_DUPLICATED)&&!te.delta&&te.type===ap.pop&&s.go(-1,!1)}).catch(bc),Promise.reject()):(te.delta&&s.go(-te.delta,!1),ie(R,de,$e))).then(R=>{R=R||S(de,$e,!1),R&&(te.delta&&!gr(R,ut.NAVIGATION_CANCELLED)?s.go(-te.delta,!1):te.type===ap.pop&&gr(R,ut.NAVIGATION_ABORTED|ut.NAVIGATION_DUPLICATED)&&s.go(-1,!1)),P(de,$e,R)}).catch(bc)}))}let Ae=tc(),se=tc(),le;function ie(H,oe,te){Wn(H);const de=se.list();return de.length?de.forEach(ve=>ve(H,oe,te)):console.error(H),Promise.reject(H)}function xe(){return le&&c.value!==Pn?Promise.resolve():new Promise((H,oe)=>{Ae.add([H,oe])})}function Wn(H){return le||(le=!H,ge(),Ae.list().forEach(([oe,te])=>H?te(H):oe()),Ae.reset()),H}function pn(H,oe,te,de){const{scrollBehavior:ve}=t;if(!mo||!ve)return Promise.resolve();const $e=!te&&TV(oI(H.fullPath,0))||(de||!te)&&history.state&&history.state.scroll||null;return Cs().then(()=>ve(H,oe,$e)).then(R=>R&&IV(R)).catch(R=>ie(R,H,oe))}const Mt=H=>s.go(H);let dr;const Vn=new Set,xn={currentRoute:c,listening:!0,addRoute:m,removeRoute:I,clearRoutes:e.clearRoutes,hasRoute:k,getRoutes:T,resolve:V,options:t,push:C,replace:x,go:Mt,back:()=>Mt(-1),forward:()=>Mt(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:se.add,isReady:xe,install(H){H.component("RouterLink",QV),H.component("RouterView",$v),H.config.globalProperties.$router=xn,Object.defineProperty(H.config.globalProperties,"$route",{enumerable:!0,get:()=>me(c)}),mo&&!dr&&c.value===Pn&&(dr=!0,C(s.location).catch(de=>{}));const oe={};for(const de in Pn)Object.defineProperty(oe,de,{get:()=>c.value[de],enumerable:!0});H.provide(Kh,xn),H.provide(Rm,er(oe)),H.provide(lp,c);const te=H.unmount;Vn.add(H),H.unmount=function(){Vn.delete(H),Vn.size<1&&(u=Pn,b&&b(),b=null,c.value=Pn,dr=!1,le=!1),te()}}};function Bt(H){return H.reduce((oe,te)=>oe.then(()=>y(te)),Promise.resolve())}return xn}function Gj(){return Vt(Kh)}function Gv(t){return Vt(Rm)}const ex=/(:\w+)\([^)]+\)/g,tx=/(:\w+)[?+*]/g,nx=/:\w+/g,rx=(t,e)=>e.path.replace(ex,"$1").replace(tx,"$1").replace(nx,n=>t.params[n.slice(1)]?.toString()||""),up=(t,e)=>{const n=t.route.matched.find(s=>s.components?.default===t.Component.type),r=e??n?.meta.key??(n&&rx(t.route,n));return typeof r=="function"?r(t.route):r},sx=(t,e)=>({default:()=>t?Wt(XC,t===!0?{}:t,e):e});function Sm(t){return Array.isArray(t)?t:[t]}const ix="modulepreload",ox=function(t,e){return new URL(t,e).href},II={},ws=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){let u=function(h){return Promise.all(h.map(d=>Promise.resolve(d).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};const o=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),c=a?.nonce||a?.getAttribute("nonce");s=u(n.map(h=>{if(h=ox(h,r),h in II)return;II[h]=!0;const d=h.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(r)for(let I=o.length-1;I>=0;I--){const T=o[I];if(T.href===h&&(!d||T.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${h}"]${f}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":ix,d||(m.as="script"),m.crossOrigin="",m.href=h,c&&m.setAttribute("nonce",c),document.head.appendChild(m),d)return new Promise((I,T)=>{m.addEventListener("load",I),m.addEventListener("error",()=>T(new Error(`Unable to preload CSS for ${h}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},hf=[{name:"index",path:"/",component:()=>ws(()=>import("./DC6Pubts.js").then(t=>t.i),__vite__mapDeps([0,1]),import.meta.url)},{name:"wiki",path:"/wiki",component:()=>ws(()=>import("./BHc6ddXJ.js"),__vite__mapDeps([2,1,3]),import.meta.url)},{name:"wiki-slug",path:"/wiki/:slug(.*)*",component:()=>ws(()=>import("./D08-qvYl.js"),__vite__mapDeps([4,2,1,3]),import.meta.url)}],Kv=(t,e)=>({default:()=>t?Wt(jo,t===!0?{}:t,e):e.default?.()}),ax=/(:\w+)\([^)]+\)/g,cx=/(:\w+)[?+*]/g,lx=/:\w+/g;function EI(t){const e=t?.meta.key??t.path.replace(ax,"$1").replace(cx,"$1").replace(lx,n=>t.params[n.slice(1)]?.toString()||"");return typeof e=="function"?e(t):e}function ux(t,e){return t===e||e===Pn?!1:EI(t)!==EI(e)?!0:!t.matched.every((r,s)=>r.components&&r.components.default===e.matched[s]?.components?.default)}const hx={scrollBehavior(t,e,n){const r=ze(),s=An().options?.scrollBehaviorType??"auto";if(t.path.replace(/\/$/,"")===e.path.replace(/\/$/,""))return e.hash&&!t.hash?{left:0,top:0}:t.hash?{el:t.hash,top:Wv(t.hash),behavior:s}:!1;if((typeof t.meta.scrollToTop=="function"?t.meta.scrollToTop(t,e):t.meta.scrollToTop)===!1)return!1;const o=r._runningTransition?"page:transition:finish":"page:loading:end";return new Promise(a=>{if(e===Pn){a(TI(t,e,n,s));return}r.hooks.hookOnce(o,()=>{requestAnimationFrame(()=>a(TI(t,e,n,s)))})})}};function Wv(t){try{const e=document.querySelector(t);if(e)return(Number.parseFloat(getComputedStyle(e).scrollMarginTop)||0)+(Number.parseFloat(getComputedStyle(document.documentElement).scrollPaddingTop)||0)}catch{}return 0}function TI(t,e,n,r){if(n)return n;const s=ux(t,e);return t.hash?{el:t.hash,top:Wv(t.hash),behavior:s?r:"instant"}:{left:0,top:0}}const dx={hashMode:!1,scrollBehaviorType:"auto"},rs={...dx,...hx},fx=async(t,e)=>{let n,r;if(!t.meta?.validate)return;const s=([n,r]=Ts(()=>Promise.resolve(t.meta.validate(t))),n=await n,r(),n);if(s===!0)return;const i=vi({fatal:!0,statusCode:s&&s.statusCode||404,statusMessage:s&&s.statusMessage||`Page Not Found: ${t.fullPath}`,data:{path:t.fullPath}});return typeof window<"u"&&window.history.pushState({},"",e.fullPath),i},px=async t=>{let e,n;const r=([e,n]=Ts(()=>vm({path:t.path})),e=await e,n(),e);if(r.redirect){const s=r.redirect.includes("#")?r.redirect:r.redirect+t.hash;return $i(s,{acceptRelative:!0})?(window.location.href=s,!1):s}},mx=[fx,px],hp={};function gx(t,e,n){const{pathname:r,search:s,hash:i}=e,o=t.indexOf("#");if(o>-1){const u=i.includes(t.slice(o))?t.slice(o).length:1;let h=i.slice(u);return h[0]!=="/"&&(h="/"+h),My(h,"")}const a=My(r,t),c=!n||nN(a,n)?a:n;return c+(c.includes("?")?"":s)+i}const _x=Dn({name:"nuxt:router",enforce:"pre",async setup(t){let e,n,r=gl().app.baseURL;const s=rs.history?.(r)??DV(r),i=rs.routes?([e,n]=Ts(()=>rs.routes(hf)),e=await e,n(),e??hf):hf;let o;const a=ZV({...rs,scrollBehavior:(k,V,N)=>{if(V===Pn){o=N;return}if(rs.scrollBehavior){if(a.options.scrollBehavior=rs.scrollBehavior,"scrollRestoration"in window.history){const _=a.beforeEach(()=>{_(),window.history.scrollRestoration="manual"})}return rs.scrollBehavior(k,Pn,o||N)}},history:s,routes:i});"scrollRestoration"in window.history&&(window.history.scrollRestoration="auto"),t.vueApp.use(a);const c=Lo(a.currentRoute.value);a.afterEach((k,V)=>{c.value=V}),Object.defineProperty(t.vueApp.config.globalProperties,"previousRoute",{get:()=>c.value});const u=gx(r,window.location,t.payload.path),h=Lo(a.currentRoute.value),d=()=>{h.value=a.currentRoute.value};a.afterEach((k,V)=>{k.matched.at(-1)?.components?.default===V.matched.at(-1)?.components?.default&&d()});const f={sync:d};for(const k in h.value)Object.defineProperty(f,k,{get:()=>h.value[k],enumerable:!0});t._route=er(f),t._middleware||={global:[],named:{}};const m=Hh();a.afterEach(async(k,V,N)=>{delete t._processingMiddleware,!t.isHydrating&&m.value&&await t.runWithContext(XN),N&&await t.callHook("page:loading:end")});try{[e,n]=Ts(()=>a.isReady()),await e,n()}catch(k){[e,n]=Ts(()=>t.runWithContext(()=>ci(k))),await e,n()}const I=u!==a.currentRoute.value.fullPath?a.resolve(u):a.currentRoute.value;d();const T=t.payload.state._layout;return a.beforeEach(async(k,V)=>{await t.callHook("page:loading:start"),k.meta=jr(k.meta),t.isHydrating&&T&&!lr(k.meta.layout)&&(k.meta.layout=T),t._processingMiddleware=!0;{const N=new Set([...mx,...t._middleware.global]);for(const _ of k.matched){const C=_.meta.middleware;if(C)for(const x of Sm(C))N.add(x)}{const _=await t.runWithContext(()=>vm({path:k.path}));if(_.appMiddleware)for(const C in _.appMiddleware)_.appMiddleware[C]?N.add(C):N.delete(C)}for(const _ of N){const C=typeof _=="string"?t._middleware.named[_]||await hp[_]?.().then(x=>x.default||x):_;if(!C)throw new Error(`Unknown route middleware: '${_}'.`);try{const x=await t.runWithContext(()=>C(k,V));if(!t.payload.serverRendered&&t.isHydrating&&(x===!1||x instanceof Error)){const U=x||vi({statusCode:404,statusMessage:`Page Not Found: ${u}`});return await t.runWithContext(()=>ci(U)),!1}if(x===!0)continue;if(x===!1)return x;if(x)return Ev(x)&&x.fatal&&await t.runWithContext(()=>ci(x)),x}catch(x){const U=vi(x);return U.fatal&&await t.runWithContext(()=>ci(U)),U}}}}),a.onError(async()=>{delete t._processingMiddleware,await t.callHook("page:loading:end")}),a.afterEach(k=>{if(k.matched.length===0)return t.runWithContext(()=>ci(vi({statusCode:404,fatal:!1,statusMessage:`Page not found: ${k.fullPath}`,data:{path:k.fullPath}})))}),t.hooks.hookOnce("app:created",async()=>{try{"name"in I&&(I.name=void 0),await a.replace({...I,force:!0}),a.options.scrollBehavior=rs.scrollBehavior}catch(k){await t.runWithContext(()=>ci(k))}}),{provide:{router:a}}}}),wI=globalThis.requestIdleCallback||(t=>{const e=Date.now(),n={didTimeout:!1,timeRemaining:()=>Math.max(0,50-(Date.now()-e))};return setTimeout(()=>{t(n)},1)}),Kj=globalThis.cancelIdleCallback||(t=>{clearTimeout(t)}),Pm=t=>{const e=ze();e.isHydrating?e.hooks.hookOnce("app:suspense:resolve",()=>{wI(()=>t())}):wI(()=>t())},yx=Dn({name:"nuxt:payload",setup(t){const e=new Set;An().beforeResolve(async(n,r)=>{if(n.path===r.path)return;const s=await nI(n.path);if(s){for(const i of e)delete t.static.data[i];for(const i in s.data)i in t.static.data||e.add(i),t.static.data[i]=s.data[i]}}),Pm(()=>{t.hooks.hook("link:prefetch",async n=>{const{hostname:r}=new URL(n,window.location.href);r===window.location.hostname&&await nI(n).catch(()=>{console.warn("[nuxt] Error preloading payload for",n)})}),navigator.connection?.effectiveType!=="slow-2g"&&setTimeout($h,1e3)})}}),Ix=Dn(()=>{const t=An();Pm(()=>{t.beforeResolve(async()=>{await new Promise(e=>{setTimeout(e,100),requestAnimationFrame(()=>{setTimeout(e,0)})})})})}),Ex=Dn(t=>{let e;async function n(){let r;try{r=await $h()}catch(s){const i=s;if(!("status"in i&&(i.status===404||i.status===403)))throw i}e&&clearTimeout(e),e=setTimeout(n,$y);try{const s=await $fetch(wm("builds/latest.json")+`?${Date.now()}`);s.id!==r?.id&&(t.hooks.callHook("app:manifest:update",s),e&&clearTimeout(e))}catch{}}Pm(()=>{e=setTimeout(n,$y)})});function Tx(t={}){const e=t.path||window.location.pathname;let n={};try{n=Yu(sessionStorage.getItem("nuxt:reload")||"{}")}catch{}if(t.force||n?.path!==e||n?.expires<Date.now()){try{sessionStorage.setItem("nuxt:reload",JSON.stringify({path:e,expires:Date.now()+(t.ttl??1e4)}))}catch{}if(t.persistState)try{sessionStorage.setItem("nuxt:reload:state",JSON.stringify({state:ze().payload.state}))}catch{}window.location.pathname!==e?window.location.href=e:window.location.reload()}}const wx=Dn({name:"nuxt:chunk-reload",setup(t){const e=An(),n=gl(),r=new Set;e.beforeEach(()=>{r.clear()}),t.hook("app:chunkError",({error:i})=>{r.add(i)});function s(i){const o=Em(n.app.baseURL,i.fullPath);Tx({path:o,persistState:!0})}t.hook("app:manifest:update",()=>{e.beforeResolve(s)}),e.onError((i,o)=>{r.has(i)&&s(o)})}});function vx(t){if(t?.__asyncLoader&&!t.__asyncResolved)return t.__asyncLoader()}async function Ax(t,e=An()){const{path:n,matched:r}=e.resolve(t);if(!r.length||(e._routePreloaded||=new Set,e._routePreloaded.has(n)))return;const s=e._preloadPromises||=[];if(s.length>4)return Promise.all(s).then(()=>Ax(t,e));e._routePreloaded.add(n);for(const i of r){const o=i.components?.default;if(typeof o!="function")continue;const a=Promise.resolve(o()).catch(()=>{}).finally(()=>s.splice(s.indexOf(a)));s.push(a)}await Promise.all(s)}const bx=Dn({name:"pinia",setup(t){const e=ZN();return t.vueApp.use(e),Ho(e),t.payload&&t.payload.pinia&&(e.state.value=t.payload.pinia),{provide:{pinia:e}}},hooks:{"app:rendered"(){const t=ze();t.payload.pinia=Ne(t.$pinia).state.value,Ho(void 0)}}}),Rx=Dn({name:"nuxt:global-components"}),ms={},Sx=Dn({name:"nuxt:prefetch",setup(t){const e=An();t.hooks.hook("app:mounted",()=>{e.beforeEach(async n=>{const r=n?.meta?.layout;r&&typeof ms[r]=="function"&&await ms[r]()})}),t.hooks.hook("link:prefetch",n=>{if($i(n))return;const r=e.resolve(n);if(!r)return;const s=r.meta.layout;let i=Sm(r.meta.middleware);i=i.filter(o=>typeof o=="string");for(const o of i)typeof hp[o]=="function"&&hp[o]();typeof s=="string"&&s in ms&&vx(ms[s])})}});let df,vI,ou;const Px=Dn(async t=>{let e,n;const r=gl(),s={apiKey:r.public.firebaseApiKey,authDomain:r.public.firebaseAuthDomain,projectId:r.public.firebaseProjectId,storageBucket:r.public.firebaseStorageBucket,messagingSenderId:r.public.firebaseMessagingSenderId,appId:r.public.firebaseAppId},[{initializeApp:i},{getAuth:o,browserSessionPersistence:a,setPersistence:c},{getFirestore:u}]=([e,n]=Ts(()=>Promise.all([ws(()=>import("./CMTSrfW_.js"),[],import.meta.url),ws(()=>Promise.resolve().then(()=>UF),void 0,import.meta.url),ws(()=>Promise.resolve().then(()=>H6),void 0,import.meta.url)])),e=await e,n(),e);return ou=i(s),df=o(ou),[e,n]=Ts(()=>c(df,a)),await e,n(),vI=u(ou),{provide:{auth:df,db:vI,firebaseApp:ou}}}),Cx=[jD,HD,zD,_x,yx,Ix,Ex,wx,bx,Rx,Sx,Px];function au(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}var kx={read:function(t){return t[0]==='"'&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(t){return encodeURIComponent(t).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function dp(t,e){function n(s,i,o){if(!(typeof document>"u")){o=au({},e,o),typeof o.expires=="number"&&(o.expires=new Date(Date.now()+o.expires*864e5)),o.expires&&(o.expires=o.expires.toUTCString()),s=encodeURIComponent(s).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var a="";for(var c in o)o[c]&&(a+="; "+c,o[c]!==!0&&(a+="="+o[c].split(";")[0]));return document.cookie=s+"="+t.write(i,s)+a}}function r(s){if(!(typeof document>"u"||arguments.length&&!s)){for(var i=document.cookie?document.cookie.split("; "):[],o={},a=0;a<i.length;a++){var c=i[a].split("="),u=c.slice(1).join("=");try{var h=decodeURIComponent(c[0]);if(o[h]=t.read(u,h),s===h)break}catch{}}return s?o[s]:o}}return Object.create({set:n,get:r,remove:function(s,i){n(s,"",au({},i,{expires:-1}))},withAttributes:function(s){return dp(this.converter,au({},this.attributes,s))},withConverter:function(s){return dp(au({},this.converter,s),this.attributes)}},{attributes:{value:Object.freeze(e)},converter:{value:Object.freeze(t)}})}var Yt=dp(kx,{path:"/"});const Nx=()=>{};var AI={};const zv=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},Dx=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Qv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,c=s+2<t.length,u=c?t[s+2]:0,h=i>>2,d=(i&3)<<4|a>>4;let f=(a&15)<<2|u>>6,m=u&63;c||(m=64,o||(f=64)),r.push(n[h],n[d],n[f],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(zv(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Dx(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const d=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||u==null||d==null)throw new Vx;const f=i<<2|a>>4;if(r.push(f),u!==64){const m=a<<4&240|u>>2;if(r.push(m),d!==64){const I=u<<6&192|d;r.push(I)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Vx extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const xx=function(t){const e=zv(t);return Qv.encodeByteArray(e,!0)},rh=function(t){return xx(t).replace(/\./g,"")},Cm=function(t){try{return Qv.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Jv(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const Ox=()=>Jv().__FIREBASE_DEFAULTS__,Lx=()=>{if(typeof process>"u"||typeof AI>"u")return;const t=AI.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Mx=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Cm(t[1]);return e&&JSON.parse(e)},Wh=()=>{try{return Nx()||Ox()||Lx()||Mx()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Yv=t=>Wh()?.emulatorHosts?.[t],Fx=t=>{const e=Yv(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},km=()=>Wh()?.config,Xv=t=>Wh()?.[`_${t}`];class Ux{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}function Gi(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Nm(t){return(await fetch(t,{credentials:"include"})).ok}function Bx(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[rh(JSON.stringify(n)),rh(JSON.stringify(o)),""].join(".")}const Rc={};function jx(){const t={prod:[],emulator:[]};for(const e of Object.keys(Rc))Rc[e]?t.emulator.push(e):t.prod.push(e);return t}function qx(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let bI=!1;function Zv(t,e){if(typeof window>"u"||typeof document>"u"||!Gi(window.location.host)||Rc[t]===e||Rc[t]||bI)return;Rc[t]=e;function n(f){return`__firebase__banner__${f}`}const r="__firebase__banner",i=jx().prod.length>0;function o(){const f=document.getElementById(r);f&&f.remove()}function a(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function c(f,m){f.setAttribute("width","24"),f.setAttribute("id",m),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function u(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{bI=!0,o()},f}function h(f,m){f.setAttribute("id",m),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function d(){const f=qx(r),m=n("text"),I=document.getElementById(m)||document.createElement("span"),T=n("learnmore"),k=document.getElementById(T)||document.createElement("a"),V=n("preprendIcon"),N=document.getElementById(V)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const _=f.element;a(_),h(k,T);const C=u();c(N,V),_.append(N,I,k,C),document.body.appendChild(_)}i?(I.innerText="Preview backend disconnected.",N.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(N.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,I.innerText="Preview backend running in this workspace."),I.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}function Rt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Hx(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Rt())}function eA(){const t=Wh()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function $x(){return typeof window<"u"||tA()}function tA(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Gx(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Kx(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Wx(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function zx(){const t=Rt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function nA(){return!eA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function rA(){return!eA()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function sA(){try{return typeof indexedDB=="object"}catch{return!1}}function Qx(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{e(s.error?.message||"")}}catch(n){e(n)}})}const Jx="FirebaseError";class Hr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Jx,Object.setPrototypeOf(this,Hr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_l.prototype.create)}}class _l{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?Yx(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Hr(s,a,r)}}function Yx(t,e){return t.replace(Xx,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const Xx=/\{\$([^}]+)}/g;function Zx(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Kn(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(RI(i)&&RI(o)){if(!Kn(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function RI(t){return t!==null&&typeof t=="object"}function ya(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function hc(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function dc(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function eO(t,e){const n=new tO(t,e);return n.subscribe.bind(n)}class tO{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");nO(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=ff),s.error===void 0&&(s.error=ff),s.complete===void 0&&(s.complete=ff);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function nO(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function ff(){}function ue(t){return t&&t._delegate?t._delegate:t}class Di{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const li="[DEFAULT]";class rO{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Ux;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(iO(e))try{this.getOrInitializeService({instanceIdentifier:li})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=li){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=li){return this.instances.has(e)}getOptions(e=li){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:sO(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=li){return this.component?this.component.multipleInstances?e:li:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function sO(t){return t===li?void 0:t}function iO(t){return t.instantiationMode==="EAGER"}class iA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new rO(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}const Dm=[];var Pe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Pe||(Pe={}));const oA={debug:Pe.DEBUG,verbose:Pe.VERBOSE,info:Pe.INFO,warn:Pe.WARN,error:Pe.ERROR,silent:Pe.SILENT},oO=Pe.INFO,aO={[Pe.DEBUG]:"log",[Pe.VERBOSE]:"log",[Pe.INFO]:"info",[Pe.WARN]:"warn",[Pe.ERROR]:"error"},cO=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=aO[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Vm{constructor(e){this.name=e,this._logLevel=oO,this._logHandler=cO,this._userLogHandler=null,Dm.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?oA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Pe.DEBUG,...e),this._logHandler(this,Pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Pe.VERBOSE,...e),this._logHandler(this,Pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Pe.INFO,...e),this._logHandler(this,Pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Pe.WARN,...e),this._logHandler(this,Pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Pe.ERROR,...e),this._logHandler(this,Pe.ERROR,...e)}}function lO(t){Dm.forEach(e=>{e.setLogLevel(t)})}function uO(t,e){for(const n of Dm){let r=null;e&&e.level&&(r=oA[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(s,i,...o)=>{const a=o.map(c=>{if(c==null)return null;if(typeof c=="string")return c;if(typeof c=="number"||typeof c=="boolean")return c.toString();if(c instanceof Error)return c.message;try{return JSON.stringify(c)}catch{return null}}).filter(c=>c).join(" ");i>=(r??s.logLevel)&&t({level:Pe[i].toLowerCase(),message:a,args:o,type:s.name})}}}const hO=(t,e)=>e.some(n=>t instanceof n);let SI,PI;function dO(){return SI||(SI=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function fO(){return PI||(PI=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const aA=new WeakMap,fp=new WeakMap,cA=new WeakMap,pf=new WeakMap,xm=new WeakMap;function pO(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(vs(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&aA.set(n,t)}).catch(()=>{}),xm.set(e,t),e}function mO(t){if(fp.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});fp.set(t,e)}let pp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return fp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||cA.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return vs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function gO(t){pp=t(pp)}function _O(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(mf(this),e,...n);return cA.set(r,e.sort?e.sort():[e]),vs(r)}:fO().includes(t)?function(...e){return t.apply(mf(this),e),vs(aA.get(this))}:function(...e){return vs(t.apply(mf(this),e))}}function yO(t){return typeof t=="function"?_O(t):(t instanceof IDBTransaction&&mO(t),hO(t,dO())?new Proxy(t,pp):t)}function vs(t){if(t instanceof IDBRequest)return pO(t);if(pf.has(t))return pf.get(t);const e=yO(t);return e!==t&&(pf.set(t,e),xm.set(e,t)),e}const mf=t=>xm.get(t);function IO(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=vs(o);return r&&o.addEventListener("upgradeneeded",c=>{r(vs(o.result),c.oldVersion,c.newVersion,vs(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const EO=["get","getKey","getAll","getAllKeys","count"],TO=["put","add","delete","clear"],gf=new Map;function CI(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(gf.get(e))return gf.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=TO.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||EO.includes(n)))return;const i=async function(o,...a){const c=this.transaction(o,s?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),s&&c.done]))[0]};return gf.set(e,i),i}gO(t=>({...t,get:(e,n,r)=>CI(e,n)||t.get(e,n,r),has:(e,n)=>!!CI(e,n)||t.has(e,n)}));class wO{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(vO(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function vO(t){return t.getComponent()?.type==="VERSION"}const sh="@firebase/app",mp="0.14.7";const Or=new Vm("@firebase/app"),AO="@firebase/app-compat",bO="@firebase/analytics-compat",RO="@firebase/analytics",SO="@firebase/app-check-compat",PO="@firebase/app-check",CO="@firebase/auth",kO="@firebase/auth-compat",NO="@firebase/database",DO="@firebase/data-connect",VO="@firebase/database-compat",xO="@firebase/functions",OO="@firebase/functions-compat",LO="@firebase/installations",MO="@firebase/installations-compat",FO="@firebase/messaging",UO="@firebase/messaging-compat",BO="@firebase/performance",jO="@firebase/performance-compat",qO="@firebase/remote-config",HO="@firebase/remote-config-compat",$O="@firebase/storage",GO="@firebase/storage-compat",KO="@firebase/firestore",WO="@firebase/ai",zO="@firebase/firestore-compat",QO="firebase",JO="12.8.0";const ih="[DEFAULT]",YO={[sh]:"fire-core",[AO]:"fire-core-compat",[RO]:"fire-analytics",[bO]:"fire-analytics-compat",[PO]:"fire-app-check",[SO]:"fire-app-check-compat",[CO]:"fire-auth",[kO]:"fire-auth-compat",[NO]:"fire-rtdb",[DO]:"fire-data-connect",[VO]:"fire-rtdb-compat",[xO]:"fire-fn",[OO]:"fire-fn-compat",[LO]:"fire-iid",[MO]:"fire-iid-compat",[FO]:"fire-fcm",[UO]:"fire-fcm-compat",[BO]:"fire-perf",[jO]:"fire-perf-compat",[qO]:"fire-rc",[HO]:"fire-rc-compat",[$O]:"fire-gcs",[GO]:"fire-gcs-compat",[KO]:"fire-fst",[zO]:"fire-fst-compat",[WO]:"fire-vertex","fire-js":"fire-js",[QO]:"fire-js-all"};const Vi=new Map,Wc=new Map,zc=new Map;function kI(t,e){try{t.container.addComponent(e)}catch(n){Or.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Wj(t,e){t.container.addOrOverwriteComponent(e)}function Ko(t){const e=t.name;if(zc.has(e))return Or.debug(`There were multiple attempts to register component ${e}.`),!1;zc.set(e,t);for(const n of Vi.values())kI(n,t);for(const n of Wc.values())kI(n,t);return!0}function yl(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function XO(t,e,n=ih){yl(t,e).clearInstance(n)}function lA(t){return t.options!==void 0}function ZO(t){return lA(t)?!1:"authIdToken"in t||"appCheckToken"in t||"releaseOnDeref"in t||"automaticDataCollectionEnabled"in t}function at(t){return t==null?!1:t.settings!==void 0}function zj(){zc.clear()}const e1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},wn=new _l("app","Firebase",e1);class uA{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Di("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw wn.create("app-deleted",{appName:this._name})}}function NI(t,e){const n=Cm(t.split(".")[1]);if(n===null){console.error(`FirebaseServerApp ${e} is invalid: second part could not be parsed.`);return}if(JSON.parse(n).exp===void 0){console.error(`FirebaseServerApp ${e} is invalid: expiration claim could not be parsed`);return}const s=JSON.parse(n).exp*1e3,i=new Date().getTime();s-i<=0&&console.error(`FirebaseServerApp ${e} is invalid: the token has expired.`)}class t1 extends uA{constructor(e,n,r,s){const i=n.automaticDataCollectionEnabled!==void 0?n.automaticDataCollectionEnabled:!0,o={name:r,automaticDataCollectionEnabled:i};if(e.apiKey!==void 0)super(e,o,s);else{const a=e;super(a.options,o,s)}this._serverConfig={automaticDataCollectionEnabled:i,...n},this._serverConfig.authIdToken&&NI(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&NI(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,n.releaseOnDeref=void 0,As(sh,mp,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){r1(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw wn.create("server-app-deleted")}}const Ia=JO;function n1(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:ih,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw wn.create("bad-app-name",{appName:String(s)});if(n||(n=km()),!n)throw wn.create("no-options");const i=Vi.get(s);if(i){if(Kn(n,i.options)&&Kn(r,i.config))return i;throw wn.create("duplicate-app",{appName:s})}const o=new iA(s);for(const c of zc.values())o.addComponent(c);const a=new uA(n,r,o);return Vi.set(s,a),a}function Qj(t,e={}){if($x()&&!tA())throw wn.create("invalid-server-app-environment");let n,r=e||{};if(t&&(lA(t)?n=t.options:ZO(t)?r=t:n=t),r.automaticDataCollectionEnabled===void 0&&(r.automaticDataCollectionEnabled=!0),n||(n=km()),!n)throw wn.create("no-options");const s={...r,...n};s.releaseOnDeref!==void 0&&delete s.releaseOnDeref;const i=h=>[...h].reduce((d,f)=>Math.imul(31,d)+f.charCodeAt(0)|0,0);if(r.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw wn.create("finalization-registry-not-supported",{});const o=""+i(JSON.stringify(s)),a=Wc.get(o);if(a)return a.incRefCount(r.releaseOnDeref),a;const c=new iA(o);for(const h of zc.values())c.addComponent(h);const u=new t1(n,r,o,c);return Wc.set(o,u),u}function hA(t=ih){const e=Vi.get(t);if(!e&&t===ih&&km())return n1();if(!e)throw wn.create("no-app",{appName:t});return e}function Jj(){return Array.from(Vi.values())}async function r1(t){let e=!1;const n=t.name;Vi.has(n)?(e=!0,Vi.delete(n)):Wc.has(n)&&t.decRefCount()<=0&&(Wc.delete(n),e=!0),e&&(await Promise.all(t.container.getProviders().map(r=>r.delete())),t.isDeleted=!0)}function As(t,e,n){let r=YO[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Or.warn(o.join(" "));return}Ko(new Di(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}function Yj(t,e){if(t!==null&&typeof t!="function")throw wn.create("invalid-log-argument");uO(t,e)}function Xj(t){lO(t)}const s1="firebase-heartbeat-database",i1=1,Qc="firebase-heartbeat-store";let _f=null;function dA(){return _f||(_f=IO(s1,i1,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Qc)}catch(n){console.warn(n)}}}}).catch(t=>{throw wn.create("idb-open",{originalErrorMessage:t.message})})),_f}async function o1(t){try{const n=(await dA()).transaction(Qc),r=await n.objectStore(Qc).get(fA(t));return await n.done,r}catch(e){if(e instanceof Hr)Or.warn(e.message);else{const n=wn.create("idb-get",{originalErrorMessage:e?.message});Or.warn(n.message)}}}async function DI(t,e){try{const r=(await dA()).transaction(Qc,"readwrite");await r.objectStore(Qc).put(e,fA(t)),await r.done}catch(n){if(n instanceof Hr)Or.warn(n.message);else{const r=wn.create("idb-set",{originalErrorMessage:n?.message});Or.warn(r.message)}}}function fA(t){return`${t.name}!${t.options.appId}`}const a1=1024,c1=30;class l1{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new h1(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=VI();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>c1){const s=d1(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Or.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=VI(),{heartbeatsToSend:n,unsentEntries:r}=u1(this._heartbeatsCache.heartbeats),s=rh(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return Or.warn(e),""}}}function VI(){return new Date().toISOString().substring(0,10)}function u1(t,e=a1){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),xI(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),xI(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class h1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return sA()?Qx().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await o1(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return DI(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return DI(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function xI(t){return rh(JSON.stringify({version:2,heartbeats:t})).length}function d1(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function f1(t){Ko(new Di("platform-logger",e=>new wO(e),"PRIVATE")),Ko(new Di("heartbeat",e=>new l1(e),"PRIVATE")),As(sh,mp,t),As(sh,mp,"esm2020"),As("fire-js","")}f1("");const p1={PHONE:"phone",TOTP:"totp"},m1={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},g1={EMAIL_LINK:"emailLink",EMAIL_PASSWORD:"password",FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PHONE:"phone",TWITTER:"twitter.com"},_1={LINK:"link",REAUTHENTICATE:"reauthenticate",SIGN_IN:"signIn"},y1={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};function I1(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements.","invalid-hosting-link-domain":"The provided Hosting link domain is not configured in Firebase Hosting or is not owned by the current project. This cannot be a default Hosting domain (`web.app` or `firebaseapp.com`)."}}function pA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const E1=I1,mA=pA,gA=new _l("auth","Firebase",pA()),T1={ADMIN_ONLY_OPERATION:"auth/admin-restricted-operation",ARGUMENT_ERROR:"auth/argument-error",APP_NOT_AUTHORIZED:"auth/app-not-authorized",APP_NOT_INSTALLED:"auth/app-not-installed",CAPTCHA_CHECK_FAILED:"auth/captcha-check-failed",CODE_EXPIRED:"auth/code-expired",CORDOVA_NOT_READY:"auth/cordova-not-ready",CORS_UNSUPPORTED:"auth/cors-unsupported",CREDENTIAL_ALREADY_IN_USE:"auth/credential-already-in-use",CREDENTIAL_MISMATCH:"auth/custom-token-mismatch",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"auth/requires-recent-login",DEPENDENT_SDK_INIT_BEFORE_AUTH:"auth/dependent-sdk-initialized-before-auth",DYNAMIC_LINK_NOT_ACTIVATED:"auth/dynamic-link-not-activated",EMAIL_CHANGE_NEEDS_VERIFICATION:"auth/email-change-needs-verification",EMAIL_EXISTS:"auth/email-already-in-use",EMULATOR_CONFIG_FAILED:"auth/emulator-config-failed",EXPIRED_OOB_CODE:"auth/expired-action-code",EXPIRED_POPUP_REQUEST:"auth/cancelled-popup-request",INTERNAL_ERROR:"auth/internal-error",INVALID_API_KEY:"auth/invalid-api-key",INVALID_APP_CREDENTIAL:"auth/invalid-app-credential",INVALID_APP_ID:"auth/invalid-app-id",INVALID_AUTH:"auth/invalid-user-token",INVALID_AUTH_EVENT:"auth/invalid-auth-event",INVALID_CERT_HASH:"auth/invalid-cert-hash",INVALID_CODE:"auth/invalid-verification-code",INVALID_CONTINUE_URI:"auth/invalid-continue-uri",INVALID_CORDOVA_CONFIGURATION:"auth/invalid-cordova-configuration",INVALID_CUSTOM_TOKEN:"auth/invalid-custom-token",INVALID_DYNAMIC_LINK_DOMAIN:"auth/invalid-dynamic-link-domain",INVALID_EMAIL:"auth/invalid-email",INVALID_EMULATOR_SCHEME:"auth/invalid-emulator-scheme",INVALID_IDP_RESPONSE:"auth/invalid-credential",INVALID_LOGIN_CREDENTIALS:"auth/invalid-credential",INVALID_MESSAGE_PAYLOAD:"auth/invalid-message-payload",INVALID_MFA_SESSION:"auth/invalid-multi-factor-session",INVALID_OAUTH_CLIENT_ID:"auth/invalid-oauth-client-id",INVALID_OAUTH_PROVIDER:"auth/invalid-oauth-provider",INVALID_OOB_CODE:"auth/invalid-action-code",INVALID_ORIGIN:"auth/unauthorized-domain",INVALID_PASSWORD:"auth/wrong-password",INVALID_PERSISTENCE:"auth/invalid-persistence-type",INVALID_PHONE_NUMBER:"auth/invalid-phone-number",INVALID_PROVIDER_ID:"auth/invalid-provider-id",INVALID_RECIPIENT_EMAIL:"auth/invalid-recipient-email",INVALID_SENDER:"auth/invalid-sender",INVALID_SESSION_INFO:"auth/invalid-verification-id",INVALID_TENANT_ID:"auth/invalid-tenant-id",MFA_INFO_NOT_FOUND:"auth/multi-factor-info-not-found",MFA_REQUIRED:"auth/multi-factor-auth-required",MISSING_ANDROID_PACKAGE_NAME:"auth/missing-android-pkg-name",MISSING_APP_CREDENTIAL:"auth/missing-app-credential",MISSING_AUTH_DOMAIN:"auth/auth-domain-config-required",MISSING_CODE:"auth/missing-verification-code",MISSING_CONTINUE_URI:"auth/missing-continue-uri",MISSING_IFRAME_START:"auth/missing-iframe-start",MISSING_IOS_BUNDLE_ID:"auth/missing-ios-bundle-id",MISSING_OR_INVALID_NONCE:"auth/missing-or-invalid-nonce",MISSING_MFA_INFO:"auth/missing-multi-factor-info",MISSING_MFA_SESSION:"auth/missing-multi-factor-session",MISSING_PHONE_NUMBER:"auth/missing-phone-number",MISSING_PASSWORD:"auth/missing-password",MISSING_SESSION_INFO:"auth/missing-verification-id",MODULE_DESTROYED:"auth/app-deleted",NEED_CONFIRMATION:"auth/account-exists-with-different-credential",NETWORK_REQUEST_FAILED:"auth/network-request-failed",NULL_USER:"auth/null-user",NO_AUTH_EVENT:"auth/no-auth-event",NO_SUCH_PROVIDER:"auth/no-such-provider",OPERATION_NOT_ALLOWED:"auth/operation-not-allowed",OPERATION_NOT_SUPPORTED:"auth/operation-not-supported-in-this-environment",POPUP_BLOCKED:"auth/popup-blocked",POPUP_CLOSED_BY_USER:"auth/popup-closed-by-user",PROVIDER_ALREADY_LINKED:"auth/provider-already-linked",QUOTA_EXCEEDED:"auth/quota-exceeded",REDIRECT_CANCELLED_BY_USER:"auth/redirect-cancelled-by-user",REDIRECT_OPERATION_PENDING:"auth/redirect-operation-pending",REJECTED_CREDENTIAL:"auth/rejected-credential",SECOND_FACTOR_ALREADY_ENROLLED:"auth/second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"auth/maximum-second-factor-count-exceeded",TENANT_ID_MISMATCH:"auth/tenant-id-mismatch",TIMEOUT:"auth/timeout",TOKEN_EXPIRED:"auth/user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"auth/too-many-requests",UNAUTHORIZED_DOMAIN:"auth/unauthorized-continue-uri",UNSUPPORTED_FIRST_FACTOR:"auth/unsupported-first-factor",UNSUPPORTED_PERSISTENCE:"auth/unsupported-persistence-type",UNSUPPORTED_TENANT_OPERATION:"auth/unsupported-tenant-operation",UNVERIFIED_EMAIL:"auth/unverified-email",USER_CANCELLED:"auth/user-cancelled",USER_DELETED:"auth/user-not-found",USER_DISABLED:"auth/user-disabled",USER_MISMATCH:"auth/user-mismatch",USER_SIGNED_OUT:"auth/user-signed-out",WEAK_PASSWORD:"auth/weak-password",WEB_STORAGE_UNSUPPORTED:"auth/web-storage-unsupported",ALREADY_INITIALIZED:"auth/already-initialized",RECAPTCHA_NOT_ENABLED:"auth/recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"auth/missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"auth/invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"auth/invalid-recaptcha-action",MISSING_CLIENT_TYPE:"auth/missing-client-type",MISSING_RECAPTCHA_VERSION:"auth/missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"auth/invalid-recaptcha-version",INVALID_REQ_TYPE:"auth/invalid-req-type",INVALID_HOSTING_LINK_DOMAIN:"auth/invalid-hosting-link-domain"};const oh=new Vm("@firebase/auth");function w1(t,...e){oh.logLevel<=Pe.WARN&&oh.warn(`Auth (${Ia}): ${t}`,...e)}function Au(t,...e){oh.logLevel<=Pe.ERROR&&oh.error(`Auth (${Ia}): ${t}`,...e)}function fn(t,...e){throw Lm(t,...e)}function tn(t,...e){return Lm(t,...e)}function Om(t,e,n){const r={...mA(),[e]:n};return new _l("auth","Firebase",r).create(e,{appName:t.name})}function xt(t){return Om(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ea(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&fn(t,"argument-error"),Om(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Lm(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return gA.create(t,...e)}function Q(t,e,...n){if(!t)throw Lm(e,...n)}function tr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Au(e),new Error(e)}function Lr(t,e){t||tr(e)}function Jc(){return typeof self<"u"&&self.location?.href||""}function Mm(){return OI()==="http:"||OI()==="https:"}function OI(){return typeof self<"u"&&self.location?.protocol||null}function v1(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Mm()||Kx()||"connection"in navigator)?navigator.onLine:!0}function A1(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}class Il{constructor(e,n){this.shortDelay=e,this.longDelay=n,Lr(n>e,"Short delay should be less than long delay!"),this.isMobile=Hx()||Wx()}get(){return v1()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Fm(t,e){Lr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class _A{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;tr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;tr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;tr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const b1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const R1=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],S1=new Il(3e4,6e4);function tt(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function nt(t,e,n,r,s={}){return yA(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=ya({key:t.config.apiKey,...o}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:c,...i};return Gx()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&Gi(t.emulatorConfig.host)&&(u.credentials="include"),_A.fetch()(await IA(t,t.config.apiHost,n,a),u)})}async function yA(t,e,n){t._canInitEmulator=!1;const r={...b1,...e};try{const s=new C1(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw fc(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[c,u]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw fc(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw fc(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw fc(t,"user-disabled",o);const h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Om(t,h,u);fn(t,h)}}catch(s){if(s instanceof Hr)throw s;fn(t,"network-request-failed",{message:String(s)})}}async function $r(t,e,n,r,s={}){const i=await nt(t,e,n,r,s);return"mfaPendingCredential"in i&&fn(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function IA(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?Fm(t.config,s):`${t.config.apiScheme}://${s}`;return R1.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function P1(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class C1{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(tn(this.auth,"network-request-failed")),S1.get())})}}function fc(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=tn(t,e,r);return s.customData._tokenResponse=n,s}function LI(t){return t!==void 0&&t.getResponse!==void 0}function MI(t){return t!==void 0&&t.enterprise!==void 0}class EA{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return P1(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function k1(t){return(await nt(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function TA(t,e){return nt(t,"GET","/v2/recaptchaConfig",tt(t,e))}async function N1(t,e){return nt(t,"POST","/v1/accounts:delete",e)}async function D1(t,e){return nt(t,"POST","/v1/accounts:update",e)}async function ah(t,e){return nt(t,"POST","/v1/accounts:lookup",e)}function Sc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function V1(t,e=!1){return ue(t).getIdToken(e)}async function wA(t,e=!1){const n=ue(t),r=await n.getIdToken(e),s=zh(r);Q(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i?.sign_in_provider;return{claims:s,token:r,authTime:Sc(yf(s.auth_time)),issuedAtTime:Sc(yf(s.iat)),expirationTime:Sc(yf(s.exp)),signInProvider:o||null,signInSecondFactor:i?.sign_in_second_factor||null}}function yf(t){return Number(t)*1e3}function zh(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Au("JWT malformed, contained fewer than 3 sections"),null;try{const s=Cm(n);return s?JSON.parse(s):(Au("Failed to decode base64 JWT payload"),null)}catch(s){return Au("Caught error parsing JWT payload as JSON",s?.toString()),null}}function FI(t){const e=zh(t);return Q(e,"internal-error"),Q(typeof e.exp<"u","internal-error"),Q(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Mr(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Hr&&x1(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function x1({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}class O1{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class gp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Sc(this.lastLoginAt),this.creationTime=Sc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Yc(t){const e=t.auth,n=await t.getIdToken(),r=await Mr(t,ah(e,{idToken:n}));Q(r?.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=s.providerUserInfo?.length?AA(s.providerUserInfo):[],o=L1(t.providerData,i),a=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!o?.length,u=a?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new gp(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function vA(t){const e=ue(t);await Yc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function L1(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function AA(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function M1(t,e){const n=await yA(t,{},async()=>{const r=ya({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await IA(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:a,body:r};return t.emulatorConfig&&Gi(t.emulatorConfig.host)&&(c.credentials="include"),_A.fetch()(o,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function F1(t,e){return nt(t,"POST","/v2/accounts:revokeToken",tt(t,e))}class Co{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Q(e.idToken,"internal-error"),Q(typeof e.idToken<"u","internal-error"),Q(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):FI(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Q(e.length!==0,"internal-error");const n=FI(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Q(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await M1(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Co;return r&&(Q(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(Q(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(Q(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Co,this.toJSON())}_performRefresh(){return tr("not implemented")}}function ss(t,e){Q(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Un{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new O1(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new gp(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Mr(this,this.stsTokenManager.getToken(this.auth,e));return Q(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return wA(this,e)}reload(){return vA(this)}_assign(e){this!==e&&(Q(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Un({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Q(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Yc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(at(this.auth.app))return Promise.reject(xt(this.auth));const e=await this.getIdToken();return await Mr(this,N1(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,c=n._redirectEventId??void 0,u=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:d,emailVerified:f,isAnonymous:m,providerData:I,stsTokenManager:T}=n;Q(d&&T,e,"internal-error");const k=Co.fromJSON(this.name,T);Q(typeof d=="string",e,"internal-error"),ss(r,e.name),ss(s,e.name),Q(typeof f=="boolean",e,"internal-error"),Q(typeof m=="boolean",e,"internal-error"),ss(i,e.name),ss(o,e.name),ss(a,e.name),ss(c,e.name),ss(u,e.name),ss(h,e.name);const V=new Un({uid:d,auth:e,email:s,emailVerified:f,displayName:r,isAnonymous:m,photoURL:o,phoneNumber:i,tenantId:a,stsTokenManager:k,createdAt:u,lastLoginAt:h});return I&&Array.isArray(I)&&(V.providerData=I.map(N=>({...N}))),c&&(V._redirectEventId=c),V}static async _fromIdTokenResponse(e,n,r=!1){const s=new Co;s.updateFromServerResponse(n);const i=new Un({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Yc(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];Q(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?AA(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!i?.length,a=new Co;a.updateFromIdToken(r);const c=new Un({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new gp(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!i?.length};return Object.assign(c,u),c}}const UI=new Map;function Rr(t){Lr(t instanceof Function,"Expected a class definition");let e=UI.get(t);return e?(Lr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,UI.set(t,e),e)}class bA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}bA.type="NONE";const _p=bA;function bu(t,e,n){return`firebase:${t}:${e}:${n}`}class ko{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=bu(this.userKey,s.apiKey,i),this.fullPersistenceKey=bu("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await ah(this.auth,{idToken:e}).catch(()=>{});return n?Un._fromGetAccountInfoResponse(this.auth,n,e):null}return Un._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new ko(Rr(_p),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||Rr(_p);const o=bu(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const h=await u._get(o);if(h){let d;if(typeof h=="string"){const f=await ah(e,{idToken:h}).catch(()=>{});if(!f)break;d=await Un._fromGetAccountInfoResponse(e,f,h)}else d=Un._fromJSON(e,h);u!==i&&(a=d),i=u;break}}catch{}const c=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new ko(i,e,r):(i=c[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new ko(i,e,r))}}function BI(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(CA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(RA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(NA(e))return"Blackberry";if(DA(e))return"Webos";if(SA(e))return"Safari";if((e.includes("chrome/")||PA(e))&&!e.includes("edge/"))return"Chrome";if(kA(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function RA(t=Rt()){return/firefox\//i.test(t)}function SA(t=Rt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function PA(t=Rt()){return/crios\//i.test(t)}function CA(t=Rt()){return/iemobile/i.test(t)}function kA(t=Rt()){return/android/i.test(t)}function NA(t=Rt()){return/blackberry/i.test(t)}function DA(t=Rt()){return/webos/i.test(t)}function Um(t=Rt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function U1(t=Rt()){return Um(t)&&!!window.navigator?.standalone}function B1(){return zx()&&document.documentMode===10}function VA(t=Rt()){return Um(t)||kA(t)||DA(t)||NA(t)||/windows phone/i.test(t)||CA(t)}function xA(t,e=[]){let n;switch(t){case"Browser":n=BI(Rt());break;case"Worker":n=`${BI(Rt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ia}/${r}`}class j1{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const c=e(i);o(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function q1(t,e={}){return nt(t,"GET","/v2/passwordPolicy",tt(t,e))}const H1=6;class $1{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??H1,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class G1{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new jI(this),this.idTokenSubscription=new jI(this),this.beforeStateQueue=new j1(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=gA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Rr(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await ko.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await ah(this,{idToken:e}),r=await Un._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(at(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=this.redirectUser?._redirectEventId,o=r?._redirectEventId,a=await this.tryRedirectSignIn(e);(!i||i===o)&&a?.user&&(r=a.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(i){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Q(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Yc(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=A1()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(at(this.app))return Promise.reject(xt(this));const n=e?ue(e):null;return n&&Q(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Q(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return at(this.app)?Promise.reject(xt(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return at(this.app)?Promise.reject(xt(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Rr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await q1(this),n=new $1(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new _l("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await F1(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Rr(e)||this._popupRedirectResolver;Q(n,this,"argument-error"),this.redirectPersistenceManager=await ko.create(this,[Rr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Q(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Q(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=xA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(at(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&w1(`Error while retrieving App Check token: ${e.error}`),e?.token}}function ht(t){return ue(t)}class jI{constructor(e){this.auth=e,this.observer=null,this.addObserver=eO(n=>this.observer=n)}get next(){return Q(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let El={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function K1(t){El=t}function Bm(t){return El.loadJS(t)}function W1(){return El.recaptchaV2Script}function z1(){return El.recaptchaEnterpriseScript}function Q1(){return El.gapiScript}function OA(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const J1=500,Y1=6e4,cu=1e12;class X1{constructor(e){this.auth=e,this.counter=cu,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new tL(e,this.auth.name,n||{})),this.counter++,r}reset(e){const n=e||cu;this._widgets.get(n)?.delete(),this._widgets.delete(n)}getResponse(e){const n=e||cu;return this._widgets.get(n)?.getResponse()||""}async execute(e){const n=e||cu;return this._widgets.get(n)?.execute(),""}}class Z1{constructor(){this.enterprise=new eL}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class eL{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class tL{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const s=typeof e=="string"?document.getElementById(e):e;Q(s,"argument-error",{appName:n}),this.container=s,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=nL(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},Y1)},J1))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function nL(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}const rL="recaptcha-enterprise",Pc="NO_RECAPTCHA";class LA{constructor(e){this.type=rL,this.auth=ht(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{TA(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new EA(c);return i.tenantId==null?i._agentRecaptchaConfig=u:i._tenantRecaptchaConfigs[i.tenantId]=u,o(u.siteKey)}}).catch(c=>{a(c)})})}function s(i,o,a){const c=window.grecaptcha;MI(c)?c.enterprise.ready(()=>{c.enterprise.execute(i,{action:e}).then(u=>{o(u)}).catch(()=>{o(Pc)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Z1().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&MI(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=z1();c.length!==0&&(c+=a),Bm(c).then(()=>{s(a,i,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function nc(t,e,n,r=!1,s=!1){const i=new LA(t);let o;if(s)o=Pc;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const a={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const c=a.phoneEnrollmentInfo.phoneNumber,u=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const c=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function bs(t,e,n,r,s){if(s==="EMAIL_PASSWORD_PROVIDER")if(t._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await nc(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await nc(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)});else if(s==="PHONE_PROVIDER")if(t._getRecaptchaConfig()?.isProviderEnabled("PHONE_PROVIDER")){const i=await nc(t,e,n);return r(t,i).catch(async o=>{if(t._getRecaptchaConfig()?.getProviderEnforcementState("PHONE_PROVIDER")==="AUDIT"&&(o.code==="auth/missing-recaptcha-token"||o.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const a=await nc(t,e,n,!1,!0);return r(t,a)}return Promise.reject(o)})}else{const i=await nc(t,e,n,!1,!0);return r(t,i)}else return Promise.reject(s+" provider is not supported.")}async function MA(t){const e=ht(t),n=await TA(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new EA(n);e.tenantId==null?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,r.isAnyProviderEnabled()&&new LA(e).verify()}function FA(t,e){const n=yl(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Kn(i,e??{}))return s;fn(s,"already-initialized")}return n.initialize({options:e})}function sL(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Rr);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function UA(t,e,n){const r=ht(t);Q(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!n?.disableWarnings,i=BA(e),{host:o,port:a}=iL(e),c=a===null?"":`:${a}`,u={url:`${i}//${o}${c}/`},h=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){Q(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Q(Kn(u,r.config.emulator)&&Kn(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,Gi(o)?(Nm(`${i}//${o}${c}`),Zv("Auth",!0)):s||oL()}function BA(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function iL(t){const e=BA(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:qI(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:qI(o)}}}function qI(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function oL(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}class Ta{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return tr("not implemented")}_getIdTokenResponse(e){return tr("not implemented")}_linkToIdToken(e,n){return tr("not implemented")}_getReauthenticationResolver(e){return tr("not implemented")}}async function jA(t,e){return nt(t,"POST","/v1/accounts:resetPassword",tt(t,e))}async function aL(t,e){return nt(t,"POST","/v1/accounts:update",e)}async function cL(t,e){return nt(t,"POST","/v1/accounts:signUp",e)}async function lL(t,e){return nt(t,"POST","/v1/accounts:update",tt(t,e))}async function uL(t,e){return $r(t,"POST","/v1/accounts:signInWithPassword",tt(t,e))}async function Qh(t,e){return nt(t,"POST","/v1/accounts:sendOobCode",tt(t,e))}async function hL(t,e){return Qh(t,e)}async function dL(t,e){return Qh(t,e)}async function fL(t,e){return Qh(t,e)}async function pL(t,e){return Qh(t,e)}async function mL(t,e){return $r(t,"POST","/v1/accounts:signInWithEmailLink",tt(t,e))}async function gL(t,e){return $r(t,"POST","/v1/accounts:signInWithEmailLink",tt(t,e))}class Wo extends Ta{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Wo(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Wo(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return bs(e,n,"signInWithPassword",uL,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return mL(e,{email:this._email,oobCode:this._password});default:fn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return bs(e,r,"signUpPassword",cL,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return gL(e,{idToken:n,email:this._email,oobCode:this._password});default:fn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Nr(t,e){return $r(t,"POST","/v1/accounts:signInWithIdp",tt(t,e))}const _L="http://localhost";class ur extends Ta{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ur(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):fn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const o=new ur(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Nr(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Nr(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Nr(e,n)}buildRequest(){const e={requestUri:_L,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ya(n)}return e}}async function HI(t,e){return nt(t,"POST","/v1/accounts:sendVerificationCode",tt(t,e))}async function yL(t,e){return $r(t,"POST","/v1/accounts:signInWithPhoneNumber",tt(t,e))}async function IL(t,e){const n=await $r(t,"POST","/v1/accounts:signInWithPhoneNumber",tt(t,e));if(n.temporaryProof)throw fc(t,"account-exists-with-different-credential",n);return n}const EL={USER_NOT_FOUND:"user-not-found"};async function TL(t,e){const n={...e,operation:"REAUTH"};return $r(t,"POST","/v1/accounts:signInWithPhoneNumber",tt(t,n),EL)}class Rs extends Ta{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new Rs({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new Rs({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return yL(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return IL(e,{idToken:n,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return TL(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:s}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:s}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:s,temporaryProof:i}=e;return!r&&!n&&!s&&!i?null:new Rs({verificationId:n,verificationCode:r,phoneNumber:s,temporaryProof:i})}}function wL(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function vL(t){const e=hc(dc(t)).link,n=e?hc(dc(e)).deep_link_id:null,r=hc(dc(t)).deep_link_id;return(r?hc(dc(r)).link:null)||r||n||e||t}class wa{constructor(e){const n=hc(dc(e)),r=n.apiKey??null,s=n.oobCode??null,i=wL(n.mode??null);Q(r&&s&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=vL(e);try{return new wa(n)}catch{return null}}}function AL(t){return wa.parseLink(t)}class qs{constructor(){this.providerId=qs.PROVIDER_ID}static credential(e,n){return Wo._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=wa.parseLink(n);return Q(r,"argument-error"),Wo._fromEmailAndCode(e,r.code,r.tenantId)}}qs.PROVIDER_ID="password";qs.EMAIL_PASSWORD_SIGN_IN_METHOD="password";qs.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Gr{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class va extends Gr{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Cc extends va{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return Q("providerId"in n&&"signInMethod"in n,"argument-error"),ur._fromParams(n)}credential(e){return this._credential({...e,nonce:e.rawNonce})}_credential(e){return Q(e.idToken||e.accessToken,"argument-error"),ur._fromParams({...e,providerId:this.providerId,signInMethod:this.providerId})}static credentialFromResult(e){return Cc.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Cc.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:s,pendingToken:i,nonce:o,providerId:a}=e;if(!r&&!s&&!n&&!i||!a)return null;try{return new Cc(a)._credential({idToken:n,accessToken:r,nonce:o,pendingToken:i})}catch{return null}}}class wr extends va{constructor(){super("facebook.com")}static credential(e){return ur._fromParams({providerId:wr.PROVIDER_ID,signInMethod:wr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return wr.credentialFromTaggedObject(e)}static credentialFromError(e){return wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return wr.credential(e.oauthAccessToken)}catch{return null}}}wr.FACEBOOK_SIGN_IN_METHOD="facebook.com";wr.PROVIDER_ID="facebook.com";class vr extends va{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ur._fromParams({providerId:vr.PROVIDER_ID,signInMethod:vr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return vr.credentialFromTaggedObject(e)}static credentialFromError(e){return vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return vr.credential(n,r)}catch{return null}}}vr.GOOGLE_SIGN_IN_METHOD="google.com";vr.PROVIDER_ID="google.com";class Ar extends va{constructor(){super("github.com")}static credential(e){return ur._fromParams({providerId:Ar.PROVIDER_ID,signInMethod:Ar.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ar.credentialFromTaggedObject(e)}static credentialFromError(e){return Ar.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ar.credential(e.oauthAccessToken)}catch{return null}}}Ar.GITHUB_SIGN_IN_METHOD="github.com";Ar.PROVIDER_ID="github.com";const bL="http://localhost";class Xc extends Ta{constructor(e,n){super(e,e),this.pendingToken=n}_getIdTokenResponse(e){const n=this.buildRequest();return Nr(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Nr(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Nr(e,n)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,pendingToken:i}=n;return!r||!s||!i||r!==s?null:new Xc(r,i)}static _create(e,n){return new Xc(e,n)}buildRequest(){return{requestUri:bL,returnSecureToken:!0,pendingToken:this.pendingToken}}}const RL="saml.";class ch extends Gr{constructor(e){Q(e.startsWith(RL),"argument-error"),super(e)}static credentialFromResult(e){return ch.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return ch.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const n=Xc.fromJSON(e);return Q(n,"argument-error"),n}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:n,providerId:r}=e;if(!n||!r)return null;try{return Xc._create(r,n)}catch{return null}}}class br extends va{constructor(){super("twitter.com")}static credential(e,n){return ur._fromParams({providerId:br.PROVIDER_ID,signInMethod:br.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return br.credentialFromTaggedObject(e)}static credentialFromError(e){return br.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return br.credential(n,r)}catch{return null}}}br.TWITTER_SIGN_IN_METHOD="twitter.com";br.PROVIDER_ID="twitter.com";async function qA(t,e){return $r(t,"POST","/v1/accounts:signUp",tt(t,e))}class Nn{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Un._fromIdTokenResponse(e,r,s),o=$I(r);return new Nn({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=$I(r);return new Nn({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function $I(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}async function SL(t){if(at(t.app))return Promise.reject(xt(t));const e=ht(t);if(await e._initializationPromise,e.currentUser?.isAnonymous)return new Nn({user:e.currentUser,providerId:null,operationType:"signIn"});const n=await qA(e,{returnSecureToken:!0}),r=await Nn._fromIdTokenResponse(e,"signIn",n,!0);return await e._updateCurrentUser(r.user),r}class lh extends Hr{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,lh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new lh(e,n,r,s)}}function HA(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?lh._fromErrorAndOperation(t,i,e,r):i})}function $A(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}async function PL(t,e){const n=ue(t);await Jh(!0,n,e);const{providerUserInfo:r}=await D1(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),s=$A(r||[]);return n.providerData=n.providerData.filter(i=>s.has(i.providerId)),s.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function jm(t,e,n=!1){const r=await Mr(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Nn._forOperation(t,"link",r)}async function Jh(t,e,n){await Yc(e);const r=$A(e.providerData),s=t===!1?"provider-already-linked":"no-such-provider";Q(r.has(n)===t,e.auth,s)}async function GA(t,e,n=!1){const{auth:r}=t;if(at(r.app))return Promise.reject(xt(r));const s="reauthenticate";try{const i=await Mr(t,HA(r,s,e,t),n);Q(i.idToken,r,"internal-error");const o=zh(i.idToken);Q(o,r,"internal-error");const{sub:a}=o;return Q(t.uid===a,r,"user-mismatch"),Nn._forOperation(t,s,i)}catch(i){throw i?.code==="auth/user-not-found"&&fn(r,"user-mismatch"),i}}async function KA(t,e,n=!1){if(at(t.app))return Promise.reject(xt(t));const r="signIn",s=await HA(t,r,e),i=await Nn._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function Yh(t,e){return KA(ht(t),e)}async function WA(t,e){const n=ue(t);return await Jh(!1,n,e.providerId),jm(n,e)}async function zA(t,e){return GA(ue(t),e)}async function CL(t,e){return $r(t,"POST","/v1/accounts:signInWithCustomToken",tt(t,e))}async function kL(t,e){if(at(t.app))return Promise.reject(xt(t));const n=ht(t),r=await CL(n,{token:e,returnSecureToken:!0}),s=await Nn._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(s.user),s}class Tl{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?qm._fromServerResponse(e,n):"totpInfo"in n?Hm._fromServerResponse(e,n):fn(e,"internal-error")}}class qm extends Tl{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new qm(n)}}class Hm extends Tl{constructor(e){super("totp",e)}static _fromServerResponse(e,n){return new Hm(n)}}function Xh(t,e,n){Q(n.url?.length>0,t,"invalid-continue-uri"),Q(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),Q(typeof n.linkDomain>"u"||n.linkDomain.length>0,t,"invalid-hosting-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.linkDomain=n.linkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Q(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(Q(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}async function $m(t){const e=ht(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function QA(t,e,n){const r=ht(t),s={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&Xh(r,s,n),await bs(r,s,"getOobCode",dL,"EMAIL_PASSWORD_PROVIDER")}async function NL(t,e,n){await jA(ue(t),{oobCode:e,newPassword:n}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&$m(t),r})}async function DL(t,e){await lL(ue(t),{oobCode:e})}async function JA(t,e){const n=ue(t),r=await jA(n,{oobCode:e}),s=r.requestType;switch(Q(s,n,"internal-error"),s){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Q(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Q(r.mfaInfo,n,"internal-error");default:Q(r.email,n,"internal-error")}let i=null;return r.mfaInfo&&(i=Tl._fromServerResponse(ht(n),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:i},operation:s}}async function VL(t,e){const{data:n}=await JA(ue(t),e);return n.email}async function YA(t,e,n){if(at(t.app))return Promise.reject(xt(t));const r=ht(t),o=await bs(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",qA,"EMAIL_PASSWORD_PROVIDER").catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&$m(t),c}),a=await Nn._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function XA(t,e,n){return at(t.app)?Promise.reject(xt(t)):Yh(ue(t),qs.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&$m(t),r})}async function xL(t,e,n){const r=ht(t),s={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function i(o,a){Q(a.handleCodeInApp,r,"argument-error"),a&&Xh(r,o,a)}i(s,n),await bs(r,s,"getOobCode",fL,"EMAIL_PASSWORD_PROVIDER")}function OL(t,e){return wa.parseLink(e)?.operation==="EMAIL_SIGNIN"}async function LL(t,e,n){if(at(t.app))return Promise.reject(xt(t));const r=ue(t),s=qs.credentialWithLink(e,n||Jc());return Q(s._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),Yh(r,s)}async function ML(t,e){return nt(t,"POST","/v1/accounts:createAuthUri",tt(t,e))}async function FL(t,e){const n=Mm()?Jc():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:s}=await ML(ue(t),r);return s||[]}async function yp(t,e){const n=ue(t),s={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&Xh(n.auth,s,e);const{email:i}=await hL(n.auth,s);i!==t.email&&await t.reload()}async function UL(t,e,n){const r=ue(t),i={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};n&&Xh(r.auth,i,n);const{email:o}=await pL(r.auth,i);o!==t.email&&await t.reload()}async function BL(t,e){return nt(t,"POST","/v1/accounts:update",e)}async function jL(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=ue(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Mr(r,BL(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:c})=>c==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function qL(t,e){const n=ue(t);return at(n.auth.app)?Promise.reject(xt(n.auth)):ZA(n,e,null)}function HL(t,e){return ZA(ue(t),null,e)}async function ZA(t,e,n){const{auth:r}=t,i={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(i.email=e),n&&(i.password=n);const o=await Mr(t,aL(r,i));await t._updateTokensIfNecessary(o,!0)}function $L(t){if(!t)return null;const{providerId:e}=t,n=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},r=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!e&&t?.idToken){const s=zh(t.idToken)?.firebase?.sign_in_provider;if(s){const i=s!=="anonymous"&&s!=="custom"?s:null;return new No(r,i)}}if(!e)return null;switch(e){case"facebook.com":return new GL(r,n);case"github.com":return new KL(r,n);case"google.com":return new WL(r,n);case"twitter.com":return new zL(r,n,t.screenName||null);case"custom":case"anonymous":return new No(r,null);default:return new No(r,e,n)}}class No{constructor(e,n,r={}){this.isNewUser=e,this.providerId=n,this.profile=r}}class eb extends No{constructor(e,n,r,s){super(e,n,r),this.username=s}}class GL extends No{constructor(e,n){super(e,"facebook.com",n)}}class KL extends eb{constructor(e,n){super(e,"github.com",n,typeof n?.login=="string"?n?.login:null)}}class WL extends No{constructor(e,n){super(e,"google.com",n)}}class zL extends eb{constructor(e,n,r){super(e,"twitter.com",n,r)}}function QL(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:$L(n)}function JL(t,e){return ue(t).setPersistence(e)}function YL(t){return MA(t)}async function XL(t,e){return ht(t).validatePassword(e)}function tb(t,e,n,r){return ue(t).onIdTokenChanged(e,n,r)}function nb(t,e,n){return ue(t).beforeAuthStateChanged(e,n)}function rb(t,e,n,r){return ue(t).onAuthStateChanged(e,n,r)}function ZL(t){ue(t).useDeviceLanguage()}function eM(t,e){return ue(t).updateCurrentUser(e)}function ui(t){return ue(t).signOut()}function tM(t,e){return ht(t).revokeAccessToken(e)}async function nM(t){return ue(t).delete()}class yi{constructor(e,n,r){this.type=e,this.credential=n,this.user=r}static _fromIdtoken(e,n){return new yi("enroll",e,n)}static _fromMfaPendingCredential(e){return new yi("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){if(e?.multiFactorSession){if(e.multiFactorSession?.pendingCredential)return yi._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(e.multiFactorSession?.idToken)return yi._fromIdtoken(e.multiFactorSession.idToken)}return null}}class Gm{constructor(e,n,r){this.session=e,this.hints=n,this.signInResolver=r}static _fromError(e,n){const r=ht(e),s=n.customData._serverResponse,i=(s.mfaInfo||[]).map(a=>Tl._fromServerResponse(r,a));Q(s.mfaPendingCredential,r,"internal-error");const o=yi._fromMfaPendingCredential(s.mfaPendingCredential);return new Gm(o,i,async a=>{const c=await a._process(r,o);delete s.mfaInfo,delete s.mfaPendingCredential;const u={...s,idToken:c.idToken,refreshToken:c.refreshToken};switch(n.operationType){case"signIn":const h=await Nn._fromIdTokenResponse(r,n.operationType,u);return await r._updateCurrentUser(h.user),h;case"reauthenticate":return Q(n.user,r,"internal-error"),Nn._forOperation(n.user,n.operationType,u);default:fn(r,"internal-error")}})}async resolveSignIn(e){const n=e;return this.signInResolver(n)}}function rM(t,e){const n=ue(t),r=e;return Q(e.customData.operationType,n,"argument-error"),Q(r.customData._serverResponse?.mfaPendingCredential,n,"argument-error"),Gm._fromError(n,r)}function GI(t,e){return nt(t,"POST","/v2/accounts/mfaEnrollment:start",tt(t,e))}function sM(t,e){return nt(t,"POST","/v2/accounts/mfaEnrollment:finalize",tt(t,e))}function iM(t,e){return nt(t,"POST","/v2/accounts/mfaEnrollment:start",tt(t,e))}function oM(t,e){return nt(t,"POST","/v2/accounts/mfaEnrollment:finalize",tt(t,e))}function aM(t,e){return nt(t,"POST","/v2/accounts/mfaEnrollment:withdraw",tt(t,e))}class Km{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(n=>{n.mfaInfo&&(this.enrolledFactors=n.mfaInfo.map(r=>Tl._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new Km(e)}async getSession(){return yi._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,n){const r=e,s=await this.getSession(),i=await Mr(this.user,r._process(this.user.auth,s,n));return await this.user._updateTokensIfNecessary(i),this.user.reload()}async unenroll(e){const n=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const s=await Mr(this.user,aM(this.user.auth,{idToken:r,mfaEnrollmentId:n}));this.enrolledFactors=this.enrolledFactors.filter(({uid:i})=>i!==n),await this.user._updateTokensIfNecessary(s),await this.user.reload()}catch(s){throw s}}}const If=new WeakMap;function cM(t){const e=ue(t);return If.has(e)||If.set(e,Km._fromUser(e)),If.get(e)}const uh="__sak";class sb{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(uh,"1"),this.storage.removeItem(uh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const lM=1e3,uM=10;class ib extends sb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=VA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);B1()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,uM):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},lM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}ib.type="LOCAL";const ob=ib;const hM=1e3;function Ef(t){const e=t.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),n=RegExp(`${e}=([^;]+)`);return document.cookie.match(n)?.[1]??null}function Tf(t){return`${window.location.protocol==="http:"?"__dev_":"__HOST-"}FIREBASE_${t.split(":")[3]}`}class ab{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(typeof window===void 0)return e;const n=new URL(`${window.location.origin}/__cookies__`);return n.searchParams.set("finalTarget",e),n}async _isAvailable(){return typeof isSecureContext=="boolean"&&!isSecureContext||typeof navigator>"u"||typeof document>"u"?!1:navigator.cookieEnabled??!0}async _set(e,n){}async _get(e){if(!this._isAvailable())return null;const n=Tf(e);return window.cookieStore?(await window.cookieStore.get(n))?.value:Ef(n)}async _remove(e){if(!this._isAvailable()||!await this._get(e))return;const r=Tf(e);document.cookie=`${r}=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High`,await fetch("/__cookies__",{method:"DELETE"}).catch(()=>{})}_addListener(e,n){if(!this._isAvailable())return;const r=Tf(e);if(window.cookieStore){const a=(u=>{const h=u.changed.find(f=>f.name===r);h&&n(h.value),u.deleted.find(f=>f.name===r)&&n(null)}),c=()=>window.cookieStore.removeEventListener("change",a);return this.listenerUnsubscribes.set(n,c),window.cookieStore.addEventListener("change",a)}let s=Ef(r);const i=setInterval(()=>{const a=Ef(r);a!==s&&(n(a),s=a)},hM),o=()=>clearInterval(i);this.listenerUnsubscribes.set(n,o)}_removeListener(e,n){const r=this.listenerUnsubscribes.get(n);r&&(r(),this.listenerUnsubscribes.delete(n))}}ab.type="COOKIE";const dM=ab;class cb extends sb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}cb.type="SESSION";const Wm=cb;function fM(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class Zh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Zh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!o?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async u=>u(n.origin,i)),c=await fM(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Zh.receivers=[];function ed(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}class pM{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,c)=>{const u=ed("",20);s.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(d){const f=d;if(f.data.eventId===u)switch(f.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(f.data.response);break;default:clearTimeout(h),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}function It(){return window}function mM(t){It().location.href=t}function zm(){return typeof It().WorkerGlobalScope<"u"&&typeof It().importScripts=="function"}async function gM(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function _M(){return navigator?.serviceWorker?.controller||null}function yM(){return zm()?self:null}const lb="firebaseLocalStorageDb",IM=1,hh="firebaseLocalStorage",ub="fbase_key";class wl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function td(t,e){return t.transaction([hh],e?"readwrite":"readonly").objectStore(hh)}function EM(){const t=indexedDB.deleteDatabase(lb);return new wl(t).toPromise()}function Ip(){const t=indexedDB.open(lb,IM);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(hh,{keyPath:ub})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(hh)?e(r):(r.close(),await EM(),e(await Ip()))})})}async function KI(t,e,n){const r=td(t,!0).put({[ub]:e,value:n});return new wl(r).toPromise()}async function TM(t,e){const n=td(t,!1).get(e),r=await new wl(n).toPromise();return r===void 0?null:r.value}function WI(t,e){const n=td(t,!0).delete(e);return new wl(n).toPromise()}const wM=800,vM=3;class hb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ip(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>vM)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return zm()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Zh._getInstance(yM()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await gM(),!this.activeServiceWorker)return;this.sender=new pM(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||_M()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ip();return await KI(e,uh,"1"),await WI(e,uh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>KI(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>TM(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>WI(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=td(s,!1).getAll();return new wl(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),wM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}hb.type="LOCAL";const db=hb;function zI(t,e){return nt(t,"POST","/v2/accounts/mfaSignIn:start",tt(t,e))}function AM(t,e){return nt(t,"POST","/v2/accounts/mfaSignIn:finalize",tt(t,e))}function bM(t,e){return nt(t,"POST","/v2/accounts/mfaSignIn:finalize",tt(t,e))}const wf=OA("rcb"),RM=new Il(3e4,6e4);class SM{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!It().grecaptcha?.render}load(e,n=""){return Q(PM(n),e,"argument-error"),this.shouldResolveImmediately(n)&&LI(It().grecaptcha)?Promise.resolve(It().grecaptcha):new Promise((r,s)=>{const i=It().setTimeout(()=>{s(tn(e,"network-request-failed"))},RM.get());It()[wf]=()=>{It().clearTimeout(i),delete It()[wf];const a=It().grecaptcha;if(!a||!LI(a)){s(tn(e,"internal-error"));return}const c=a.render;a.render=(u,h)=>{const d=c(u,h);return this.counter++,d},this.hostLanguage=n,r(a)};const o=`${W1()}?${ya({onload:wf,render:"explicit",hl:n})}`;Bm(o).catch(()=>{clearTimeout(i),s(tn(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){return!!It().grecaptcha?.render&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function PM(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class CM{async load(e){return new X1(e)}clearedOneInstance(){}}const kc="recaptcha",kM={theme:"light",type:"image"};class NM{constructor(e,n,r={...kM}){this.parameters=r,this.type=kc,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ht(e),this.isInvisible=this.parameters.size==="invisible",Q(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const s=typeof n=="string"?document.getElementById(n):n;Q(s,this.auth,"argument-error"),this.container=s,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new CM:new SM,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(s=>{const i=o=>{o&&(this.tokenChangeListeners.delete(i),s(o))};this.tokenChangeListeners.add(i),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){Q(!this.parameters.sitekey,this.auth,"argument-error"),Q(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Q(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=It()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){Q(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){Q(Mm()&&!zm(),this.auth,"internal-error"),await DM(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await k1(this.auth);Q(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return Q(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function DM(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}class Qm{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=Rs._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function VM(t,e,n){if(at(t.app))return Promise.reject(xt(t));const r=ht(t),s=await nd(r,e,ue(n));return new Qm(s,i=>Yh(r,i))}async function xM(t,e,n){const r=ue(t);await Jh(!1,r,"phone");const s=await nd(r.auth,e,ue(n));return new Qm(s,i=>WA(r,i))}async function OM(t,e,n){const r=ue(t);if(at(r.auth.app))return Promise.reject(xt(r.auth));const s=await nd(r.auth,e,ue(n));return new Qm(s,i=>zA(r,i))}async function nd(t,e,n){if(!t._getRecaptchaConfig())try{await MA(t)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let r;if(typeof e=="string"?r={phoneNumber:e}:r=e,"session"in r){const s=r.session;if("phoneNumber"in r){Q(s.type==="enroll",t,"internal-error");const i={idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await bs(t,i,"mfaSmsEnrollment",async(u,h)=>{if(h.phoneEnrollmentInfo.captchaResponse===Pc){Q(n?.type===kc,u,"argument-error");const d=await vf(u,h,n);return GI(u,d)}return GI(u,h)},"PHONE_PROVIDER").catch(u=>Promise.reject(u))).phoneSessionInfo.sessionInfo}else{Q(s.type==="signin",t,"internal-error");const i=r.multiFactorHint?.uid||r.multiFactorUid;Q(i,t,"missing-multi-factor-info");const o={mfaPendingCredential:s.credential,mfaEnrollmentId:i,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await bs(t,o,"mfaSmsSignIn",async(h,d)=>{if(d.phoneSignInInfo.captchaResponse===Pc){Q(n?.type===kc,h,"argument-error");const f=await vf(h,d,n);return zI(h,f)}return zI(h,d)},"PHONE_PROVIDER").catch(h=>Promise.reject(h))).phoneResponseInfo.sessionInfo}}else{const s={phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await bs(t,s,"sendVerificationCode",async(c,u)=>{if(u.captchaResponse===Pc){Q(n?.type===kc,c,"argument-error");const h=await vf(c,u,n);return HI(c,h)}return HI(c,u)},"PHONE_PROVIDER").catch(c=>Promise.reject(c))).sessionInfo}}finally{n?._reset()}}async function LM(t,e){const n=ue(t);if(at(n.auth.app))return Promise.reject(xt(n.auth));await jm(n,e)}async function vf(t,e,n){Q(n.type===kc,t,"argument-error");const r=await n.verify();Q(typeof r=="string",t,"argument-error");const s={...e};if("phoneEnrollmentInfo"in s){const i=s.phoneEnrollmentInfo.phoneNumber,o=s.phoneEnrollmentInfo.captchaResponse,a=s.phoneEnrollmentInfo.clientType,c=s.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(s,{phoneEnrollmentInfo:{phoneNumber:i,recaptchaToken:r,captchaResponse:o,clientType:a,recaptchaVersion:c}}),s}else if("phoneSignInInfo"in s){const i=s.phoneSignInInfo.captchaResponse,o=s.phoneSignInInfo.clientType,a=s.phoneSignInInfo.recaptchaVersion;return Object.assign(s,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:i,clientType:o,recaptchaVersion:a}}),s}else return Object.assign(s,{recaptchaToken:r}),s}class Ai{constructor(e){this.providerId=Ai.PROVIDER_ID,this.auth=ht(e)}verifyPhoneNumber(e,n){return nd(this.auth,e,ue(n))}static credential(e,n){return Rs._fromVerification(e,n)}static credentialFromResult(e){const n=e;return Ai.credentialFromTaggedObject(n)}static credentialFromError(e){return Ai.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:n,temporaryProof:r}=e;return n&&r?Rs._fromTokenResponse(n,r):null}}Ai.PROVIDER_ID="phone";Ai.PHONE_SIGN_IN_METHOD="phone";function Ki(t,e){return e?Rr(e):(Q(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class Jm extends Ta{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Nr(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Nr(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Nr(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function MM(t){return KA(t.auth,new Jm(t),t.bypassAuthState)}function FM(t){const{auth:e,user:n}=t;return Q(n,e,"internal-error"),GA(n,new Jm(t),t.bypassAuthState)}async function UM(t){const{auth:e,user:n}=t;return Q(n,e,"internal-error"),jm(n,new Jm(t),t.bypassAuthState)}class fb{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return MM;case"linkViaPopup":case"linkViaRedirect":return UM;case"reauthViaPopup":case"reauthViaRedirect":return FM;default:fn(this.auth,"internal-error")}}resolve(e){Lr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Lr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const BM=new Il(2e3,1e4);async function jM(t,e,n){if(at(t.app))return Promise.reject(tn(t,"operation-not-supported-in-this-environment"));const r=ht(t);Ea(t,e,Gr);const s=Ki(r,n);return new Sr(r,"signInViaPopup",e,s).executeNotNull()}async function qM(t,e,n){const r=ue(t);if(at(r.auth.app))return Promise.reject(tn(r.auth,"operation-not-supported-in-this-environment"));Ea(r.auth,e,Gr);const s=Ki(r.auth,n);return new Sr(r.auth,"reauthViaPopup",e,s,r).executeNotNull()}async function HM(t,e,n){const r=ue(t);Ea(r.auth,e,Gr);const s=Ki(r.auth,n);return new Sr(r.auth,"linkViaPopup",e,s,r).executeNotNull()}class Sr extends fb{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Sr.currentPopupAction&&Sr.currentPopupAction.cancel(),Sr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Q(e,this.auth,"internal-error"),e}async onExecution(){Lr(this.filter.length===1,"Popup operations only handle one event");const e=ed();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(tn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(tn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Sr.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(tn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,BM.get())};e()}}Sr.currentPopupAction=null;const $M="pendingRedirect",Ru=new Map;class GM extends fb{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Ru.get(this.auth._key());if(!e){try{const r=await KM(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Ru.set(this.auth._key(),e)}return this.bypassAuthState||Ru.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function KM(t,e){const n=mb(e),r=pb(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}async function Ym(t,e){return pb(t)._set(mb(e),"true")}function WM(t,e){Ru.set(t._key(),e)}function pb(t){return Rr(t._redirectPersistence)}function mb(t){return bu($M,t.config.apiKey,t.name)}function zM(t,e,n){return QM(t,e,n)}async function QM(t,e,n){if(at(t.app))return Promise.reject(xt(t));const r=ht(t);Ea(t,e,Gr),await r._initializationPromise;const s=Ki(r,n);return await Ym(s,r),s._openRedirect(r,e,"signInViaRedirect")}function JM(t,e,n){return YM(t,e,n)}async function YM(t,e,n){const r=ue(t);if(Ea(r.auth,e,Gr),at(r.auth.app))return Promise.reject(xt(r.auth));await r.auth._initializationPromise;const s=Ki(r.auth,n);await Ym(s,r.auth);const i=await _b(r);return s._openRedirect(r.auth,e,"reauthViaRedirect",i)}function XM(t,e,n){return ZM(t,e,n)}async function ZM(t,e,n){const r=ue(t);Ea(r.auth,e,Gr),await r.auth._initializationPromise;const s=Ki(r.auth,n);await Jh(!1,r,e.providerId),await Ym(s,r.auth);const i=await _b(r);return s._openRedirect(r.auth,e,"linkViaRedirect",i)}async function eF(t,e){return await ht(t)._initializationPromise,gb(t,e,!1)}async function gb(t,e,n=!1){if(at(t.app))return Promise.reject(xt(t));const r=ht(t),s=Ki(r,e),o=await new GM(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}async function _b(t){const e=ed(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}const tF=600*1e3;class nF{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!rF(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!yb(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(tn(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=tF&&this.cachedEventUids.clear(),this.cachedEventUids.has(QI(e))}saveEventToCache(e){this.cachedEventUids.add(QI(e)),this.lastProcessedEventTime=Date.now()}}function QI(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function yb({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function rF(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return yb(t);default:return!1}}async function sF(t,e={}){return nt(t,"GET","/v1/projects",e)}const iF=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,oF=/^https?/;async function aF(t){if(t.config.emulator)return;const{authorizedDomains:e}=await sF(t);for(const n of e)try{if(cF(n))return}catch{}fn(t,"unauthorized-domain")}function cF(t){const e=Jc(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!oF.test(n))return!1;if(iF.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}const lF=new Il(3e4,6e4);function JI(){const t=It().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function uF(t){return new Promise((e,n)=>{function r(){JI(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{JI(),n(tn(t,"network-request-failed"))},timeout:lF.get()})}if(It().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(It().gapi?.load)r();else{const s=OA("iframefcb");return It()[s]=()=>{gapi.load?r():n(tn(t,"network-request-failed"))},Bm(`${Q1()}?onload=${s}`).catch(i=>n(i))}}).catch(e=>{throw Su=null,e})}let Su=null;function hF(t){return Su=Su||uF(t),Su}const dF=new Il(5e3,15e3),fF="__/auth/iframe",pF="emulator/auth/iframe",mF={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},gF=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function _F(t){const e=t.config;Q(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Fm(e,pF):`https://${t.config.authDomain}/${fF}`,r={apiKey:e.apiKey,appName:t.name,v:Ia},s=gF.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${ya(r).slice(1)}`}async function yF(t){const e=await hF(t),n=It().gapi;return Q(n,t,"internal-error"),e.open({where:document.body,url:_F(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:mF,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=tn(t,"network-request-failed"),a=It().setTimeout(()=>{i(o)},dF.get());function c(){It().clearTimeout(a),s(r)}r.ping(c).then(c,()=>{i(o)})}))}const IF={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},EF=500,TF=600,wF="_blank",vF="http://localhost";class YI{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function AF(t,e,n,r=EF,s=TF){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const c={...IF,width:r.toString(),height:s.toString(),top:i,left:o},u=Rt().toLowerCase();n&&(a=PA(u)?wF:n),RA(u)&&(e=e||vF,c.scrollbars="yes");const h=Object.entries(c).reduce((f,[m,I])=>`${f}${m}=${I},`,"");if(U1(u)&&a!=="_self")return bF(e||"",a),new YI(null);const d=window.open(e||"",a,h);Q(d,t,"popup-blocked");try{d.focus()}catch{}return new YI(d)}function bF(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}const RF="__/auth/handler",SF="emulator/auth/handler",PF=encodeURIComponent("fac");async function XI(t,e,n,r,s,i){Q(t.config.authDomain,t,"auth-domain-config-required"),Q(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ia,eventId:s};if(e instanceof Gr){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Zx(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries({}))o[h]=d}if(e instanceof va){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const c=await t._getAppCheckToken(),u=c?`#${PF}=${encodeURIComponent(c)}`:"";return`${CF(t)}?${ya(a).slice(1)}${u}`}function CF({config:t}){return t.emulator?Fm(t,SF):`https://${t.authDomain}/${RF}`}const Af="webStorageSupport";class kF{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Wm,this._completeRedirectFn=gb,this._overrideRedirectResult=WM}async _openPopup(e,n,r,s){Lr(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const i=await XI(e,n,r,Jc(),s);return AF(e,i,ed())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await XI(e,n,r,Jc(),s);return mM(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Lr(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await yF(e),r=new nF(e);return n.register("authEvent",s=>(Q(s?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Af,{type:Af},s=>{const i=s?.[0]?.[Af];i!==void 0&&n(!!i),fn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=aF(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return VA()||SA()||Um()}}const Ib=kF;class Eb{constructor(e){this.factorId=e}_process(e,n,r){switch(n.type){case"enroll":return this._finalizeEnroll(e,n.credential,r);case"signin":return this._finalizeSignIn(e,n.credential);default:return tr("unexpected MultiFactorSessionType")}}}class Xm extends Eb{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new Xm(e)}_finalizeEnroll(e,n,r){return sM(e,{idToken:n,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,n){return AM(e,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class Tb{constructor(){}static assertion(e){return Xm._fromCredential(e)}}Tb.FACTOR_ID="phone";class wb{static assertionForEnrollment(e,n){return Zc._fromSecret(e,n)}static assertionForSignIn(e,n){return Zc._fromEnrollmentId(e,n)}static async generateSecret(e){const n=e;Q(typeof n.user?.auth<"u","internal-error");const r=await iM(n.user.auth,{idToken:n.credential,totpEnrollmentInfo:{}});return rd._fromStartTotpMfaEnrollmentResponse(r,n.user.auth)}}wb.FACTOR_ID="totp";class Zc extends Eb{constructor(e,n,r){super("totp"),this.otp=e,this.enrollmentId=n,this.secret=r}static _fromSecret(e,n){return new Zc(n,void 0,e)}static _fromEnrollmentId(e,n){return new Zc(n,e)}async _finalizeEnroll(e,n,r){return Q(typeof this.secret<"u",e,"argument-error"),oM(e,{idToken:n,displayName:r,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)})}async _finalizeSignIn(e,n){Q(this.enrollmentId!==void 0&&this.otp!==void 0,e,"argument-error");const r={verificationCode:this.otp};return bM(e,{mfaPendingCredential:n,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:r})}}class rd{constructor(e,n,r,s,i,o,a){this.sessionInfo=o,this.auth=a,this.secretKey=e,this.hashingAlgorithm=n,this.codeLength=r,this.codeIntervalSeconds=s,this.enrollmentCompletionDeadline=i}static _fromStartTotpMfaEnrollmentResponse(e,n){return new rd(e.totpSessionInfo.sharedSecretKey,e.totpSessionInfo.hashingAlgorithm,e.totpSessionInfo.verificationCodeLength,e.totpSessionInfo.periodSec,new Date(e.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),e.totpSessionInfo.sessionInfo,n)}_makeTotpVerificationInfo(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}generateQrCodeUrl(e,n){let r=!1;return(lu(e)||lu(n))&&(r=!0),r&&(lu(e)&&(e=this.auth.currentUser?.email||"unknownuser"),lu(n)&&(n=this.auth.name)),`otpauth://totp/${n}:${e}?secret=${this.secretKey}&issuer=${n}&algorithm=${this.hashingAlgorithm}&digits=${this.codeLength}`}}function lu(t){return typeof t>"u"||t?.length===0}var ZI="@firebase/auth",eE="1.12.0";class NF{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Q(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function DF(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function VF(t){Ko(new Di("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Q(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:xA(t)},u=new G1(r,s,i,c);return sL(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ko(new Di("auth-internal",e=>{const n=ht(e.getProvider("auth").getImmediate());return(r=>new NF(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),As(ZI,eE,DF(t)),As(ZI,eE,"esm2020")}const xF=300,OF=Xv("authIdTokenMaxAge")||xF;let tE=null;const LF=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>OF)return;const s=n?.token;tE!==s&&(tE=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function MF(t=hA()){const e=yl(t,"auth");if(e.isInitialized())return e.getImmediate();const n=FA(t,{popupRedirectResolver:Ib,persistence:[db,ob,Wm]}),r=Xv("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=LF(i.toString());nb(n,o,()=>o(n.currentUser)),tb(n,a=>o(a))}}const s=Yv("auth");return s&&UA(n,`http://${s}`),n}function FF(){return document.getElementsByTagName("head")?.[0]??document}K1({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=tn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",FF().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});VF("Browser");const UF=Object.freeze(Object.defineProperty({__proto__:null,ActionCodeOperation:y1,ActionCodeURL:wa,AuthCredential:Ta,AuthErrorCodes:T1,EmailAuthCredential:Wo,EmailAuthProvider:qs,FacebookAuthProvider:wr,FactorId:p1,GithubAuthProvider:Ar,GoogleAuthProvider:vr,OAuthCredential:ur,OAuthProvider:Cc,OperationType:_1,PhoneAuthCredential:Rs,PhoneAuthProvider:Ai,PhoneMultiFactorGenerator:Tb,ProviderId:m1,RecaptchaVerifier:NM,SAMLAuthProvider:ch,SignInMethod:g1,TotpMultiFactorGenerator:wb,TotpSecret:rd,TwitterAuthProvider:br,applyActionCode:DL,beforeAuthStateChanged:nb,browserCookiePersistence:dM,browserLocalPersistence:ob,browserPopupRedirectResolver:Ib,browserSessionPersistence:Wm,checkActionCode:JA,confirmPasswordReset:NL,connectAuthEmulator:UA,createUserWithEmailAndPassword:YA,debugErrorMap:E1,deleteUser:nM,fetchSignInMethodsForEmail:FL,getAdditionalUserInfo:QL,getAuth:MF,getIdToken:V1,getIdTokenResult:wA,getMultiFactorResolver:rM,getRedirectResult:eF,inMemoryPersistence:_p,indexedDBLocalPersistence:db,initializeAuth:FA,initializeRecaptchaConfig:YL,isSignInWithEmailLink:OL,linkWithCredential:WA,linkWithPhoneNumber:xM,linkWithPopup:HM,linkWithRedirect:XM,multiFactor:cM,onAuthStateChanged:rb,onIdTokenChanged:tb,parseActionCodeURL:AL,prodErrorMap:mA,reauthenticateWithCredential:zA,reauthenticateWithPhoneNumber:OM,reauthenticateWithPopup:qM,reauthenticateWithRedirect:JM,reload:vA,revokeAccessToken:tM,sendEmailVerification:yp,sendPasswordResetEmail:QA,sendSignInLinkToEmail:xL,setPersistence:JL,signInAnonymously:SL,signInWithCredential:Yh,signInWithCustomToken:kL,signInWithEmailAndPassword:XA,signInWithEmailLink:LL,signInWithPhoneNumber:VM,signInWithPopup:jM,signInWithRedirect:zM,signOut:ui,unlink:PL,updateCurrentUser:eM,updateEmail:qL,updatePassword:HL,updatePhoneNumber:LM,updateProfile:jL,useDeviceLanguage:ZL,validatePassword:XL,verifyBeforeUpdateEmail:UL,verifyPasswordResetCode:VL},Symbol.toStringTag,{value:"Module"}));var nE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Ss,vb;(function(){var t;function e(v,E){function y(){}y.prototype=E.prototype,v.F=E.prototype,v.prototype=new y,v.prototype.constructor=v,v.D=function(A,P,S){for(var b=Array(arguments.length-2),ge=2;ge<arguments.length;ge++)b[ge-2]=arguments[ge];return E.prototype[P].apply(A,b)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(v,E,y){y||(y=0);const A=Array(16);if(typeof E=="string")for(var P=0;P<16;++P)A[P]=E.charCodeAt(y++)|E.charCodeAt(y++)<<8|E.charCodeAt(y++)<<16|E.charCodeAt(y++)<<24;else for(P=0;P<16;++P)A[P]=E[y++]|E[y++]<<8|E[y++]<<16|E[y++]<<24;E=v.g[0],y=v.g[1],P=v.g[2];let S=v.g[3],b;b=E+(S^y&(P^S))+A[0]+3614090360&4294967295,E=y+(b<<7&4294967295|b>>>25),b=S+(P^E&(y^P))+A[1]+3905402710&4294967295,S=E+(b<<12&4294967295|b>>>20),b=P+(y^S&(E^y))+A[2]+606105819&4294967295,P=S+(b<<17&4294967295|b>>>15),b=y+(E^P&(S^E))+A[3]+3250441966&4294967295,y=P+(b<<22&4294967295|b>>>10),b=E+(S^y&(P^S))+A[4]+4118548399&4294967295,E=y+(b<<7&4294967295|b>>>25),b=S+(P^E&(y^P))+A[5]+1200080426&4294967295,S=E+(b<<12&4294967295|b>>>20),b=P+(y^S&(E^y))+A[6]+2821735955&4294967295,P=S+(b<<17&4294967295|b>>>15),b=y+(E^P&(S^E))+A[7]+4249261313&4294967295,y=P+(b<<22&4294967295|b>>>10),b=E+(S^y&(P^S))+A[8]+1770035416&4294967295,E=y+(b<<7&4294967295|b>>>25),b=S+(P^E&(y^P))+A[9]+2336552879&4294967295,S=E+(b<<12&4294967295|b>>>20),b=P+(y^S&(E^y))+A[10]+4294925233&4294967295,P=S+(b<<17&4294967295|b>>>15),b=y+(E^P&(S^E))+A[11]+2304563134&4294967295,y=P+(b<<22&4294967295|b>>>10),b=E+(S^y&(P^S))+A[12]+1804603682&4294967295,E=y+(b<<7&4294967295|b>>>25),b=S+(P^E&(y^P))+A[13]+4254626195&4294967295,S=E+(b<<12&4294967295|b>>>20),b=P+(y^S&(E^y))+A[14]+2792965006&4294967295,P=S+(b<<17&4294967295|b>>>15),b=y+(E^P&(S^E))+A[15]+1236535329&4294967295,y=P+(b<<22&4294967295|b>>>10),b=E+(P^S&(y^P))+A[1]+4129170786&4294967295,E=y+(b<<5&4294967295|b>>>27),b=S+(y^P&(E^y))+A[6]+3225465664&4294967295,S=E+(b<<9&4294967295|b>>>23),b=P+(E^y&(S^E))+A[11]+643717713&4294967295,P=S+(b<<14&4294967295|b>>>18),b=y+(S^E&(P^S))+A[0]+3921069994&4294967295,y=P+(b<<20&4294967295|b>>>12),b=E+(P^S&(y^P))+A[5]+3593408605&4294967295,E=y+(b<<5&4294967295|b>>>27),b=S+(y^P&(E^y))+A[10]+38016083&4294967295,S=E+(b<<9&4294967295|b>>>23),b=P+(E^y&(S^E))+A[15]+3634488961&4294967295,P=S+(b<<14&4294967295|b>>>18),b=y+(S^E&(P^S))+A[4]+3889429448&4294967295,y=P+(b<<20&4294967295|b>>>12),b=E+(P^S&(y^P))+A[9]+568446438&4294967295,E=y+(b<<5&4294967295|b>>>27),b=S+(y^P&(E^y))+A[14]+3275163606&4294967295,S=E+(b<<9&4294967295|b>>>23),b=P+(E^y&(S^E))+A[3]+4107603335&4294967295,P=S+(b<<14&4294967295|b>>>18),b=y+(S^E&(P^S))+A[8]+1163531501&4294967295,y=P+(b<<20&4294967295|b>>>12),b=E+(P^S&(y^P))+A[13]+2850285829&4294967295,E=y+(b<<5&4294967295|b>>>27),b=S+(y^P&(E^y))+A[2]+4243563512&4294967295,S=E+(b<<9&4294967295|b>>>23),b=P+(E^y&(S^E))+A[7]+1735328473&4294967295,P=S+(b<<14&4294967295|b>>>18),b=y+(S^E&(P^S))+A[12]+2368359562&4294967295,y=P+(b<<20&4294967295|b>>>12),b=E+(y^P^S)+A[5]+4294588738&4294967295,E=y+(b<<4&4294967295|b>>>28),b=S+(E^y^P)+A[8]+2272392833&4294967295,S=E+(b<<11&4294967295|b>>>21),b=P+(S^E^y)+A[11]+1839030562&4294967295,P=S+(b<<16&4294967295|b>>>16),b=y+(P^S^E)+A[14]+4259657740&4294967295,y=P+(b<<23&4294967295|b>>>9),b=E+(y^P^S)+A[1]+2763975236&4294967295,E=y+(b<<4&4294967295|b>>>28),b=S+(E^y^P)+A[4]+1272893353&4294967295,S=E+(b<<11&4294967295|b>>>21),b=P+(S^E^y)+A[7]+4139469664&4294967295,P=S+(b<<16&4294967295|b>>>16),b=y+(P^S^E)+A[10]+3200236656&4294967295,y=P+(b<<23&4294967295|b>>>9),b=E+(y^P^S)+A[13]+681279174&4294967295,E=y+(b<<4&4294967295|b>>>28),b=S+(E^y^P)+A[0]+3936430074&4294967295,S=E+(b<<11&4294967295|b>>>21),b=P+(S^E^y)+A[3]+3572445317&4294967295,P=S+(b<<16&4294967295|b>>>16),b=y+(P^S^E)+A[6]+76029189&4294967295,y=P+(b<<23&4294967295|b>>>9),b=E+(y^P^S)+A[9]+3654602809&4294967295,E=y+(b<<4&4294967295|b>>>28),b=S+(E^y^P)+A[12]+3873151461&4294967295,S=E+(b<<11&4294967295|b>>>21),b=P+(S^E^y)+A[15]+530742520&4294967295,P=S+(b<<16&4294967295|b>>>16),b=y+(P^S^E)+A[2]+3299628645&4294967295,y=P+(b<<23&4294967295|b>>>9),b=E+(P^(y|~S))+A[0]+4096336452&4294967295,E=y+(b<<6&4294967295|b>>>26),b=S+(y^(E|~P))+A[7]+1126891415&4294967295,S=E+(b<<10&4294967295|b>>>22),b=P+(E^(S|~y))+A[14]+2878612391&4294967295,P=S+(b<<15&4294967295|b>>>17),b=y+(S^(P|~E))+A[5]+4237533241&4294967295,y=P+(b<<21&4294967295|b>>>11),b=E+(P^(y|~S))+A[12]+1700485571&4294967295,E=y+(b<<6&4294967295|b>>>26),b=S+(y^(E|~P))+A[3]+2399980690&4294967295,S=E+(b<<10&4294967295|b>>>22),b=P+(E^(S|~y))+A[10]+4293915773&4294967295,P=S+(b<<15&4294967295|b>>>17),b=y+(S^(P|~E))+A[1]+2240044497&4294967295,y=P+(b<<21&4294967295|b>>>11),b=E+(P^(y|~S))+A[8]+1873313359&4294967295,E=y+(b<<6&4294967295|b>>>26),b=S+(y^(E|~P))+A[15]+4264355552&4294967295,S=E+(b<<10&4294967295|b>>>22),b=P+(E^(S|~y))+A[6]+2734768916&4294967295,P=S+(b<<15&4294967295|b>>>17),b=y+(S^(P|~E))+A[13]+1309151649&4294967295,y=P+(b<<21&4294967295|b>>>11),b=E+(P^(y|~S))+A[4]+4149444226&4294967295,E=y+(b<<6&4294967295|b>>>26),b=S+(y^(E|~P))+A[11]+3174756917&4294967295,S=E+(b<<10&4294967295|b>>>22),b=P+(E^(S|~y))+A[2]+718787259&4294967295,P=S+(b<<15&4294967295|b>>>17),b=y+(S^(P|~E))+A[9]+3951481745&4294967295,v.g[0]=v.g[0]+E&4294967295,v.g[1]=v.g[1]+(P+(b<<21&4294967295|b>>>11))&4294967295,v.g[2]=v.g[2]+P&4294967295,v.g[3]=v.g[3]+S&4294967295}r.prototype.v=function(v,E){E===void 0&&(E=v.length);const y=E-this.blockSize,A=this.C;let P=this.h,S=0;for(;S<E;){if(P==0)for(;S<=y;)s(this,v,S),S+=this.blockSize;if(typeof v=="string"){for(;S<E;)if(A[P++]=v.charCodeAt(S++),P==this.blockSize){s(this,A),P=0;break}}else for(;S<E;)if(A[P++]=v[S++],P==this.blockSize){s(this,A),P=0;break}}this.h=P,this.o+=E},r.prototype.A=function(){var v=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);v[0]=128;for(var E=1;E<v.length-8;++E)v[E]=0;E=this.o*8;for(var y=v.length-8;y<v.length;++y)v[y]=E&255,E/=256;for(this.v(v),v=Array(16),E=0,y=0;y<4;++y)for(let A=0;A<32;A+=8)v[E++]=this.g[y]>>>A&255;return v};function i(v,E){var y=a;return Object.prototype.hasOwnProperty.call(y,v)?y[v]:y[v]=E(v)}function o(v,E){this.h=E;const y=[];let A=!0;for(let P=v.length-1;P>=0;P--){const S=v[P]|0;A&&S==E||(y[P]=S,A=!1)}this.g=y}var a={};function c(v){return-128<=v&&v<128?i(v,function(E){return new o([E|0],E<0?-1:0)}):new o([v|0],v<0?-1:0)}function u(v){if(isNaN(v)||!isFinite(v))return d;if(v<0)return k(u(-v));const E=[];let y=1;for(let A=0;v>=y;A++)E[A]=v/y|0,y*=4294967296;return new o(E,0)}function h(v,E){if(v.length==0)throw Error("number format error: empty string");if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(v.charAt(0)=="-")return k(h(v.substring(1),E));if(v.indexOf("-")>=0)throw Error('number format error: interior "-" character');const y=u(Math.pow(E,8));let A=d;for(let S=0;S<v.length;S+=8){var P=Math.min(8,v.length-S);const b=parseInt(v.substring(S,S+P),E);P<8?(P=u(Math.pow(E,P)),A=A.j(P).add(u(b))):(A=A.j(y),A=A.add(u(b)))}return A}var d=c(0),f=c(1),m=c(16777216);t=o.prototype,t.m=function(){if(T(this))return-k(this).m();let v=0,E=1;for(let y=0;y<this.g.length;y++){const A=this.i(y);v+=(A>=0?A:4294967296+A)*E,E*=4294967296}return v},t.toString=function(v){if(v=v||10,v<2||36<v)throw Error("radix out of range: "+v);if(I(this))return"0";if(T(this))return"-"+k(this).toString(v);const E=u(Math.pow(v,6));var y=this;let A="";for(;;){const P=C(y,E).g;y=V(y,P.j(E));let S=((y.g.length>0?y.g[0]:y.h)>>>0).toString(v);if(y=P,I(y))return S+A;for(;S.length<6;)S="0"+S;A=S+A}},t.i=function(v){return v<0?0:v<this.g.length?this.g[v]:this.h};function I(v){if(v.h!=0)return!1;for(let E=0;E<v.g.length;E++)if(v.g[E]!=0)return!1;return!0}function T(v){return v.h==-1}t.l=function(v){return v=V(this,v),T(v)?-1:I(v)?0:1};function k(v){const E=v.g.length,y=[];for(let A=0;A<E;A++)y[A]=~v.g[A];return new o(y,~v.h).add(f)}t.abs=function(){return T(this)?k(this):this},t.add=function(v){const E=Math.max(this.g.length,v.g.length),y=[];let A=0;for(let P=0;P<=E;P++){let S=A+(this.i(P)&65535)+(v.i(P)&65535),b=(S>>>16)+(this.i(P)>>>16)+(v.i(P)>>>16);A=b>>>16,S&=65535,b&=65535,y[P]=b<<16|S}return new o(y,y[y.length-1]&-2147483648?-1:0)};function V(v,E){return v.add(k(E))}t.j=function(v){if(I(this)||I(v))return d;if(T(this))return T(v)?k(this).j(k(v)):k(k(this).j(v));if(T(v))return k(this.j(k(v)));if(this.l(m)<0&&v.l(m)<0)return u(this.m()*v.m());const E=this.g.length+v.g.length,y=[];for(var A=0;A<2*E;A++)y[A]=0;for(A=0;A<this.g.length;A++)for(let P=0;P<v.g.length;P++){const S=this.i(A)>>>16,b=this.i(A)&65535,ge=v.i(P)>>>16,Ae=v.i(P)&65535;y[2*A+2*P]+=b*Ae,N(y,2*A+2*P),y[2*A+2*P+1]+=S*Ae,N(y,2*A+2*P+1),y[2*A+2*P+1]+=b*ge,N(y,2*A+2*P+1),y[2*A+2*P+2]+=S*ge,N(y,2*A+2*P+2)}for(v=0;v<E;v++)y[v]=y[2*v+1]<<16|y[2*v];for(v=E;v<2*E;v++)y[v]=0;return new o(y,0)};function N(v,E){for(;(v[E]&65535)!=v[E];)v[E+1]+=v[E]>>>16,v[E]&=65535,E++}function _(v,E){this.g=v,this.h=E}function C(v,E){if(I(E))throw Error("division by zero");if(I(v))return new _(d,d);if(T(v))return E=C(k(v),E),new _(k(E.g),k(E.h));if(T(E))return E=C(v,k(E)),new _(k(E.g),E.h);if(v.g.length>30){if(T(v)||T(E))throw Error("slowDivide_ only works with positive integers.");for(var y=f,A=E;A.l(v)<=0;)y=x(y),A=x(A);var P=U(y,1),S=U(A,1);for(A=U(A,2),y=U(y,2);!I(A);){var b=S.add(A);b.l(v)<=0&&(P=P.add(y),S=b),A=U(A,1),y=U(y,1)}return E=V(v,P.j(E)),new _(P,E)}for(P=d;v.l(E)>=0;){for(y=Math.max(1,Math.floor(v.m()/E.m())),A=Math.ceil(Math.log(y)/Math.LN2),A=A<=48?1:Math.pow(2,A-48),S=u(y),b=S.j(E);T(b)||b.l(v)>0;)y-=A,S=u(y),b=S.j(E);I(S)&&(S=f),P=P.add(S),v=V(v,b)}return new _(P,v)}t.B=function(v){return C(this,v).h},t.and=function(v){const E=Math.max(this.g.length,v.g.length),y=[];for(let A=0;A<E;A++)y[A]=this.i(A)&v.i(A);return new o(y,this.h&v.h)},t.or=function(v){const E=Math.max(this.g.length,v.g.length),y=[];for(let A=0;A<E;A++)y[A]=this.i(A)|v.i(A);return new o(y,this.h|v.h)},t.xor=function(v){const E=Math.max(this.g.length,v.g.length),y=[];for(let A=0;A<E;A++)y[A]=this.i(A)^v.i(A);return new o(y,this.h^v.h)};function x(v){const E=v.g.length+1,y=[];for(let A=0;A<E;A++)y[A]=v.i(A)<<1|v.i(A-1)>>>31;return new o(y,v.h)}function U(v,E){const y=E>>5;E%=32;const A=v.g.length-y,P=[];for(let S=0;S<A;S++)P[S]=E>0?v.i(S+y)>>>E|v.i(S+y+1)<<32-E:v.i(S+y);return new o(P,v.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,vb=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,Ss=o}).apply(typeof nE<"u"?nE:typeof self<"u"?self:typeof window<"u"?window:{});var uu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Ab,pc,bb,Pu,Ep,Rb,Sb,Pb;(function(){var t,e=Object.defineProperty;function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof uu=="object"&&uu];for(var p=0;p<l.length;++p){var g=l[p];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function s(l,p){if(p)e:{var g=r;l=l.split(".");for(var w=0;w<l.length-1;w++){var L=l[w];if(!(L in g))break e;g=g[L]}l=l[l.length-1],w=g[l],p=p(w),p!=w&&p!=null&&e(g,l,{configurable:!0,writable:!0,value:p})}}s("Symbol.dispose",function(l){return l||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(l){return l||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(l){return l||function(p){var g=[],w;for(w in p)Object.prototype.hasOwnProperty.call(p,w)&&g.push([w,p[w]]);return g}});var i=i||{},o=this||self;function a(l){var p=typeof l;return p=="object"&&l!=null||p=="function"}function c(l,p,g){return l.call.apply(l.bind,arguments)}function u(l,p,g){return u=c,u.apply(null,arguments)}function h(l,p){var g=Array.prototype.slice.call(arguments,1);return function(){var w=g.slice();return w.push.apply(w,arguments),l.apply(this,w)}}function d(l,p){function g(){}g.prototype=p.prototype,l.Z=p.prototype,l.prototype=new g,l.prototype.constructor=l,l.Ob=function(w,L,B){for(var ee=Array(arguments.length-2),we=2;we<arguments.length;we++)ee[we-2]=arguments[we];return p.prototype[L].apply(w,ee)}}var f=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?l=>l&&AsyncContext.Snapshot.wrap(l):l=>l;function m(l){const p=l.length;if(p>0){const g=Array(p);for(let w=0;w<p;w++)g[w]=l[w];return g}return[]}function I(l,p){for(let w=1;w<arguments.length;w++){const L=arguments[w];var g=typeof L;if(g=g!="object"?g:L?Array.isArray(L)?"array":g:"null",g=="array"||g=="object"&&typeof L.length=="number"){g=l.length||0;const B=L.length||0;l.length=g+B;for(let ee=0;ee<B;ee++)l[g+ee]=L[ee]}else l.push(L)}}class T{constructor(p,g){this.i=p,this.j=g,this.h=0,this.g=null}get(){let p;return this.h>0?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function k(l){o.setTimeout(()=>{throw l},0)}function V(){var l=v;let p=null;return l.g&&(p=l.g,l.g=l.g.next,l.g||(l.h=null),p.next=null),p}class N{constructor(){this.h=this.g=null}add(p,g){const w=_.get();w.set(p,g),this.h?this.h.next=w:this.g=w,this.h=w}}var _=new T(()=>new C,l=>l.reset());class C{constructor(){this.next=this.g=this.h=null}set(p,g){this.h=p,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let x,U=!1,v=new N,E=()=>{const l=Promise.resolve(void 0);x=()=>{l.then(y)}};function y(){for(var l;l=V();){try{l.h.call(l.g)}catch(g){k(g)}var p=_;p.j(l),p.h<100&&(p.h++,l.next=p.g,p.g=l)}U=!1}function A(){this.u=this.u,this.C=this.C}A.prototype.u=!1,A.prototype.dispose=function(){this.u||(this.u=!0,this.N())},A.prototype[Symbol.dispose]=function(){this.dispose()},A.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function P(l,p){this.type=l,this.g=this.target=p,this.defaultPrevented=!1}P.prototype.h=function(){this.defaultPrevented=!0};var S=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var l=!1,p=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const g=()=>{};o.addEventListener("test",g,p),o.removeEventListener("test",g,p)}catch{}return l})();function b(l){return/^[\s\xa0]*$/.test(l)}function ge(l,p){P.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l&&this.init(l,p)}d(ge,P),ge.prototype.init=function(l,p){const g=this.type=l.type,w=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;this.target=l.target||l.srcElement,this.g=p,p=l.relatedTarget,p||(g=="mouseover"?p=l.fromElement:g=="mouseout"&&(p=l.toElement)),this.relatedTarget=p,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=l.pointerType,this.state=l.state,this.i=l,l.defaultPrevented&&ge.Z.h.call(this)},ge.prototype.h=function(){ge.Z.h.call(this);const l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Ae="closure_listenable_"+(Math.random()*1e6|0),se=0;function le(l,p,g,w,L){this.listener=l,this.proxy=null,this.src=p,this.type=g,this.capture=!!w,this.ha=L,this.key=++se,this.da=this.fa=!1}function ie(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function xe(l,p,g){for(const w in l)p.call(g,l[w],w,l)}function Wn(l,p){for(const g in l)p.call(void 0,l[g],g,l)}function pn(l){const p={};for(const g in l)p[g]=l[g];return p}const Mt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function dr(l,p){let g,w;for(let L=1;L<arguments.length;L++){w=arguments[L];for(g in w)l[g]=w[g];for(let B=0;B<Mt.length;B++)g=Mt[B],Object.prototype.hasOwnProperty.call(w,g)&&(l[g]=w[g])}}function Vn(l){this.src=l,this.g={},this.h=0}Vn.prototype.add=function(l,p,g,w,L){const B=l.toString();l=this.g[B],l||(l=this.g[B]=[],this.h++);const ee=Bt(l,p,w,L);return ee>-1?(p=l[ee],g||(p.fa=!1)):(p=new le(p,this.src,B,!!w,L),p.fa=g,l.push(p)),p};function xn(l,p){const g=p.type;if(g in l.g){var w=l.g[g],L=Array.prototype.indexOf.call(w,p,void 0),B;(B=L>=0)&&Array.prototype.splice.call(w,L,1),B&&(ie(p),l.g[g].length==0&&(delete l.g[g],l.h--))}}function Bt(l,p,g,w){for(let L=0;L<l.length;++L){const B=l[L];if(!B.da&&B.listener==p&&B.capture==!!g&&B.ha==w)return L}return-1}var H="closure_lm_"+(Math.random()*1e6|0),oe={};function te(l,p,g,w,L){if(Array.isArray(p)){for(let B=0;B<p.length;B++)te(l,p[B],g,w,L);return null}return g=K(g),l&&l[Ae]?l.J(p,g,a(w)?!!w.capture:!1,L):de(l,p,g,!1,w,L)}function de(l,p,g,w,L,B){if(!p)throw Error("Invalid event type");const ee=a(L)?!!L.capture:!!L;let we=$(l);if(we||(l[H]=we=new Vn(l)),g=we.add(p,g,w,ee,B),g.proxy)return g;if(w=ve(),g.proxy=w,w.src=l,w.listener=g,l.addEventListener)S||(L=ee),L===void 0&&(L=!1),l.addEventListener(p.toString(),w,L);else if(l.attachEvent)l.attachEvent(D(p.toString()),w);else if(l.addListener&&l.removeListener)l.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return g}function ve(){function l(g){return p.call(l.src,l.listener,g)}const p=F;return l}function $e(l,p,g,w,L){if(Array.isArray(p))for(var B=0;B<p.length;B++)$e(l,p[B],g,w,L);else w=a(w)?!!w.capture:!!w,g=K(g),l&&l[Ae]?(l=l.i,B=String(p).toString(),B in l.g&&(p=l.g[B],g=Bt(p,g,w,L),g>-1&&(ie(p[g]),Array.prototype.splice.call(p,g,1),p.length==0&&(delete l.g[B],l.h--)))):l&&(l=$(l))&&(p=l.g[p.toString()],l=-1,p&&(l=Bt(p,g,w,L)),(g=l>-1?p[l]:null)&&R(g))}function R(l){if(typeof l!="number"&&l&&!l.da){var p=l.src;if(p&&p[Ae])xn(p.i,l);else{var g=l.type,w=l.proxy;p.removeEventListener?p.removeEventListener(g,w,l.capture):p.detachEvent?p.detachEvent(D(g),w):p.addListener&&p.removeListener&&p.removeListener(w),(g=$(p))?(xn(g,l),g.h==0&&(g.src=null,p[H]=null)):ie(l)}}}function D(l){return l in oe?oe[l]:oe[l]="on"+l}function F(l,p){if(l.da)l=!0;else{p=new ge(p,this);const g=l.listener,w=l.ha||l.src;l.fa&&R(l),l=g.call(w,p)}return l}function $(l){return l=l[H],l instanceof Vn?l:null}var j="__closure_events_fn_"+(Math.random()*1e9>>>0);function K(l){return typeof l=="function"?l:(l[j]||(l[j]=function(p){return l.handleEvent(p)}),l[j])}function J(){A.call(this),this.i=new Vn(this),this.M=this,this.G=null}d(J,A),J.prototype[Ae]=!0,J.prototype.removeEventListener=function(l,p,g,w){$e(this,l,p,g,w)};function z(l,p){var g,w=l.G;if(w)for(g=[];w;w=w.G)g.push(w);if(l=l.M,w=p.type||p,typeof p=="string")p=new P(p,l);else if(p instanceof P)p.target=p.target||l;else{var L=p;p=new P(w,l),dr(p,L)}L=!0;let B,ee;if(g)for(ee=g.length-1;ee>=0;ee--)B=p.g=g[ee],L=Y(B,w,!0,p)&&L;if(B=p.g=l,L=Y(B,w,!0,p)&&L,L=Y(B,w,!1,p)&&L,g)for(ee=0;ee<g.length;ee++)B=p.g=g[ee],L=Y(B,w,!1,p)&&L}J.prototype.N=function(){if(J.Z.N.call(this),this.i){var l=this.i;for(const p in l.g){const g=l.g[p];for(let w=0;w<g.length;w++)ie(g[w]);delete l.g[p],l.h--}}this.G=null},J.prototype.J=function(l,p,g,w){return this.i.add(String(l),p,!1,g,w)},J.prototype.K=function(l,p,g,w){return this.i.add(String(l),p,!0,g,w)};function Y(l,p,g,w){if(p=l.i.g[String(p)],!p)return!0;p=p.concat();let L=!0;for(let B=0;B<p.length;++B){const ee=p[B];if(ee&&!ee.da&&ee.capture==g){const we=ee.listener,vt=ee.ha||ee.src;ee.fa&&xn(l.i,ee),L=we.call(vt,w)!==!1&&L}}return L&&!w.defaultPrevented}function W(l,p){if(typeof l!="function")if(l&&typeof l.handleEvent=="function")l=u(l.handleEvent,l);else throw Error("Invalid listener argument");return Number(p)>2147483647?-1:o.setTimeout(l,p||0)}function pe(l){l.g=W(()=>{l.g=null,l.i&&(l.i=!1,pe(l))},l.l);const p=l.h;l.h=null,l.m.apply(null,p)}class ne extends A{constructor(p,g){super(),this.m=p,this.l=g,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:pe(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ce(l){A.call(this),this.h=l,this.g={}}d(ce,A);var Ee=[];function Se(l){xe(l.g,function(p,g){this.g.hasOwnProperty(g)&&R(p)},l),l.g={}}ce.prototype.N=function(){ce.Z.N.call(this),Se(this)},ce.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Oe=o.JSON.stringify,Ve=o.JSON.parse,jt=class{stringify(l){return o.JSON.stringify(l,void 0)}parse(l){return o.JSON.parse(l,void 0)}};function Tt(){}function nn(){}var wt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function fr(){P.call(this,"d")}d(fr,P);function Zi(){P.call(this,"c")}d(Zi,P);var dt={},mn=null;function Js(){return mn=mn||new J}dt.Ia="serverreachability";function La(l){P.call(this,dt.Ia,l)}d(La,P);function Ma(l){const p=Js();z(p,new La(p))}dt.STAT_EVENT="statevent";function a_(l,p){P.call(this,dt.STAT_EVENT,l),this.stat=p}d(a_,P);function Jt(l){const p=Js();z(p,new a_(p,l))}dt.Ja="timingevent";function c_(l,p){P.call(this,dt.Ja,l),this.size=p}d(c_,P);function Fa(l,p){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){l()},p)}function Ua(){this.g=!0}Ua.prototype.ua=function(){this.g=!1};function vP(l,p,g,w,L,B){l.info(function(){if(l.g)if(B){var ee="",we=B.split("&");for(let Ge=0;Ge<we.length;Ge++){var vt=we[Ge].split("=");if(vt.length>1){const Ct=vt[0];vt=vt[1];const Qn=Ct.split("_");ee=Qn.length>=2&&Qn[1]=="type"?ee+(Ct+"="+vt+"&"):ee+(Ct+"=redacted&")}}}else ee=null;else ee=B;return"XMLHTTP REQ ("+w+") [attempt "+L+"]: "+p+`
`+g+`
`+ee})}function AP(l,p,g,w,L,B,ee){l.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+L+"]: "+p+`
`+g+`
`+B+" "+ee})}function eo(l,p,g,w){l.info(function(){return"XMLHTTP TEXT ("+p+"): "+RP(l,g)+(w?" "+w:"")})}function bP(l,p){l.info(function(){return"TIMEOUT: "+p})}Ua.prototype.info=function(){};function RP(l,p){if(!l.g)return p;if(!p)return null;try{const B=JSON.parse(p);if(B){for(l=0;l<B.length;l++)if(Array.isArray(B[l])){var g=B[l];if(!(g.length<2)){var w=g[1];if(Array.isArray(w)&&!(w.length<1)){var L=w[0];if(L!="noop"&&L!="stop"&&L!="close")for(let ee=1;ee<w.length;ee++)w[ee]=""}}}}return Oe(B)}catch{return p}}var Fl={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},l_={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},u_;function Cd(){}d(Cd,Tt),Cd.prototype.g=function(){return new XMLHttpRequest},u_=new Cd;function Ba(l){return encodeURIComponent(String(l))}function SP(l){var p=1;l=l.split(":");const g=[];for(;p>0&&l.length;)g.push(l.shift()),p--;return l.length&&g.push(l.join(":")),g}function Jr(l,p,g,w){this.j=l,this.i=p,this.l=g,this.S=w||1,this.V=new ce(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new h_}function h_(){this.i=null,this.g="",this.h=!1}var d_={},kd={};function Nd(l,p,g){l.M=1,l.A=Bl(zn(p)),l.u=g,l.R=!0,f_(l,null)}function f_(l,p){l.F=Date.now(),Ul(l),l.B=zn(l.A);var g=l.B,w=l.S;Array.isArray(w)||(w=[String(w)]),R_(g.i,"t",w),l.C=0,g=l.j.L,l.h=new h_,l.g=$_(l.j,g?p:null,!l.u),l.P>0&&(l.O=new ne(u(l.Y,l,l.g),l.P)),p=l.V,g=l.g,w=l.ba;var L="readystatechange";Array.isArray(L)||(L&&(Ee[0]=L.toString()),L=Ee);for(let B=0;B<L.length;B++){const ee=te(g,L[B],w||p.handleEvent,!1,p.h||p);if(!ee)break;p.g[ee.key]=ee}p=l.J?pn(l.J):{},l.u?(l.v||(l.v="POST"),p["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.B,l.v,l.u,p)):(l.v="GET",l.g.ea(l.B,l.v,null,p)),Ma(),vP(l.i,l.v,l.B,l.l,l.S,l.u)}Jr.prototype.ba=function(l){l=l.target;const p=this.O;p&&Zr(l)==3?p.j():this.Y(l)},Jr.prototype.Y=function(l){try{if(l==this.g)e:{const we=Zr(this.g),vt=this.g.ya(),Ge=this.g.ca();if(!(we<3)&&(we!=3||this.g&&(this.h.h||this.g.la()||V_(this.g)))){this.K||we!=4||vt==7||(vt==8||Ge<=0?Ma(3):Ma(2)),Dd(this);var p=this.g.ca();this.X=p;var g=PP(this);if(this.o=p==200,AP(this.i,this.v,this.B,this.l,this.S,we,p),this.o){if(this.U&&!this.L){t:{if(this.g){var w,L=this.g;if((w=L.g?L.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!b(w)){var B=w;break t}}B=null}if(l=B)eo(this.i,this.l,l,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Vd(this,l);else{this.o=!1,this.m=3,Jt(12),Ys(this),ja(this);break e}}if(this.R){l=!0;let Ct;for(;!this.K&&this.C<g.length;)if(Ct=CP(this,g),Ct==kd){we==4&&(this.m=4,Jt(14),l=!1),eo(this.i,this.l,null,"[Incomplete Response]");break}else if(Ct==d_){this.m=4,Jt(15),eo(this.i,this.l,g,"[Invalid Chunk]"),l=!1;break}else eo(this.i,this.l,Ct,null),Vd(this,Ct);if(p_(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),we!=4||g.length!=0||this.h.h||(this.m=1,Jt(16),l=!1),this.o=this.o&&l,!l)eo(this.i,this.l,g,"[Invalid Chunked Response]"),Ys(this),ja(this);else if(g.length>0&&!this.W){this.W=!0;var ee=this.j;ee.g==this&&ee.aa&&!ee.P&&(ee.j.info("Great, no buffering proxy detected. Bytes received: "+g.length),jd(ee),ee.P=!0,Jt(11))}}else eo(this.i,this.l,g,null),Vd(this,g);we==4&&Ys(this),this.o&&!this.K&&(we==4?B_(this.j,this):(this.o=!1,Ul(this)))}else HP(this.g),p==400&&g.indexOf("Unknown SID")>0?(this.m=3,Jt(12)):(this.m=0,Jt(13)),Ys(this),ja(this)}}}catch{}};function PP(l){if(!p_(l))return l.g.la();const p=V_(l.g);if(p==="")return"";let g="";const w=p.length,L=Zr(l.g)==4;if(!l.h.i){if(typeof TextDecoder>"u")return Ys(l),ja(l),"";l.h.i=new o.TextDecoder}for(let B=0;B<w;B++)l.h.h=!0,g+=l.h.i.decode(p[B],{stream:!(L&&B==w-1)});return p.length=0,l.h.g+=g,l.C=0,l.h.g}function p_(l){return l.g?l.v=="GET"&&l.M!=2&&l.j.Aa:!1}function CP(l,p){var g=l.C,w=p.indexOf(`
`,g);return w==-1?kd:(g=Number(p.substring(g,w)),isNaN(g)?d_:(w+=1,w+g>p.length?kd:(p=p.slice(w,w+g),l.C=w+g,p)))}Jr.prototype.cancel=function(){this.K=!0,Ys(this)};function Ul(l){l.T=Date.now()+l.H,m_(l,l.H)}function m_(l,p){if(l.D!=null)throw Error("WatchDog timer not null");l.D=Fa(u(l.aa,l),p)}function Dd(l){l.D&&(o.clearTimeout(l.D),l.D=null)}Jr.prototype.aa=function(){this.D=null;const l=Date.now();l-this.T>=0?(bP(this.i,this.B),this.M!=2&&(Ma(),Jt(17)),Ys(this),this.m=2,ja(this)):m_(this,this.T-l)};function ja(l){l.j.I==0||l.K||B_(l.j,l)}function Ys(l){Dd(l);var p=l.O;p&&typeof p.dispose=="function"&&p.dispose(),l.O=null,Se(l.V),l.g&&(p=l.g,l.g=null,p.abort(),p.dispose())}function Vd(l,p){try{var g=l.j;if(g.I!=0&&(g.g==l||xd(g.h,l))){if(!l.L&&xd(g.h,l)&&g.I==3){try{var w=g.Ba.g.parse(p)}catch{w=null}if(Array.isArray(w)&&w.length==3){var L=w;if(L[0]==0){e:if(!g.v){if(g.g)if(g.g.F+3e3<l.F)Gl(g),Hl(g);else break e;Bd(g),Jt(18)}}else g.xa=L[1],0<g.xa-g.K&&L[2]<37500&&g.F&&g.A==0&&!g.C&&(g.C=Fa(u(g.Va,g),6e3));y_(g.h)<=1&&g.ta&&(g.ta=void 0)}else Zs(g,11)}else if((l.L||g.g==l)&&Gl(g),!b(p))for(L=g.Ba.g.parse(p),p=0;p<L.length;p++){let Ge=L[p];const Ct=Ge[0];if(!(Ct<=g.K))if(g.K=Ct,Ge=Ge[1],g.I==2)if(Ge[0]=="c"){g.M=Ge[1],g.ba=Ge[2];const Qn=Ge[3];Qn!=null&&(g.ka=Qn,g.j.info("VER="+g.ka));const ei=Ge[4];ei!=null&&(g.za=ei,g.j.info("SVER="+g.za));const es=Ge[5];es!=null&&typeof es=="number"&&es>0&&(w=1.5*es,g.O=w,g.j.info("backChannelRequestTimeoutMs_="+w)),w=g;const ts=l.g;if(ts){const Wl=ts.g?ts.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Wl){var B=w.h;B.g||Wl.indexOf("spdy")==-1&&Wl.indexOf("quic")==-1&&Wl.indexOf("h2")==-1||(B.j=B.l,B.g=new Set,B.h&&(Od(B,B.h),B.h=null))}if(w.G){const qd=ts.g?ts.g.getResponseHeader("X-HTTP-Session-Id"):null;qd&&(w.wa=qd,Je(w.J,w.G,qd))}}g.I=3,g.l&&g.l.ra(),g.aa&&(g.T=Date.now()-l.F,g.j.info("Handshake RTT: "+g.T+"ms")),w=g;var ee=l;if(w.na=H_(w,w.L?w.ba:null,w.W),ee.L){I_(w.h,ee);var we=ee,vt=w.O;vt&&(we.H=vt),we.D&&(Dd(we),Ul(we)),w.g=ee}else F_(w);g.i.length>0&&$l(g)}else Ge[0]!="stop"&&Ge[0]!="close"||Zs(g,7);else g.I==3&&(Ge[0]=="stop"||Ge[0]=="close"?Ge[0]=="stop"?Zs(g,7):Ud(g):Ge[0]!="noop"&&g.l&&g.l.qa(Ge),g.A=0)}}Ma(4)}catch{}}var kP=class{constructor(l,p){this.g=l,this.map=p}};function g_(l){this.l=l||10,o.PerformanceNavigationTiming?(l=o.performance.getEntriesByType("navigation"),l=l.length>0&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function __(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function y_(l){return l.h?1:l.g?l.g.size:0}function xd(l,p){return l.h?l.h==p:l.g?l.g.has(p):!1}function Od(l,p){l.g?l.g.add(p):l.h=p}function I_(l,p){l.h&&l.h==p?l.h=null:l.g&&l.g.has(p)&&l.g.delete(p)}g_.prototype.cancel=function(){if(this.i=E_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function E_(l){if(l.h!=null)return l.i.concat(l.h.G);if(l.g!=null&&l.g.size!==0){let p=l.i;for(const g of l.g.values())p=p.concat(g.G);return p}return m(l.i)}var T_=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function NP(l,p){if(l){l=l.split("&");for(let g=0;g<l.length;g++){const w=l[g].indexOf("=");let L,B=null;w>=0?(L=l[g].substring(0,w),B=l[g].substring(w+1)):L=l[g],p(L,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function Yr(l){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let p;l instanceof Yr?(this.l=l.l,qa(this,l.j),this.o=l.o,this.g=l.g,Ha(this,l.u),this.h=l.h,Ld(this,S_(l.i)),this.m=l.m):l&&(p=String(l).match(T_))?(this.l=!1,qa(this,p[1]||"",!0),this.o=$a(p[2]||""),this.g=$a(p[3]||"",!0),Ha(this,p[4]),this.h=$a(p[5]||"",!0),Ld(this,p[6]||"",!0),this.m=$a(p[7]||"")):(this.l=!1,this.i=new Ka(null,this.l))}Yr.prototype.toString=function(){const l=[];var p=this.j;p&&l.push(Ga(p,w_,!0),":");var g=this.g;return(g||p=="file")&&(l.push("//"),(p=this.o)&&l.push(Ga(p,w_,!0),"@"),l.push(Ba(g).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.u,g!=null&&l.push(":",String(g))),(g=this.h)&&(this.g&&g.charAt(0)!="/"&&l.push("/"),l.push(Ga(g,g.charAt(0)=="/"?xP:VP,!0))),(g=this.i.toString())&&l.push("?",g),(g=this.m)&&l.push("#",Ga(g,LP)),l.join("")},Yr.prototype.resolve=function(l){const p=zn(this);let g=!!l.j;g?qa(p,l.j):g=!!l.o,g?p.o=l.o:g=!!l.g,g?p.g=l.g:g=l.u!=null;var w=l.h;if(g)Ha(p,l.u);else if(g=!!l.h){if(w.charAt(0)!="/")if(this.g&&!this.h)w="/"+w;else{var L=p.h.lastIndexOf("/");L!=-1&&(w=p.h.slice(0,L+1)+w)}if(L=w,L==".."||L==".")w="";else if(L.indexOf("./")!=-1||L.indexOf("/.")!=-1){w=L.lastIndexOf("/",0)==0,L=L.split("/");const B=[];for(let ee=0;ee<L.length;){const we=L[ee++];we=="."?w&&ee==L.length&&B.push(""):we==".."?((B.length>1||B.length==1&&B[0]!="")&&B.pop(),w&&ee==L.length&&B.push("")):(B.push(we),w=!0)}w=B.join("/")}else w=L}return g?p.h=w:g=l.i.toString()!=="",g?Ld(p,S_(l.i)):g=!!l.m,g&&(p.m=l.m),p};function zn(l){return new Yr(l)}function qa(l,p,g){l.j=g?$a(p,!0):p,l.j&&(l.j=l.j.replace(/:$/,""))}function Ha(l,p){if(p){if(p=Number(p),isNaN(p)||p<0)throw Error("Bad port number "+p);l.u=p}else l.u=null}function Ld(l,p,g){p instanceof Ka?(l.i=p,MP(l.i,l.l)):(g||(p=Ga(p,OP)),l.i=new Ka(p,l.l))}function Je(l,p,g){l.i.set(p,g)}function Bl(l){return Je(l,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),l}function $a(l,p){return l?p?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Ga(l,p,g){return typeof l=="string"?(l=encodeURI(l).replace(p,DP),g&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function DP(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var w_=/[#\/\?@]/g,VP=/[#\?:]/g,xP=/[#\?]/g,OP=/[#\?@]/g,LP=/#/g;function Ka(l,p){this.h=this.g=null,this.i=l||null,this.j=!!p}function Xs(l){l.g||(l.g=new Map,l.h=0,l.i&&NP(l.i,function(p,g){l.add(decodeURIComponent(p.replace(/\+/g," ")),g)}))}t=Ka.prototype,t.add=function(l,p){Xs(this),this.i=null,l=to(this,l);let g=this.g.get(l);return g||this.g.set(l,g=[]),g.push(p),this.h+=1,this};function v_(l,p){Xs(l),p=to(l,p),l.g.has(p)&&(l.i=null,l.h-=l.g.get(p).length,l.g.delete(p))}function A_(l,p){return Xs(l),p=to(l,p),l.g.has(p)}t.forEach=function(l,p){Xs(this),this.g.forEach(function(g,w){g.forEach(function(L){l.call(p,L,w,this)},this)},this)};function b_(l,p){Xs(l);let g=[];if(typeof p=="string")A_(l,p)&&(g=g.concat(l.g.get(to(l,p))));else for(l=Array.from(l.g.values()),p=0;p<l.length;p++)g=g.concat(l[p]);return g}t.set=function(l,p){return Xs(this),this.i=null,l=to(this,l),A_(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[p]),this.h+=1,this},t.get=function(l,p){return l?(l=b_(this,l),l.length>0?String(l[0]):p):p};function R_(l,p,g){v_(l,p),g.length>0&&(l.i=null,l.g.set(to(l,p),m(g)),l.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],p=Array.from(this.g.keys());for(let w=0;w<p.length;w++){var g=p[w];const L=Ba(g);g=b_(this,g);for(let B=0;B<g.length;B++){let ee=L;g[B]!==""&&(ee+="="+Ba(g[B])),l.push(ee)}}return this.i=l.join("&")};function S_(l){const p=new Ka;return p.i=l.i,l.g&&(p.g=new Map(l.g),p.h=l.h),p}function to(l,p){return p=String(p),l.j&&(p=p.toLowerCase()),p}function MP(l,p){p&&!l.j&&(Xs(l),l.i=null,l.g.forEach(function(g,w){const L=w.toLowerCase();w!=L&&(v_(this,w),R_(this,L,g))},l)),l.j=p}function FP(l,p){const g=new Ua;if(o.Image){const w=new Image;w.onload=h(Xr,g,"TestLoadImage: loaded",!0,p,w),w.onerror=h(Xr,g,"TestLoadImage: error",!1,p,w),w.onabort=h(Xr,g,"TestLoadImage: abort",!1,p,w),w.ontimeout=h(Xr,g,"TestLoadImage: timeout",!1,p,w),o.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=l}else p(!1)}function UP(l,p){const g=new Ua,w=new AbortController,L=setTimeout(()=>{w.abort(),Xr(g,"TestPingServer: timeout",!1,p)},1e4);fetch(l,{signal:w.signal}).then(B=>{clearTimeout(L),B.ok?Xr(g,"TestPingServer: ok",!0,p):Xr(g,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(L),Xr(g,"TestPingServer: error",!1,p)})}function Xr(l,p,g,w,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),w(g)}catch{}}function BP(){this.g=new jt}function Md(l){this.i=l.Sb||null,this.h=l.ab||!1}d(Md,Tt),Md.prototype.g=function(){return new jl(this.i,this.h)};function jl(l,p){J.call(this),this.H=l,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}d(jl,J),t=jl.prototype,t.open=function(l,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=l,this.D=p,this.readyState=1,za(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const p={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};l&&(p.body=l),(this.H||o).fetch(new Request(this.D,p)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Wa(this)),this.readyState=0},t.Pa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,za(this)),this.g&&(this.readyState=3,za(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;P_(this)}else l.text().then(this.Oa.bind(this),this.ga.bind(this))};function P_(l){l.j.read().then(l.Ma.bind(l)).catch(l.ga.bind(l))}t.Ma=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var p=l.value?l.value:new Uint8Array(0);(p=this.B.decode(p,{stream:!l.done}))&&(this.response=this.responseText+=p)}l.done?Wa(this):za(this),this.readyState==3&&P_(this)}},t.Oa=function(l){this.g&&(this.response=this.responseText=l,Wa(this))},t.Na=function(l){this.g&&(this.response=l,Wa(this))},t.ga=function(){this.g&&Wa(this)};function Wa(l){l.readyState=4,l.l=null,l.j=null,l.B=null,za(l)}t.setRequestHeader=function(l,p){this.A.append(l,p)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],p=this.h.entries();for(var g=p.next();!g.done;)g=g.value,l.push(g[0]+": "+g[1]),g=p.next();return l.join(`\r
`)};function za(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(jl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function C_(l){let p="";return xe(l,function(g,w){p+=w,p+=":",p+=g,p+=`\r
`}),p}function Fd(l,p,g){e:{for(w in g){var w=!1;break e}w=!0}w||(g=C_(g),typeof l=="string"?g!=null&&Ba(g):Je(l,p,g))}function lt(l){J.call(this),this.headers=new Map,this.L=l||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}d(lt,J);var jP=/^https?$/i,qP=["POST","PUT"];t=lt.prototype,t.Fa=function(l){this.H=l},t.ea=function(l,p,g,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);p=p?p.toUpperCase():"GET",this.D=l,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():u_.g(),this.g.onreadystatechange=f(u(this.Ca,this));try{this.B=!0,this.g.open(p,String(l),!0),this.B=!1}catch(B){k_(this,B);return}if(l=g||"",g=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var L in w)g.set(L,w[L]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const B of w.keys())g.set(B,w.get(B));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(g.keys()).find(B=>B.toLowerCase()=="content-type"),L=o.FormData&&l instanceof o.FormData,!(Array.prototype.indexOf.call(qP,p,void 0)>=0)||w||L||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[B,ee]of g)this.g.setRequestHeader(B,ee);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(l),this.v=!1}catch(B){k_(this,B)}};function k_(l,p){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=p,l.o=5,N_(l),ql(l)}function N_(l){l.A||(l.A=!0,z(l,"complete"),z(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=l||7,z(this,"complete"),z(this,"abort"),ql(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ql(this,!0)),lt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?D_(this):this.Xa())},t.Xa=function(){D_(this)};function D_(l){if(l.h&&typeof i<"u"){if(l.v&&Zr(l)==4)setTimeout(l.Ca.bind(l),0);else if(z(l,"readystatechange"),Zr(l)==4){l.h=!1;try{const B=l.ca();e:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var g;if(!(g=p)){var w;if(w=B===0){let ee=String(l.D).match(T_)[1]||null;!ee&&o.self&&o.self.location&&(ee=o.self.location.protocol.slice(0,-1)),w=!jP.test(ee?ee.toLowerCase():"")}g=w}if(g)z(l,"complete"),z(l,"success");else{l.o=6;try{var L=Zr(l)>2?l.g.statusText:""}catch{L=""}l.l=L+" ["+l.ca()+"]",N_(l)}}finally{ql(l)}}}}function ql(l,p){if(l.g){l.m&&(clearTimeout(l.m),l.m=null);const g=l.g;l.g=null,p||z(l,"ready");try{g.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Zr(l){return l.g?l.g.readyState:0}t.ca=function(){try{return Zr(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(l){if(this.g){var p=this.g.responseText;return l&&p.indexOf(l)==0&&(p=p.substring(l.length)),Ve(p)}};function V_(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.F){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function HP(l){const p={};l=(l.g&&Zr(l)>=2&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<l.length;w++){if(b(l[w]))continue;var g=SP(l[w]);const L=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const B=p[L]||[];p[L]=B,B.push(g)}Wn(p,function(w){return w.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Qa(l,p,g){return g&&g.internalChannelParams&&g.internalChannelParams[l]||p}function x_(l){this.za=0,this.i=[],this.j=new Ua,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Qa("failFast",!1,l),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Qa("baseRetryDelayMs",5e3,l),this.Za=Qa("retryDelaySeedMs",1e4,l),this.Ta=Qa("forwardChannelMaxRetries",2,l),this.va=Qa("forwardChannelRequestTimeoutMs",2e4,l),this.ma=l&&l.xmlHttpFactory||void 0,this.Ua=l&&l.Rb||void 0,this.Aa=l&&l.useFetchStreams||!1,this.O=void 0,this.L=l&&l.supportsCrossDomainXhr||!1,this.M="",this.h=new g_(l&&l.concurrentRequestLimit),this.Ba=new BP,this.S=l&&l.fastHandshake||!1,this.R=l&&l.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=l&&l.Pb||!1,l&&l.ua&&this.j.ua(),l&&l.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&l&&l.detectBufferingProxy||!1,this.ia=void 0,l&&l.longPollingTimeout&&l.longPollingTimeout>0&&(this.ia=l.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=x_.prototype,t.ka=8,t.I=1,t.connect=function(l,p,g,w){Jt(0),this.W=l,this.H=p||{},g&&w!==void 0&&(this.H.OSID=g,this.H.OAID=w),this.F=this.X,this.J=H_(this,null,this.W),$l(this)};function Ud(l){if(O_(l),l.I==3){var p=l.V++,g=zn(l.J);if(Je(g,"SID",l.M),Je(g,"RID",p),Je(g,"TYPE","terminate"),Ja(l,g),p=new Jr(l,l.j,p),p.M=2,p.A=Bl(zn(g)),g=!1,o.navigator&&o.navigator.sendBeacon)try{g=o.navigator.sendBeacon(p.A.toString(),"")}catch{}!g&&o.Image&&(new Image().src=p.A,g=!0),g||(p.g=$_(p.j,null),p.g.ea(p.A)),p.F=Date.now(),Ul(p)}q_(l)}function Hl(l){l.g&&(jd(l),l.g.cancel(),l.g=null)}function O_(l){Hl(l),l.v&&(o.clearTimeout(l.v),l.v=null),Gl(l),l.h.cancel(),l.m&&(typeof l.m=="number"&&o.clearTimeout(l.m),l.m=null)}function $l(l){if(!__(l.h)&&!l.m){l.m=!0;var p=l.Ea;x||E(),U||(x(),U=!0),v.add(p,l),l.D=0}}function $P(l,p){return y_(l.h)>=l.h.j-(l.m?1:0)?!1:l.m?(l.i=p.G.concat(l.i),!0):l.I==1||l.I==2||l.D>=(l.Sa?0:l.Ta)?!1:(l.m=Fa(u(l.Ea,l,p),j_(l,l.D)),l.D++,!0)}t.Ea=function(l){if(this.m)if(this.m=null,this.I==1){if(!l){this.V=Math.floor(Math.random()*1e5),l=this.V++;const L=new Jr(this,this.j,l);let B=this.o;if(this.U&&(B?(B=pn(B),dr(B,this.U)):B=this.U),this.u!==null||this.R||(L.J=B,B=null),this.S)e:{for(var p=0,g=0;g<this.i.length;g++){t:{var w=this.i[g];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(p+=w,p>4096){p=g;break e}if(p===4096||g===this.i.length-1){p=g+1;break e}}p=1e3}else p=1e3;p=M_(this,L,p),g=zn(this.J),Je(g,"RID",l),Je(g,"CVER",22),this.G&&Je(g,"X-HTTP-Session-Id",this.G),Ja(this,g),B&&(this.R?p="headers="+Ba(C_(B))+"&"+p:this.u&&Fd(g,this.u,B)),Od(this.h,L),this.Ra&&Je(g,"TYPE","init"),this.S?(Je(g,"$req",p),Je(g,"SID","null"),L.U=!0,Nd(L,g,null)):Nd(L,g,p),this.I=2}}else this.I==3&&(l?L_(this,l):this.i.length==0||__(this.h)||L_(this))};function L_(l,p){var g;p?g=p.l:g=l.V++;const w=zn(l.J);Je(w,"SID",l.M),Je(w,"RID",g),Je(w,"AID",l.K),Ja(l,w),l.u&&l.o&&Fd(w,l.u,l.o),g=new Jr(l,l.j,g,l.D+1),l.u===null&&(g.J=l.o),p&&(l.i=p.G.concat(l.i)),p=M_(l,g,1e3),g.H=Math.round(l.va*.5)+Math.round(l.va*.5*Math.random()),Od(l.h,g),Nd(g,w,p)}function Ja(l,p){l.H&&xe(l.H,function(g,w){Je(p,w,g)}),l.l&&xe({},function(g,w){Je(p,w,g)})}function M_(l,p,g){g=Math.min(l.i.length,g);const w=l.l?u(l.l.Ka,l.l,l):null;e:{var L=l.i;let we=-1;for(;;){const vt=["count="+g];we==-1?g>0?(we=L[0].g,vt.push("ofs="+we)):we=0:vt.push("ofs="+we);let Ge=!0;for(let Ct=0;Ct<g;Ct++){var B=L[Ct].g;const Qn=L[Ct].map;if(B-=we,B<0)we=Math.max(0,L[Ct].g-100),Ge=!1;else try{B="req"+B+"_"||"";try{var ee=Qn instanceof Map?Qn:Object.entries(Qn);for(const[ei,es]of ee){let ts=es;a(es)&&(ts=Oe(es)),vt.push(B+ei+"="+encodeURIComponent(ts))}}catch(ei){throw vt.push(B+"type="+encodeURIComponent("_badmap")),ei}}catch{w&&w(Qn)}}if(Ge){ee=vt.join("&");break e}}ee=void 0}return l=l.i.splice(0,g),p.G=l,ee}function F_(l){if(!l.g&&!l.v){l.Y=1;var p=l.Da;x||E(),U||(x(),U=!0),v.add(p,l),l.A=0}}function Bd(l){return l.g||l.v||l.A>=3?!1:(l.Y++,l.v=Fa(u(l.Da,l),j_(l,l.A)),l.A++,!0)}t.Da=function(){if(this.v=null,U_(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var l=4*this.T;this.j.info("BP detection timer enabled: "+l),this.B=Fa(u(this.Wa,this),l)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Jt(10),Hl(this),U_(this))};function jd(l){l.B!=null&&(o.clearTimeout(l.B),l.B=null)}function U_(l){l.g=new Jr(l,l.j,"rpc",l.Y),l.u===null&&(l.g.J=l.o),l.g.P=0;var p=zn(l.na);Je(p,"RID","rpc"),Je(p,"SID",l.M),Je(p,"AID",l.K),Je(p,"CI",l.F?"0":"1"),!l.F&&l.ia&&Je(p,"TO",l.ia),Je(p,"TYPE","xmlhttp"),Ja(l,p),l.u&&l.o&&Fd(p,l.u,l.o),l.O&&(l.g.H=l.O);var g=l.g;l=l.ba,g.M=1,g.A=Bl(zn(p)),g.u=null,g.R=!0,f_(g,l)}t.Va=function(){this.C!=null&&(this.C=null,Hl(this),Bd(this),Jt(19))};function Gl(l){l.C!=null&&(o.clearTimeout(l.C),l.C=null)}function B_(l,p){var g=null;if(l.g==p){Gl(l),jd(l),l.g=null;var w=2}else if(xd(l.h,p))g=p.G,I_(l.h,p),w=1;else return;if(l.I!=0){if(p.o)if(w==1){g=p.u?p.u.length:0,p=Date.now()-p.F;var L=l.D;w=Js(),z(w,new c_(w,g)),$l(l)}else F_(l);else if(L=p.m,L==3||L==0&&p.X>0||!(w==1&&$P(l,p)||w==2&&Bd(l)))switch(g&&g.length>0&&(p=l.h,p.i=p.i.concat(g)),L){case 1:Zs(l,5);break;case 4:Zs(l,10);break;case 3:Zs(l,6);break;default:Zs(l,2)}}}function j_(l,p){let g=l.Qa+Math.floor(Math.random()*l.Za);return l.isActive()||(g*=2),g*p}function Zs(l,p){if(l.j.info("Error code "+p),p==2){var g=u(l.bb,l),w=l.Ua;const L=!w;w=new Yr(w||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||qa(w,"https"),Bl(w),L?FP(w.toString(),g):UP(w.toString(),g)}else Jt(2);l.I=0,l.l&&l.l.pa(p),q_(l),O_(l)}t.bb=function(l){l?(this.j.info("Successfully pinged google.com"),Jt(2)):(this.j.info("Failed to ping google.com"),Jt(1))};function q_(l){if(l.I=0,l.ja=[],l.l){const p=E_(l.h);(p.length!=0||l.i.length!=0)&&(I(l.ja,p),I(l.ja,l.i),l.h.i.length=0,m(l.i),l.i.length=0),l.l.oa()}}function H_(l,p,g){var w=g instanceof Yr?zn(g):new Yr(g);if(w.g!="")p&&(w.g=p+"."+w.g),Ha(w,w.u);else{var L=o.location;w=L.protocol,p=p?p+"."+L.hostname:L.hostname,L=+L.port;const B=new Yr(null);w&&qa(B,w),p&&(B.g=p),L&&Ha(B,L),g&&(B.h=g),w=B}return g=l.G,p=l.wa,g&&p&&Je(w,g,p),Je(w,"VER",l.ka),Ja(l,w),w}function $_(l,p,g){if(p&&!l.L)throw Error("Can't create secondary domain capable XhrIo object.");return p=l.Aa&&!l.ma?new lt(new Md({ab:g})):new lt(l.ma),p.Fa(l.L),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function G_(){}t=G_.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Kl(){}Kl.prototype.g=function(l,p){return new gn(l,p)};function gn(l,p){J.call(this),this.g=new x_(p),this.l=l,this.h=p&&p.messageUrlParams||null,l=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(l?l["X-WebChannel-Content-Type"]=p.messageContentType:l={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.sa&&(l?l["X-WebChannel-Client-Profile"]=p.sa:l={"X-WebChannel-Client-Profile":p.sa}),this.g.U=l,(l=p&&p.Qb)&&!b(l)&&(this.g.u=l),this.A=p&&p.supportsCrossDomainXhr||!1,this.v=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!b(p)&&(this.g.G=p,l=this.h,l!==null&&p in l&&(l=this.h,p in l&&delete l[p])),this.j=new no(this)}d(gn,J),gn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){Ud(this.g)},gn.prototype.o=function(l){var p=this.g;if(typeof l=="string"){var g={};g.__data__=l,l=g}else this.v&&(g={},g.__data__=Oe(l),l=g);p.i.push(new kP(p.Ya++,l)),p.I==3&&$l(p)},gn.prototype.N=function(){this.g.l=null,delete this.j,Ud(this.g),delete this.g,gn.Z.N.call(this)};function K_(l){fr.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var p=l.__sm__;if(p){e:{for(const g in p){l=g;break e}l=void 0}(this.i=l)&&(l=this.i,p=p!==null&&l in p?p[l]:void 0),this.data=p}else this.data=l}d(K_,fr);function W_(){Zi.call(this),this.status=1}d(W_,Zi);function no(l){this.g=l}d(no,G_),no.prototype.ra=function(){z(this.g,"a")},no.prototype.qa=function(l){z(this.g,new K_(l))},no.prototype.pa=function(l){z(this.g,new W_)},no.prototype.oa=function(){z(this.g,"b")},Kl.prototype.createWebChannel=Kl.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,Pb=function(){return new Kl},Sb=function(){return Js()},Rb=dt,Ep={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Fl.NO_ERROR=0,Fl.TIMEOUT=8,Fl.HTTP_ERROR=6,Pu=Fl,l_.COMPLETE="complete",bb=l_,nn.EventType=wt,wt.OPEN="a",wt.CLOSE="b",wt.ERROR="c",wt.MESSAGE="d",J.prototype.listen=J.prototype.J,pc=nn,lt.prototype.listenOnce=lt.prototype.K,lt.prototype.getLastError=lt.prototype.Ha,lt.prototype.getLastErrorCode=lt.prototype.ya,lt.prototype.getStatus=lt.prototype.ca,lt.prototype.getResponseJson=lt.prototype.La,lt.prototype.getResponseText=lt.prototype.la,lt.prototype.send=lt.prototype.ea,lt.prototype.setWithCredentials=lt.prototype.Fa,Ab=lt}).apply(typeof uu<"u"?uu:typeof self<"u"?self:typeof window<"u"?window:{});class Nt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Nt.UNAUTHENTICATED=new Nt(null),Nt.GOOGLE_CREDENTIALS=new Nt("google-credentials-uid"),Nt.FIRST_PARTY=new Nt("first-party-uid"),Nt.MOCK_USER=new Nt("mock-user");let Aa="12.8.0";function BF(t){Aa=t}const Ds=new Vm("@firebase/firestore");function go(){return Ds.logLevel}function jF(t){Ds.setLogLevel(t)}function G(t,...e){if(Ds.logLevel<=Pe.DEBUG){const n=e.map(Zm);Ds.debug(`Firestore (${Aa}): ${t}`,...n)}}function pt(t,...e){if(Ds.logLevel<=Pe.ERROR){const n=e.map(Zm);Ds.error(`Firestore (${Aa}): ${t}`,...n)}}function bn(t,...e){if(Ds.logLevel<=Pe.WARN){const n=e.map(Zm);Ds.warn(`Firestore (${Aa}): ${t}`,...n)}}function Zm(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function re(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,Cb(t,r,n)}function Cb(t,e,n){let r=`FIRESTORE (${Aa}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw pt(r),new Error(r)}function ae(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||Cb(e,s,r)}function qF(t,e){t||re(57014,e)}function Z(t,e){return t}const M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class q extends Hr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ot{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class kb{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Nb{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Nt.UNAUTHENTICATED)))}shutdown(){}}class HF{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class $F{constructor(e){this.t=e,this.currentUser=Nt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ae(this.o===void 0,42304);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new Ot;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Ot,e.enqueueRetryable((()=>s(this.currentUser)))};const o=()=>{const c=i;e.enqueueRetryable((async()=>{await c.promise,await s(this.currentUser)}))},a=c=>{G("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((c=>a(c))),setTimeout((()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?a(c):(G("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Ot)}}),0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(G("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ae(typeof r.accessToken=="string",31837,{l:r}),new kb(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ae(e===null||typeof e=="string",2055,{h:e}),new Nt(e)}}class GF{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Nt.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class KF{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new GF(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Nt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Tp{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class WF{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,at(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ae(this.o===void 0,3512);const r=i=>{i.error!=null&&G("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,G("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable((()=>r(i)))};const s=i=>{G("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((i=>s(i))),setTimeout((()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):G("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Tp(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(ae(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Tp(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}class zF{getToken(){return Promise.resolve(new Tp(""))}invalidateToken(){}start(e,n){}shutdown(){}}function QF(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class sd{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=QF(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function ye(t,e){return t<e?-1:t>e?1:0}function wp(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return bf(s)===bf(i)?ye(s,i):bf(s)?1:-1}return ye(t.length,e.length)}const JF=55296,YF=57343;function bf(t){const e=t.charCodeAt(0);return e>=JF&&e<=YF}function zo(t,e,n){return t.length===e.length&&t.every(((r,s)=>n(r,e[s])))}function Db(t){return t+"\0"}const vp="__name__";class Xn{constructor(e,n,r){n===void 0?n=0:n>e.length&&re(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&re(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Xn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Xn?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=Xn.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return ye(e.length,n.length)}static compareSegments(e,n){const r=Xn.isNumericId(e),s=Xn.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Xn.extractNumericId(e).compare(Xn.extractNumericId(n)):wp(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ss.fromString(e.substring(4,e.length-2))}}class be extends Xn{construct(e,n,r){return new be(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new q(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((s=>s.length>0)))}return new be(n)}static emptyPath(){return new be([])}}const XF=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Xe extends Xn{construct(e,n,r){return new Xe(e,n,r)}static isValidIdentifier(e){return XF.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xe.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===vp}static keyField(){return new Xe([vp])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new q(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new q(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new q(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new q(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Xe(n)}static emptyPath(){return new Xe([])}}class X{constructor(e){this.path=e}static fromPath(e){return new X(be.fromString(e))}static fromName(e){return new X(be.fromString(e).popFirst(5))}static empty(){return new X(be.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&be.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return be.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new X(new be(e.slice()))}}function eg(t,e,n){if(!n)throw new q(M.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Vb(t,e,n,r){if(e===!0&&r===!0)throw new q(M.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function rE(t){if(!X.isDocumentKey(t))throw new q(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function sE(t){if(X.isDocumentKey(t))throw new q(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function xb(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function id(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":re(12329,{type:typeof t})}function Re(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new q(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=id(t);throw new q(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function Ob(t,e){if(e<=0)throw new q(M.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}function Et(t,e){const n={typeString:t};return e&&(n.value=e),n}function Wi(t,e){if(!xb(t))throw new q(M.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new q(M.INVALID_ARGUMENT,n);return!0}const iE=-62135596800,oE=1e6;class Fe{static now(){return Fe.fromMillis(Date.now())}static fromDate(e){return Fe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*oE);return new Fe(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new q(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new q(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<iE)throw new q(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new q(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/oE}_compareTo(e){return this.seconds===e.seconds?ye(this.nanoseconds,e.nanoseconds):ye(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Fe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Wi(e,Fe._jsonSchema))return new Fe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-iE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Fe._jsonSchemaVersion="firestore/timestamp/1.0",Fe._jsonSchema={type:Et("string",Fe._jsonSchemaVersion),seconds:Et("number"),nanoseconds:Et("number")};class he{static fromTimestamp(e){return new he(e)}static min(){return new he(new Fe(0,0))}static max(){return new he(new Fe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Qo=-1;class Jo{constructor(e,n,r,s){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=s}}function Ap(t){return t.fields.find((e=>e.kind===2))}function hi(t){return t.fields.filter((e=>e.kind!==2))}function ZF(t,e){let n=ye(t.collectionGroup,e.collectionGroup);if(n!==0)return n;for(let r=0;r<Math.min(t.fields.length,e.fields.length);++r)if(n=eU(t.fields[r],e.fields[r]),n!==0)return n;return ye(t.fields.length,e.fields.length)}Jo.UNKNOWN_ID=-1;class bi{constructor(e,n){this.fieldPath=e,this.kind=n}}function eU(t,e){const n=Xe.comparator(t.fieldPath,e.fieldPath);return n!==0?n:ye(t.kind,e.kind)}class Yo{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Yo(0,Rn.min())}}function Lb(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=he.fromTimestamp(r===1e9?new Fe(n+1,0):new Fe(n,r));return new Rn(s,X.empty(),e)}function Mb(t){return new Rn(t.readTime,t.key,Qo)}class Rn{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Rn(he.min(),X.empty(),Qo)}static max(){return new Rn(he.max(),X.empty(),Qo)}}function tg(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=X.comparator(t.documentKey,e.documentKey),n!==0?n:ye(t.largestBatchId,e.largestBatchId))}const Fb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ub{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Hs(t){if(t.code!==M.FAILED_PRECONDITION||t.message!==Fb)throw t;G("LocalStore","Unexpectedly lost primary lease")}class O{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&re(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new O(((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof O?n:O.resolve(n)}catch(n){return O.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):O.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):O.reject(n)}static resolve(e){return new O(((n,r)=>{n(e)}))}static reject(e){return new O(((n,r)=>{r(e)}))}static waitFor(e){return new O(((n,r)=>{let s=0,i=0,o=!1;e.forEach((a=>{++s,a.next((()=>{++i,o&&i===s&&n()}),(c=>r(c)))})),o=!0,i===s&&n()}))}static or(e){let n=O.resolve(!1);for(const r of e)n=n.next((s=>s?O.resolve(s):r()));return n}static forEach(e,n){const r=[];return e.forEach(((s,i)=>{r.push(n.call(this,s,i))})),this.waitFor(r)}static mapArray(e,n){return new O(((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let c=0;c<i;c++){const u=c;n(e[u]).next((h=>{o[u]=h,++a,a===i&&r(o)}),(h=>s(h)))}}))}static doWhile(e,n){return new O(((r,s)=>{const i=()=>{e()===!0?n().next((()=>{i()}),s):r()};i()}))}}const _n="SimpleDb";class od{static open(e,n,r,s){try{return new od(n,e.transaction(s,r))}catch(i){throw new Nc(n,i)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.S=new Ot,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new Nc(e,n.error)):this.S.resolve()},this.transaction.onerror=r=>{const s=ng(r.target.error);this.S.reject(new Nc(e,s))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(G(_n,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new nU(n)}}class or{static delete(e){return G(_n,"Removing database:",e),fi(Jv().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!sA())return!1;if(or.F())return!0;const e=Rt(),n=or.M(e),r=0<n&&n<10,s=Bb(e),i=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||i)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,n){return e.store(n)}static M(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,n,r){this.name=e,this.version=n,this.N=r,this.B=null,or.M(Rt())===12.2&&pt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(G(_n,"Opening database:",this.name),this.db=await new Promise(((n,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const o=i.target.result;n(o)},s.onblocked=()=>{r(new Nc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const o=i.target.error;o.name==="VersionError"?r(new q(M.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new q(M.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Nc(e,o))},s.onupgradeneeded=i=>{G(_n,'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const o=i.target.result;this.N.k(o,s.transaction,i.oldVersion,this.version).next((()=>{G(_n,"Database upgrade to version "+this.version+" complete")}))}}))),this.K&&(this.db.onversionchange=n=>this.K(n)),this.db}q(e){this.K=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,s){const i=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.L(e);const a=od.open(this.db,e,i?"readonly":"readwrite",r),c=s(a).next((u=>(a.C(),u))).catch((u=>(a.abort(u),O.reject(u)))).toPromise();return c.catch((()=>{})),await a.D,c}catch(a){const c=a,u=c.name!=="FirebaseError"&&o<3;if(G(_n,"Transaction failed with error:",c.message,"Retrying:",u),this.close(),!u)return Promise.reject(c)}}}close(){this.db&&this.db.close(),this.db=void 0}}function Bb(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class tU{constructor(e){this.U=e,this.$=!1,this.W=null}get isDone(){return this.$}get G(){return this.W}set cursor(e){this.U=e}done(){this.$=!0}j(e){this.W=e}delete(){return fi(this.U.delete())}}class Nc extends q{constructor(e,n){super(M.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function $s(t){return t.name==="IndexedDbTransactionError"}class nU{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(G(_n,"PUT",this.store.name,e,n),r=this.store.put(n,e)):(G(_n,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),fi(r)}add(e){return G(_n,"ADD",this.store.name,e,e),fi(this.store.add(e))}get(e){return fi(this.store.get(e)).next((n=>(n===void 0&&(n=null),G(_n,"GET",this.store.name,e,n),n)))}delete(e){return G(_n,"DELETE",this.store.name,e),fi(this.store.delete(e))}count(){return G(_n,"COUNT",this.store.name),fi(this.store.count())}H(e,n){const r=this.options(e,n),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const i=s.getAll(r.range);return new O(((o,a)=>{i.onerror=c=>{a(c.target.error)},i.onsuccess=c=>{o(c.target.result)}}))}{const i=this.cursor(r),o=[];return this.J(i,((a,c)=>{o.push(c)})).next((()=>o))}}Z(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new O(((s,i)=>{r.onerror=o=>{i(o.target.error)},r.onsuccess=o=>{s(o.target.result)}}))}X(e,n){G(_n,"DELETE ALL",this.store.name);const r=this.options(e,n);r.Y=!1;const s=this.cursor(r);return this.J(s,((i,o,a)=>a.delete()))}ee(e,n){let r;n?r=e:(r={},n=e);const s=this.cursor(r);return this.J(s,n)}te(e){const n=this.cursor({});return new O(((r,s)=>{n.onerror=i=>{const o=ng(i.target.error);s(o)},n.onsuccess=i=>{const o=i.target.result;o?e(o.primaryKey,o.value).next((a=>{a?o.continue():r()})):r()}}))}J(e,n){const r=[];return new O(((s,i)=>{e.onerror=o=>{i(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void s();const c=new tU(a),u=n(a.primaryKey,a.value,c);if(u instanceof O){const h=u.catch((d=>(c.done(),O.reject(d))));r.push(h)}c.isDone?s():c.G===null?a.continue():a.continue(c.G)}})).next((()=>O.waitFor(r)))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function fi(t){return new O(((e,n)=>{t.onsuccess=r=>{const s=r.target.result;e(s)},t.onerror=r=>{const s=ng(r.target.error);n(s)}}))}let aE=!1;function ng(t){const e=or.M(Rt());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new q("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return aE||(aE=!0,setTimeout((()=>{throw r}),0)),r}}return t}const Dc="IndexBackfiller";class rU{constructor(e,n){this.asyncQueue=e,this.ne=n,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){G(Dc,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const n=await this.ne.ie();G(Dc,`Documents written: ${n}`)}catch(n){$s(n)?G(Dc,"Ignoring IndexedDB error during index backfill: ",n):await Hs(n)}await this.re(6e4)}))}}class sU{constructor(e,n){this.localStore=e,this.persistence=n}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(n=>this.se(n,e)))}se(e,n){const r=new Set;let s=n,i=!0;return O.doWhile((()=>i===!0&&s>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((o=>{if(o!==null&&!r.has(o))return G(Dc,`Processing collection: ${o}`),this.oe(e,o,s).next((a=>{s-=a,r.add(o)}));i=!1})))).next((()=>n-s))}oe(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next((s=>this.localStore.localDocuments.getNextDocuments(e,n,s,r).next((i=>{const o=i.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next((()=>this._e(s,i))).next((a=>(G(Dc,`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a)))).next((()=>o.size))}))))}_e(e,n){let r=e;return n.changes.forEach(((s,i)=>{const o=Mb(i);tg(o,r)>0&&(r=o)})),new Rn(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}class cn{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}cn.ce=-1;const Ps=-1;function vl(t){return t==null}function el(t){return t===0&&1/t==-1/0}function jb(t){return typeof t=="number"&&Number.isInteger(t)&&!el(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}const dh="";function zt(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=cE(e)),e=iU(t.get(n),e);return cE(e)}function iU(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case dh:n+="";break;default:n+=i}}return n}function cE(t){return t+dh+""}function nr(t){const e=t.length;if(ae(e>=2,64408,{path:t}),e===2)return ae(t.charAt(0)===dh&&t.charAt(1)==="",56145,{path:t}),be.emptyPath();const n=e-2,r=[];let s="";for(let i=0;i<e;){const o=t.indexOf(dh,i);switch((o<0||o>n)&&re(50515,{path:t}),t.charAt(o+1)){case"":const a=t.substring(i,o);let c;s.length===0?c=a:(s+=a,c=s,s=""),r.push(c);break;case"":s+=t.substring(i,o),s+="\0";break;case"":s+=t.substring(i,o+1);break;default:re(61167,{path:t})}i=o+2}return new be(r)}const di="remoteDocuments",Al="owner",ao="owner",tl="mutationQueues",oU="userId",On="mutations",lE="batchId",Ii="userMutationsIndex",uE=["userId","batchId"];function Cu(t,e){return[t,zt(e)]}function qb(t,e,n){return[t,zt(e),n]}const aU={},Xo="documentMutations",fh="remoteDocumentsV14",cU=["prefixPath","collectionGroup","readTime","documentId"],ku="documentKeyIndex",lU=["prefixPath","collectionGroup","documentId"],Hb="collectionGroupIndex",uU=["collectionGroup","readTime","prefixPath","documentId"],nl="remoteDocumentGlobal",bp="remoteDocumentGlobalKey",Zo="targets",$b="queryTargetsIndex",hU=["canonicalId","targetId"],ea="targetDocuments",dU=["targetId","path"],rg="documentTargetsIndex",fU=["path","targetId"],ph="targetGlobalKey",Ri="targetGlobal",rl="collectionParents",pU=["collectionId","parent"],ta="clientMetadata",mU="clientId",ad="bundles",gU="bundleId",cd="namedQueries",_U="name",sg="indexConfiguration",yU="indexId",Rp="collectionGroupIndex",IU="collectionGroup",Vc="indexState",EU=["indexId","uid"],Gb="sequenceNumberIndex",TU=["uid","sequenceNumber"],xc="indexEntries",wU=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Kb="documentKeyIndex",vU=["indexId","uid","orderedDocumentKey"],ld="documentOverlays",AU=["userId","collectionPath","documentId"],Sp="collectionPathOverlayIndex",bU=["userId","collectionPath","largestBatchId"],Wb="collectionGroupOverlayIndex",RU=["userId","collectionGroup","largestBatchId"],ig="globals",SU="name",zb=[tl,On,Xo,di,Zo,Al,Ri,ea,ta,nl,rl,ad,cd],PU=[...zb,ld],Qb=[tl,On,Xo,fh,Zo,Al,Ri,ea,ta,nl,rl,ad,cd,ld],Jb=Qb,og=[...Jb,sg,Vc,xc],CU=og,Yb=[...og,ig],kU=Yb;class Pp extends Ub{constructor(e,n){super(),this.le=e,this.currentSequenceNumber=n}}function Pt(t,e){const n=Z(t);return or.O(n.le,e)}function hE(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Gs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Xb(t,e){const n=[];for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.push(e(t[r],r,t));return n}function Zb(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class Qe{constructor(e,n){this.comparator=e,this.root=n||Ft.EMPTY}insert(e,n){return new Qe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ft.BLACK,null,null))}remove(e){return new Qe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ft.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new hu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new hu(this.root,e,this.comparator,!1)}getReverseIterator(){return new hu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new hu(this.root,e,this.comparator,!0)}}class hu{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ft{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Ft.RED,this.left=s??Ft.EMPTY,this.right=i??Ft.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Ft(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Ft.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Ft.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ft.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ft.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw re(43730,{key:this.key,value:this.value});if(this.right.isRed())throw re(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw re(27949);return e+(this.isRed()?0:1)}}Ft.EMPTY=null,Ft.RED=!0,Ft.BLACK=!1;Ft.EMPTY=new class{constructor(){this.size=0}get key(){throw re(57766)}get value(){throw re(16141)}get color(){throw re(16727)}get left(){throw re(29726)}get right(){throw re(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new Ft(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class je{constructor(e){this.comparator=e,this.data=new Qe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new dE(this.data.getIterator())}getIteratorFrom(e){return new dE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof je)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new je(this.comparator);return n.data=e,n}}class dE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function co(t){return t.hasNext()?t.getNext():void 0}class ln{constructor(e){this.fields=e,e.sort(Xe.comparator)}static empty(){return new ln([])}unionWith(e){let n=new je(Xe.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new ln(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return zo(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}class eR extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}function NU(){return typeof atob<"u"}class ct{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new eR("Invalid base64 string: "+i):i}})(e);return new ct(n)}static fromUint8Array(e){const n=(function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i})(e);return new ct(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ye(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ct.EMPTY_BYTE_STRING=new ct("");const DU=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Fr(t){if(ae(!!t,39018),typeof t=="string"){let e=0;const n=DU.exec(t);if(ae(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:rt(t.seconds),nanos:rt(t.nanos)}}function rt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ur(t){return typeof t=="string"?ct.fromBase64String(t):ct.fromUint8Array(t)}const tR="server_timestamp",nR="__type__",rR="__previous_value__",sR="__local_write_time__";function ud(t){return(t?.mapValue?.fields||{})[nR]?.stringValue===tR}function hd(t){const e=t.mapValue.fields[rR];return ud(e)?hd(e):e}function sl(t){const e=Fr(t.mapValue.fields[sR].timestampValue);return new Fe(e.seconds,e.nanos)}class VU{constructor(e,n,r,s,i,o,a,c,u,h,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=h,this.apiKey=d}}const il="(default)";class Vs{constructor(e,n){this.projectId=e,this.database=n||il}static empty(){return new Vs("","")}get isDefaultDatabase(){return this.database===il}isEqual(e){return e instanceof Vs&&e.projectId===this.projectId&&e.database===this.database}}function xU(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new q(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Vs(t.options.projectId,e)}const ag="__type__",iR="__max__",gs={mapValue:{fields:{__type__:{stringValue:iR}}}},cg="__vector__",na="value",Nu={nullValue:"NULL_VALUE"};function xs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ud(t)?4:oR(t)?9007199254740991:dd(t)?10:11:re(28295,{value:t})}function hr(t,e){if(t===e)return!0;const n=xs(t);if(n!==xs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return sl(t).isEqual(sl(e));case 3:return(function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Fr(s.timestampValue),a=Fr(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(s,i){return Ur(s.bytesValue).isEqual(Ur(i.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(s,i){return rt(s.geoPointValue.latitude)===rt(i.geoPointValue.latitude)&&rt(s.geoPointValue.longitude)===rt(i.geoPointValue.longitude)})(t,e);case 2:return(function(s,i){if("integerValue"in s&&"integerValue"in i)return rt(s.integerValue)===rt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=rt(s.doubleValue),a=rt(i.doubleValue);return o===a?el(o)===el(a):isNaN(o)&&isNaN(a)}return!1})(t,e);case 9:return zo(t.arrayValue.values||[],e.arrayValue.values||[],hr);case 10:case 11:return(function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(hE(o)!==hE(a))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!hr(o[c],a[c])))return!1;return!0})(t,e);default:return re(52216,{left:t})}}function ol(t,e){return(t.values||[]).find((n=>hr(n,e)))!==void 0}function Os(t,e){if(t===e)return 0;const n=xs(t),r=xs(e);if(n!==r)return ye(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ye(t.booleanValue,e.booleanValue);case 2:return(function(i,o){const a=rt(i.integerValue||i.doubleValue),c=rt(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1})(t,e);case 3:return fE(t.timestampValue,e.timestampValue);case 4:return fE(sl(t),sl(e));case 5:return wp(t.stringValue,e.stringValue);case 6:return(function(i,o){const a=Ur(i),c=Ur(o);return a.compareTo(c)})(t.bytesValue,e.bytesValue);case 7:return(function(i,o){const a=i.split("/"),c=o.split("/");for(let u=0;u<a.length&&u<c.length;u++){const h=ye(a[u],c[u]);if(h!==0)return h}return ye(a.length,c.length)})(t.referenceValue,e.referenceValue);case 8:return(function(i,o){const a=ye(rt(i.latitude),rt(o.latitude));return a!==0?a:ye(rt(i.longitude),rt(o.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return pE(t.arrayValue,e.arrayValue);case 10:return(function(i,o){const a=i.fields||{},c=o.fields||{},u=a[na]?.arrayValue,h=c[na]?.arrayValue,d=ye(u?.values?.length||0,h?.values?.length||0);return d!==0?d:pE(u,h)})(t.mapValue,e.mapValue);case 11:return(function(i,o){if(i===gs.mapValue&&o===gs.mapValue)return 0;if(i===gs.mapValue)return 1;if(o===gs.mapValue)return-1;const a=i.fields||{},c=Object.keys(a),u=o.fields||{},h=Object.keys(u);c.sort(),h.sort();for(let d=0;d<c.length&&d<h.length;++d){const f=wp(c[d],h[d]);if(f!==0)return f;const m=Os(a[c[d]],u[h[d]]);if(m!==0)return m}return ye(c.length,h.length)})(t.mapValue,e.mapValue);default:throw re(23264,{he:n})}}function fE(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ye(t,e);const n=Fr(t),r=Fr(e),s=ye(n.seconds,r.seconds);return s!==0?s:ye(n.nanos,r.nanos)}function pE(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Os(n[s],r[s]);if(i)return i}return ye(n.length,r.length)}function ra(t){return Cp(t)}function Cp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=Fr(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Ur(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return X.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Cp(i);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Cp(n.fields[o])}`;return s+"}"})(t.mapValue):re(61005,{value:t})}function Du(t){switch(xs(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=hd(t);return e?16+Du(e):16;case 5:return 2*t.stringValue.length;case 6:return Ur(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((s,i)=>s+Du(i)),0)})(t.arrayValue);case 10:case 11:return(function(r){let s=0;return Gs(r.fields,((i,o)=>{s+=i.length+Du(o)})),s})(t.mapValue);default:throw re(13486,{value:t})}}function xi(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function kp(t){return!!t&&"integerValue"in t}function al(t){return!!t&&"arrayValue"in t}function mE(t){return!!t&&"nullValue"in t}function gE(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Vu(t){return!!t&&"mapValue"in t}function dd(t){return(t?.mapValue?.fields||{})[ag]?.stringValue===cg}function Oc(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Gs(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=Oc(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Oc(t.arrayValue.values[n]);return e}return{...t}}function oR(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===iR}const aR={mapValue:{fields:{[ag]:{stringValue:cg},[na]:{arrayValue:{}}}}};function OU(t){return"nullValue"in t?Nu:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?xi(Vs.empty(),X.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?dd(t)?aR:{mapValue:{}}:re(35942,{value:t})}function LU(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?xi(Vs.empty(),X.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?aR:"mapValue"in t?dd(t)?{mapValue:{}}:gs:re(61959,{value:t})}function _E(t,e){const n=Os(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function yE(t,e){const n=Os(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}class Dt{constructor(e){this.value=e}static empty(){return new Dt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Vu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Oc(n)}setAll(e){let n=Xe.emptyPath(),r={},s=[];e.forEach(((o,a)=>{if(!n.isImmediateParentOf(a)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=Oc(o):s.push(a.lastSegment())}));const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Vu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return hr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Vu(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Gs(n,((s,i)=>e[s]=i));for(const s of r)delete e[s]}clone(){return new Dt(Oc(this.value))}}function cR(t){const e=[];return Gs(t.fields,((n,r)=>{const s=new Xe([n]);if(Vu(r)){const i=cR(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)})),new ln(e)}class Ye{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Ye(e,0,he.min(),he.min(),he.min(),Dt.empty(),0)}static newFoundDocument(e,n,r,s){return new Ye(e,1,n,he.min(),r,s,0)}static newNoDocument(e,n){return new Ye(e,2,n,he.min(),he.min(),Dt.empty(),0)}static newUnknownDocument(e,n){return new Ye(e,3,n,he.min(),he.min(),Dt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(he.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Dt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Dt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=he.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ye&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ye(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ls{constructor(e,n){this.position=e,this.inclusive=n}}function IE(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=X.comparator(X.fromName(o.referenceValue),n.key):r=Os(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function EE(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!hr(t.position[n],e.position[n]))return!1;return!0}class cl{constructor(e,n="asc"){this.field=e,this.dir=n}}function MU(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class lR{}class Ce extends lR{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new FU(e,n,r):n==="array-contains"?new jU(e,r):n==="in"?new mR(e,r):n==="not-in"?new qU(e,r):n==="array-contains-any"?new HU(e,r):new Ce(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new UU(e,r):new BU(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Os(n,this.value)):n!==null&&xs(this.value)===xs(n)&&this.matchesComparison(Os(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return re(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ue extends lR{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Ue(e,n)}matches(e){return sa(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function sa(t){return t.op==="and"}function Np(t){return t.op==="or"}function lg(t){return uR(t)&&sa(t)}function uR(t){for(const e of t.filters)if(e instanceof Ue)return!1;return!0}function Dp(t){if(t instanceof Ce)return t.field.canonicalString()+t.op.toString()+ra(t.value);if(lg(t))return t.filters.map((e=>Dp(e))).join(",");{const e=t.filters.map((n=>Dp(n))).join(",");return`${t.op}(${e})`}}function hR(t,e){return t instanceof Ce?(function(r,s){return s instanceof Ce&&r.op===s.op&&r.field.isEqual(s.field)&&hr(r.value,s.value)})(t,e):t instanceof Ue?(function(r,s){return s instanceof Ue&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((i,o,a)=>i&&hR(o,s.filters[a])),!0):!1})(t,e):void re(19439)}function dR(t,e){const n=t.filters.concat(e);return Ue.create(n,t.op)}function fR(t){return t instanceof Ce?(function(n){return`${n.field.canonicalString()} ${n.op} ${ra(n.value)}`})(t):t instanceof Ue?(function(n){return n.op.toString()+" {"+n.getFilters().map(fR).join(" ,")+"}"})(t):"Filter"}class FU extends Ce{constructor(e,n,r){super(e,n,r),this.key=X.fromName(r.referenceValue)}matches(e){const n=X.comparator(e.key,this.key);return this.matchesComparison(n)}}class UU extends Ce{constructor(e,n){super(e,"in",n),this.keys=pR("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class BU extends Ce{constructor(e,n){super(e,"not-in",n),this.keys=pR("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function pR(t,e){return(e.arrayValue?.values||[]).map((n=>X.fromName(n.referenceValue)))}class jU extends Ce{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return al(n)&&ol(n.arrayValue,this.value)}}class mR extends Ce{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ol(this.value.arrayValue,n)}}class qU extends Ce{constructor(e,n){super(e,"not-in",n)}matches(e){if(ol(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!ol(this.value.arrayValue,n)}}class HU extends Ce{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!al(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>ol(this.value.arrayValue,r)))}}class $U{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.Te=null}}function Vp(t,e=null,n=[],r=[],s=null,i=null,o=null){return new $U(t,e,n,r,s,i,o)}function Oi(t){const e=Z(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>Dp(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(i){return i.field.canonicalString()+i.dir})(r))).join(","),vl(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>ra(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>ra(r))).join(",")),e.Te=n}return e.Te}function bl(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!MU(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!hR(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!EE(t.startAt,e.startAt)&&EE(t.endAt,e.endAt)}function mh(t){return X.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function gh(t,e){return t.filters.filter((n=>n instanceof Ce&&n.field.isEqual(e)))}function TE(t,e,n){let r=Nu,s=!0;for(const i of gh(t,e)){let o=Nu,a=!0;switch(i.op){case"<":case"<=":o=OU(i.value);break;case"==":case"in":case">=":o=i.value;break;case">":o=i.value,a=!1;break;case"!=":case"not-in":o=Nu}_E({value:r,inclusive:s},{value:o,inclusive:a})<0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];_E({value:r,inclusive:s},{value:o,inclusive:n.inclusive})<0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}function wE(t,e,n){let r=gs,s=!0;for(const i of gh(t,e)){let o=gs,a=!0;switch(i.op){case">=":case">":o=LU(i.value),a=!1;break;case"==":case"in":case"<=":o=i.value;break;case"<":o=i.value,a=!1;break;case"!=":case"not-in":o=gs}yE({value:r,inclusive:s},{value:o,inclusive:a})>0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];yE({value:r,inclusive:s},{value:o,inclusive:n.inclusive})>0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}class Kr{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=c,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function gR(t,e,n,r,s,i,o,a){return new Kr(t,e,n,r,s,i,o,a)}function ba(t){return new Kr(t)}function vE(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function GU(t){return X.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function ug(t){return t.collectionGroup!==null}function Do(t){const e=Z(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new je(Xe.comparator);return o.filters.forEach((c=>{c.getFlattenedFilters().forEach((u=>{u.isInequality()&&(a=a.add(u.field))}))})),a})(e).forEach((i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new cl(i,r))})),n.has(Xe.keyField().canonicalString())||e.Ie.push(new cl(Xe.keyField(),r))}return e.Ie}function Qt(t){const e=Z(t);return e.Ee||(e.Ee=yR(e,Do(t))),e.Ee}function _R(t){const e=Z(t);return e.Re||(e.Re=yR(e,t.explicitOrderBy)),e.Re}function yR(t,e){if(t.limitType==="F")return Vp(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((s=>{const i=s.dir==="desc"?"asc":"desc";return new cl(s.field,i)}));const n=t.endAt?new Ls(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ls(t.startAt.position,t.startAt.inclusive):null;return Vp(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function xp(t,e){const n=t.filters.concat([e]);return new Kr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function KU(t,e){const n=t.explicitOrderBy.concat([e]);return new Kr(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}function _h(t,e,n){return new Kr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function WU(t,e){return new Kr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}function zU(t,e){return new Kr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}function Rl(t,e){return bl(Qt(t),Qt(e))&&t.limitType===e.limitType}function IR(t){return`${Oi(Qt(t))}|lt:${t.limitType}`}function _o(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((s=>fR(s))).join(", ")}]`),vl(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((s=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(s))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((s=>ra(s))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((s=>ra(s))).join(",")),`Target(${r})`})(Qt(t))}; limitType=${t.limitType})`}function Sl(t,e){return e.isFoundDocument()&&(function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):X.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)})(t,e)&&(function(r,s){for(const i of Do(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0})(t,e)&&(function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0})(t,e)&&(function(r,s){return!(r.startAt&&!(function(o,a,c){const u=IE(o,a,c);return o.inclusive?u<=0:u<0})(r.startAt,Do(r),s)||r.endAt&&!(function(o,a,c){const u=IE(o,a,c);return o.inclusive?u>=0:u>0})(r.endAt,Do(r),s))})(t,e)}function ER(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function TR(t){return(e,n)=>{let r=!1;for(const s of Do(t)){const i=QU(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function QU(t,e,n){const r=t.field.isKeyField()?X.comparator(e.key,n.key):(function(i,o,a){const c=o.data.field(i),u=a.data.field(i);return c!==null&&u!==null?Os(c,u):re(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return re(19790,{direction:t.dir})}}class Wr{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Gs(this.inner,((n,r)=>{for(const[s,i]of r)e(s,i)}))}isEmpty(){return Zb(this.inner)}size(){return this.innerSize}}const JU=new Qe(X.comparator);function un(){return JU}const wR=new Qe(X.comparator);function mc(...t){let e=wR;for(const n of t)e=e.insert(n.key,n);return e}function vR(t){let e=wR;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function rr(){return Lc()}function AR(){return Lc()}function Lc(){return new Wr((t=>t.toString()),((t,e)=>t.isEqual(e)))}const YU=new Qe(X.comparator),XU=new je(X.comparator);function Te(...t){let e=XU;for(const n of t)e=e.add(n);return e}const ZU=new je(ye);function hg(){return ZU}function dg(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:el(e)?"-0":e}}function bR(t){return{integerValue:""+t}}function RR(t,e){return jb(e)?bR(e):dg(t,e)}class fd{constructor(){this._=void 0}}function e2(t,e,n){return t instanceof ia?(function(s,i){const o={fields:{[nR]:{stringValue:tR},[sR]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&ud(i)&&(i=hd(i)),i&&(o.fields[rR]=i),{mapValue:o}})(n,e):t instanceof Li?PR(t,e):t instanceof Mi?CR(t,e):(function(s,i){const o=SR(s,i),a=AE(o)+AE(s.Ae);return kp(o)&&kp(s.Ae)?bR(a):dg(s.serializer,a)})(t,e)}function t2(t,e,n){return t instanceof Li?PR(t,e):t instanceof Mi?CR(t,e):n}function SR(t,e){return t instanceof oa?(function(r){return kp(r)||(function(i){return!!i&&"doubleValue"in i})(r)})(e)?e:{integerValue:0}:null}class ia extends fd{}class Li extends fd{constructor(e){super(),this.elements=e}}function PR(t,e){const n=kR(e);for(const r of t.elements)n.some((s=>hr(s,r)))||n.push(r);return{arrayValue:{values:n}}}class Mi extends fd{constructor(e){super(),this.elements=e}}function CR(t,e){let n=kR(e);for(const r of t.elements)n=n.filter((s=>!hr(s,r)));return{arrayValue:{values:n}}}class oa extends fd{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function AE(t){return rt(t.integerValue||t.doubleValue)}function kR(t){return al(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class Pl{constructor(e,n){this.field=e,this.transform=n}}function n2(t,e){return t.field.isEqual(e.field)&&(function(r,s){return r instanceof Li&&s instanceof Li||r instanceof Mi&&s instanceof Mi?zo(r.elements,s.elements,hr):r instanceof oa&&s instanceof oa?hr(r.Ae,s.Ae):r instanceof ia&&s instanceof ia})(t.transform,e.transform)}class r2{constructor(e,n){this.version=e,this.transformResults=n}}class st{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new st}static exists(e){return new st(void 0,e)}static updateTime(e){return new st(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function xu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class pd{}function NR(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Sa(t.key,st.none()):new Ra(t.key,t.data,st.none());{const n=t.data,r=Dt.empty();let s=new je(Xe.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new zr(t.key,r,new ln(s.toArray()),st.none())}}function s2(t,e,n){t instanceof Ra?(function(s,i,o){const a=s.value.clone(),c=RE(s.fieldTransforms,i,o.transformResults);a.setAll(c),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()})(t,e,n):t instanceof zr?(function(s,i,o){if(!xu(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=RE(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(DR(s)),c.setAll(a),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(t,e,n):(function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,n)}function Mc(t,e,n,r){return t instanceof Ra?(function(i,o,a,c){if(!xu(i.precondition,o))return a;const u=i.value.clone(),h=SE(i.fieldTransforms,c,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null})(t,e,n,r):t instanceof zr?(function(i,o,a,c){if(!xu(i.precondition,o))return a;const u=SE(i.fieldTransforms,c,o),h=o.data;return h.setAll(DR(i)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map((d=>d.field)))})(t,e,n,r):(function(i,o,a){return xu(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a})(t,e,n)}function i2(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=SR(r.transform,s||null);i!=null&&(n===null&&(n=Dt.empty()),n.set(r.field,i))}return n||null}function bE(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&zo(r,s,((i,o)=>n2(i,o)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ra extends pd{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class zr extends pd{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function DR(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function RE(t,e,n){const r=new Map;ae(t.length===n.length,32656,{Ve:n.length,de:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,t2(o,a,n[s]))}return r}function SE(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,e2(i,o,e))}return r}class Sa extends pd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class fg extends pd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class pg{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&s2(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Mc(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Mc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=AR();return this.mutations.forEach((s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const c=NR(o,a);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(he.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Te())}isEqual(e){return this.batchId===e.batchId&&zo(this.mutations,e.mutations,((n,r)=>bE(n,r)))&&zo(this.baseMutations,e.baseMutations,((n,r)=>bE(n,r)))}}class mg{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ae(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=(function(){return YU})();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new mg(e,n,r,s)}}class gg{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class VR{constructor(e,n,r){this.alias=e,this.aggregateType=n,this.fieldPath=r}}class o2{constructor(e,n){this.count=e,this.unchangedNames=n}}var gt,ke;function xR(t){switch(t){case M.OK:return re(64938);case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0;default:return re(15467,{code:t})}}function OR(t){if(t===void 0)return pt("GRPC error has no .code"),M.UNKNOWN;switch(t){case gt.OK:return M.OK;case gt.CANCELLED:return M.CANCELLED;case gt.UNKNOWN:return M.UNKNOWN;case gt.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case gt.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case gt.INTERNAL:return M.INTERNAL;case gt.UNAVAILABLE:return M.UNAVAILABLE;case gt.UNAUTHENTICATED:return M.UNAUTHENTICATED;case gt.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case gt.NOT_FOUND:return M.NOT_FOUND;case gt.ALREADY_EXISTS:return M.ALREADY_EXISTS;case gt.PERMISSION_DENIED:return M.PERMISSION_DENIED;case gt.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case gt.ABORTED:return M.ABORTED;case gt.OUT_OF_RANGE:return M.OUT_OF_RANGE;case gt.UNIMPLEMENTED:return M.UNIMPLEMENTED;case gt.DATA_LOSS:return M.DATA_LOSS;default:return re(39323,{code:t})}}(ke=gt||(gt={}))[ke.OK=0]="OK",ke[ke.CANCELLED=1]="CANCELLED",ke[ke.UNKNOWN=2]="UNKNOWN",ke[ke.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ke[ke.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ke[ke.NOT_FOUND=5]="NOT_FOUND",ke[ke.ALREADY_EXISTS=6]="ALREADY_EXISTS",ke[ke.PERMISSION_DENIED=7]="PERMISSION_DENIED",ke[ke.UNAUTHENTICATED=16]="UNAUTHENTICATED",ke[ke.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ke[ke.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ke[ke.ABORTED=10]="ABORTED",ke[ke.OUT_OF_RANGE=11]="OUT_OF_RANGE",ke[ke.UNIMPLEMENTED=12]="UNIMPLEMENTED",ke[ke.INTERNAL=13]="INTERNAL",ke[ke.UNAVAILABLE=14]="UNAVAILABLE",ke[ke.DATA_LOSS=15]="DATA_LOSS";let Op=null;function a2(t){if(Op)throw new Error("a TestingHooksSpi instance is already set");Op=t}function LR(){return new TextEncoder}const c2=new Ss([4294967295,4294967295],0);function PE(t){const e=LR().encode(t),n=new vb;return n.update(e),new Uint8Array(n.digest())}function CE(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Ss([n,r],0),new Ss([s,i],0)]}class _g{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new gc(`Invalid padding: ${n}`);if(r<0)throw new gc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new gc(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new gc(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Ss.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(Ss.fromNumber(r)));return s.compare(c2)===1&&(s=new Ss([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=PE(e),[r,s]=CE(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new _g(i,s,n);return r.forEach((a=>o.insert(a))),o}insert(e){if(this.ge===0)return;const n=PE(e),[r,s]=CE(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.be(o)}}be(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class gc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Cl{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,kl.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Cl(he.min(),s,new Qe(ye),un(),Te())}}class kl{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new kl(r,n,Te(),Te(),Te())}}class Ou{constructor(e,n,r,s){this.Se=e,this.removedTargetIds=n,this.key=r,this.De=s}}class MR{constructor(e,n){this.targetId=e,this.Ce=n}}class FR{constructor(e,n,r=ct.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class kE{constructor(){this.ve=0,this.Fe=NE(),this.Me=ct.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Te(),n=Te(),r=Te();return this.Fe.forEach(((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:re(38017,{changeType:i})}})),new kl(this.Me,this.xe,e,n,r)}Ke(){this.Oe=!1,this.Fe=NE()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,ae(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class l2{constructor(e){this.Ge=e,this.ze=new Map,this.je=un(),this.He=du(),this.Je=du(),this.Ze=new Qe(ye)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:re(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,s)=>{this.rt(s)&&n(s)}))}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(mh(i))if(r===0){const o=new X(i.path);this.et(n,o,Ye.newNoDocument(o,he.min()))}else ae(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const a=this.ut(e),c=a?this.ct(a,e,o):1;if(c!==0){this.it(n);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,u)}Op?.lt((function(h,d,f,m,I){const T={localCacheCount:h,existenceFilterCount:d.count,databaseId:f.database,projectId:f.projectId},k=d.unchangedNames;return k&&(T.bloomFilter={applied:I===0,hashCount:k?.hashCount??0,bitmapLength:k?.bits?.bitmap?.length??0,padding:k?.bits?.padding??0,mightContain:V=>m?.mightContain(V)??!1}),T})(o,e.Ce,this.Ge.ht(),a,c))}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=Ur(r).toUint8Array()}catch(c){if(c instanceof eR)return bn("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new _g(o,s,i)}catch(c){return bn(c instanceof gc?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.ge===0?null:a}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach((i=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.et(n,i,null),s++)})),s}Tt(e){const n=new Map;this.ze.forEach(((i,o)=>{const a=this.ot(o);if(a){if(i.current&&mh(a.target)){const c=new X(a.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,Ye.newNoDocument(c,e))}i.Be&&(n.set(o,i.ke()),i.Ke())}}));let r=Te();this.Je.forEach(((i,o)=>{let a=!0;o.forEachWhile((c=>{const u=this.ot(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)})),a&&(r=r.add(i))})),this.je.forEach(((i,o)=>o.setReadTime(e)));const s=new Cl(e,n,this.Ze,this.je,r);return this.je=un(),this.He=du(),this.Je=du(),this.Ze=new Qe(ye),s}Ye(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,r),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.qe(n,1):s.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new kE,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new je(ye),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new je(ye),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||G("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new kE),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function du(){return new Qe(X.comparator)}function NE(){return new Qe(X.comparator)}const u2={asc:"ASCENDING",desc:"DESCENDING"},h2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},d2={and:"AND",or:"OR"};class f2{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Lp(t,e){return t.useProto3Json||vl(e)?e:{value:e}}function aa(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function UR(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function p2(t,e){return aa(t,e.toTimestamp())}function mt(t){return ae(!!t,49232),he.fromTimestamp((function(n){const r=Fr(n);return new Fe(r.seconds,r.nanos)})(t))}function yg(t,e){return Mp(t,e).canonicalString()}function Mp(t,e){const n=(function(s){return new be(["projects",s.projectId,"databases",s.database])})(t).child("documents");return e===void 0?n:n.child(e)}function BR(t){const e=be.fromString(t);return ae(QR(e),10190,{key:e.toString()}),e}function ll(t,e){return yg(t.databaseId,e.path)}function ar(t,e){const n=BR(e);if(n.get(1)!==t.databaseId.projectId)throw new q(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new q(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new X(HR(n))}function jR(t,e){return yg(t.databaseId,e)}function qR(t){const e=BR(t);return e.length===4?be.emptyPath():HR(e)}function Fp(t){return new be(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function HR(t){return ae(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function DE(t,e,n){return{name:ll(t,e),fields:n.value.mapValue.fields}}function md(t,e,n){const r=ar(t,e.name),s=mt(e.updateTime),i=e.createTime?mt(e.createTime):he.min(),o=new Dt({mapValue:{fields:e.fields}}),a=Ye.newFoundDocument(r,s,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function m2(t,e){return"found"in e?(function(r,s){ae(!!s.found,43571),s.found.name,s.found.updateTime;const i=ar(r,s.found.name),o=mt(s.found.updateTime),a=s.found.createTime?mt(s.found.createTime):he.min(),c=new Dt({mapValue:{fields:s.found.fields}});return Ye.newFoundDocument(i,o,a,c)})(t,e):"missing"in e?(function(r,s){ae(!!s.missing,3894),ae(!!s.readTime,22933);const i=ar(r,s.missing),o=mt(s.readTime);return Ye.newNoDocument(i,o)})(t,e):re(7234,{result:e})}function g2(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:re(39313,{state:u})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=(function(u,h){return u.useProto3Json?(ae(h===void 0||typeof h=="string",58123),ct.fromBase64String(h||"")):(ae(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),ct.fromUint8Array(h||new Uint8Array))})(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&(function(u){const h=u.code===void 0?M.UNKNOWN:OR(u.code);return new q(h,u.message||"")})(o);n=new FR(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=ar(t,r.document.name),i=mt(r.document.updateTime),o=r.document.createTime?mt(r.document.createTime):he.min(),a=new Dt({mapValue:{fields:r.document.fields}}),c=Ye.newFoundDocument(s,i,o,a),u=r.targetIds||[],h=r.removedTargetIds||[];n=new Ou(u,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=ar(t,r.document),i=r.readTime?mt(r.readTime):he.min(),o=Ye.newNoDocument(s,i),a=r.removedTargetIds||[];n=new Ou([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=ar(t,r.document),i=r.removedTargetIds||[];n=new Ou([],i,s,null)}else{if(!("filter"in e))return re(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new o2(s,i),a=r.targetId;n=new MR(a,o)}}return n}function ul(t,e){let n;if(e instanceof Ra)n={update:DE(t,e.key,e.value)};else if(e instanceof Sa)n={delete:ll(t,e.key)};else if(e instanceof zr)n={update:DE(t,e.key,e.data),updateMask:w2(e.fieldMask)};else{if(!(e instanceof fg))return re(16599,{dt:e.type});n={verify:ll(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(i,o){const a=o.transform;if(a instanceof ia)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Li)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Mi)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof oa)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw re(20930,{transform:o.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(s,i){return i.updateTime!==void 0?{updateTime:p2(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:re(27497)})(t,e.precondition)),n}function Up(t,e){const n=e.currentDocument?(function(i){return i.updateTime!==void 0?st.updateTime(mt(i.updateTime)):i.exists!==void 0?st.exists(i.exists):st.none()})(e.currentDocument):st.none(),r=e.updateTransforms?e.updateTransforms.map((s=>(function(o,a){let c=null;if("setToServerValue"in a)ae(a.setToServerValue==="REQUEST_TIME",16630,{proto:a}),c=new ia;else if("appendMissingElements"in a){const h=a.appendMissingElements.values||[];c=new Li(h)}else if("removeAllFromArray"in a){const h=a.removeAllFromArray.values||[];c=new Mi(h)}else"increment"in a?c=new oa(o,a.increment):re(16584,{proto:a});const u=Xe.fromServerFormat(a.fieldPath);return new Pl(u,c)})(t,s))):[];if(e.update){e.update.name;const s=ar(t,e.update.name),i=new Dt({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=(function(c){const u=c.fieldPaths||[];return new ln(u.map((h=>Xe.fromServerFormat(h))))})(e.updateMask);return new zr(s,i,o,n,r)}return new Ra(s,i,n,r)}if(e.delete){const s=ar(t,e.delete);return new Sa(s,n)}if(e.verify){const s=ar(t,e.verify);return new fg(s,n)}return re(1463,{proto:e})}function _2(t,e){return t&&t.length>0?(ae(e!==void 0,14353),t.map((n=>(function(s,i){let o=s.updateTime?mt(s.updateTime):mt(i);return o.isEqual(he.min())&&(o=mt(i)),new r2(o,s.transformResults||[])})(n,e)))):[]}function $R(t,e){return{documents:[jR(t,e.path)]}}function gd(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=jR(t,s);const i=(function(u){if(u.length!==0)return zR(Ue.create(u,"and"))})(e.filters);i&&(n.structuredQuery.where=i);const o=(function(u){if(u.length!==0)return u.map((h=>(function(f){return{field:fs(f.field),direction:I2(f.dir)}})(h)))})(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Lp(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=(function(u){return{before:u.inclusive,values:u.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(u){return{before:!u.inclusive,values:u.position}})(e.endAt)),{ft:n,parent:s}}function GR(t,e,n,r){const{ft:s,parent:i}=gd(t,e),o={},a=[];let c=0;return n.forEach((u=>{const h=r?u.alias:"aggregate_"+c++;o[h]=u.alias,u.aggregateType==="count"?a.push({alias:h,count:{}}):u.aggregateType==="avg"?a.push({alias:h,avg:{field:fs(u.fieldPath)}}):u.aggregateType==="sum"&&a.push({alias:h,sum:{field:fs(u.fieldPath)}})})),{request:{structuredAggregationQuery:{aggregations:a,structuredQuery:s.structuredQuery},parent:s.parent},gt:o,parent:i}}function KR(t){let e=qR(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ae(r===1,65062);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=(function(d){const f=WR(d);return f instanceof Ue&&lg(f)?f.getFilters():[f]})(n.where));let o=[];n.orderBy&&(o=(function(d){return d.map((f=>(function(I){return new cl(yo(I.field),(function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(I.direction))})(f)))})(n.orderBy));let a=null;n.limit&&(a=(function(d){let f;return f=typeof d=="object"?d.value:d,vl(f)?null:f})(n.limit));let c=null;n.startAt&&(c=(function(d){const f=!!d.before,m=d.values||[];return new Ls(m,f)})(n.startAt));let u=null;return n.endAt&&(u=(function(d){const f=!d.before,m=d.values||[];return new Ls(m,f)})(n.endAt)),gR(e,s,o,i,a,"F",c,u)}function y2(t,e){const n=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return re(28987,{purpose:s})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function WR(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=yo(n.unaryFilter.field);return Ce.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=yo(n.unaryFilter.field);return Ce.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=yo(n.unaryFilter.field);return Ce.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=yo(n.unaryFilter.field);return Ce.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return re(61313);default:return re(60726)}})(t):t.fieldFilter!==void 0?(function(n){return Ce.create(yo(n.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return re(58110);default:return re(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Ue.create(n.compositeFilter.filters.map((r=>WR(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return re(1026)}})(n.compositeFilter.op))})(t):re(30097,{filter:t})}function I2(t){return u2[t]}function E2(t){return h2[t]}function T2(t){return d2[t]}function fs(t){return{fieldPath:t.canonicalString()}}function yo(t){return Xe.fromServerFormat(t.fieldPath)}function zR(t){return t instanceof Ce?(function(n){if(n.op==="=="){if(gE(n.value))return{unaryFilter:{field:fs(n.field),op:"IS_NAN"}};if(mE(n.value))return{unaryFilter:{field:fs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(gE(n.value))return{unaryFilter:{field:fs(n.field),op:"IS_NOT_NAN"}};if(mE(n.value))return{unaryFilter:{field:fs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:fs(n.field),op:E2(n.op),value:n.value}}})(t):t instanceof Ue?(function(n){const r=n.getFilters().map((s=>zR(s)));return r.length===1?r[0]:{compositeFilter:{op:T2(n.op),filters:r}}})(t):re(54877,{filter:t})}function w2(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function QR(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}function JR(t){return!!t&&typeof t._toProto=="function"&&t._protoValueType==="ProtoValue"}class Pr{constructor(e,n,r,s,i=he.min(),o=he.min(),a=ct.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new Pr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Pr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Pr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Pr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class YR{constructor(e){this.yt=e}}function v2(t,e){let n;if(e.document)n=md(t.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=X.fromSegments(e.noDocument.path),s=Ui(e.noDocument.readTime);n=Ye.newNoDocument(r,s),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return re(56709);{const r=X.fromSegments(e.unknownDocument.path),s=Ui(e.unknownDocument.version);n=Ye.newUnknownDocument(r,s)}}return e.readTime&&n.setReadTime((function(s){const i=new Fe(s[0],s[1]);return he.fromTimestamp(i)})(e.readTime)),n}function VE(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:yh(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(i,o){return{name:ll(i,o.key),fields:o.data.value.mapValue.fields,updateTime:aa(i,o.version.toTimestamp()),createTime:aa(i,o.createTime.toTimestamp())}})(t.yt,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Fi(e.version)};else{if(!e.isUnknownDocument())return re(57904,{document:e});r.unknownDocument={path:n.path.toArray(),version:Fi(e.version)}}return r}function yh(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Fi(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ui(t){const e=new Fe(t.seconds,t.nanoseconds);return he.fromTimestamp(e)}function pi(t,e){const n=(e.baseMutations||[]).map((i=>Up(t.yt,i)));for(let i=0;i<e.mutations.length-1;++i){const o=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const a=e.mutations[i+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const r=e.mutations.map((i=>Up(t.yt,i))),s=Fe.fromMillis(e.localWriteTimeMs);return new pg(e.batchId,s,n,r)}function _c(t){const e=Ui(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Ui(t.lastLimboFreeSnapshotVersion):he.min();let r;return r=(function(i){return i.documents!==void 0})(t.query)?(function(i){const o=i.documents.length;return ae(o===1,1966,{count:o}),Qt(ba(qR(i.documents[0])))})(t.query):(function(i){return Qt(KR(i))})(t.query),new Pr(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,ct.fromBase64String(t.resumeToken))}function XR(t,e){const n=Fi(e.snapshotVersion),r=Fi(e.lastLimboFreeSnapshotVersion);let s;s=mh(e.target)?$R(t.yt,e.target):gd(t.yt,e.target).ft;const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Oi(e.target),readTime:n,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function _d(t){const e=KR({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?_h(e,e.limit,"L"):e}function Rf(t,e){return new gg(e.largestBatchId,Up(t.yt,e.overlayMutation))}function xE(t,e){const n=e.path.lastSegment();return[t,zt(e.path.popLast()),n]}function OE(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:Fi(r.readTime),documentKey:zt(r.documentKey.path),largestBatchId:r.largestBatchId}}class A2{getBundleMetadata(e,n){return LE(e).get(n).next((r=>{if(r)return(function(i){return{id:i.bundleId,createTime:Ui(i.createTime),version:i.version}})(r)}))}saveBundleMetadata(e,n){return LE(e).put((function(s){return{bundleId:s.id,createTime:Fi(mt(s.createTime)),version:s.version}})(n))}getNamedQuery(e,n){return ME(e).get(n).next((r=>{if(r)return(function(i){return{name:i.name,query:_d(i.bundledQuery),readTime:Ui(i.readTime)}})(r)}))}saveNamedQuery(e,n){return ME(e).put((function(s){return{name:s.name,readTime:Fi(mt(s.readTime)),bundledQuery:s.bundledQuery}})(n))}}function LE(t){return Pt(t,ad)}function ME(t){return Pt(t,cd)}class yd{constructor(e,n){this.serializer=e,this.userId=n}static wt(e,n){const r=n.uid||"";return new yd(e,r)}getOverlay(e,n){return rc(e).get(xE(this.userId,n)).next((r=>r?Rf(this.serializer,r):null))}getOverlays(e,n){const r=rr();return O.forEach(n,(s=>this.getOverlay(e,s).next((i=>{i!==null&&r.set(s,i)})))).next((()=>r))}saveOverlays(e,n,r){const s=[];return r.forEach(((i,o)=>{const a=new gg(n,o);s.push(this.bt(e,a))})),O.waitFor(s)}removeOverlaysForBatchId(e,n,r){const s=new Set;n.forEach((o=>s.add(zt(o.getCollectionPath()))));const i=[];return s.forEach((o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);i.push(rc(e).X(Sp,a))})),O.waitFor(i)}getOverlaysForCollection(e,n,r){const s=rr(),i=zt(n),o=IDBKeyRange.bound([this.userId,i,r],[this.userId,i,Number.POSITIVE_INFINITY],!0);return rc(e).H(Sp,o).next((a=>{for(const c of a){const u=Rf(this.serializer,c);s.set(u.getKey(),u)}return s}))}getOverlaysForCollectionGroup(e,n,r,s){const i=rr();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return rc(e).ee({index:Wb,range:a},((c,u,h)=>{const d=Rf(this.serializer,u);i.size()<s||d.largestBatchId===o?(i.set(d.getKey(),d),o=d.largestBatchId):h.done()})).next((()=>i))}bt(e,n){return rc(e).put((function(s,i,o){const[a,c,u]=xE(i,o.mutation.key);return{userId:i,collectionPath:c,documentId:u,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:ul(s.yt,o.mutation)}})(this.serializer,this.userId,n))}}function rc(t){return Pt(t,ld)}class b2{St(e){return Pt(e,ig)}getSessionToken(e){return this.St(e).get("sessionToken").next((n=>{const r=n?.value;return r?ct.fromUint8Array(r):ct.EMPTY_BYTE_STRING}))}setSessionToken(e,n){return this.St(e).put({name:"sessionToken",value:n.toUint8Array()})}}class mi{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(rt(e.integerValue));else if("doubleValue"in e){const r=rt(e.doubleValue);isNaN(r)?this.Ft(n,13):(this.Ft(n,15),el(r)?n.Mt(0):n.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(n,20),typeof r=="string"&&(r=Fr(r)),n.xt(`${r.seconds||""}`),n.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(Ur(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(n,45),n.Mt(r.latitude||0),n.Mt(r.longitude||0)}else"mapValue"in e?oR(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):dd(e)?this.kt(e.mapValue,n):(this.Kt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.qt(e.arrayValue,n),this.Nt(n)):re(19022,{Ut:e})}Ot(e,n){this.Ft(n,25),this.$t(e,n)}$t(e,n){n.xt(e)}Kt(e,n){const r=e.fields||{};this.Ft(n,55);for(const s of Object.keys(r))this.Ot(s,n),this.Ct(r[s],n)}kt(e,n){const r=e.fields||{};this.Ft(n,53);const s=na,i=r[s].arrayValue?.values?.length||0;this.Ft(n,15),n.Mt(rt(i)),this.Ot(s,n),this.Ct(r[s],n)}qt(e,n){const r=e.values||[];this.Ft(n,50);for(const s of r)this.Ct(s,n)}Lt(e,n){this.Ft(n,37),X.fromName(e).path.forEach((r=>{this.Ft(n,60),this.$t(r,n)}))}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}}mi.Wt=new mi;const lo=255;function R2(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function FE(t){const e=64-(function(r){let s=0;for(let i=0;i<8;++i){const o=R2(255&r[i]);if(s+=o,o!==8)break}return s})(t);return Math.ceil(e/8)}class S2{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Qt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Gt(r.value),r=n.next();this.zt()}jt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ht(r.value),r=n.next();this.Jt()}Zt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const s=n.codePointAt(0);this.Gt(240|s>>>18),this.Gt(128|63&s>>>12),this.Gt(128|63&s>>>6),this.Gt(128|63&s)}}this.zt()}Xt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ht(r);else if(r<2048)this.Ht(960|r>>>6),this.Ht(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ht(480|r>>>12),this.Ht(128|63&r>>>6),this.Ht(128|63&r);else{const s=n.codePointAt(0);this.Ht(240|s>>>18),this.Ht(128|63&s>>>12),this.Ht(128|63&s>>>6),this.Ht(128|63&s)}}this.Jt()}Yt(e){const n=this.en(e),r=FE(n);this.tn(1+r),this.buffer[this.position++]=255&r;for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=255&n[s]}nn(e){const n=this.en(e),r=FE(n);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=~(255&n[s])}rn(){this.sn(lo),this.sn(255)}_n(){this.an(lo),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const n=(function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)})(e),r=!!(128&n[0]);n[0]^=r?255:128;for(let s=1;s<n.length;++s)n[s]^=r?255:0;return n}Gt(e){const n=255&e;n===0?(this.sn(0),this.sn(255)):n===lo?(this.sn(lo),this.sn(0)):this.sn(n)}Ht(e){const n=255&e;n===0?(this.an(0),this.an(255)):n===lo?(this.an(lo),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Jt(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class P2{constructor(e){this.cn=e}Bt(e){this.cn.Qt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.Yt(e)}vt(){this.cn.rn()}}class C2{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Xt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class sc{constructor(){this.cn=new S2,this.ascending=new P2(this.cn),this.descending=new C2(this.cn)}seed(e){this.cn.seed(e)}ln(e){return e===0?this.ascending:this.descending}un(){return this.cn.un()}reset(){this.cn.reset()}}class gi{constructor(e,n,r,s){this.hn=e,this.Pn=n,this.Tn=r,this.In=s}En(){const e=this.In.length,n=e===0||this.In[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.In,0),n!==e?r.set([0],this.In.length):++r[r.length-1],new gi(this.hn,this.Pn,this.Tn,r)}Rn(e,n,r){return{indexId:this.hn,uid:e,arrayValue:Lu(this.Tn),directionalValue:Lu(this.In),orderedDocumentKey:Lu(n),documentKey:r.path.toArray()}}An(e,n,r){const s=this.Rn(e,n,r);return[s.indexId,s.uid,s.arrayValue,s.directionalValue,s.orderedDocumentKey,s.documentKey]}}function is(t,e){let n=t.hn-e.hn;return n!==0?n:(n=UE(t.Tn,e.Tn),n!==0?n:(n=UE(t.In,e.In),n!==0?n:X.comparator(t.Pn,e.Pn)))}function UE(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}function Lu(t){return rA()?(function(n){let r="";for(let s=0;s<n.length;s++)r+=String.fromCharCode(n[s]);return r})(t):t}function BE(t){return typeof t!="string"?t:(function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r})(t)}class jE{constructor(e){this.Vn=new je(((n,r)=>Xe.comparator(n.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.dn=e.orderBy,this.mn=[];for(const n of e.filters){const r=n;r.isInequality()?this.Vn=this.Vn.add(r):this.mn.push(r)}}get fn(){return this.Vn.size>1}gn(e){if(ae(e.collectionGroup===this.collectionId,49279),this.fn)return!1;const n=Ap(e);if(n!==void 0&&!this.pn(n))return!1;const r=hi(e);let s=new Set,i=0,o=0;for(;i<r.length&&this.pn(r[i]);++i)s=s.add(r[i].fieldPath.canonicalString());if(i===r.length)return!0;if(this.Vn.size>0){const a=this.Vn.getIterator().getNext();if(!s.has(a.field.canonicalString())){const c=r[i];if(!this.yn(a,c)||!this.wn(this.dn[o++],c))return!1}++i}for(;i<r.length;++i){const a=r[i];if(o>=this.dn.length||!this.wn(this.dn[o++],a))return!1}return!0}bn(){if(this.fn)return null;let e=new je(Xe.comparator);const n=[];for(const r of this.mn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new bi(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new bi(r.field,0))}for(const r of this.dn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new bi(r.field,r.dir==="asc"?0:1)));return new Jo(Jo.UNKNOWN_ID,this.collectionId,n,Yo.empty())}pn(e){for(const n of this.mn)if(this.yn(n,e))return!0;return!1}yn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}wn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}function ZR(t){if(ae(t instanceof Ce||t instanceof Ue,20012),t instanceof Ce){if(t instanceof mR){const n=t.value.arrayValue?.values?.map((r=>Ce.create(t.field,"==",r)))||[];return Ue.create(n,"or")}return t}const e=t.filters.map((n=>ZR(n)));return Ue.create(e,t.op)}function k2(t){if(t.getFilters().length===0)return[];const e=qp(ZR(t));return ae(eS(e),7391),Bp(e)||jp(e)?[e]:e.getFilters()}function Bp(t){return t instanceof Ce}function jp(t){return t instanceof Ue&&lg(t)}function eS(t){return Bp(t)||jp(t)||(function(n){if(n instanceof Ue&&Np(n)){for(const r of n.getFilters())if(!Bp(r)&&!jp(r))return!1;return!0}return!1})(t)}function qp(t){if(ae(t instanceof Ce||t instanceof Ue,34018),t instanceof Ce)return t;if(t.filters.length===1)return qp(t.filters[0]);const e=t.filters.map((r=>qp(r)));let n=Ue.create(e,t.op);return n=Ih(n),eS(n)?n:(ae(n instanceof Ue,64498),ae(sa(n),40251),ae(n.filters.length>1,57927),n.filters.reduce(((r,s)=>Ig(r,s))))}function Ig(t,e){let n;return ae(t instanceof Ce||t instanceof Ue,38388),ae(e instanceof Ce||e instanceof Ue,25473),n=t instanceof Ce?e instanceof Ce?(function(s,i){return Ue.create([s,i],"and")})(t,e):qE(t,e):e instanceof Ce?qE(e,t):(function(s,i){if(ae(s.filters.length>0&&i.filters.length>0,48005),sa(s)&&sa(i))return dR(s,i.getFilters());const o=Np(s)?s:i,a=Np(s)?i:s,c=o.filters.map((u=>Ig(u,a)));return Ue.create(c,"or")})(t,e),Ih(n)}function qE(t,e){if(sa(e))return dR(e,t.getFilters());{const n=e.filters.map((r=>Ig(t,r)));return Ue.create(n,"or")}}function Ih(t){if(ae(t instanceof Ce||t instanceof Ue,11850),t instanceof Ce)return t;const e=t.getFilters();if(e.length===1)return Ih(e[0]);if(uR(t))return t;const n=e.map((s=>Ih(s))),r=[];return n.forEach((s=>{s instanceof Ce?r.push(s):s instanceof Ue&&(s.op===t.op?r.push(...s.filters):r.push(s))})),r.length===1?r[0]:Ue.create(r,t.op)}class N2{constructor(){this.Sn=new Eg}addToCollectionParentIndex(e,n){return this.Sn.add(n),O.resolve()}getCollectionParents(e,n){return O.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return O.resolve()}deleteFieldIndex(e,n){return O.resolve()}deleteAllFieldIndexes(e){return O.resolve()}createTargetIndexes(e,n){return O.resolve()}getDocumentsMatchingTarget(e,n){return O.resolve(null)}getIndexType(e,n){return O.resolve(0)}getFieldIndexes(e,n){return O.resolve([])}getNextCollectionGroupToUpdate(e){return O.resolve(null)}getMinOffset(e,n){return O.resolve(Rn.min())}getMinOffsetFromCollectionGroup(e,n){return O.resolve(Rn.min())}updateCollectionGroup(e,n,r){return O.resolve()}updateIndexEntries(e,n){return O.resolve()}}class Eg{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new je(be.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new je(be.comparator)).toArray()}}const HE="IndexedDbIndexManager",fu=new Uint8Array(0);class D2{constructor(e,n){this.databaseId=n,this.Dn=new Eg,this.Cn=new Wr((r=>Oi(r)),((r,s)=>bl(r,s))),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.Dn.has(n)){const r=n.lastSegment(),s=n.popLast();e.addOnCommittedListener((()=>{this.Dn.add(n)}));const i={collectionId:r,parent:zt(s)};return $E(e).put(i)}return O.resolve()}getCollectionParents(e,n){const r=[],s=IDBKeyRange.bound([n,""],[Db(n),""],!1,!0);return $E(e).H(s).next((i=>{for(const o of i){if(o.collectionId!==n)break;r.push(nr(o.parent))}return r}))}addFieldIndex(e,n){const r=ic(e),s=(function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map((c=>[c.fieldPath.canonicalString(),c.kind]))}})(n);delete s.indexId;const i=r.add(s);if(n.indexState){const o=ho(e);return i.next((a=>{o.put(OE(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))}))}return i.next()}deleteFieldIndex(e,n){const r=ic(e),s=ho(e),i=uo(e);return r.delete(n.indexId).next((()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const n=ic(e),r=uo(e),s=ho(e);return n.X().next((()=>r.X())).next((()=>s.X()))}createTargetIndexes(e,n){return O.forEach(this.vn(n),(r=>this.getIndexType(e,r).next((s=>{if(s===0||s===1){const i=new jE(r).bn();if(i!=null)return this.addFieldIndex(e,i)}}))))}getDocumentsMatchingTarget(e,n){const r=uo(e);let s=!0;const i=new Map;return O.forEach(this.vn(n),(o=>this.Fn(e,o).next((a=>{s&&(s=!!a),i.set(o,a)})))).next((()=>{if(s){let o=Te();const a=[];return O.forEach(i,((c,u)=>{G(HE,`Using index ${(function(_){return`id=${_.indexId}|cg=${_.collectionGroup}|f=${_.fields.map((C=>`${C.fieldPath}:${C.kind}`)).join(",")}`})(c)} to execute ${Oi(n)}`);const h=(function(_,C){const x=Ap(C);if(x===void 0)return null;for(const U of gh(_,x.fieldPath))switch(U.op){case"array-contains-any":return U.value.arrayValue.values||[];case"array-contains":return[U.value]}return null})(u,c),d=(function(_,C){const x=new Map;for(const U of hi(C))for(const v of gh(_,U.fieldPath))switch(v.op){case"==":case"in":x.set(U.fieldPath.canonicalString(),v.value);break;case"not-in":case"!=":return x.set(U.fieldPath.canonicalString(),v.value),Array.from(x.values())}return null})(u,c),f=(function(_,C){const x=[];let U=!0;for(const v of hi(C)){const E=v.kind===0?TE(_,v.fieldPath,_.startAt):wE(_,v.fieldPath,_.startAt);x.push(E.value),U&&(U=E.inclusive)}return new Ls(x,U)})(u,c),m=(function(_,C){const x=[];let U=!0;for(const v of hi(C)){const E=v.kind===0?wE(_,v.fieldPath,_.endAt):TE(_,v.fieldPath,_.endAt);x.push(E.value),U&&(U=E.inclusive)}return new Ls(x,U)})(u,c),I=this.Mn(c,u,f),T=this.Mn(c,u,m),k=this.xn(c,u,d),V=this.On(c.indexId,h,I,f.inclusive,T,m.inclusive,k);return O.forEach(V,(N=>r.Z(N,n.limit).next((_=>{_.forEach((C=>{const x=X.fromSegments(C.documentKey);o.has(x)||(o=o.add(x),a.push(x))}))}))))})).next((()=>a))}return O.resolve(null)}))}vn(e){let n=this.Cn.get(e);return n||(e.filters.length===0?n=[e]:n=k2(Ue.create(e.filters,"and")).map((r=>Vp(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Cn.set(e,n),n)}On(e,n,r,s,i,o,a){const c=(n!=null?n.length:1)*Math.max(r.length,i.length),u=c/(n!=null?n.length:1),h=[];for(let d=0;d<c;++d){const f=n?this.Nn(n[d/u]):fu,m=this.Bn(e,f,r[d%u],s),I=this.Ln(e,f,i[d%u],o),T=a.map((k=>this.Bn(e,f,k,!0)));h.push(...this.createRange(m,I,T))}return h}Bn(e,n,r,s){const i=new gi(e,X.empty(),n,r);return s?i:i.En()}Ln(e,n,r,s){const i=new gi(e,X.empty(),n,r);return s?i.En():i}Fn(e,n){const r=new jE(n),s=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,s).next((i=>{let o=null;for(const a of i)r.gn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o}))}getIndexType(e,n){let r=2;const s=this.vn(n);return O.forEach(s,(i=>this.Fn(e,i).next((o=>{o?r!==0&&o.fields.length<(function(c){let u=new je(Xe.comparator),h=!1;for(const d of c.filters)for(const f of d.getFlattenedFilters())f.field.isKeyField()||(f.op==="array-contains"||f.op==="array-contains-any"?h=!0:u=u.add(f.field));for(const d of c.orderBy)d.field.isKeyField()||(u=u.add(d.field));return u.size+(h?1:0)})(i)&&(r=1):r=0})))).next((()=>(function(o){return o.limit!==null})(n)&&s.length>1&&r===2?1:r))}kn(e,n){const r=new sc;for(const s of hi(e)){const i=n.data.field(s.fieldPath);if(i==null)return null;const o=r.ln(s.kind);mi.Wt.Dt(i,o)}return r.un()}Nn(e){const n=new sc;return mi.Wt.Dt(e,n.ln(0)),n.un()}Kn(e,n){const r=new sc;return mi.Wt.Dt(xi(this.databaseId,n),r.ln((function(i){const o=hi(i);return o.length===0?0:o[o.length-1].kind})(e))),r.un()}xn(e,n,r){if(r===null)return[];let s=[];s.push(new sc);let i=0;for(const o of hi(e)){const a=r[i++];for(const c of s)if(this.qn(n,o.fieldPath)&&al(a))s=this.Un(s,o,a);else{const u=c.ln(o.kind);mi.Wt.Dt(a,u)}}return this.$n(s)}Mn(e,n,r){return this.xn(e,n,r.position)}$n(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].un();return n}Un(e,n,r){const s=[...e],i=[];for(const o of r.arrayValue.values||[])for(const a of s){const c=new sc;c.seed(a.un()),mi.Wt.Dt(o,c.ln(n.kind)),i.push(c)}return i}qn(e,n){return!!e.filters.find((r=>r instanceof Ce&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,n){const r=ic(e),s=ho(e);return(n?r.H(Rp,IDBKeyRange.bound(n,n)):r.H()).next((i=>{const o=[];return O.forEach(i,(a=>s.get([a.indexId,this.uid]).next((c=>{o.push((function(h,d){const f=d?new Yo(d.sequenceNumber,new Rn(Ui(d.readTime),new X(nr(d.documentKey)),d.largestBatchId)):Yo.empty(),m=h.fields.map((([I,T])=>new bi(Xe.fromServerFormat(I),T)));return new Jo(h.indexId,h.collectionGroup,m,f)})(a,c))})))).next((()=>o))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((n=>n.length===0?null:(n.sort(((r,s)=>{const i=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return i!==0?i:ye(r.collectionGroup,s.collectionGroup)})),n[0].collectionGroup)))}updateCollectionGroup(e,n,r){const s=ic(e),i=ho(e);return this.Wn(e).next((o=>s.H(Rp,IDBKeyRange.bound(n,n)).next((a=>O.forEach(a,(c=>i.put(OE(c.indexId,this.uid,o,r))))))))}updateIndexEntries(e,n){const r=new Map;return O.forEach(n,((s,i)=>{const o=r.get(s.collectionGroup);return(o?O.resolve(o):this.getFieldIndexes(e,s.collectionGroup)).next((a=>(r.set(s.collectionGroup,a),O.forEach(a,(c=>this.Qn(e,s,c).next((u=>{const h=this.Gn(i,c);return u.isEqual(h)?O.resolve():this.zn(e,i,c,u,h)})))))))}))}jn(e,n,r,s){return uo(e).put(s.Rn(this.uid,this.Kn(r,n.key),n.key))}Hn(e,n,r,s){return uo(e).delete(s.An(this.uid,this.Kn(r,n.key),n.key))}Qn(e,n,r){const s=uo(e);let i=new je(is);return s.ee({index:Kb,range:IDBKeyRange.only([r.indexId,this.uid,Lu(this.Kn(r,n))])},((o,a)=>{i=i.add(new gi(r.indexId,n,BE(a.arrayValue),BE(a.directionalValue)))})).next((()=>i))}Gn(e,n){let r=new je(is);const s=this.kn(n,e);if(s==null)return r;const i=Ap(n);if(i!=null){const o=e.data.field(i.fieldPath);if(al(o))for(const a of o.arrayValue.values||[])r=r.add(new gi(n.indexId,e.key,this.Nn(a),s))}else r=r.add(new gi(n.indexId,e.key,fu,s));return r}zn(e,n,r,s,i){G(HE,"Updating index entries for document '%s'",n.key);const o=[];return(function(c,u,h,d,f){const m=c.getIterator(),I=u.getIterator();let T=co(m),k=co(I);for(;T||k;){let V=!1,N=!1;if(T&&k){const _=h(T,k);_<0?N=!0:_>0&&(V=!0)}else T!=null?N=!0:V=!0;V?(d(k),k=co(I)):N?(f(T),T=co(m)):(T=co(m),k=co(I))}})(s,i,is,(a=>{o.push(this.jn(e,n,r,a))}),(a=>{o.push(this.Hn(e,n,r,a))})),O.waitFor(o)}Wn(e){let n=1;return ho(e).ee({index:Gb,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,s,i)=>{i.done(),n=s.sequenceNumber+1})).next((()=>n))}createRange(e,n,r){r=r.sort(((o,a)=>is(o,a))).filter(((o,a,c)=>!a||is(o,c[a-1])!==0));const s=[];s.push(e);for(const o of r){const a=is(o,e),c=is(o,n);if(a===0)s[0]=e.En();else if(a>0&&c<0)s.push(o),s.push(o.En());else if(c>0)break}s.push(n);const i=[];for(let o=0;o<s.length;o+=2){if(this.Jn(s[o],s[o+1]))return[];const a=s[o].An(this.uid,fu,X.empty()),c=s[o+1].An(this.uid,fu,X.empty());i.push(IDBKeyRange.bound(a,c))}return i}Jn(e,n){return is(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(GE)}getMinOffset(e,n){return O.mapArray(this.vn(n),(r=>this.Fn(e,r).next((s=>s||re(44426))))).next(GE)}}function $E(t){return Pt(t,rl)}function uo(t){return Pt(t,xc)}function ic(t){return Pt(t,sg)}function ho(t){return Pt(t,Vc)}function GE(t){ae(t.length!==0,28825);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const s=t[r].indexState.offset;tg(s,e)<0&&(e=s),n<s.largestBatchId&&(n=s.largestBatchId)}return new Rn(e.readTime,e.documentKey,n)}const KE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},tS=41943040;class $t{static withCacheSize(e){return new $t(e,$t.DEFAULT_COLLECTION_PERCENTILE,$t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}function nS(t,e,n){const r=t.store(On),s=t.store(Xo),i=[],o=IDBKeyRange.only(n.batchId);let a=0;const c=r.ee({range:o},((h,d,f)=>(a++,f.delete())));i.push(c.next((()=>{ae(a===1,47070,{batchId:n.batchId})})));const u=[];for(const h of n.mutations){const d=qb(e,h.key.path,n.batchId);i.push(s.delete(d)),u.push(h.key)}return O.waitFor(i).next((()=>u))}function Eh(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw re(14731);e=t.noDocument}return JSON.stringify(e).length}$t.DEFAULT_COLLECTION_PERCENTILE=10,$t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,$t.DEFAULT=new $t(tS,$t.DEFAULT_COLLECTION_PERCENTILE,$t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),$t.DISABLED=new $t(-1,0,0);class Id{constructor(e,n,r,s){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=s,this.Zn={}}static wt(e,n,r,s){ae(e.uid!=="",64387);const i=e.isAuthenticated()?e.uid:"";return new Id(i,n,r,s)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return os(e).ee({index:Ii,range:r},((s,i,o)=>{n=!1,o.done()})).next((()=>n))}addMutationBatch(e,n,r,s){const i=Io(e),o=os(e);return o.add({}).next((a=>{ae(typeof a=="number",49019);const c=new pg(a,n,r,s),u=(function(m,I,T){const k=T.baseMutations.map((N=>ul(m.yt,N))),V=T.mutations.map((N=>ul(m.yt,N)));return{userId:I,batchId:T.batchId,localWriteTimeMs:T.localWriteTime.toMillis(),baseMutations:k,mutations:V}})(this.serializer,this.userId,c),h=[];let d=new je(((f,m)=>ye(f.canonicalString(),m.canonicalString())));for(const f of s){const m=qb(this.userId,f.key.path,a);d=d.add(f.key.path.popLast()),h.push(o.put(u)),h.push(i.put(m,aU))}return d.forEach((f=>{h.push(this.indexManager.addToCollectionParentIndex(e,f))})),e.addOnCommittedListener((()=>{this.Zn[a]=c.keys()})),O.waitFor(h).next((()=>c))}))}lookupMutationBatch(e,n){return os(e).get(n).next((r=>r?(ae(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:n}),pi(this.serializer,r)):null))}Xn(e,n){return this.Zn[n]?O.resolve(this.Zn[n]):this.lookupMutationBatch(e,n).next((r=>{if(r){const s=r.keys();return this.Zn[n]=s,s}return null}))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=IDBKeyRange.lowerBound([this.userId,r]);let i=null;return os(e).ee({index:Ii,range:s},((o,a,c)=>{a.userId===this.userId&&(ae(a.batchId>=r,47524,{Yn:r}),i=pi(this.serializer,a)),c.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=Ps;return os(e).ee({index:Ii,range:n,reverse:!0},((s,i,o)=>{r=i.batchId,o.done()})).next((()=>r))}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,Ps],[this.userId,Number.POSITIVE_INFINITY]);return os(e).H(Ii,n).next((r=>r.map((s=>pi(this.serializer,s)))))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=Cu(this.userId,n.path),s=IDBKeyRange.lowerBound(r),i=[];return Io(e).ee({range:s},((o,a,c)=>{const[u,h,d]=o,f=nr(h);if(u===this.userId&&n.path.isEqual(f))return os(e).get(d).next((m=>{if(!m)throw re(61480,{er:o,batchId:d});ae(m.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:m.userId,batchId:d}),i.push(pi(this.serializer,m))}));c.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new je(ye);const s=[];return n.forEach((i=>{const o=Cu(this.userId,i.path),a=IDBKeyRange.lowerBound(o),c=Io(e).ee({range:a},((u,h,d)=>{const[f,m,I]=u,T=nr(m);f===this.userId&&i.path.isEqual(T)?r=r.add(I):d.done()}));s.push(c)})),O.waitFor(s).next((()=>this.tr(e,r)))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1,i=Cu(this.userId,r),o=IDBKeyRange.lowerBound(i);let a=new je(ye);return Io(e).ee({range:o},((c,u,h)=>{const[d,f,m]=c,I=nr(f);d===this.userId&&r.isPrefixOf(I)?I.length===s&&(a=a.add(m)):h.done()})).next((()=>this.tr(e,a)))}tr(e,n){const r=[],s=[];return n.forEach((i=>{s.push(os(e).get(i).next((o=>{if(o===null)throw re(35274,{batchId:i});ae(o.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:o.userId,batchId:i}),r.push(pi(this.serializer,o))})))})),O.waitFor(s).next((()=>r))}removeMutationBatch(e,n){return nS(e.le,this.userId,n).next((r=>(e.addOnCommittedListener((()=>{this.nr(n.batchId)})),O.forEach(r,(s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))))}nr(e){delete this.Zn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((n=>{if(!n)return O.resolve();const r=IDBKeyRange.lowerBound((function(o){return[o]})(this.userId)),s=[];return Io(e).ee({range:r},((i,o,a)=>{if(i[0]===this.userId){const c=nr(i[1]);s.push(c)}else a.done()})).next((()=>{ae(s.length===0,56720,{rr:s.map((i=>i.canonicalString()))})}))}))}containsKey(e,n){return rS(e,this.userId,n)}ir(e){return sS(e).get(this.userId).next((n=>n||{userId:this.userId,lastAcknowledgedBatchId:Ps,lastStreamToken:""}))}}function rS(t,e,n){const r=Cu(e,n.path),s=r[1],i=IDBKeyRange.lowerBound(r);let o=!1;return Io(t).ee({range:i,Y:!0},((a,c,u)=>{const[h,d,f]=a;h===e&&d===s&&(o=!0),u.done()})).next((()=>o))}function os(t){return Pt(t,On)}function Io(t){return Pt(t,Xo)}function sS(t){return Pt(t,tl)}class Bi{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Bi(0)}static ar(){return new Bi(-1)}}class V2{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.ur(e).next((n=>{const r=new Bi(n.highestTargetId);return n.highestTargetId=r.next(),this.cr(e,n).next((()=>n.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.ur(e).next((n=>he.fromTimestamp(new Fe(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.ur(e).next((n=>n.highestListenSequenceNumber))}setTargetsMetadata(e,n,r){return this.ur(e).next((s=>(s.highestListenSequenceNumber=n,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),n>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=n),this.cr(e,s))))}addTargetData(e,n){return this.lr(e,n).next((()=>this.ur(e).next((r=>(r.targetCount+=1,this.hr(n,r),this.cr(e,r))))))}updateTargetData(e,n){return this.lr(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next((()=>fo(e).delete(n.targetId))).next((()=>this.ur(e))).next((r=>(ae(r.targetCount>0,8065),r.targetCount-=1,this.cr(e,r))))}removeTargets(e,n,r){let s=0;const i=[];return fo(e).ee(((o,a)=>{const c=_c(a);c.sequenceNumber<=n&&r.get(c.targetId)===null&&(s++,i.push(this.removeTargetData(e,c)))})).next((()=>O.waitFor(i))).next((()=>s))}forEachTarget(e,n){return fo(e).ee(((r,s)=>{const i=_c(s);n(i)}))}ur(e){return WE(e).get(ph).next((n=>(ae(n!==null,2888),n)))}cr(e,n){return WE(e).put(ph,n)}lr(e,n){return fo(e).put(XR(this.serializer,n))}hr(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.ur(e).next((n=>n.targetCount))}getTargetData(e,n){const r=Oi(n),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let i=null;return fo(e).ee({range:s,index:$b},((o,a,c)=>{const u=_c(a);bl(n,u.target)&&(i=u,c.done())})).next((()=>i))}addMatchingKeys(e,n,r){const s=[],i=ps(e);return n.forEach((o=>{const a=zt(o.path);s.push(i.put({targetId:r,path:a})),s.push(this.referenceDelegate.addReference(e,r,o))})),O.waitFor(s)}removeMatchingKeys(e,n,r){const s=ps(e);return O.forEach(n,(i=>{const o=zt(i.path);return O.waitFor([s.delete([r,o]),this.referenceDelegate.removeReference(e,r,i)])}))}removeMatchingKeysForTargetId(e,n){const r=ps(e),s=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),s=ps(e);let i=Te();return s.ee({range:r,Y:!0},((o,a,c)=>{const u=nr(o[1]),h=new X(u);i=i.add(h)})).next((()=>i))}containsKey(e,n){const r=zt(n.path),s=IDBKeyRange.bound([r],[Db(r)],!1,!0);let i=0;return ps(e).ee({index:rg,Y:!0,range:s},(([o,a],c,u)=>{o!==0&&(i++,u.done())})).next((()=>i>0))}At(e,n){return fo(e).get(n).next((r=>r?_c(r):null))}}function fo(t){return Pt(t,Zo)}function WE(t){return Pt(t,Ri)}function ps(t){return Pt(t,ea)}const zE="LruGarbageCollector",iS=1048576;function QE([t,e],[n,r]){const s=ye(t,n);return s===0?ye(e,r):s}class x2{constructor(e){this.Pr=e,this.buffer=new je(QE),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();QE(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class oS{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){G(zE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){$s(n)?G(zE,"Ignoring IndexedDB error during garbage collection: ",n):await Hs(n)}await this.Ar(3e5)}))}}class O2{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return O.resolve(cn.ce);const r=new x2(n);return this.Vr.forEachTarget(e,(s=>r.Er(s.sequenceNumber))).next((()=>this.Vr.mr(e,(s=>r.Er(s))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(G("LruGarbageCollector","Garbage collection skipped; disabled"),O.resolve(KE)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(G("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),KE):this.gr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let r,s,i,o,a,c,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((d=>(d>this.params.maximumSequenceNumbersToCollect?(G("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),s=this.params.maximumSequenceNumbersToCollect):s=d,o=Date.now(),this.nthSequenceNumber(e,s)))).next((d=>(r=d,a=Date.now(),this.removeTargets(e,r,n)))).next((d=>(i=d,c=Date.now(),this.removeOrphanedDocuments(e,r)))).next((d=>(u=Date.now(),go()<=Pe.DEBUG&&G("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(c-a)+`ms
	Removed ${d} documents in `+(u-c)+`ms
Total Duration: ${u-h}ms`),O.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:d}))))}}function aS(t,e){return new O2(t,e)}class L2{constructor(e,n){this.db=e,this.garbageCollector=aS(this,n)}dr(e){const n=this.pr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>n.next((s=>r+s))))}pr(e){let n=0;return this.mr(e,(r=>{n++})).next((()=>n))}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}mr(e,n){return this.yr(e,((r,s)=>n(s)))}addReference(e,n,r){return pu(e,r)}removeReference(e,n,r){return pu(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return pu(e,n)}wr(e,n){return(function(s,i){let o=!1;return sS(s).te((a=>rS(s,a,i).next((c=>(c&&(o=!0),O.resolve(!c)))))).next((()=>o))})(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let i=0;return this.yr(e,((o,a)=>{if(a<=n){const c=this.wr(e,o).next((u=>{if(!u)return i++,r.getEntry(e,o).next((()=>(r.removeEntry(o,he.min()),ps(e).delete((function(d){return[0,zt(d.path)]})(o)))))}));s.push(c)}})).next((()=>O.waitFor(s))).next((()=>r.apply(e))).next((()=>i))}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return pu(e,n)}yr(e,n){const r=ps(e);let s,i=cn.ce;return r.ee({index:rg},(([o,a],{path:c,sequenceNumber:u})=>{o===0?(i!==cn.ce&&n(new X(nr(s)),i),i=u,s=c):i=cn.ce})).next((()=>{i!==cn.ce&&n(new X(nr(s)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function pu(t,e){return ps(t).put((function(r,s){return{targetId:0,path:zt(r.path),sequenceNumber:s}})(e,t.currentSequenceNumber))}class cS{constructor(){this.changes=new Wr((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ye.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?O.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class M2{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return ii(e).put(r)}removeEntry(e,n,r){return ii(e).delete((function(i,o){const a=i.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],yh(o),a[a.length-1]]})(n,r))}updateMetadata(e,n){return this.getMetadata(e).next((r=>(r.byteSize+=n,this.br(e,r))))}getEntry(e,n){let r=Ye.newInvalidDocument(n);return ii(e).ee({index:ku,range:IDBKeyRange.only(oc(n))},((s,i)=>{r=this.Sr(n,i)})).next((()=>r))}Dr(e,n){let r={size:0,document:Ye.newInvalidDocument(n)};return ii(e).ee({index:ku,range:IDBKeyRange.only(oc(n))},((s,i)=>{r={document:this.Sr(n,i),size:Eh(i)}})).next((()=>r))}getEntries(e,n){let r=un();return this.Cr(e,n,((s,i)=>{const o=this.Sr(s,i);r=r.insert(s,o)})).next((()=>r))}vr(e,n){let r=un(),s=new Qe(X.comparator);return this.Cr(e,n,((i,o)=>{const a=this.Sr(i,o);r=r.insert(i,a),s=s.insert(i,Eh(o))})).next((()=>({documents:r,Fr:s})))}Cr(e,n,r){if(n.isEmpty())return O.resolve();let s=new je(XE);n.forEach((c=>s=s.add(c)));const i=IDBKeyRange.bound(oc(s.first()),oc(s.last())),o=s.getIterator();let a=o.getNext();return ii(e).ee({index:ku,range:i},((c,u,h)=>{const d=X.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&XE(a,d)<0;)r(a,null),a=o.getNext();a&&a.isEqual(d)&&(r(a,u),a=o.hasNext()?o.getNext():null),a?h.j(oc(a)):h.done()})).next((()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null}))}getDocumentsMatchingQuery(e,n,r,s,i){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),yh(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ii(e).H(IDBKeyRange.bound(a,c,!0)).next((u=>{i?.incrementDocumentReadCount(u.length);let h=un();for(const d of u){const f=this.Sr(X.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);f.isFoundDocument()&&(Sl(n,f)||s.has(f.key))&&(h=h.insert(f.key,f))}return h}))}getAllFromCollectionGroup(e,n,r,s){let i=un();const o=YE(n,r),a=YE(n,Rn.max());return ii(e).ee({index:Hb,range:IDBKeyRange.bound(o,a,!0)},((c,u,h)=>{const d=this.Sr(X.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);i=i.insert(d.key,d),i.size===s&&h.done()})).next((()=>i))}newChangeBuffer(e){return new F2(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((n=>n.byteSize))}getMetadata(e){return JE(e).get(bp).next((n=>(ae(!!n,20021),n)))}br(e,n){return JE(e).put(bp,n)}Sr(e,n){if(n){const r=v2(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(he.min())))return r}return Ye.newInvalidDocument(e)}}function lS(t){return new M2(t)}class F2 extends cS{constructor(e,n){super(),this.Mr=e,this.trackRemovals=n,this.Or=new Wr((r=>r.toString()),((r,s)=>r.isEqual(s)))}applyChanges(e){const n=[];let r=0,s=new je(((i,o)=>ye(i.canonicalString(),o.canonicalString())));return this.changes.forEach(((i,o)=>{const a=this.Or.get(i);if(n.push(this.Mr.removeEntry(e,i,a.readTime)),o.isValidDocument()){const c=VE(this.Mr.serializer,o);s=s.add(i.path.popLast());const u=Eh(c);r+=u-a.size,n.push(this.Mr.addEntry(e,i,c))}else if(r-=a.size,this.trackRemovals){const c=VE(this.Mr.serializer,o.convertToNoDocument(he.min()));n.push(this.Mr.addEntry(e,i,c))}})),s.forEach((i=>{n.push(this.Mr.indexManager.addToCollectionParentIndex(e,i))})),n.push(this.Mr.updateMetadata(e,r)),O.waitFor(n)}getFromCache(e,n){return this.Mr.Dr(e,n).next((r=>(this.Or.set(n,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,n){return this.Mr.vr(e,n).next((({documents:r,Fr:s})=>(s.forEach(((i,o)=>{this.Or.set(i,{size:o,readTime:r.get(i).readTime})})),r)))}}function JE(t){return Pt(t,nl)}function ii(t){return Pt(t,fh)}function oc(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function YE(t,e){const n=e.documentKey.path.toArray();return[t,yh(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function XE(t,e){const n=t.path.toArray(),r=e.path.toArray();let s=0;for(let i=0;i<n.length-2&&i<r.length-2;++i)if(s=ye(n[i],r[i]),s)return s;return s=ye(n.length,r.length),s||(s=ye(n[n.length-2],r[r.length-2]),s||ye(n[n.length-1],r[r.length-1]))}class U2{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class uS{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,n)))).next((s=>(r!==null&&Mc(r.mutation,s,ln.empty(),Fe.now()),s)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,Te()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=Te()){const s=rr();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,r).next((i=>{let o=mc();return i.forEach(((a,c)=>{o=o.insert(a,c.overlayedDocument)})),o}))))}getOverlayedDocuments(e,n){const r=rr();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,Te())))}populateOverlays(e,n,r){const s=[];return r.forEach((i=>{n.has(i)||s.push(i)})),this.documentOverlayCache.getOverlays(e,s).next((i=>{i.forEach(((o,a)=>{n.set(o,a)}))}))}computeViews(e,n,r,s){let i=un();const o=Lc(),a=(function(){return Lc()})();return n.forEach(((c,u)=>{const h=r.get(u.key);s.has(u.key)&&(h===void 0||h.mutation instanceof zr)?i=i.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),Mc(h.mutation,u,h.mutation.getFieldMask(),Fe.now())):o.set(u.key,ln.empty())})),this.recalculateAndSaveOverlays(e,i).next((c=>(c.forEach(((u,h)=>o.set(u,h))),n.forEach(((u,h)=>a.set(u,new U2(h,o.get(u)??null)))),a)))}recalculateAndSaveOverlays(e,n){const r=Lc();let s=new Qe(((o,a)=>o-a)),i=Te();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((o=>{for(const a of o)a.keys().forEach((c=>{const u=n.get(c);if(u===null)return;let h=r.get(c)||ln.empty();h=a.applyToLocalView(u,h),r.set(c,h);const d=(s.get(a.batchId)||Te()).add(c);s=s.insert(a.batchId,d)}))})).next((()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),u=c.key,h=c.value,d=AR();h.forEach((f=>{if(!i.has(f)){const m=NR(n.get(f),r.get(f));m!==null&&d.set(f,m),i=i.add(f)}})),o.push(this.documentOverlayCache.saveOverlays(e,u,d))}return O.waitFor(o)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,s){return GU(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):ug(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next((i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):O.resolve(rr());let a=Qo,c=i;return o.next((u=>O.forEach(u,((h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),i.get(h)?O.resolve():this.remoteDocumentCache.getEntry(e,h).next((f=>{c=c.insert(h,f)}))))).next((()=>this.populateOverlays(e,u,i))).next((()=>this.computeViews(e,c,u,Te()))).next((h=>({batchId:a,changes:vR(h)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new X(n)).next((r=>{let s=mc();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=mc();return this.indexManager.getCollectionParents(e,i).next((a=>O.forEach(a,(c=>{const u=(function(d,f){return new Kr(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)})(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,r,s).next((h=>{h.forEach(((d,f)=>{o=o.insert(d,f)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s)))).next((o=>{i.forEach(((c,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,Ye.newInvalidDocument(h)))}));let a=mc();return o.forEach(((c,u)=>{const h=i.get(c);h!==void 0&&Mc(h.mutation,u,ln.empty(),Fe.now()),Sl(n,u)&&(a=a.insert(c,u))})),a}))}}class B2{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return O.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,(function(s){return{id:s.id,version:s.version,createTime:mt(s.createTime)}})(n)),O.resolve()}getNamedQuery(e,n){return O.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,(function(s){return{name:s.name,query:_d(s.bundledQuery),readTime:mt(s.readTime)}})(n)),O.resolve()}}class j2{constructor(){this.overlays=new Qe(X.comparator),this.Lr=new Map}getOverlay(e,n){return O.resolve(this.overlays.get(n))}getOverlays(e,n){const r=rr();return O.forEach(n,(s=>this.getOverlay(e,s).next((i=>{i!==null&&r.set(s,i)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((s,i)=>{this.bt(e,n,i)})),O.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Lr.get(r);return s!==void 0&&(s.forEach((i=>this.overlays=this.overlays.remove(i))),this.Lr.delete(r)),O.resolve()}getOverlaysForCollection(e,n,r){const s=rr(),i=n.length+1,o=new X(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const c=a.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return O.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Qe(((u,h)=>u-h));const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let h=i.get(u.largestBatchId);h===null&&(h=rr(),i=i.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const a=rr(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach(((u,h)=>a.set(u,h))),!(a.size()>=s)););return O.resolve(a)}bt(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Lr.get(s.largestBatchId).delete(r.key);this.Lr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new gg(n,r));let i=this.Lr.get(n);i===void 0&&(i=Te(),this.Lr.set(n,i)),this.Lr.set(n,i.add(r.key))}}class q2{constructor(){this.sessionToken=ct.EMPTY_BYTE_STRING}getSessionToken(e){return O.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,O.resolve()}}class Tg{constructor(){this.kr=new je(kt.Kr),this.qr=new je(kt.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const r=new kt(e,n);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Wr(new kt(e,n))}Qr(e,n){e.forEach((r=>this.removeReference(r,n)))}Gr(e){const n=new X(new be([])),r=new kt(n,e),s=new kt(n,e+1),i=[];return this.qr.forEachInRange([r,s],(o=>{this.Wr(o),i.push(o.key)})),i}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new X(new be([])),r=new kt(n,e),s=new kt(n,e+1);let i=Te();return this.qr.forEachInRange([r,s],(o=>{i=i.add(o.key)})),i}containsKey(e){const n=new kt(e,0),r=this.kr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class kt{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return X.comparator(e.key,n.key)||ye(e.Hr,n.Hr)}static Ur(e,n){return ye(e.Hr,n.Hr)||X.comparator(e.key,n.key)}}class H2{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new je(kt.Kr)}checkEmpty(e){return O.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new pg(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.Jr=this.Jr.add(new kt(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return O.resolve(o)}lookupMutationBatch(e,n){return O.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.Xr(r),i=s<0?0:s;return O.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(this.mutationQueue.length===0?Ps:this.Yn-1)}getAllMutationBatches(e){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new kt(n,0),s=new kt(n,Number.POSITIVE_INFINITY),i=[];return this.Jr.forEachInRange([r,s],(o=>{const a=this.Zr(o.Hr);i.push(a)})),O.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new je(ye);return n.forEach((s=>{const i=new kt(s,0),o=new kt(s,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([i,o],(a=>{r=r.add(a.Hr)}))})),O.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;X.isDocumentKey(i)||(i=i.child(""));const o=new kt(new X(i),0);let a=new je(ye);return this.Jr.forEachWhile((c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(a=a.add(c.Hr)),!0)}),o),O.resolve(this.Yr(a))}Yr(e){const n=[];return e.forEach((r=>{const s=this.Zr(r);s!==null&&n.push(s)})),n}removeMutationBatch(e,n){ae(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return O.forEach(n.mutations,(s=>{const i=new kt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Jr=r}))}nr(e){}containsKey(e,n){const r=new kt(n,0),s=this.Jr.firstAfterOrEqual(r);return O.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,O.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class $2{constructor(e){this.ti=e,this.docs=(function(){return new Qe(X.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ti(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return O.resolve(r?r.document.mutableCopy():Ye.newInvalidDocument(n))}getEntries(e,n){let r=un();return n.forEach((s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Ye.newInvalidDocument(s))})),O.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=un();const o=n.path,a=new X(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:u,value:{document:h}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||tg(Mb(h),r)<=0||(s.has(h.key)||Sl(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return O.resolve(i)}getAllFromCollectionGroup(e,n,r,s){re(9500)}ni(e,n){return O.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new G2(this)}getSize(e){return O.resolve(this.size)}}class G2 extends cS{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?n.push(this.Mr.addEntry(e,s)):this.Mr.removeEntry(r)})),O.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}class K2{constructor(e){this.persistence=e,this.ri=new Wr((n=>Oi(n)),bl),this.lastRemoteSnapshotVersion=he.min(),this.highestTargetId=0,this.ii=0,this.si=new Tg,this.targetCount=0,this.oi=Bi._r()}forEachTarget(e,n){return this.ri.forEach(((r,s)=>n(s))),O.resolve()}getLastRemoteSnapshotVersion(e){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return O.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ii&&(this.ii=n),O.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new Bi(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,O.resolve()}updateTargetData(e,n){return this.lr(n),O.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,O.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.ri.forEach(((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.ri.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)})),O.waitFor(i).next((()=>s))}getTargetCount(e){return O.resolve(this.targetCount)}getTargetData(e,n){const r=this.ri.get(n)||null;return O.resolve(r)}addMatchingKeys(e,n,r){return this.si.$r(n,r),O.resolve()}removeMatchingKeys(e,n,r){this.si.Qr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach((o=>{i.push(s.markPotentiallyOrphaned(e,o))})),O.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),O.resolve()}getMatchingKeysForTargetId(e,n){const r=this.si.jr(n);return O.resolve(r)}containsKey(e,n){return O.resolve(this.si.containsKey(n))}}class wg{constructor(e,n){this._i={},this.overlays={},this.ai=new cn(0),this.ui=!1,this.ui=!0,this.ci=new q2,this.referenceDelegate=e(this),this.li=new K2(this),this.indexManager=new N2,this.remoteDocumentCache=(function(s){return new $2(s)})((r=>this.referenceDelegate.hi(r))),this.serializer=new YR(n),this.Pi=new B2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new j2,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this._i[e.toKey()];return r||(r=new H2(n,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,r){G("MemoryPersistence","Starting transaction:",e);const s=new W2(this.ai.next());return this.referenceDelegate.Ti(),r(s).next((i=>this.referenceDelegate.Ii(s).next((()=>i)))).toPromise().then((i=>(s.raiseOnCommittedEvent(),i)))}Ei(e,n){return O.or(Object.values(this._i).map((r=>()=>r.containsKey(e,n))))}}class W2 extends Ub{constructor(e){super(),this.currentSequenceNumber=e}}class Ed{constructor(e){this.persistence=e,this.Ri=new Tg,this.Ai=null}static Vi(e){return new Ed(e)}get di(){if(this.Ai)return this.Ai;throw re(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.di.delete(r.toString()),O.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.di.add(r.toString()),O.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),O.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach((s=>this.di.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((s=>{s.forEach((i=>this.di.add(i.toString())))})).next((()=>r.removeTargetData(e,n)))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.di,(r=>{const s=X.fromPath(r);return this.mi(e,s).next((i=>{i||n.removeEntry(s,he.min())}))})).next((()=>(this.Ai=null,n.apply(e))))}updateLimboDocument(e,n){return this.mi(e,n).next((r=>{r?this.di.delete(n.toString()):this.di.add(n.toString())}))}hi(e){return 0}mi(e,n){return O.or([()=>O.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Th{constructor(e,n){this.persistence=e,this.fi=new Wr((r=>zt(r.path)),((r,s)=>r.isEqual(s))),this.garbageCollector=aS(this,n)}static Vi(e,n){return new Th(e,n)}Ti(){}Ii(e){return O.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((s=>r+s))))}pr(e){let n=0;return this.mr(e,(r=>{n++})).next((()=>n))}mr(e,n){return O.forEach(this.fi,((r,s)=>this.wr(e,r,s).next((i=>i?O.resolve():n(s)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ni(e,(o=>this.wr(e,o,n).next((a=>{a||(r++,i.removeEntry(o,he.min()))})))).next((()=>i.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),O.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),O.resolve()}removeReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),O.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),O.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Du(e.data.value)),n}wr(e,n,r){return O.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.fi.get(n);return O.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class z2{constructor(e){this.serializer=e}k(e,n,r,s){const i=new od("createOrUpgrade",n);r<1&&s>=1&&((function(c){c.createObjectStore(Al)})(e),(function(c){c.createObjectStore(tl,{keyPath:oU}),c.createObjectStore(On,{keyPath:lE,autoIncrement:!0}).createIndex(Ii,uE,{unique:!0}),c.createObjectStore(Xo)})(e),ZE(e),(function(c){c.createObjectStore(di)})(e));let o=O.resolve();return r<3&&s>=3&&(r!==0&&((function(c){c.deleteObjectStore(ea),c.deleteObjectStore(Zo),c.deleteObjectStore(Ri)})(e),ZE(e)),o=o.next((()=>(function(c){const u=c.store(Ri),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:he.min().toTimestamp(),targetCount:0};return u.put(ph,h)})(i)))),r<4&&s>=4&&(r!==0&&(o=o.next((()=>(function(c,u){return u.store(On).H().next((d=>{c.deleteObjectStore(On),c.createObjectStore(On,{keyPath:lE,autoIncrement:!0}).createIndex(Ii,uE,{unique:!0});const f=u.store(On),m=d.map((I=>f.put(I)));return O.waitFor(m)}))})(e,i)))),o=o.next((()=>{(function(c){c.createObjectStore(ta,{keyPath:mU})})(e)}))),r<5&&s>=5&&(o=o.next((()=>this.gi(i)))),r<6&&s>=6&&(o=o.next((()=>((function(c){c.createObjectStore(nl)})(e),this.pi(i))))),r<7&&s>=7&&(o=o.next((()=>this.yi(i)))),r<8&&s>=8&&(o=o.next((()=>this.wi(e,i)))),r<9&&s>=9&&(o=o.next((()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&s>=10&&(o=o.next((()=>this.bi(i)))),r<11&&s>=11&&(o=o.next((()=>{(function(c){c.createObjectStore(ad,{keyPath:gU})})(e),(function(c){c.createObjectStore(cd,{keyPath:_U})})(e)}))),r<12&&s>=12&&(o=o.next((()=>{(function(c){const u=c.createObjectStore(ld,{keyPath:AU});u.createIndex(Sp,bU,{unique:!1}),u.createIndex(Wb,RU,{unique:!1})})(e)}))),r<13&&s>=13&&(o=o.next((()=>(function(c){const u=c.createObjectStore(fh,{keyPath:cU});u.createIndex(ku,lU),u.createIndex(Hb,uU)})(e))).next((()=>this.Si(e,i))).next((()=>e.deleteObjectStore(di)))),r<14&&s>=14&&(o=o.next((()=>this.Di(e,i)))),r<15&&s>=15&&(o=o.next((()=>(function(c){c.createObjectStore(sg,{keyPath:yU,autoIncrement:!0}).createIndex(Rp,IU,{unique:!1}),c.createObjectStore(Vc,{keyPath:EU}).createIndex(Gb,TU,{unique:!1}),c.createObjectStore(xc,{keyPath:wU}).createIndex(Kb,vU,{unique:!1})})(e)))),r<16&&s>=16&&(o=o.next((()=>{n.objectStore(Vc).clear()})).next((()=>{n.objectStore(xc).clear()}))),r<17&&s>=17&&(o=o.next((()=>{(function(c){c.createObjectStore(ig,{keyPath:SU})})(e)}))),r<18&&s>=18&&rA()&&(o=o.next((()=>{n.objectStore(Vc).clear()})).next((()=>{n.objectStore(xc).clear()}))),o}pi(e){let n=0;return e.store(di).ee(((r,s)=>{n+=Eh(s)})).next((()=>{const r={byteSize:n};return e.store(nl).put(bp,r)}))}gi(e){const n=e.store(tl),r=e.store(On);return n.H().next((s=>O.forEach(s,(i=>{const o=IDBKeyRange.bound([i.userId,Ps],[i.userId,i.lastAcknowledgedBatchId]);return r.H(Ii,o).next((a=>O.forEach(a,(c=>{ae(c.userId===i.userId,18650,"Cannot process batch from unexpected user",{batchId:c.batchId});const u=pi(this.serializer,c);return nS(e,i.userId,u).next((()=>{}))}))))}))))}yi(e){const n=e.store(ea),r=e.store(di);return e.store(Ri).get(ph).next((s=>{const i=[];return r.ee(((o,a)=>{const c=new be(o),u=(function(d){return[0,zt(d)]})(c);i.push(n.get(u).next((h=>h?O.resolve():(d=>n.put({targetId:0,path:zt(d),sequenceNumber:s.highestListenSequenceNumber}))(c))))})).next((()=>O.waitFor(i)))}))}wi(e,n){e.createObjectStore(rl,{keyPath:pU});const r=n.store(rl),s=new Eg,i=o=>{if(s.add(o)){const a=o.lastSegment(),c=o.popLast();return r.put({collectionId:a,parent:zt(c)})}};return n.store(di).ee({Y:!0},((o,a)=>{const c=new be(o);return i(c.popLast())})).next((()=>n.store(Xo).ee({Y:!0},(([o,a,c],u)=>{const h=nr(a);return i(h.popLast())}))))}bi(e){const n=e.store(Zo);return n.ee(((r,s)=>{const i=_c(s),o=XR(this.serializer,i);return n.put(o)}))}Si(e,n){const r=n.store(di),s=[];return r.ee(((i,o)=>{const a=n.store(fh),c=(function(d){return d.document?new X(be.fromString(d.document.name).popFirst(5)):d.noDocument?X.fromSegments(d.noDocument.path):d.unknownDocument?X.fromSegments(d.unknownDocument.path):re(36783)})(o).path.toArray(),u={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};s.push(a.put(u))})).next((()=>O.waitFor(s)))}Di(e,n){const r=n.store(On),s=lS(this.serializer),i=new wg(Ed.Vi,this.serializer.yt);return r.H().next((o=>{const a=new Map;return o.forEach((c=>{let u=a.get(c.userId)??Te();pi(this.serializer,c).keys().forEach((h=>u=u.add(h))),a.set(c.userId,u)})),O.forEach(a,((c,u)=>{const h=new Nt(u),d=yd.wt(this.serializer,h),f=i.getIndexManager(h),m=Id.wt(h,this.serializer,f,i.referenceDelegate);return new uS(s,m,d,f).recalculateAndSaveOverlaysForDocumentKeys(new Pp(n,cn.ce),c).next()}))}))}}function ZE(t){t.createObjectStore(ea,{keyPath:dU}).createIndex(rg,fU,{unique:!0}),t.createObjectStore(Zo,{keyPath:"targetId"}).createIndex($b,hU,{unique:!0}),t.createObjectStore(Ri)}const as="IndexedDbPersistence",Sf=18e5,Pf=5e3,Cf="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",hS="main";class vg{constructor(e,n,r,s,i,o,a,c,u,h,d=18){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Ci=i,this.window=o,this.document=a,this.Fi=u,this.Mi=h,this.xi=d,this.ai=null,this.ui=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Oi=null,this.inForeground=!1,this.Ni=null,this.Bi=null,this.Li=Number.NEGATIVE_INFINITY,this.ki=f=>Promise.resolve(),!vg.v())throw new q(M.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new L2(this,s),this.Ki=n+hS,this.serializer=new YR(c),this.qi=new or(this.Ki,this.xi,new z2(this.serializer)),this.ci=new b2,this.li=new V2(this.referenceDelegate,this.serializer),this.remoteDocumentCache=lS(this.serializer),this.Pi=new A2,this.window&&this.window.localStorage?this.Ui=this.window.localStorage:(this.Ui=null,h===!1&&pt(as,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.$i().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new q(M.FAILED_PRECONDITION,Cf);return this.Wi(),this.Qi(),this.Gi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.li.getHighestSequenceNumber(e)))})).then((e=>{this.ai=new cn(e,this.Fi)})).then((()=>{this.ui=!0})).catch((e=>(this.qi&&this.qi.close(),Promise.reject(e))))}zi(e){return this.ki=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.qi.q((async n=>{n.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Ci.enqueueAndForget((async()=>{this.started&&await this.$i()})))}$i(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>mu(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.ji(e).next((n=>{n||(this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))))}))})).next((()=>this.Hi(e))).next((n=>this.isPrimary&&!n?this.Ji(e).next((()=>!1)):!!n&&this.Zi(e).next((()=>!0)))))).catch((e=>{if($s(e))return G(as,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return G(as,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Ci.enqueueRetryable((()=>this.ki(e))),this.isPrimary=e}))}ji(e){return ac(e).get(ao).next((n=>O.resolve(this.Xi(n))))}Yi(e){return mu(e).delete(this.clientId)}async es(){if(this.isPrimary&&!this.ts(this.Li,Sf)){this.Li=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(n=>{const r=Pt(n,ta);return r.H().next((s=>{const i=this.ns(s,Sf),o=s.filter((a=>i.indexOf(a)===-1));return O.forEach(o,(a=>r.delete(a.clientId))).next((()=>o))}))})).catch((()=>[]));if(this.Ui)for(const n of e)this.Ui.removeItem(this.rs(n.clientId))}}Gi(){this.Bi=this.Ci.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.$i().then((()=>this.es())).then((()=>this.Gi()))))}Xi(e){return!!e&&e.ownerId===this.clientId}Hi(e){return this.Mi?O.resolve(!0):ac(e).get(ao).next((n=>{if(n!==null&&this.ts(n.leaseTimestampMs,Pf)&&!this.ss(n.ownerId)){if(this.Xi(n)&&this.networkEnabled)return!0;if(!this.Xi(n)){if(!n.allowTabSynchronization)throw new q(M.FAILED_PRECONDITION,Cf);return!1}}return!(!this.networkEnabled||!this.inForeground)||mu(e).H().next((r=>this.ns(r,Pf).find((s=>{if(this.clientId!==s.clientId){const i=!this.networkEnabled&&s.networkEnabled,o=!this.inForeground&&s.inForeground,a=this.networkEnabled===s.networkEnabled;if(i||o&&a)return!0}return!1}))===void 0))})).next((n=>(this.isPrimary!==n&&G(as,`Client ${n?"is":"is not"} eligible for a primary lease.`),n)))}async shutdown(){this.ui=!1,this._s(),this.Bi&&(this.Bi.cancel(),this.Bi=null),this.us(),this.cs(),await this.qi.runTransaction("shutdown","readwrite",[Al,ta],(e=>{const n=new Pp(e,cn.ce);return this.Ji(n).next((()=>this.Yi(n)))})),this.qi.close(),this.ls()}ns(e,n){return e.filter((r=>this.ts(r.updateTimeMs,n)&&!this.ss(r.clientId)))}hs(){return this.runTransaction("getActiveClients","readonly",(e=>mu(e).H().next((n=>this.ns(n,Sf).map((r=>r.clientId))))))}get started(){return this.ui}getGlobalsCache(){return this.ci}getMutationQueue(e,n){return Id.wt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new D2(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return yd.wt(this.serializer,e)}getBundleCache(){return this.Pi}runTransaction(e,n,r){G(as,"Starting transaction:",e);const s=n==="readonly"?"readonly":"readwrite",i=(function(c){return c===18?kU:c===17?Yb:c===16?CU:c===15?og:c===14?Jb:c===13?Qb:c===12?PU:c===11?zb:void re(60245)})(this.xi);let o;return this.qi.runTransaction(e,s,i,(a=>(o=new Pp(a,this.ai?this.ai.next():cn.ce),n==="readwrite-primary"?this.ji(o).next((c=>!!c||this.Hi(o))).next((c=>{if(!c)throw pt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))),new q(M.FAILED_PRECONDITION,Fb);return r(o)})).next((c=>this.Zi(o).next((()=>c)))):this.Ps(o).next((()=>r(o)))))).then((a=>(o.raiseOnCommittedEvent(),a)))}Ps(e){return ac(e).get(ao).next((n=>{if(n!==null&&this.ts(n.leaseTimestampMs,Pf)&&!this.ss(n.ownerId)&&!this.Xi(n)&&!(this.Mi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new q(M.FAILED_PRECONDITION,Cf)}))}Zi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ac(e).put(ao,n)}static v(){return or.v()}Ji(e){const n=ac(e);return n.get(ao).next((r=>this.Xi(r)?(G(as,"Releasing primary lease."),n.delete(ao)):O.resolve()))}ts(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(pt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Wi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ni=()=>{this.Ci.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.$i())))},this.document.addEventListener("visibilitychange",this.Ni),this.inForeground=this.document.visibilityState==="visible")}us(){this.Ni&&(this.document.removeEventListener("visibilitychange",this.Ni),this.Ni=null)}Qi(){typeof this.window?.addEventListener=="function"&&(this.Oi=()=>{this._s();const e=/(?:Version|Mobile)\/1[456]/;nA()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Ci.enterRestrictedMode(!0),this.Ci.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Oi))}cs(){this.Oi&&(this.window.removeEventListener("pagehide",this.Oi),this.Oi=null)}ss(e){try{const n=this.Ui?.getItem(this.rs(e))!==null;return G(as,`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return pt(as,"Failed to get zombied client id.",n),!1}}_s(){if(this.Ui)try{this.Ui.setItem(this.rs(this.clientId),String(Date.now()))}catch(e){pt("Failed to set zombie client id.",e)}}ls(){if(this.Ui)try{this.Ui.removeItem(this.rs(this.clientId))}catch{}}rs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function ac(t){return Pt(t,Al)}function mu(t){return Pt(t,ta)}function Ag(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}class bg{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Ts=r,this.Is=s}static Es(e,n){let r=Te(),s=Te();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new bg(e,n.fromCache,r,s)}}class Q2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class dS{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return nA()?8:Bb(Rt())>0?6:4})()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.gs(e,n).next((o=>{i.result=o})).next((()=>{if(!i.result)return this.ps(e,n,s,r).next((o=>{i.result=o}))})).next((()=>{if(i.result)return;const o=new Q2;return this.ys(e,n,o).next((a=>{if(i.result=a,this.As)return this.ws(e,n,o,a.size)}))})).next((()=>i.result))}ws(e,n,r,s){return r.documentReadCount<this.Vs?(go()<=Pe.DEBUG&&G("QueryEngine","SDK will not create cache indexes for query:",_o(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),O.resolve()):(go()<=Pe.DEBUG&&G("QueryEngine","Query:",_o(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ds*s?(go()<=Pe.DEBUG&&G("QueryEngine","The SDK decides to create cache indexes for query:",_o(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Qt(n))):O.resolve())}gs(e,n){if(vE(n))return O.resolve(null);let r=Qt(n);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(n.limit!==null&&s===1&&(n=_h(n,null,"F"),r=Qt(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((i=>{const o=Te(...i);return this.fs.getDocuments(e,o).next((a=>this.indexManager.getMinOffset(e,r).next((c=>{const u=this.bs(n,a);return this.Ss(n,u,o,c.readTime)?this.gs(e,_h(n,null,"F")):this.Ds(e,u,n,c)}))))})))))}ps(e,n,r,s){return vE(n)||s.isEqual(he.min())?O.resolve(null):this.fs.getDocuments(e,r).next((i=>{const o=this.bs(n,i);return this.Ss(n,o,r,s)?O.resolve(null):(go()<=Pe.DEBUG&&G("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),_o(n)),this.Ds(e,o,n,Lb(s,Qo)).next((a=>a)))}))}bs(e,n){let r=new je(TR(e));return n.forEach(((s,i)=>{Sl(e,i)&&(r=r.add(i))})),r}Ss(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}ys(e,n,r){return go()<=Pe.DEBUG&&G("QueryEngine","Using full collection scan to execute query:",_o(n)),this.fs.getDocumentsMatchingQuery(e,n,Rn.min(),r)}Ds(e,n,r,s){return this.fs.getDocumentsMatchingQuery(e,r,s).next((i=>(n.forEach((o=>{i=i.insert(o.key,o)})),i)))}}const Rg="LocalStore",J2=3e8;class Y2{constructor(e,n,r,s){this.persistence=e,this.Cs=n,this.serializer=s,this.vs=new Qe(ye),this.Fs=new Wr((i=>Oi(i)),bl),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new uS(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.vs)))}}function fS(t,e,n,r){return new Y2(t,e,n,r)}async function pS(t,e){const n=Z(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next((i=>(s=i,n.Os(e),n.mutationQueue.getAllMutationBatches(r)))).next((i=>{const o=[],a=[];let c=Te();for(const u of s){o.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}for(const u of i){a.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(r,c).next((u=>({Ns:u,removedBatchIds:o,addedBatchIds:a})))}))}))}function X2(t,e){const n=Z(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),i=n.xs.newChangeBuffer({trackRemovals:!0});return(function(a,c,u,h){const d=u.batch,f=d.keys();let m=O.resolve();return f.forEach((I=>{m=m.next((()=>h.getEntry(c,I))).next((T=>{const k=u.docVersions.get(I);ae(k!==null,48541),T.version.compareTo(k)<0&&(d.applyToRemoteDocument(T,u),T.isValidDocument()&&(T.setReadTime(u.commitVersion),h.addEntry(T)))}))})),m.next((()=>a.mutationQueue.removeMutationBatch(c,d)))})(n,r,e,i).next((()=>i.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let c=Te();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c})(e)))).next((()=>n.localDocuments.getDocuments(r,s)))}))}function mS(t){const e=Z(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.li.getLastRemoteSnapshotVersion(n)))}function Z2(t,e){const n=Z(t),r=e.snapshotVersion;let s=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(i=>{const o=n.xs.newChangeBuffer({trackRemovals:!0});s=n.vs;const a=[];e.targetChanges.forEach(((h,d)=>{const f=s.get(d);if(!f)return;a.push(n.li.removeMatchingKeys(i,h.removedDocuments,d).next((()=>n.li.addMatchingKeys(i,h.addedDocuments,d))));let m=f.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(d)!==null?m=m.withResumeToken(ct.EMPTY_BYTE_STRING,he.min()).withLastLimboFreeSnapshotVersion(he.min()):h.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(h.resumeToken,r)),s=s.insert(d,m),(function(T,k,V){return T.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-T.snapshotVersion.toMicroseconds()>=J2?!0:V.addedDocuments.size+V.modifiedDocuments.size+V.removedDocuments.size>0})(f,m,h)&&a.push(n.li.updateTargetData(i,m))}));let c=un(),u=Te();if(e.documentUpdates.forEach((h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))})),a.push(gS(i,o,e.documentUpdates).next((h=>{c=h.Bs,u=h.Ls}))),!r.isEqual(he.min())){const h=n.li.getLastRemoteSnapshotVersion(i).next((d=>n.li.setTargetsMetadata(i,i.currentSequenceNumber,r)));a.push(h)}return O.waitFor(a).next((()=>o.apply(i))).next((()=>n.localDocuments.getLocalViewOfDocuments(i,c,u))).next((()=>c))})).then((i=>(n.vs=s,i)))}function gS(t,e,n){let r=Te(),s=Te();return n.forEach((i=>r=r.add(i))),e.getEntries(t,r).next((i=>{let o=un();return n.forEach(((a,c)=>{const u=i.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(a)),c.isNoDocument()&&c.version.isEqual(he.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):G(Rg,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)})),{Bs:o,Ls:s}}))}function eB(t,e){const n=Z(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Ps),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function ca(t,e){const n=Z(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return n.li.getTargetData(r,e).next((i=>i?(s=i,O.resolve(s)):n.li.allocateTargetId(r).next((o=>(s=new Pr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.li.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=n.vs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.vs=n.vs.insert(r.targetId,r),n.Fs.set(e,r.targetId)),r}))}async function la(t,e,n){const r=Z(t),s=r.vs.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,(o=>r.persistence.referenceDelegate.removeTarget(o,s)))}catch(o){if(!$s(o))throw o;G(Rg,`Failed to update sequence numbers for target ${e}: ${o}`)}r.vs=r.vs.remove(e),r.Fs.delete(s.target)}function wh(t,e,n){const r=Z(t);let s=he.min(),i=Te();return r.persistence.runTransaction("Execute query","readwrite",(o=>(function(c,u,h){const d=Z(c),f=d.Fs.get(h);return f!==void 0?O.resolve(d.vs.get(f)):d.li.getTargetData(u,h)})(r,o,Qt(e)).next((a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(o,a.targetId).next((c=>{i=c}))})).next((()=>r.Cs.getDocumentsMatchingQuery(o,e,n?s:he.min(),n?i:Te()))).next((a=>(IS(r,ER(e),a),{documents:a,ks:i})))))}function _S(t,e){const n=Z(t),r=Z(n.li),s=n.vs.get(e);return s?Promise.resolve(s.target):n.persistence.runTransaction("Get target data","readonly",(i=>r.At(i,e).next((o=>o?o.target:null))))}function yS(t,e){const n=Z(t),r=n.Ms.get(e)||he.min();return n.persistence.runTransaction("Get new document changes","readonly",(s=>n.xs.getAllFromCollectionGroup(s,e,Lb(r,Qo),Number.MAX_SAFE_INTEGER))).then((s=>(IS(n,e,s),s)))}function IS(t,e,n){let r=t.Ms.get(e)||he.min();n.forEach(((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)})),t.Ms.set(e,r)}async function tB(t,e,n,r){const s=Z(t);let i=Te(),o=un();for(const u of n){const h=e.Ks(u.metadata.name);u.document&&(i=i.add(h));const d=e.qs(u);d.setReadTime(e.Us(u.metadata.readTime)),o=o.insert(h,d)}const a=s.xs.newChangeBuffer({trackRemovals:!0}),c=await ca(s,(function(h){return Qt(ba(be.fromString(`__bundle__/docs/${h}`)))})(r));return s.persistence.runTransaction("Apply bundle documents","readwrite",(u=>gS(u,a,o).next((h=>(a.apply(u),h))).next((h=>s.li.removeMatchingKeysForTargetId(u,c.targetId).next((()=>s.li.addMatchingKeys(u,i,c.targetId))).next((()=>s.localDocuments.getLocalViewOfDocuments(u,h.Bs,h.Ls))).next((()=>h.Bs))))))}async function nB(t,e,n=Te()){const r=await ca(t,Qt(_d(e.bundledQuery))),s=Z(t);return s.persistence.runTransaction("Save named query","readwrite",(i=>{const o=mt(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return s.Pi.saveNamedQuery(i,e);const a=r.withResumeToken(ct.EMPTY_BYTE_STRING,o);return s.vs=s.vs.insert(a.targetId,a),s.li.updateTargetData(i,a).next((()=>s.li.removeMatchingKeysForTargetId(i,r.targetId))).next((()=>s.li.addMatchingKeys(i,n,r.targetId))).next((()=>s.Pi.saveNamedQuery(i,e)))}))}const ES="firestore_clients";function eT(t,e){return`${ES}_${t}_${e}`}const TS="firestore_mutations";function tT(t,e,n){let r=`${TS}_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const wS="firestore_targets";function kf(t,e){return`${wS}_${t}_${e}`}const Zn="SharedClientState";class vh{constructor(e,n,r,s){this.user=e,this.batchId=n,this.state=r,this.error=s}static $s(e,n,r){const s=JSON.parse(r);let i,o=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return o&&s.error&&(o=typeof s.error.message=="string"&&typeof s.error.code=="string",o&&(i=new q(s.error.code,s.error.message))),o?new vh(e,n,s.state,i):(pt(Zn,`Failed to parse mutation state for ID '${n}': ${r}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Fc{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static $s(e,n){const r=JSON.parse(n);let s,i=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return i&&r.error&&(i=typeof r.error.message=="string"&&typeof r.error.code=="string",i&&(s=new q(r.error.code,r.error.message))),i?new Fc(e,r.state,s):(pt(Zn,`Failed to parse target state for ID '${e}': ${n}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ah{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static $s(e,n){const r=JSON.parse(n);let s=typeof r=="object"&&r.activeTargetIds instanceof Array,i=hg();for(let o=0;s&&o<r.activeTargetIds.length;++o)s=jb(r.activeTargetIds[o]),i=i.add(r.activeTargetIds[o]);return s?new Ah(e,i):(pt(Zn,`Failed to parse client data for instance '${e}': ${n}`),null)}}class Sg{constructor(e,n){this.clientId=e,this.onlineState=n}static $s(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new Sg(n.clientId,n.onlineState):(pt(Zn,`Failed to parse online state: ${e}`),null)}}class Hp{constructor(){this.activeTargetIds=hg()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Nf{constructor(e,n,r,s,i){this.window=e,this.Ci=n,this.persistenceKey=r,this.zs=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.js=this.Hs.bind(this),this.Js=new Qe(ye),this.started=!1,this.Zs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Xs=eT(this.persistenceKey,this.zs),this.Ys=(function(c){return`firestore_sequence_number_${c}`})(this.persistenceKey),this.Js=this.Js.insert(this.zs,new Hp),this.eo=new RegExp(`^${ES}_${o}_([^_]*)$`),this.no=new RegExp(`^${TS}_${o}_(\\d+)(?:_(.*))?$`),this.ro=new RegExp(`^${wS}_${o}_(\\d+)$`),this.io=(function(c){return`firestore_online_state_${c}`})(this.persistenceKey),this.so=(function(c){return`firestore_bundle_loaded_v2_${c}`})(this.persistenceKey),this.window.addEventListener("storage",this.js)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.hs();for(const r of e){if(r===this.zs)continue;const s=this.getItem(eT(this.persistenceKey,r));if(s){const i=Ah.$s(r,s);i&&(this.Js=this.Js.insert(i.clientId,i))}}this.oo();const n=this.storage.getItem(this.io);if(n){const r=this._o(n);r&&this.ao(r)}for(const r of this.Zs)this.Hs(r);this.Zs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ys,JSON.stringify(e))}getAllActiveQueryTargets(){return this.uo(this.Js)}isActiveQueryTarget(e){let n=!1;return this.Js.forEach(((r,s)=>{s.activeTargetIds.has(e)&&(n=!0)})),n}addPendingMutation(e){this.co(e,"pending")}updateMutationState(e,n,r){this.co(e,n,r),this.lo(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(kf(this.persistenceKey,e));if(s){const i=Fc.$s(e,s);i&&(r=i.state)}}return n&&this.ho.Qs(e),this.oo(),r}removeLocalQueryTarget(e){this.ho.Gs(e),this.oo()}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(kf(this.persistenceKey,e))}updateQueryState(e,n,r){this.Po(e,n,r)}handleUserChange(e,n,r){n.forEach((s=>{this.lo(s)})),this.currentUser=e,r.forEach((s=>{this.addPendingMutation(s)}))}setOnlineState(e){this.To(e)}notifyBundleLoaded(e){this.Io(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.js),this.removeItem(this.Xs),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return G(Zn,"READ",e,n),n}setItem(e,n){G(Zn,"SET",e,n),this.storage.setItem(e,n)}removeItem(e){G(Zn,"REMOVE",e),this.storage.removeItem(e)}Hs(e){const n=e;if(n.storageArea===this.storage){if(G(Zn,"EVENT",n.key,n.newValue),n.key===this.Xs)return void pt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ci.enqueueRetryable((async()=>{if(this.started){if(n.key!==null){if(this.eo.test(n.key)){if(n.newValue==null){const r=this.Eo(n.key);return this.Ro(r,null)}{const r=this.Ao(n.key,n.newValue);if(r)return this.Ro(r.clientId,r)}}else if(this.no.test(n.key)){if(n.newValue!==null){const r=this.Vo(n.key,n.newValue);if(r)return this.mo(r)}}else if(this.ro.test(n.key)){if(n.newValue!==null){const r=this.fo(n.key,n.newValue);if(r)return this.po(r)}}else if(n.key===this.io){if(n.newValue!==null){const r=this._o(n.newValue);if(r)return this.ao(r)}}else if(n.key===this.Ys){const r=(function(i){let o=cn.ce;if(i!=null)try{const a=JSON.parse(i);ae(typeof a=="number",30636,{yo:i}),o=a}catch(a){pt(Zn,"Failed to read sequence number from WebStorage",a)}return o})(n.newValue);r!==cn.ce&&this.sequenceNumberHandler(r)}else if(n.key===this.so){const r=this.wo(n.newValue);await Promise.all(r.map((s=>this.syncEngine.bo(s))))}}}else this.Zs.push(n)}))}}get ho(){return this.Js.get(this.zs)}oo(){this.setItem(this.Xs,this.ho.Ws())}co(e,n,r){const s=new vh(this.currentUser,e,n,r),i=tT(this.persistenceKey,this.currentUser,e);this.setItem(i,s.Ws())}lo(e){const n=tT(this.persistenceKey,this.currentUser,e);this.removeItem(n)}To(e){const n={clientId:this.zs,onlineState:e};this.storage.setItem(this.io,JSON.stringify(n))}Po(e,n,r){const s=kf(this.persistenceKey,e),i=new Fc(e,n,r);this.setItem(s,i.Ws())}Io(e){const n=JSON.stringify(Array.from(e));this.setItem(this.so,n)}Eo(e){const n=this.eo.exec(e);return n?n[1]:null}Ao(e,n){const r=this.Eo(e);return Ah.$s(r,n)}Vo(e,n){const r=this.no.exec(e),s=Number(r[1]),i=r[2]!==void 0?r[2]:null;return vh.$s(new Nt(i),s,n)}fo(e,n){const r=this.ro.exec(e),s=Number(r[1]);return Fc.$s(s,n)}_o(e){return Sg.$s(e)}wo(e){return JSON.parse(e)}async mo(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.So(e.batchId,e.state,e.error);G(Zn,`Ignoring mutation for non-active user ${e.user.uid}`)}po(e){return this.syncEngine.Do(e.targetId,e.state,e.error)}Ro(e,n){const r=n?this.Js.insert(e,n):this.Js.remove(e),s=this.uo(this.Js),i=this.uo(r),o=[],a=[];return i.forEach((c=>{s.has(c)||o.push(c)})),s.forEach((c=>{i.has(c)||a.push(c)})),this.syncEngine.Co(o,a).then((()=>{this.Js=r}))}ao(e){this.Js.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}uo(e){let n=hg();return e.forEach(((r,s)=>{n=n.unionWith(s.activeTargetIds)})),n}}class vS{constructor(){this.vo=new Hp,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,r){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Hp,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class rB{Mo(e){}shutdown(){}}const nT="ConnectivityMonitor";class rT{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){G(nT,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){G(nT,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let gu=null;function $p(){return gu===null?gu=(function(){return 268435456+Math.round(2147483648*Math.random())})():gu++,"0x"+gu.toString(16)}const Df="RestConnection",sB={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class iB{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.$o=this.databaseId.database===il?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,n,r,s,i){const o=$p(),a=this.Qo(e,n.toUriEncodedString());G(Df,`Sending RPC '${e}' ${o}:`,a,r);const c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(c,s,i);const{host:u}=new URL(a),h=Gi(u);return this.zo(e,a,c,r,h).then((d=>(G(Df,`Received RPC '${e}' ${o}: `,d),d)),(d=>{throw bn(Df,`RPC '${e}' ${o} failed with error: `,d,"url: ",a,"request:",r),d}))}jo(e,n,r,s,i,o){return this.Wo(e,n,r,s,i)}Go(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Aa})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((s,i)=>e[i]=s)),r&&r.headers.forEach(((s,i)=>e[i]=s))}Qo(e,n){const r=sB[e];let s=`${this.qo}/v1/${n}:${r}`;return this.databaseInfo.apiKey&&(s=`${s}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),s}terminate(){}}class oB{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const qt="WebChannelConnection",cc=(t,e,n)=>{t.listen(e,(r=>{try{n(r)}catch(s){setTimeout((()=>{throw s}),0)}}))};class Vo extends iB{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Vo.c_){const e=Sb();cc(e,Rb.STAT_EVENT,(n=>{n.stat===Ep.PROXY?G(qt,"STAT_EVENT: detected buffering proxy"):n.stat===Ep.NOPROXY&&G(qt,"STAT_EVENT: detected no buffering proxy")})),Vo.c_=!0}}zo(e,n,r,s,i){const o=$p();return new Promise(((a,c)=>{const u=new Ab;u.setWithCredentials(!0),u.listenOnce(bb.COMPLETE,(()=>{try{switch(u.getLastErrorCode()){case Pu.NO_ERROR:const d=u.getResponseJson();G(qt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),a(d);break;case Pu.TIMEOUT:G(qt,`RPC '${e}' ${o} timed out`),c(new q(M.DEADLINE_EXCEEDED,"Request time out"));break;case Pu.HTTP_ERROR:const f=u.getStatus();if(G(qt,`RPC '${e}' ${o} failed with status:`,f,"response text:",u.getResponseText()),f>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);const I=m?.error;if(I&&I.status&&I.message){const T=(function(V){const N=V.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(N)>=0?N:M.UNKNOWN})(I.status);c(new q(T,I.message))}else c(new q(M.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new q(M.UNAVAILABLE,"Connection failed."));break;default:re(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{G(qt,`RPC '${e}' ${o} completed.`)}}));const h=JSON.stringify(s);G(qt,`RPC '${e}' ${o} sending request:`,s),u.send(n,"POST",h,r,15)}))}T_(e,n,r){const s=$p(),i=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=this.createWebChannelTransport(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(a.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Go(a.initMessageHeaders,n,r),a.encodeInitMessageHeaders=!0;const u=i.join("");G(qt,`Creating RPC '${e}' stream ${s}: ${u}`,a);const h=o.createWebChannel(u,a);this.I_(h);let d=!1,f=!1;const m=new oB({Ho:I=>{f?G(qt,`Not sending because RPC '${e}' stream ${s} is closed:`,I):(d||(G(qt,`Opening RPC '${e}' stream ${s} transport.`),h.open(),d=!0),G(qt,`RPC '${e}' stream ${s} sending:`,I),h.send(I))},Jo:()=>h.close()});return cc(h,pc.EventType.OPEN,(()=>{f||(G(qt,`RPC '${e}' stream ${s} transport opened.`),m.i_())})),cc(h,pc.EventType.CLOSE,(()=>{f||(f=!0,G(qt,`RPC '${e}' stream ${s} transport closed`),m.o_(),this.E_(h))})),cc(h,pc.EventType.ERROR,(I=>{f||(f=!0,bn(qt,`RPC '${e}' stream ${s} transport errored. Name:`,I.name,"Message:",I.message),m.o_(new q(M.UNAVAILABLE,"The operation could not be completed")))})),cc(h,pc.EventType.MESSAGE,(I=>{if(!f){const T=I.data[0];ae(!!T,16349);const k=T,V=k?.error||k[0]?.error;if(V){G(qt,`RPC '${e}' stream ${s} received error:`,V);const N=V.status;let _=(function(U){const v=gt[U];if(v!==void 0)return OR(v)})(N),C=V.message;_===void 0&&(_=M.INTERNAL,C="Unknown error status: "+N+" with message "+V.message),f=!0,m.o_(new q(_,C)),h.close()}else G(qt,`RPC '${e}' stream ${s} received:`,T),m.__(T)}})),Vo.u_(),setTimeout((()=>{m.s_()}),0),m}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((n=>n===e))}Go(e,n,r){super.Go(e,n,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return Pb()}}function aB(t){return new Vo(t)}function AS(){return typeof window<"u"?window:null}function Mu(){return typeof document<"u"?document:null}function zi(t){return new f2(t,!0)}Vo.c_=!1;class Pg{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Ci=e,this.timerId=n,this.R_=r,this.A_=s,this.V_=i,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&G("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const sT="PersistentStream";class bS{constructor(e,n,r,s,i,o,a,c){this.Ci=e,this.b_=r,this.S_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Pg(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===M.RESOURCE_EXHAUSTED?(pt(n.toString()),pt("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.D_===n&&this.G_(r,s)}),(r=>{e((()=>{const s=new q(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)}))}))}G_(e,n){const r=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.Yo((()=>{r((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((s=>{r((()=>this.z_(s)))})),this.stream.onMessage((s=>{r((()=>++this.F_==1?this.H_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return G(sT,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget((()=>this.D_===e?n():(G(sT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class cB extends bS{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=g2(this.serializer,e),r=(function(i){if(!("targetChange"in i))return he.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?he.min():o.readTime?mt(o.readTime):he.min()})(e);return this.listener.J_(n,r)}Z_(e){const n={};n.database=Fp(this.serializer),n.addTarget=(function(i,o){let a;const c=o.target;if(a=mh(c)?{documents:$R(i,c)}:{query:gd(i,c).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=UR(i,o.resumeToken);const u=Lp(i,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(he.min())>0){a.readTime=aa(i,o.snapshotVersion.toTimestamp());const u=Lp(i,o.expectedCount);u!==null&&(a.expectedCount=u)}return a})(this.serializer,e);const r=y2(this.serializer,e);r&&(n.labels=r),this.K_(n)}X_(e){const n={};n.database=Fp(this.serializer),n.removeTarget=e,this.K_(n)}}class lB extends bS{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return ae(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ae(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ae(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=_2(e.writeResults,e.commitTime),r=mt(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Fp(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>ul(this.serializer,r)))};this.K_(n)}}class uB{}class hB extends uB{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new q(M.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,o])=>this.connection.Wo(e,Mp(n,r),s,i,o))).catch((i=>{throw i.name==="FirebaseError"?(i.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new q(M.UNKNOWN,i.toString())}))}jo(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,a])=>this.connection.jo(e,Mp(n,r),s,o,a,i))).catch((o=>{throw o.name==="FirebaseError"?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new q(M.UNKNOWN,o.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function dB(t,e,n,r){return new hB(t,e,n,r)}class fB{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(pt(n),this.aa=!1):G("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const ji="RemoteStore";class pB{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=i,this.Aa.Mo((o=>{r.enqueueAndForget((async()=>{Ks(this)&&(G(ji,"Restarting streams for network reachability change."),await(async function(c){const u=Z(c);u.Ea.add(4),await Pa(u),u.Va.set("Unknown"),u.Ea.delete(4),await Nl(u)})(this))}))})),this.Va=new fB(r,s)}}async function Nl(t){if(Ks(t))for(const e of t.Ra)await e(!0)}async function Pa(t){for(const e of t.Ra)await e(!1)}function Td(t,e){const n=Z(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Ng(n)?kg(n):ka(n).O_()&&Cg(n,e))}function ua(t,e){const n=Z(t),r=ka(n);n.Ia.delete(e),r.O_()&&RS(n,e),n.Ia.size===0&&(r.O_()?r.L_():Ks(n)&&n.Va.set("Unknown"))}function Cg(t,e){if(t.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(he.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ka(t).Z_(e)}function RS(t,e){t.da.$e(e),ka(t).X_(e)}function kg(t){t.da=new l2({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),ka(t).start(),t.Va.ua()}function Ng(t){return Ks(t)&&!ka(t).x_()&&t.Ia.size>0}function Ks(t){return Z(t).Ea.size===0}function SS(t){t.da=void 0}async function mB(t){t.Va.set("Online")}async function gB(t){t.Ia.forEach(((e,n)=>{Cg(t,e)}))}async function _B(t,e){SS(t),Ng(t)?(t.Va.ha(e),kg(t)):t.Va.set("Unknown")}async function yB(t,e,n){if(t.Va.set("Online"),e instanceof FR&&e.state===2&&e.cause)try{await(async function(s,i){const o=i.cause;for(const a of i.targetIds)s.Ia.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.Ia.delete(a),s.da.removeTarget(a))})(t,e)}catch(r){G(ji,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await bh(t,r)}else if(e instanceof Ou?t.da.Xe(e):e instanceof MR?t.da.st(e):t.da.tt(e),!n.isEqual(he.min()))try{const r=await mS(t.localStore);n.compareTo(r)>=0&&await(function(i,o){const a=i.da.Tt(o);return a.targetChanges.forEach(((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const h=i.Ia.get(u);h&&i.Ia.set(u,h.withResumeToken(c.resumeToken,o))}})),a.targetMismatches.forEach(((c,u)=>{const h=i.Ia.get(c);if(!h)return;i.Ia.set(c,h.withResumeToken(ct.EMPTY_BYTE_STRING,h.snapshotVersion)),RS(i,c);const d=new Pr(h.target,c,u,h.sequenceNumber);Cg(i,d)})),i.remoteSyncer.applyRemoteEvent(a)})(t,n)}catch(r){G(ji,"Failed to raise snapshot:",r),await bh(t,r)}}async function bh(t,e,n){if(!$s(e))throw e;t.Ea.add(1),await Pa(t),t.Va.set("Offline"),n||(n=()=>mS(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{G(ji,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Nl(t)}))}function PS(t,e){return e().catch((n=>bh(t,n,e)))}async function Ca(t){const e=Z(t),n=Ms(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Ps;for(;IB(e);)try{const s=await eB(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,EB(e,s)}catch(s){await bh(e,s)}CS(e)&&kS(e)}function IB(t){return Ks(t)&&t.Ta.length<10}function EB(t,e){t.Ta.push(e);const n=Ms(t);n.O_()&&n.Y_&&n.ea(e.mutations)}function CS(t){return Ks(t)&&!Ms(t).x_()&&t.Ta.length>0}function kS(t){Ms(t).start()}async function TB(t){Ms(t).ra()}async function wB(t){const e=Ms(t);for(const n of t.Ta)e.ea(n.mutations)}async function vB(t,e,n){const r=t.Ta.shift(),s=mg.from(r,e,n);await PS(t,(()=>t.remoteSyncer.applySuccessfulWrite(s))),await Ca(t)}async function AB(t,e){e&&Ms(t).Y_&&await(async function(r,s){if((function(o){return xR(o)&&o!==M.ABORTED})(s.code)){const i=r.Ta.shift();Ms(r).B_(),await PS(r,(()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s))),await Ca(r)}})(t,e),CS(t)&&kS(t)}async function iT(t,e){const n=Z(t);n.asyncQueue.verifyOperationInProgress(),G(ji,"RemoteStore received new credentials");const r=Ks(n);n.Ea.add(3),await Pa(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Nl(n)}async function Gp(t,e){const n=Z(t);e?(n.Ea.delete(2),await Nl(n)):e||(n.Ea.add(2),await Pa(n),n.Va.set("Unknown"))}function ka(t){return t.ma||(t.ma=(function(n,r,s){const i=Z(n);return i.sa(),new cB(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(t.datastore,t.asyncQueue,{Zo:mB.bind(null,t),Yo:gB.bind(null,t),t_:_B.bind(null,t),J_:yB.bind(null,t)}),t.Ra.push((async e=>{e?(t.ma.B_(),Ng(t)?kg(t):t.Va.set("Unknown")):(await t.ma.stop(),SS(t))}))),t.ma}function Ms(t){return t.fa||(t.fa=(function(n,r,s){const i=Z(n);return i.sa(),new lB(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),Yo:TB.bind(null,t),t_:AB.bind(null,t),ta:wB.bind(null,t),na:vB.bind(null,t)}),t.Ra.push((async e=>{e?(t.fa.B_(),await Ca(t)):(await t.fa.stop(),t.Ta.length>0&&(G(ji,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}class Dg{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Ot,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new Dg(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new q(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Na(t,e){if(pt("AsyncQueue",`${e}: ${t}`),$s(t))return new q(M.UNAVAILABLE,`${e}: ${t}`);throw t}class Si{static emptySet(e){return new Si(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||X.comparator(n.key,r.key):(n,r)=>X.comparator(n.key,r.key),this.keyedMap=mc(),this.sortedSet=new Qe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Si)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Si;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class oT{constructor(){this.ga=new Qe(X.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):re(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class qi{constructor(e,n,r,s,i,o,a,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach((a=>{o.push({type:0,doc:a})})),new qi(e,n,Si.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Rl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}class bB{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class RB{constructor(){this.queries=aT(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=Z(n),i=s.queries;s.queries=aT(),i.forEach(((o,a)=>{for(const c of a.ba)c.onError(r)}))})(this,new q(M.ABORTED,"Firestore shutting down"))}}function aT(){return new Wr((t=>IR(t)),Rl)}async function Vg(t,e){const n=Z(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.Sa()&&e.Da()&&(r=2):(i=new bB,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=Na(o,`Initialization of query '${_o(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.ba.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&Og(n)}async function xg(t,e){const n=Z(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.ba.indexOf(e);o>=0&&(i.ba.splice(o,1),i.ba.length===0?s=e.Da()?0:1:!i.Sa()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function SB(t,e){const n=Z(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.ba)a.Fa(s)&&(r=!0);o.wa=s}}r&&Og(n)}function PB(t,e,n){const r=Z(t),s=r.queries.get(e);if(s)for(const i of s.ba)i.onError(n);r.queries.delete(e)}function Og(t){t.Ca.forEach((e=>{e.next()}))}var Kp,cT;(cT=Kp||(Kp={})).Ma="default",cT.Cache="cache";class Lg{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new qi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=qi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Kp.Cache}}class NS{constructor(e,n){this.qa=e,this.byteLength=n}Ua(){return"metadata"in this.qa}}class lT{constructor(e){this.serializer=e}Ks(e){return ar(this.serializer,e)}qs(e){return e.metadata.exists?md(this.serializer,e.document,!1):Ye.newNoDocument(this.Ks(e.metadata.name),this.Us(e.metadata.readTime))}Us(e){return mt(e)}}class Mg{constructor(e,n){this.$a=e,this.serializer=n,this.Wa=[],this.Qa=[],this.collectionGroups=new Set,this.progress=DS(e)}get queries(){return this.Wa}get documents(){return this.Qa}Ga(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.qa.namedQuery)this.Wa.push(e.qa.namedQuery);else if(e.qa.documentMetadata){this.Qa.push({metadata:e.qa.documentMetadata}),e.qa.documentMetadata.exists||++n;const r=be.fromString(e.qa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.qa.document&&(this.Qa[this.Qa.length-1].document=e.qa.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,{...this.progress}):null}za(e){const n=new Map,r=new lT(this.serializer);for(const s of e)if(s.metadata.queries){const i=r.Ks(s.metadata.name);for(const o of s.metadata.queries){const a=(n.get(o)||Te()).add(i);n.set(o,a)}}return n}async ja(e){const n=await tB(e,new lT(this.serializer),this.Qa,this.$a.id),r=this.za(this.documents);for(const s of this.Wa)await nB(e,s,r.get(s.name));return this.progress.taskState="Success",{progress:this.progress,Ha:this.collectionGroups,Ja:n}}}function DS(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}class VS{constructor(e){this.key=e}}class xS{constructor(e){this.key=e}}class OS{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Te(),this.mutatedKeys=Te(),this.eu=TR(e),this.tu=new Si(this.eu)}get nu(){return this.Za}ru(e,n){const r=n?n.iu:new oT,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((h,d)=>{const f=s.get(h),m=Sl(this.query,d)?d:null,I=!!f&&this.mutatedKeys.has(f.key),T=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let k=!1;f&&m?f.data.isEqual(m.data)?I!==T&&(r.track({type:3,doc:m}),k=!0):this.su(f,m)||(r.track({type:2,doc:m}),k=!0,(c&&this.eu(m,c)>0||u&&this.eu(m,u)<0)&&(a=!0)):!f&&m?(r.track({type:0,doc:m}),k=!0):f&&!m&&(r.track({type:1,doc:f}),k=!0,(c||u)&&(a=!0)),k&&(m?(o=o.add(m),i=T?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{tu:o,iu:r,Ss:a,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort(((h,d)=>(function(m,I){const T=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return re(20277,{Vt:k})}};return T(m)-T(I)})(h.type,d.type)||this.eu(h.doc,d.doc))),this.ou(r),s=s??!1;const a=n&&!s?this._u():[],c=this.Ya.size===0&&this.current&&!s?1:0,u=c!==this.Xa;return this.Xa=c,o.length!==0||u?{snapshot:new qi(this.query,e.tu,i,o,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new oT,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Za=this.Za.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Za=this.Za.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Te(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))}));const n=[];return e.forEach((r=>{this.Ya.has(r)||n.push(new xS(r))})),this.Ya.forEach((r=>{e.has(r)||n.push(new VS(r))})),n}cu(e){this.Za=e.ks,this.Ya=Te();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return qi.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Ws="SyncEngine";class CB{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class kB{constructor(e){this.key=e,this.hu=!1}}class NB{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Wr((a=>IR(a)),Rl),this.Iu=new Map,this.Eu=new Set,this.Ru=new Qe(X.comparator),this.Au=new Map,this.Vu=new Tg,this.du={},this.mu=new Map,this.fu=Bi.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function DB(t,e,n=!0){const r=wd(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await LS(r,e,n,!0),s}async function VB(t,e){const n=wd(t);await LS(n,e,!0,!1)}async function LS(t,e,n,r){const s=await ca(t.localStore,Qt(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await Fg(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&Td(t.remoteStore,s),a}async function Fg(t,e,n,r,s){t.pu=(d,f,m)=>(async function(T,k,V,N){let _=k.view.ru(V);_.Ss&&(_=await wh(T.localStore,k.query,!1).then((({documents:v})=>k.view.ru(v,_))));const C=N&&N.targetChanges.get(k.targetId),x=N&&N.targetMismatches.get(k.targetId)!=null,U=k.view.applyChanges(_,T.isPrimaryClient,C,x);return Wp(T,k.targetId,U.au),U.snapshot})(t,d,f,m);const i=await wh(t.localStore,e,!0),o=new OS(e,i.ks),a=o.ru(i.documents),c=kl.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),u=o.applyChanges(a,t.isPrimaryClient,c);Wp(t,n,u.au);const h=new CB(e,n,o);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function xB(t,e,n){const r=Z(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter((o=>!Rl(o,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await la(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),n&&ua(r.remoteStore,s.targetId),ha(r,s.targetId)})).catch(Hs)):(ha(r,s.targetId),await la(r.localStore,s.targetId,!0))}async function OB(t,e){const n=Z(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),ua(n.remoteStore,r.targetId))}async function LB(t,e,n){const r=qg(t);try{const s=await(function(o,a){const c=Z(o),u=Fe.now(),h=a.reduce(((m,I)=>m.add(I.key)),Te());let d,f;return c.persistence.runTransaction("Locally write mutations","readwrite",(m=>{let I=un(),T=Te();return c.xs.getEntries(m,h).next((k=>{I=k,I.forEach(((V,N)=>{N.isValidDocument()||(T=T.add(V))}))})).next((()=>c.localDocuments.getOverlayedDocuments(m,I))).next((k=>{d=k;const V=[];for(const N of a){const _=i2(N,d.get(N.key).overlayedDocument);_!=null&&V.push(new zr(N.key,_,cR(_.value.mapValue),st.exists(!0)))}return c.mutationQueue.addMutationBatch(m,u,V,a)})).next((k=>{f=k;const V=k.applyToLocalDocumentSet(d,T);return c.documentOverlayCache.saveOverlays(m,k.batchId,V)}))})).then((()=>({batchId:f.batchId,changes:vR(d)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),(function(o,a,c){let u=o.du[o.currentUser.toKey()];u||(u=new Qe(ye)),u=u.insert(a,c),o.du[o.currentUser.toKey()]=u})(r,s.batchId,n),await Qr(r,s.changes),await Ca(r.remoteStore)}catch(s){const i=Na(s,"Failed to persist write");n.reject(i)}}async function MS(t,e){const n=Z(t);try{const r=await Z2(n.localStore,e);e.targetChanges.forEach(((s,i)=>{const o=n.Au.get(i);o&&(ae(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?ae(o.hu,14607):s.removedDocuments.size>0&&(ae(o.hu,42227),o.hu=!1))})),await Qr(n,r,e)}catch(r){await Hs(r)}}function uT(t,e,n){const r=Z(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach(((i,o)=>{const a=o.view.va(e);a.snapshot&&s.push(a.snapshot)})),(function(o,a){const c=Z(o);c.onlineState=a;let u=!1;c.queries.forEach(((h,d)=>{for(const f of d.ba)f.va(a)&&(u=!0)})),u&&Og(c)})(r.eventManager,e),s.length&&r.Pu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function MB(t,e,n){const r=Z(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new Qe(X.comparator);o=o.insert(i,Ye.newNoDocument(i,he.min()));const a=Te().add(i),c=new Cl(he.min(),new Map,new Qe(ye),o,a);await MS(r,c),r.Ru=r.Ru.remove(i),r.Au.delete(e),jg(r)}else await la(r.localStore,e,!1).then((()=>ha(r,e,n))).catch(Hs)}async function FB(t,e){const n=Z(t),r=e.batch.batchId;try{const s=await X2(n.localStore,e);Bg(n,r,null),Ug(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Qr(n,s)}catch(s){await Hs(s)}}async function UB(t,e,n){const r=Z(t);try{const s=await(function(o,a){const c=Z(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",(u=>{let h;return c.mutationQueue.lookupMutationBatch(u,a).next((d=>(ae(d!==null,37113),h=d.keys(),c.mutationQueue.removeMutationBatch(u,d)))).next((()=>c.mutationQueue.performConsistencyCheck(u))).next((()=>c.documentOverlayCache.removeOverlaysForBatchId(u,h,a))).next((()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h))).next((()=>c.localDocuments.getDocuments(u,h)))}))})(r.localStore,e);Bg(r,e,n),Ug(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Qr(r,s)}catch(s){await Hs(s)}}async function BB(t,e){const n=Z(t);Ks(n.remoteStore)||G(Ws,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await(function(o){const a=Z(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c)))})(n.localStore);if(r===Ps)return void e.resolve();const s=n.mu.get(r)||[];s.push(e),n.mu.set(r,s)}catch(r){const s=Na(r,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}function Ug(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function Bg(t,e,n){const r=Z(t);let s=r.du[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.du[r.currentUser.toKey()]=s}}function ha(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Vu.Gr(e).forEach((r=>{t.Vu.containsKey(r)||FS(t,r)}))}function FS(t,e){t.Eu.delete(e.path.canonicalString());const n=t.Ru.get(e);n!==null&&(ua(t.remoteStore,n),t.Ru=t.Ru.remove(e),t.Au.delete(n),jg(t))}function Wp(t,e,n){for(const r of n)r instanceof VS?(t.Vu.addReference(r.key,e),jB(t,r)):r instanceof xS?(G(Ws,"Document no longer in limbo: "+r.key),t.Vu.removeReference(r.key,e),t.Vu.containsKey(r.key)||FS(t,r.key)):re(19791,{wu:r})}function jB(t,e){const n=e.key,r=n.path.canonicalString();t.Ru.get(n)||t.Eu.has(r)||(G(Ws,"New document in limbo: "+n),t.Eu.add(r),jg(t))}function jg(t){for(;t.Eu.size>0&&t.Ru.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new X(be.fromString(e)),r=t.fu.next();t.Au.set(r,new kB(n)),t.Ru=t.Ru.insert(n,r),Td(t.remoteStore,new Pr(Qt(ba(n.path)),r,"TargetPurposeLimboResolution",cn.ce))}}async function Qr(t,e,n){const r=Z(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach(((a,c)=>{o.push(r.pu(c,e,n).then((u=>{if((u||n)&&r.isPrimaryClient){const h=u?!u.fromCache:n?.targetChanges.get(c.targetId)?.current;r.sharedClientState.updateQueryState(c.targetId,h?"current":"not-current")}if(u){s.push(u);const h=bg.Es(c.targetId,u);i.push(h)}})))})),await Promise.all(o),r.Pu.J_(s),await(async function(c,u){const h=Z(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",(d=>O.forEach(u,(f=>O.forEach(f.Ts,(m=>h.persistence.referenceDelegate.addReference(d,f.targetId,m))).next((()=>O.forEach(f.Is,(m=>h.persistence.referenceDelegate.removeReference(d,f.targetId,m)))))))))}catch(d){if(!$s(d))throw d;G(Rg,"Failed to update sequence numbers: "+d)}for(const d of u){const f=d.targetId;if(!d.fromCache){const m=h.vs.get(f),I=m.snapshotVersion,T=m.withLastLimboFreeSnapshotVersion(I);h.vs=h.vs.insert(f,T)}}})(r.localStore,i))}async function qB(t,e){const n=Z(t);if(!n.currentUser.isEqual(e)){G(Ws,"User change. New user:",e.toKey());const r=await pS(n.localStore,e);n.currentUser=e,(function(i,o){i.mu.forEach((a=>{a.forEach((c=>{c.reject(new q(M.CANCELLED,o))}))})),i.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Qr(n,r.Ns)}}function HB(t,e){const n=Z(t),r=n.Au.get(e);if(r&&r.hu)return Te().add(r.key);{let s=Te();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const a=n.Tu.get(o);s=s.unionWith(a.view.nu)}return s}}async function $B(t,e){const n=Z(t),r=await wh(n.localStore,e.query,!0),s=e.view.cu(r);return n.isPrimaryClient&&Wp(n,e.targetId,s.au),s}async function GB(t,e){const n=Z(t);return yS(n.localStore,e).then((r=>Qr(n,r)))}async function KB(t,e,n,r){const s=Z(t),i=await(function(a,c){const u=Z(a),h=Z(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",(d=>h.Xn(d,c).next((f=>f?u.localDocuments.getDocuments(d,f):O.resolve(null)))))})(s.localStore,e);i!==null?(n==="pending"?await Ca(s.remoteStore):n==="acknowledged"||n==="rejected"?(Bg(s,e,r||null),Ug(s,e),(function(a,c){Z(Z(a).mutationQueue).nr(c)})(s.localStore,e)):re(6720,"Unknown batchState",{bu:n}),await Qr(s,i)):G(Ws,"Cannot apply mutation batch with id: "+e)}async function WB(t,e){const n=Z(t);if(wd(n),qg(n),e===!0&&n.gu!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),s=await hT(n,r.toArray());n.gu=!0,await Gp(n.remoteStore,!0);for(const i of s)Td(n.remoteStore,i)}else if(e===!1&&n.gu!==!1){const r=[];let s=Promise.resolve();n.Iu.forEach(((i,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):s=s.then((()=>(ha(n,o),la(n.localStore,o,!0)))),ua(n.remoteStore,o)})),await s,await hT(n,r),(function(o){const a=Z(o);a.Au.forEach(((c,u)=>{ua(a.remoteStore,u)})),a.Vu.zr(),a.Au=new Map,a.Ru=new Qe(X.comparator)})(n),n.gu=!1,await Gp(n.remoteStore,!1)}}async function hT(t,e,n){const r=Z(t),s=[],i=[];for(const o of e){let a;const c=r.Iu.get(o);if(c&&c.length!==0){a=await ca(r.localStore,Qt(c[0]));for(const u of c){const h=r.Tu.get(u),d=await $B(r,h);d.snapshot&&i.push(d.snapshot)}}else{const u=await _S(r.localStore,o);a=await ca(r.localStore,u),await Fg(r,US(u),o,!1,a.resumeToken)}s.push(a)}return r.Pu.J_(i),s}function US(t){return gR(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function zB(t){return(function(n){return Z(Z(n).persistence).hs()})(Z(t).localStore)}async function QB(t,e,n,r){const s=Z(t);if(s.gu)return void G(Ws,"Ignoring unexpected query state notification.");const i=s.Iu.get(e);if(i&&i.length>0)switch(n){case"current":case"not-current":{const o=await yS(s.localStore,ER(i[0])),a=Cl.createSynthesizedRemoteEventForCurrentChange(e,n==="current",ct.EMPTY_BYTE_STRING);await Qr(s,o,a);break}case"rejected":await la(s.localStore,e,!0),ha(s,e,r);break;default:re(64155,n)}}async function JB(t,e,n){const r=wd(t);if(r.gu){for(const s of e){if(r.Iu.has(s)&&r.sharedClientState.isActiveQueryTarget(s)){G(Ws,"Adding an already active target "+s);continue}const i=await _S(r.localStore,s),o=await ca(r.localStore,i);await Fg(r,US(i),o.targetId,!1,o.resumeToken),Td(r.remoteStore,o)}for(const s of n)r.Iu.has(s)&&await la(r.localStore,s,!1).then((()=>{ua(r.remoteStore,s),ha(r,s)})).catch(Hs)}}function wd(t){const e=Z(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=MS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=HB.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=MB.bind(null,e),e.Pu.J_=SB.bind(null,e.eventManager),e.Pu.yu=PB.bind(null,e.eventManager),e}function qg(t){const e=Z(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=FB.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=UB.bind(null,e),e}function YB(t,e,n){const r=Z(t);(async function(i,o,a){try{const c=await o.getMetadata();if(await(function(m,I){const T=Z(m),k=mt(I.createTime);return T.persistence.runTransaction("hasNewerBundle","readonly",(V=>T.Pi.getBundleMetadata(V,I.id))).then((V=>!!V&&V.createTime.compareTo(k)>=0))})(i.localStore,c))return await o.close(),a._completeWith((function(m){return{taskState:"Success",documentsLoaded:m.totalDocuments,bytesLoaded:m.totalBytes,totalDocuments:m.totalDocuments,totalBytes:m.totalBytes}})(c)),Promise.resolve(new Set);a._updateProgress(DS(c));const u=new Mg(c,o.serializer);let h=await o.Su();for(;h;){const f=await u.Ga(h);f&&a._updateProgress(f),h=await o.Su()}const d=await u.ja(i.localStore);return await Qr(i,d.Ja,void 0),await(function(m,I){const T=Z(m);return T.persistence.runTransaction("Save bundle","readwrite",(k=>T.Pi.saveBundleMetadata(k,I)))})(i.localStore,c),a._completeWith(d.progress),Promise.resolve(d.Ha)}catch(c){return bn(Ws,`Loading bundle failed with ${c}`),a._failWith(c),Promise.resolve(new Set)}})(r,e,n).then((s=>{r.sharedClientState.notifyBundleLoaded(s)}))}class da{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=zi(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return fS(this.persistence,new dS,e.initialUser,this.serializer)}Cu(e){return new wg(Ed.Vi,this.serializer)}Du(e){return new vS}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}da.provider={build:()=>new da};class Hg extends da{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ae(this.persistence.referenceDelegate instanceof Th,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new oS(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?$t.withCacheSize(this.cacheSizeBytes):$t.DEFAULT;return new wg((r=>Th.Vi(r,n)),this.serializer)}}class $g extends da{constructor(e,n,r){super(),this.xu=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await qg(this.xu.syncEngine),await Ca(this.xu.remoteStore),await this.persistence.zi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return fS(this.persistence,new dS,e.initialUser,this.serializer)}Fu(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new oS(r,e.asyncQueue,n)}Mu(e,n){const r=new sU(n,this.persistence);return new rU(e.asyncQueue,r)}Cu(e){const n=Ag(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?$t.withCacheSize(this.cacheSizeBytes):$t.DEFAULT;return new vg(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,AS(),Mu(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new vS}}class BS extends $g{constructor(e,n){super(e,n,!1),this.xu=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.xu.syncEngine;this.sharedClientState instanceof Nf&&(this.sharedClientState.syncEngine={So:KB.bind(null,n),Do:QB.bind(null,n),Co:JB.bind(null,n),hs:zB.bind(null,n),bo:GB.bind(null,n)},await this.sharedClientState.start()),await this.persistence.zi((async r=>{await WB(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))}Du(e){const n=AS();if(!Nf.v(n))throw new q(M.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Ag(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Nf(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class Fs{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>uT(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=qB.bind(null,this.syncEngine),await Gp(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new RB})()}createDatastore(e){const n=zi(e.databaseInfo.databaseId),r=aB(e.databaseInfo);return dB(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,s,i,o,a){return new pB(r,s,i,o,a)})(this.localStore,this.datastore,e.asyncQueue,(n=>uT(this.syncEngine,n,0)),(function(){return rT.v()?new rT:new rB})())}createSyncEngine(e,n){return(function(s,i,o,a,c,u,h){const d=new NB(s,i,o,a,c,u);return h&&(d.gu=!0),d})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=Z(n);G(ji,"RemoteStore shutting down."),r.Ea.add(5),await Pa(r),r.Aa.shutdown(),r.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Fs.provider={build:()=>new Fs};function dT(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}class vd{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):pt("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}class XB{constructor(e,n){this.Bu=e,this.serializer=n,this.metadata=new Ot,this.buffer=new Uint8Array,this.Lu=(function(){return new TextDecoder("utf-8")})(),this.ku().then((r=>{r&&r.Ua()?this.metadata.resolve(r.qa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.qa)}`))}),(r=>this.metadata.reject(r)))}close(){return this.Bu.cancel()}async getMetadata(){return this.metadata.promise}async Su(){return await this.getMetadata(),this.ku()}async ku(){const e=await this.Ku();if(e===null)return null;const n=this.Lu.decode(e),r=Number(n);isNaN(r)&&this.qu(`length string (${n}) is not valid number`);const s=await this.Uu(r);return new NS(JSON.parse(s),e.length+r)}$u(){return this.buffer.findIndex((e=>e===123))}async Ku(){for(;this.$u()<0&&!await this.Wu(););if(this.buffer.length===0)return null;const e=this.$u();e<0&&this.qu("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async Uu(e){for(;this.buffer.length<e;)await this.Wu()&&this.qu("Reached the end of bundle when more is expected.");const n=this.Lu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}qu(e){throw this.Bu.cancel(),new Error(`Invalid bundle format: ${e}`)}async Wu(){const e=await this.Bu.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}class ZB{constructor(e,n){this.bundleData=e,this.serializer=n,this.cursor=0,this.elements=[];let r=this.Su();if(!r||!r.Ua())throw new Error(`The first element of the bundle is not a metadata object, it is
         ${JSON.stringify(r?.qa)}`);this.metadata=r;do r=this.Su(),r!==null&&this.elements.push(r);while(r!==null)}getMetadata(){return this.metadata}Qu(){return this.elements}Su(){if(this.cursor===this.bundleData.length)return null;const e=this.Ku(),n=this.Uu(e);return new NS(JSON.parse(n),e)}Uu(e){if(this.cursor+e>this.bundleData.length)throw new q(M.INTERNAL,"Reached the end of bundle when more is expected.");return this.bundleData.slice(this.cursor,this.cursor+=e)}Ku(){const e=this.cursor;let n=this.cursor;for(;n<this.bundleData.length;){if(this.bundleData[n]==="{"){if(n===e)throw new Error("First character is a bracket and not a number");return this.cursor=n,Number(this.bundleData.slice(e,n))}n++}throw new Error("Reached the end of bundle when more is expected.")}}let e4=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new q(M.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await(async function(s,i){const o=Z(s),a={documents:i.map((d=>ll(o.serializer,d)))},c=await o.jo("BatchGetDocuments",o.serializer.databaseId,be.emptyPath(),a,i.length),u=new Map;c.forEach((d=>{const f=m2(o.serializer,d);u.set(f.key.toString(),f)}));const h=[];return i.forEach((d=>{const f=u.get(d.toString());ae(!!f,55234,{key:d}),h.push(f)})),h})(this.datastore,e);return n.forEach((r=>this.recordVersion(r))),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Sa(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((n=>{e.delete(n.key.toString())})),e.forEach(((n,r)=>{const s=X.fromPath(r);this.mutations.push(new fg(s,this.precondition(s)))})),await(async function(r,s){const i=Z(r),o={writes:s.map((a=>ul(i.serializer,a)))};await i.Wo("Commit",i.serializer.databaseId,be.emptyPath(),o)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw re(50498,{Gu:e.constructor.name});n=he.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new q(M.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(he.min())?st.exists(!1):st.updateTime(n):st.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(he.min()))throw new q(M.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return st.updateTime(n)}return st.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};class t4{constructor(e,n,r,s,i){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=s,this.deferred=i,this.zu=r.maxAttempts,this.M_=new Pg(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Hu()}Hu(){this.M_.p_((async()=>{const e=new e4(this.datastore),n=this.Ju(e);n&&n.then((r=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(r)})).catch((s=>{this.Zu(s)}))))})).catch((r=>{this.Zu(r)}))}))}Ju(e){try{const n=this.updateFunction(e);return!vl(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Zu(e){this.zu>0&&this.Xu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Hu(),Promise.resolve())))):this.deferred.reject(e)}Xu(e){if(e?.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!xR(n)}return!1}}const Us="FirestoreClient";class n4{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this._databaseInfo=s,this.user=Nt.UNAUTHENTICATED,this.clientId=sd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,(async o=>{G(Us,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,(o=>(G(Us,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ot;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Na(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Vf(t,e){t.asyncQueue.verifyOperationInProgress(),G(Us,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async s=>{r.isEqual(s)||(await pS(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function fT(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Gg(t);G(Us,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>iT(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,s)=>iT(e.remoteStore,s))),t._onlineComponents=e}async function Gg(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){G(Us,"Using user provided OfflineComponentProvider");try{await Vf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(s){return s.name==="FirebaseError"?s.code===M.FAILED_PRECONDITION||s.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(n))throw n;bn("Error using user provided cache. Falling back to memory cache: "+n),await Vf(t,new da)}}else G(Us,"Using default OfflineComponentProvider"),await Vf(t,new Hg(void 0));return t._offlineComponents}async function Ad(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(G(Us,"Using user provided OnlineComponentProvider"),await fT(t,t._uninitializedComponentsProvider._online)):(G(Us,"Using default OnlineComponentProvider"),await fT(t,new Fs))),t._onlineComponents}function jS(t){return Gg(t).then((e=>e.persistence))}function Da(t){return Gg(t).then((e=>e.localStore))}function qS(t){return Ad(t).then((e=>e.remoteStore))}function Kg(t){return Ad(t).then((e=>e.syncEngine))}function HS(t){return Ad(t).then((e=>e.datastore))}async function fa(t){const e=await Ad(t),n=e.eventManager;return n.onListen=DB.bind(null,e.syncEngine),n.onUnlisten=xB.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=VB.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=OB.bind(null,e.syncEngine),n}function r4(t){return t.asyncQueue.enqueue((async()=>{const e=await jS(t),n=await qS(t);return e.setNetworkEnabled(!0),(function(s){const i=Z(s);return i.Ea.delete(0),Nl(i)})(n)}))}function s4(t){return t.asyncQueue.enqueue((async()=>{const e=await jS(t),n=await qS(t);return e.setNetworkEnabled(!1),(async function(s){const i=Z(s);i.Ea.add(0),await Pa(i),i.Va.set("Offline")})(n)}))}function i4(t,e,n,r){const s=new vd(r),i=new Lg(e,s,n);return t.asyncQueue.enqueueAndForget((async()=>Vg(await fa(t),i))),()=>{s.Nu(),t.asyncQueue.enqueueAndForget((async()=>xg(await fa(t),i)))}}function o4(t,e){const n=new Ot;return t.asyncQueue.enqueueAndForget((async()=>(async function(s,i,o){try{const a=await(function(u,h){const d=Z(u);return d.persistence.runTransaction("read document","readonly",(f=>d.localDocuments.getDocument(f,h)))})(s,i);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new q(M.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const c=Na(a,`Failed to get document '${i} from cache`);o.reject(c)}})(await Da(t),e,n))),n.promise}function $S(t,e,n={}){const r=new Ot;return t.asyncQueue.enqueueAndForget((async()=>(function(i,o,a,c,u){const h=new vd({next:f=>{h.Nu(),o.enqueueAndForget((()=>xg(i,d)));const m=f.docs.has(a);!m&&f.fromCache?u.reject(new q(M.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&f.fromCache&&c&&c.source==="server"?u.reject(new q(M.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(f)},error:f=>u.reject(f)}),d=new Lg(ba(a.path),h,{includeMetadataChanges:!0,Ka:!0});return Vg(i,d)})(await fa(t),t.asyncQueue,e,n,r))),r.promise}function a4(t,e){const n=new Ot;return t.asyncQueue.enqueueAndForget((async()=>(async function(s,i,o){try{const a=await wh(s,i,!0),c=new OS(i,a.ks),u=c.ru(a.documents),h=c.applyChanges(u,!1);o.resolve(h.snapshot)}catch(a){const c=Na(a,`Failed to execute query '${i} against cache`);o.reject(c)}})(await Da(t),e,n))),n.promise}function GS(t,e,n={}){const r=new Ot;return t.asyncQueue.enqueueAndForget((async()=>(function(i,o,a,c,u){const h=new vd({next:f=>{h.Nu(),o.enqueueAndForget((()=>xg(i,d))),f.fromCache&&c.source==="server"?u.reject(new q(M.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(f)},error:f=>u.reject(f)}),d=new Lg(a,h,{includeMetadataChanges:!0,Ka:!0});return Vg(i,d)})(await fa(t),t.asyncQueue,e,n,r))),r.promise}function c4(t,e,n){const r=new Ot;return t.asyncQueue.enqueueAndForget((async()=>{try{const s=await HS(t);r.resolve((async function(o,a,c){const u=Z(o),{request:h,gt:d,parent:f}=GR(u.serializer,_R(a),c);u.connection.Ko||delete h.parent;const m=(await u.jo("RunAggregationQuery",u.serializer.databaseId,f,h,1)).filter((T=>!!T.result));ae(m.length===1,64727);const I=m[0].result?.aggregateFields;return Object.keys(I).reduce(((T,k)=>(T[d[k]]=I[k],T)),{})})(s,e,n))}catch(s){r.reject(s)}})),r.promise}function l4(t,e){const n=new Ot;return t.asyncQueue.enqueueAndForget((async()=>LB(await Kg(t),e,n))),n.promise}function u4(t,e){const n=new vd(e);return t.asyncQueue.enqueueAndForget((async()=>(function(s,i){Z(s).Ca.add(i),i.next()})(await fa(t),n))),()=>{n.Nu(),t.asyncQueue.enqueueAndForget((async()=>(function(s,i){Z(s).Ca.delete(i)})(await fa(t),n)))}}function h4(t,e,n){const r=new Ot;return t.asyncQueue.enqueueAndForget((async()=>{const s=await HS(t);new t4(t.asyncQueue,s,n,e,r).ju()})),r.promise}function d4(t,e,n,r){const s=(function(o,a){let c;return c=typeof o=="string"?LR().encode(o):o,(function(h,d){return new XB(h,d)})((function(h,d){if(h instanceof Uint8Array)return dT(h,d);if(h instanceof ArrayBuffer)return dT(new Uint8Array(h),d);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")})(c),a)})(n,zi(e));t.asyncQueue.enqueueAndForget((async()=>{YB(await Kg(t),s,r)}))}function f4(t,e){return t.asyncQueue.enqueue((async()=>(function(r,s){const i=Z(r);return i.persistence.runTransaction("Get named query","readonly",(o=>i.Pi.getNamedQuery(o,s)))})(await Da(t),e)))}function KS(t,e){return(function(r,s){return new ZB(r,s)})(t,e)}function p4(t,e){return t.asyncQueue.enqueue((async()=>(async function(r,s){const i=Z(r),o=i.indexManager,a=[];return i.persistence.runTransaction("Configure indexes","readwrite",(c=>o.getFieldIndexes(c).next((u=>(function(d,f,m,I,T){d=[...d],f=[...f],d.sort(m),f.sort(m);const k=d.length,V=f.length;let N=0,_=0;for(;N<V&&_<k;){const C=m(d[_],f[N]);C<0?T(d[_++]):C>0?I(f[N++]):(N++,_++)}for(;N<V;)I(f[N++]);for(;_<k;)T(d[_++])})(u,s,ZF,(h=>{a.push(o.addFieldIndex(c,h))}),(h=>{a.push(o.deleteFieldIndex(c,h))})))).next((()=>O.waitFor(a)))))})(await Da(t),e)))}function m4(t,e){return t.asyncQueue.enqueue((async()=>(function(r,s){Z(r).Cs.As=s})(await Da(t),e)))}function g4(t){return t.asyncQueue.enqueue((async()=>(function(n){const r=Z(n),s=r.indexManager;return r.persistence.runTransaction("Delete All Indexes","readwrite",(i=>s.deleteAllFieldIndexes(i)))})(await Da(t))))}function WS(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}const _4="ComponentProvider",pT=new Map;function y4(t,e,n,r,s){return new VU(t,e,n,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,WS(s.experimentalLongPollingOptions),s.useFetchStreams,s.isUsingEmulator,r)}const zS="firestore.googleapis.com",mT=!0;class gT{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new q(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=zS,this.ssl=mT}else this.host=e.host,this.ssl=e.ssl??mT;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=tS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<iS)throw new q(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Vb("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=WS(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new q(M.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new q(M.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new q(M.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Dl{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new gT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new q(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new q(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new gT(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new Nb;switch(r.type){case"firstParty":return new KF(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new q(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=pT.get(n);r&&(G(_4,"Removing Datastore"),pT.delete(n),r.terminate())})(this),Promise.resolve()}}function QS(t,e,n,r={}){t=Re(t,Dl);const s=Gi(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},a=`${e}:${n}`;s&&(Nm(`https://${a}`),Zv("Firestore",!0)),i.host!==zS&&i.host!==a&&bn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...i,host:a,ssl:s,emulatorOptions:r};if(!Kn(c,o)&&(t._setSettings(c),r.mockUserToken)){let u,h;if(typeof r.mockUserToken=="string")u=r.mockUserToken,h=Nt.MOCK_USER;else{u=Bx(r.mockUserToken,t._app?.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new q(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Nt(d)}t._authCredentials=new HF(new kb(u,h))}}class St{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new St(this.firestore,e,this._query)}}class Be{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new jn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Be(this.firestore,e,this._key)}toJSON(){return{type:Be._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Wi(n,Be._jsonSchema))return new Be(e,r||null,new X(be.fromString(n.referencePath)))}}Be._jsonSchemaVersion="firestore/documentReference/1.0",Be._jsonSchema={type:Et("string",Be._jsonSchemaVersion),referencePath:Et("string")};class jn extends St{constructor(e,n,r){super(e,n,ba(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Be(this.firestore,null,new X(e))}withConverter(e){return new jn(this.firestore,e,this._path)}}function I4(t,e,...n){if(t=ue(t),eg("collection","path",e),t instanceof Dl){const r=be.fromString(e,...n);return sE(r),new jn(t,null,r)}{if(!(t instanceof Be||t instanceof jn))throw new q(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(be.fromString(e,...n));return sE(r),new jn(t.firestore,null,r)}}function E4(t,e){if(t=Re(t,Dl),eg("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new q(M.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new St(t,null,(function(r){return new Kr(be.emptyPath(),r)})(e))}function Uc(t,e,...n){if(t=ue(t),arguments.length===1&&(e=sd.newId()),eg("doc","path",e),t instanceof Dl){const r=be.fromString(e,...n);return rE(r),new Be(t,null,new X(r))}{if(!(t instanceof Be||t instanceof jn))throw new q(M.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(be.fromString(e,...n));return rE(r),new Be(t.firestore,t instanceof jn?t.converter:null,new X(r))}}function T4(t,e){return t=ue(t),e=ue(e),(t instanceof Be||t instanceof jn)&&(e instanceof Be||e instanceof jn)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function Wg(t,e){return t=ue(t),e=ue(e),t instanceof St&&e instanceof St&&t.firestore===e.firestore&&Rl(t._query,e._query)&&t.converter===e.converter}const _T="AsyncQueue";class yT{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Pg(this,"async_queue_retry"),this._c=()=>{const r=Mu();r&&G(_T,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Mu();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Mu();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Ot;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!$s(e))throw e;G(_T,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,pt("INTERNAL UNHANDLED ERROR: ",IT(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=Dg.createAndSchedule(this,e,n,r,(i=>this.hc(i)));return this.tc.push(s),s}uc(){this.nc&&re(47125,{Pc:IT(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function IT(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class JS{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ot,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}const w4=-1;class He extends Dl{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new yT,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new yT(e),this._firestoreClient=void 0,await e}}}function v4(t,e,n){n||(n=il);const r=yl(t,"firestore");if(r.isInitialized(n)){const s=r.getImmediate({identifier:n}),i=r.getOptions(n);if(Kn(i,e))return s;throw new q(M.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new q(M.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<iS)throw new q(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&Gi(e.host)&&Nm(e.host),r.initialize({options:e,instanceIdentifier:n})}function A4(t,e){const n=typeof t=="object"?t:hA(),r=typeof t=="string"?t:e||il,s=yl(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=Fx("firestore");i&&QS(s,...i)}return s}function ot(t){if(t._terminated)throw new q(M.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||YS(t),t._firestoreClient}function YS(t){const e=t._freezeSettings(),n=y4(t._databaseId,t._app?.options.appId||"",t._persistenceKey,t._app?.options.apiKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new n4(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(s){const i=s?._online.build();return{_offline:s?._offline.build(i),_online:i}})(t._componentsProvider))}function b4(t,e){bn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return XS(t,Fs.provider,{build:r=>new $g(r,n.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}async function R4(t){bn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();XS(t,Fs.provider,{build:n=>new BS(n,e.cacheSizeBytes)})}function XS(t,e,n){if((t=Re(t,He))._firestoreClient||t._terminated)throw new q(M.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new q(M.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},YS(t)}function S4(t){if(t._initialized&&!t._terminated)throw new q(M.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Ot;return t._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await(async function(r){if(!or.v())return Promise.resolve();const s=r+hS;await or.delete(s)})(Ag(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}})),e.promise}function P4(t){return(function(n){const r=new Ot;return n.asyncQueue.enqueueAndForget((async()=>BB(await Kg(n),r))),r.promise})(ot(t=Re(t,He)))}function C4(t){return r4(ot(t=Re(t,He)))}function k4(t){return s4(ot(t=Re(t,He)))}function N4(t){return XO(t.app,"firestore",t._databaseId.database),t._delete()}function zp(t,e){const n=ot(t=Re(t,He)),r=new JS;return d4(n,t._databaseId,e,r),r}function ZS(t,e){return f4(ot(t=Re(t,He)),e).then((n=>n?new St(t,null,n.query):null))}class on{constructor(e){this._byteString=e}static fromBase64String(e){try{return new on(ct.fromBase64String(e))}catch(n){throw new q(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new on(ct.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:on._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Wi(e,on._jsonSchema))return on.fromBase64String(e.bytes)}}on._jsonSchemaVersion="firestore/bytes/1.0",on._jsonSchema={type:Et("string",on._jsonSchemaVersion),bytes:Et("string")};class Qi{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new q(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xe(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function D4(){return new Qi(vp)}class zs{constructor(e){this._methodName=e}}class qn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new q(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new q(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ye(this._lat,e._lat)||ye(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:qn._jsonSchemaVersion}}static fromJSON(e){if(Wi(e,qn._jsonSchema))return new qn(e.latitude,e.longitude)}}qn._jsonSchemaVersion="firestore/geoPoint/1.0",qn._jsonSchema={type:Et("string",qn._jsonSchemaVersion),latitude:Et("number"),longitude:Et("number")};class vn{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0})(this._values,e._values)}toJSON(){return{type:vn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Wi(e,vn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new vn(e.vectorValues);throw new q(M.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}vn._jsonSchemaVersion="firestore/vectorValue/1.0",vn._jsonSchema={type:Et("string",vn._jsonSchemaVersion),vectorValues:Et("object")};const V4=/^__.*__$/;class x4{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new zr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ra(e,this.data,n,this.fieldTransforms)}}class eP{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new zr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function tP(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw re(40011,{dataSource:t})}}class bd{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.validatePath(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new bd({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const n=this.path?.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){const n=this.path?.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Rh(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(tP(this.dataSource)&&V4.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class O4{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||zi(e)}createContext(e,n,r,s=!1){return new bd({dataSource:e,methodName:n,targetDoc:r,path:Xe.emptyPath(),arrayElement:!1,hasConverter:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ji(t){const e=t._freezeSettings(),n=zi(t._databaseId);return new O4(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Rd(t,e,n,r,s,i={}){const o=t.createContext(i.merge||i.mergeFields?2:0,e,n,s);e_("Data must be an object, but it was:",o,r);const a=sP(r,o);let c,u;if(i.merge)c=new ln(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const d of i.mergeFields){const f=Br(e,d,n);if(!o.contains(f))throw new q(M.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);oP(h,f)||h.push(f)}c=new ln(h),u=o.fieldTransforms.filter((d=>c.covers(d.field)))}else c=null,u=o.fieldTransforms;return new x4(new Dt(a),c,u)}class Vl extends zs{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Vl}}function nP(t,e,n){return new bd({dataSource:3,targetDoc:e.settings.targetDoc,methodName:t._methodName,arrayElement:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class zg extends zs{_toFieldTransform(e){return new Pl(e.path,new ia)}isEqual(e){return e instanceof zg}}class Qg extends zs{constructor(e,n){super(e),this.Ac=n}_toFieldTransform(e){const n=nP(this,e,!0),r=this.Ac.map((i=>Yi(i,n))),s=new Li(r);return new Pl(e.path,s)}isEqual(e){return e instanceof Qg&&Kn(this.Ac,e.Ac)}}class Jg extends zs{constructor(e,n){super(e),this.Ac=n}_toFieldTransform(e){const n=nP(this,e,!0),r=this.Ac.map((i=>Yi(i,n))),s=new Mi(r);return new Pl(e.path,s)}isEqual(e){return e instanceof Jg&&Kn(this.Ac,e.Ac)}}class Yg extends zs{constructor(e,n){super(e),this.Vc=n}_toFieldTransform(e){const n=new oa(e.serializer,RR(e.serializer,this.Vc));return new Pl(e.path,n)}isEqual(e){return e instanceof Yg&&this.Vc===e.Vc}}function Xg(t,e,n,r){const s=t.createContext(1,e,n);e_("Data must be an object, but it was:",s,r);const i=[],o=Dt.empty();Gs(r,((c,u)=>{const h=t_(e,c,n);u=ue(u);const d=s.childContextForFieldPath(h);if(u instanceof Vl)i.push(h);else{const f=Yi(u,d);f!=null&&(i.push(h),o.set(h,f))}}));const a=new ln(i);return new eP(o,a,s.fieldTransforms)}function Zg(t,e,n,r,s,i){const o=t.createContext(1,e,n),a=[Br(e,r,n)],c=[s];if(i.length%2!=0)throw new q(M.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<i.length;f+=2)a.push(Br(e,i[f])),c.push(i[f+1]);const u=[],h=Dt.empty();for(let f=a.length-1;f>=0;--f)if(!oP(u,a[f])){const m=a[f];let I=c[f];I=ue(I);const T=o.childContextForFieldPath(m);if(I instanceof Vl)u.push(m);else{const k=Yi(I,T);k!=null&&(u.push(m),h.set(m,k))}}const d=new ln(u);return new eP(h,d,o.fieldTransforms)}function rP(t,e,n,r=!1){return Yi(n,t.createContext(r?4:3,e))}function Yi(t,e){if(iP(t=ue(t)))return e_("Unsupported field value:",e,t),sP(t,e);if(t instanceof zs)return(function(r,s){if(!tP(s.dataSource))throw s.createError(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.createError(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(r,s){const i=[];let o=0;for(const a of r){let c=Yi(a,s.childContextForArray(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}})(t,e)}return(function(r,s){if((r=ue(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return RR(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Fe.fromDate(r);return{timestampValue:aa(s.serializer,i)}}if(r instanceof Fe){const i=new Fe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:aa(s.serializer,i)}}if(r instanceof qn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof on)return{bytesValue:UR(s.serializer,r._byteString)};if(r instanceof Be){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.createError(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:yg(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof vn)return(function(o,a){const c=o instanceof vn?o.toArray():o;return{mapValue:{fields:{[ag]:{stringValue:cg},[na]:{arrayValue:{values:c.map((h=>{if(typeof h!="number")throw a.createError("VectorValues must only contain numeric values.");return dg(a.serializer,h)}))}}}}}})(r,s);if(JR(r))return r._toProto(s.serializer);throw s.createError(`Unsupported field value: ${id(r)}`)})(t,e)}function sP(t,e){const n={};return Zb(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Gs(t,((r,s)=>{const i=Yi(s,e.childContextForField(r));i!=null&&(n[r]=i)})),{mapValue:{fields:n}}}function iP(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Fe||t instanceof qn||t instanceof on||t instanceof Be||t instanceof zs||t instanceof vn||JR(t))}function e_(t,e,n){if(!iP(n)||!xb(n)){const r=id(n);throw r==="an object"?e.createError(t+" a custom object"):e.createError(t+" "+r)}}function Br(t,e,n){if((e=ue(e))instanceof Qi)return e._internalPath;if(typeof e=="string")return t_(t,e);throw Rh("Field path arguments must be of type string or ",t,!1,void 0,n)}const L4=new RegExp("[~\\*/\\[\\]]");function t_(t,e,n){if(e.search(L4)>=0)throw Rh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Qi(...e.split("."))._internalPath}catch{throw Rh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Rh(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new q(M.INVALID_ARGUMENT,a+t+c)}function oP(t,e){return t.some((n=>n.isEqual(e)))}class n_{convertValue(e,n="none"){switch(xs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return rt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ur(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw re(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Gs(e,((s,i)=>{r[s]=this.convertValue(i,n)})),r}convertVectorValue(e){const n=e.fields?.[na].arrayValue?.values?.map((r=>rt(r.doubleValue)));return new vn(n)}convertGeoPoint(e){return new qn(rt(e.latitude),rt(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=hd(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(sl(e));default:return null}}convertTimestamp(e){const n=Fr(e);return new Fe(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=be.fromString(e);ae(QR(r),9688,{name:e});const s=new Vs(r.get(1),r.get(3)),i=new X(r.popFirst(5));return s.isEqual(n)||pt(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}class Qs extends n_{constructor(e){super(),this.firestore=e}convertBytes(e){return new on(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Be(this.firestore,null,n)}}function M4(){return new Vl("deleteField")}function F4(){return new zg("serverTimestamp")}function U4(...t){return new Qg("arrayUnion",t)}function B4(...t){return new Jg("arrayRemove",t)}function j4(t){return new Yg("increment",t)}function q4(t){return new vn(t)}function H4(t){const e=ot(Re(t.firestore,He)),n=e._onlineComponents?.datastore.serializer;return n===void 0?null:gd(n,Qt(t._query)).ft}function $4(t,e){const n=Xb(e,((i,o)=>new VR(o,i.aggregateType,i._internalFieldPath))),r=ot(Re(t.firestore,He)),s=r._onlineComponents?.datastore.serializer;return s===void 0?null:GR(s,_R(t._query),n,!0).request}const ET="@firebase/firestore",TT="4.10.0";function xo(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1})(t,["next","error","complete"])}class pa{constructor(e="count",n){this._internalFieldPath=n,this.type="AggregateField",this.aggregateType=e}}class aP{constructor(e,n,r){this._userDataWriter=n,this._data=r,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}_fieldsProto(){return new Dt({mapValue:{fields:this._data}}).clone().value.mapValue.fields}}class hl{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Be(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new G4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const n=this._document.data.field(Br("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class G4 extends hl{data(){return super.data()}}function cP(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new q(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class r_{}class Va extends r_{}function K4(t,e,...n){let r=[];e instanceof r_&&r.push(e),r=r.concat(n),(function(i){const o=i.filter((c=>c instanceof Xi)).length,a=i.filter((c=>c instanceof xa)).length;if(o>1||o>0&&a>0)throw new q(M.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const s of r)t=s._apply(t);return t}class xa extends Va{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new xa(e,n,r)}_apply(e){const n=this._parse(e);return uP(e._query,n),new St(e.firestore,e.converter,xp(e._query,n))}_parse(e){const n=Ji(e.firestore);return(function(i,o,a,c,u,h,d){let f;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new q(M.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){vT(d,h);const I=[];for(const T of d)I.push(wT(c,i,T));f={arrayValue:{values:I}}}else f=wT(c,i,d)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||vT(d,h),f=rP(a,o,d,h==="in"||h==="not-in");return Ce.create(u,h,f)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function W4(t,e,n){const r=e,s=Br("where",t);return xa._create(s,r,n)}class Xi extends r_{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Xi(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:Ue.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(s,i){let o=s;const a=i.getFlattenedFilters();for(const c of a)uP(o,c),o=xp(o,c)})(e._query,n),new St(e.firestore,e.converter,xp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function z4(...t){return t.forEach((e=>hP("or",e))),Xi._create("or",t)}function Q4(...t){return t.forEach((e=>hP("and",e))),Xi._create("and",t)}class Sd extends Va{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Sd(e,n)}_apply(e){const n=(function(s,i,o){if(s.startAt!==null)throw new q(M.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new q(M.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new cl(i,o)})(e._query,this._field,this._direction);return new St(e.firestore,e.converter,KU(e._query,n))}}function J4(t,e="asc"){const n=e,r=Br("orderBy",t);return Sd._create(r,n)}class xl extends Va{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new xl(e,n,r)}_apply(e){return new St(e.firestore,e.converter,_h(e._query,this._limit,this._limitType))}}function Y4(t){return Ob("limit",t),xl._create("limit",t,"F")}function X4(t){return Ob("limitToLast",t),xl._create("limitToLast",t,"L")}class Ol extends Va{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Ol(e,n,r)}_apply(e){const n=lP(e,this.type,this._docOrFields,this._inclusive);return new St(e.firestore,e.converter,WU(e._query,n))}}function Z4(...t){return Ol._create("startAt",t,!0)}function e6(...t){return Ol._create("startAfter",t,!1)}class Ll extends Va{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Ll(e,n,r)}_apply(e){const n=lP(e,this.type,this._docOrFields,this._inclusive);return new St(e.firestore,e.converter,zU(e._query,n))}}function t6(...t){return Ll._create("endBefore",t,!1)}function n6(...t){return Ll._create("endAt",t,!0)}function lP(t,e,n,r){if(n[0]=ue(n[0]),n[0]instanceof hl)return(function(i,o,a,c,u){if(!c)throw new q(M.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const h=[];for(const d of Do(i))if(d.field.isKeyField())h.push(xi(o,c.key));else{const f=c.data.field(d.field);if(ud(f))throw new q(M.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+d.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(f===null){const m=d.field.canonicalString();throw new q(M.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${m}' (used as the orderBy) does not exist.`)}h.push(f)}return new Ls(h,u)})(t._query,t.firestore._databaseId,e,n[0]._document,r);{const s=Ji(t.firestore);return(function(o,a,c,u,h,d){const f=o.explicitOrderBy;if(h.length>f.length)throw new q(M.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const m=[];for(let I=0;I<h.length;I++){const T=h[I];if(f[I].field.isKeyField()){if(typeof T!="string")throw new q(M.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof T}`);if(!ug(o)&&T.indexOf("/")!==-1)throw new q(M.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${T}' contains a slash.`);const k=o.path.child(be.fromString(T));if(!X.isDocumentKey(k))throw new q(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${k}' is not because it contains an odd number of segments.`);const V=new X(k);m.push(xi(a,V))}else{const k=rP(c,u,T);m.push(k)}}return new Ls(m,d)})(t._query,t.firestore._databaseId,s,e,n,r)}}function wT(t,e,n){if(typeof(n=ue(n))=="string"){if(n==="")throw new q(M.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ug(e)&&n.indexOf("/")!==-1)throw new q(M.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(be.fromString(n));if(!X.isDocumentKey(r))throw new q(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return xi(t,new X(r))}if(n instanceof Be)return xi(t,n._key);throw new q(M.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${id(n)}.`)}function vT(t,e){if(!Array.isArray(t)||t.length===0)throw new q(M.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function uP(t,e){const n=(function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null})(t.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new q(M.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new q(M.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function hP(t,e){if(!(e instanceof xa||e instanceof Xi))throw new q(M.INVALID_ARGUMENT,`Function ${t}() requires AppliableConstraints created with a call to 'where(...)', 'or(...)', or 'and(...)'.`)}function Pd(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class s_ extends n_{constructor(e){super(),this.firestore=e}convertBytes(e){return new on(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Be(this.firestore,null,n)}}function r6(t){return new pa("sum",Br("sum",t))}function s6(t){return new pa("avg",Br("average",t))}function dP(){return new pa("count")}function i6(t,e){return t instanceof pa&&e instanceof pa&&t.aggregateType===e.aggregateType&&t._internalFieldPath?.canonicalString()===e._internalFieldPath?.canonicalString()}function o6(t,e){return Wg(t.query,e.query)&&Kn(t.data(),e.data())}function a6(t){return fP(t,{count:dP()})}function fP(t,e){const n=Re(t.firestore,He),r=ot(n),s=Xb(e,((i,o)=>new VR(o,i.aggregateType,i._internalFieldPath)));return c4(r,t._query,s).then((i=>(function(a,c,u){const h=new Qs(a);return new aP(c,h,u)})(n,t,i)))}class c6{constructor(e){this.kind="memory",this._onlineComponentProvider=Fs.provider,this._offlineComponentProvider=e?.garbageCollector?e.garbageCollector._offlineComponentProvider:{build:()=>new Hg(void 0)}}toJSON(){return{kind:this.kind}}}class l6{constructor(e){let n;this.kind="persistent",e?.tabManager?(e.tabManager._initialize(e),n=e.tabManager):(n=pP(void 0),n._initialize(e)),this._onlineComponentProvider=n._onlineComponentProvider,this._offlineComponentProvider=n._offlineComponentProvider}toJSON(){return{kind:this.kind}}}class u6{constructor(){this.kind="memoryEager",this._offlineComponentProvider=da.provider}toJSON(){return{kind:this.kind}}}class h6{constructor(e){this.kind="memoryLru",this._offlineComponentProvider={build:()=>new Hg(e)}}toJSON(){return{kind:this.kind}}}function d6(){return new u6}function f6(t){return new h6(t?.cacheSizeBytes)}function p6(t){return new c6(t)}function m6(t){return new l6(t)}class g6{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Fs.provider,this._offlineComponentProvider={build:n=>new $g(n,e?.cacheSizeBytes,this.forceOwnership)}}}class _6{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Fs.provider,this._offlineComponentProvider={build:n=>new BS(n,e?.cacheSizeBytes)}}}function pP(t){return new g6(t?.forceOwnership)}function y6(){return new _6}const mP="NOT SUPPORTED";class Cr{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class hn extends hl{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Bc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Br("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new q(M.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=hn._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}function I6(t,e,n){if(Wi(e,hn._jsonSchema)){if(e.bundle===mP)throw new q(M.INVALID_ARGUMENT,"The provided JSON object was created in a client environment, which is not supported.");const r=zi(t._databaseId),s=KS(e.bundle,r),i=s.t(),o=new Mg(s.getMetadata(),r);for(const h of i)o.o(h);const a=o.documents;if(a.length!==1)throw new q(M.INVALID_ARGUMENT,`Expected bundle data to contain 1 document, but it contains ${a.length} documents.`);const c=md(r,a[0].document),u=new X(be.fromString(e.bundleName));return new hn(t,new s_(t),u,c,new Cr(!1,!1),n||null)}}hn._jsonSchemaVersion="firestore/documentSnapshot/1.0",hn._jsonSchema={type:Et("string",hn._jsonSchemaVersion),bundleSource:Et("string","DocumentSnapshot"),bundleName:Et("string"),bundle:Et("string")};class Bc extends hn{data(e={}){return super.data(e)}}class dn{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Cr(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new Bc(this._firestore,this._userDataWriter,r.key,r,new Cr(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new q(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map((a=>{const c=new Bc(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Cr(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}}))}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((a=>i||a.type!==3)).map((a=>{const c=new Bc(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Cr(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,h=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:T6(a.type),doc:c,oldIndex:u,newIndex:h}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new q(M.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=dn._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=sd.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach((i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function E6(t,e,n){if(Wi(e,dn._jsonSchema)){if(e.bundle===mP)throw new q(M.INVALID_ARGUMENT,"The provided JSON object was created in a client environment, which is not supported.");const r=zi(t._databaseId),s=KS(e.bundle,r),i=s.t(),o=new Mg(s.getMetadata(),r);for(const f of i)o.o(f);if(o.queries.length!==1)throw new q(M.INVALID_ARGUMENT,`Snapshot data expected 1 query but found ${o.queries.length} queries.`);const a=_d(o.queries[0].bundledQuery),c=o.documents;let u=new Si;c.map((f=>{const m=md(r,f.document);u=u.add(m)}));const h=qi.fromInitialDocuments(a,u,Te(),!1,!1),d=new St(t,n||null,a);return new dn(t,new s_(t),d,h)}}function T6(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return re(61501,{type:t})}}function w6(t,e){return t instanceof hn&&e instanceof hn?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof dn&&e instanceof dn&&t._firestore===e._firestore&&Wg(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}dn._jsonSchemaVersion="firestore/querySnapshot/1.0",dn._jsonSchema={type:Et("string",dn._jsonSchemaVersion),bundleSource:Et("string","QuerySnapshot"),bundleName:Et("string"),bundle:Et("string")};const v6={maxAttempts:5};class gP{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Ji(e)}set(e,n,r){this._verifyNotCommitted();const s=_s(e,this._firestore),i=Pd(s.converter,n,r),o=Rd(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,r);return this._mutations.push(o.toMutation(s._key,st.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const i=_s(e,this._firestore);let o;return o=typeof(n=ue(n))=="string"||n instanceof Qi?Zg(this._dataReader,"WriteBatch.update",i._key,n,r,s):Xg(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(o.toMutation(i._key,st.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=_s(e,this._firestore);return this._mutations=this._mutations.concat(new Sa(n._key,st.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new q(M.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function _s(t,e){if((t=ue(t)).firestore!==e)throw new q(M.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}class A6{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=Ji(e)}get(e){const n=_s(e,this._firestore),r=new s_(this._firestore);return this._transaction.lookup([n._key]).then((s=>{if(!s||s.length!==1)return re(24041);const i=s[0];if(i.isFoundDocument())return new hl(this._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new hl(this._firestore,r,n._key,null,n.converter);throw re(18433,{doc:i})}))}set(e,n,r){const s=_s(e,this._firestore),i=Pd(s.converter,n,r),o=Rd(this._dataReader,"Transaction.set",s._key,i,s.converter!==null,r);return this._transaction.set(s._key,o),this}update(e,n,r,...s){const i=_s(e,this._firestore);let o;return o=typeof(n=ue(n))=="string"||n instanceof Qi?Zg(this._dataReader,"Transaction.update",i._key,n,r,s):Xg(this._dataReader,"Transaction.update",i._key,n),this._transaction.update(i._key,o),this}delete(e){const n=_s(e,this._firestore);return this._transaction.delete(n._key),this}}class _P extends A6{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=_s(e,this._firestore),r=new Qs(this._firestore);return super.get(e).then((s=>new hn(this._firestore,r,n._key,s._document,new Cr(!1,!1),n.converter)))}}function b6(t,e,n){t=Re(t,He);const r={...v6,...n};(function(o){if(o.maxAttempts<1)throw new q(M.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r);const s=ot(t);return h4(s,(i=>e(new _P(t,i))),r)}function Qp(t){t=Re(t,Be);const e=Re(t.firestore,He),n=ot(e);return $S(n,t._key).then((r=>i_(e,t,r)))}function R6(t){t=Re(t,Be);const e=Re(t.firestore,He),n=ot(e),r=new Qs(e);return o4(n,t._key).then((s=>new hn(e,r,t._key,s,new Cr(s!==null&&s.hasLocalMutations,!0),t.converter)))}function S6(t){t=Re(t,Be);const e=Re(t.firestore,He),n=ot(e);return $S(n,t._key,{source:"server"}).then((r=>i_(e,t,r)))}function P6(t){t=Re(t,St);const e=Re(t.firestore,He),n=ot(e),r=new Qs(e);return cP(t._query),GS(n,t._query).then((s=>new dn(e,r,t,s)))}function C6(t){t=Re(t,St);const e=Re(t.firestore,He),n=ot(e),r=new Qs(e);return a4(n,t._query).then((s=>new dn(e,r,t,s)))}function k6(t){t=Re(t,St);const e=Re(t.firestore,He),n=ot(e),r=new Qs(e);return GS(n,t._query,{source:"server"}).then((s=>new dn(e,r,t,s)))}function yP(t,e,n){t=Re(t,Be);const r=Re(t.firestore,He),s=Pd(t.converter,e,n),i=Ji(r);return Oa(r,[Rd(i,"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,st.none())])}function N6(t,e,n,...r){t=Re(t,Be);const s=Re(t.firestore,He),i=Ji(s);let o;return o=typeof(e=ue(e))=="string"||e instanceof Qi?Zg(i,"updateDoc",t._key,e,n,r):Xg(i,"updateDoc",t._key,e),Oa(s,[o.toMutation(t._key,st.exists(!0))])}function D6(t){return Oa(Re(t.firestore,He),[new Sa(t._key,st.none())])}function V6(t,e){const n=Re(t.firestore,He),r=Uc(t),s=Pd(t.converter,e),i=Ji(t.firestore);return Oa(n,[Rd(i,"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,st.exists(!1))]).then((()=>r))}function Jp(t,...e){t=ue(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||xo(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(xo(e[r])){const u=e[r];e[r]=u.next?.bind(u),e[r+1]=u.error?.bind(u),e[r+2]=u.complete?.bind(u)}let i,o,a;if(t instanceof Be)o=Re(t.firestore,He),a=ba(t._key.path),i={next:u=>{e[r]&&e[r](i_(o,t,u))},error:e[r+1],complete:e[r+2]};else{const u=Re(t,St);o=Re(u.firestore,He),a=u._query;const h=new Qs(o);i={next:d=>{e[r]&&e[r](new dn(o,h,u,d))},error:e[r+1],complete:e[r+2]},cP(t._query)}const c=ot(o);return i4(c,a,s,i)}function x6(t,e,...n){const r=ue(t),s=(function(c){const u={bundle:"",bundleName:"",bundleSource:""},h=["bundle","bundleName","bundleSource"];for(const d of h){if(!(d in c)){u.error=`snapshotJson missing required field: ${d}`;break}const f=c[d];if(typeof f!="string"){u.error=`snapshotJson field '${d}' must be a string.`;break}if(f.length===0){u.error=`snapshotJson field '${d}' cannot be an empty string.`;break}d==="bundle"?u.bundle=f:d==="bundleName"?u.bundleName=f:d==="bundleSource"&&(u.bundleSource=f)}return u})(e);if(s.error)throw new q(M.INVALID_ARGUMENT,s.error);let i,o=0;if(typeof n[o]!="object"||xo(n[o])||(i=n[o++]),s.bundleSource==="QuerySnapshot"){let a=null;if(typeof n[o]=="object"&&xo(n[o])){const c=n[o++];a={next:c.next,error:c.error,complete:c.complete}}else a={next:n[o++],error:n[o++],complete:n[o++]};return(function(u,h,d,f,m){let I,T=!1;return zp(u,h.bundle).then((()=>ZS(u,h.bundleName))).then((V=>{V&&!T&&(m&&V.withConverter(m),I=Jp(V,d||{},f))})).catch((V=>(f.error&&f.error(V),()=>{}))),()=>{T||(T=!0,I&&I())}})(r,s,i,a,n[o])}if(s.bundleSource==="DocumentSnapshot"){let a=null;if(typeof n[o]=="object"&&xo(n[o])){const c=n[o++];a={next:c.next,error:c.error,complete:c.complete}}else a={next:n[o++],error:n[o++],complete:n[o++]};return(function(u,h,d,f,m){let I,T=!1;return zp(u,h.bundle).then((()=>{if(!T){const V=new Be(u,m||null,X.fromPath(h.bundleName));I=Jp(V,d||{},f)}})).catch((V=>(f.error&&f.error(V),()=>{}))),()=>{T||(T=!0,I&&I())}})(r,s,i,a,n[o])}throw new q(M.INVALID_ARGUMENT,`unsupported bundle source: ${s.bundleSource}`)}function O6(t,e){t=Re(t,He);const n=ot(t),r=xo(e)?e:{next:e};return u4(n,r)}function Oa(t,e){const n=ot(t);return l4(n,e)}function i_(t,e,n){const r=n.docs.get(e._key),s=new Qs(t);return new hn(t,s,e._key,r,new Cr(n.hasPendingWrites,n.fromCache),e.converter)}function L6(t){return t=Re(t,He),ot(t),new gP(t,(e=>Oa(t,e)))}function M6(t,e){t=Re(t,He);const n=ot(t);if(!n._uninitializedComponentsProvider||n._uninitializedComponentsProvider._offline.kind==="memory")return bn("Cannot enable indexes when persistence is disabled"),Promise.resolve();const r=(function(i){const o=typeof i=="string"?(function(u){try{return JSON.parse(u)}catch(h){throw new q(M.INVALID_ARGUMENT,"Failed to parse JSON: "+h?.message)}})(i):i,a=[];if(Array.isArray(o.indexes))for(const c of o.indexes){const u=AT(c,"collectionGroup"),h=[];if(Array.isArray(c.fields))for(const d of c.fields){const f=AT(d,"fieldPath"),m=t_("setIndexConfiguration",f);d.arrayConfig==="CONTAINS"?h.push(new bi(m,2)):d.order==="ASCENDING"?h.push(new bi(m,0)):d.order==="DESCENDING"&&h.push(new bi(m,1))}a.push(new Jo(Jo.UNKNOWN_ID,u,h,Yo.empty()))}return a})(e);return p4(n,r)}function AT(t,e){if(typeof t[e]!="string")throw new q(M.INVALID_ARGUMENT,"Missing string value for: "+e);return t[e]}class IP{constructor(e){this._firestore=e,this.type="PersistentCacheIndexManager"}}function F6(t){t=Re(t,He);const e=bT.get(t);if(e)return e;if(ot(t)._uninitializedComponentsProvider?._offline.kind!=="persistent")return null;const r=new IP(t);return bT.set(t,r),r}function U6(t){EP(t,!0)}function B6(t){EP(t,!1)}function j6(t){const e=ot(t._firestore);g4(e).then((n=>G("deleting all persistent cache indexes succeeded"))).catch((n=>bn("deleting all persistent cache indexes failed",n)))}function EP(t,e){const n=ot(t._firestore);m4(n,e).then((r=>G(`setting persistent cache index auto creation isEnabled=${e} succeeded`))).catch((r=>bn(`setting persistent cache index auto creation isEnabled=${e} failed`,r)))}const bT=new WeakMap;class q6{constructor(){throw new Error("instances of this class should not be created")}static onExistenceFilterMismatch(e){return o_.instance.onExistenceFilterMismatch(e)}}class o_{constructor(){this.i=new Map}static get instance(){return _u||(_u=new o_,a2(_u)),_u}u(e){this.i.forEach((n=>n(e)))}onExistenceFilterMismatch(e){const n=Symbol(),r=this.i;return r.set(n,e),()=>r.delete(n)}}let _u=null;(function(e,n=!0){BF(Ia),Ko(new Di("firestore",((r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new He(new $F(r.getProvider("auth-internal")),new WF(o,r.getProvider("app-check-internal")),xU(o,s),o);return i={useFetchStreams:n,...i},a._setSettings(i),a}),"PUBLIC").setMultipleInstances(!0)),As(ET,TT,e),As(ET,TT,"esm2020")})();const H6=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:n_,AggregateField:pa,AggregateQuerySnapshot:aP,Bytes:on,CACHE_SIZE_UNLIMITED:w4,CollectionReference:jn,DocumentReference:Be,DocumentSnapshot:hn,FieldPath:Qi,FieldValue:zs,Firestore:He,FirestoreError:q,GeoPoint:qn,LoadBundleTask:JS,PersistentCacheIndexManager:IP,Query:St,QueryCompositeFilterConstraint:Xi,QueryConstraint:Va,QueryDocumentSnapshot:Bc,QueryEndAtConstraint:Ll,QueryFieldFilterConstraint:xa,QueryLimitConstraint:xl,QueryOrderByConstraint:Sd,QuerySnapshot:dn,QueryStartAtConstraint:Ol,SnapshotMetadata:Cr,Timestamp:Fe,Transaction:_P,VectorValue:vn,WriteBatch:gP,_AutoId:sd,_ByteString:ct,_DatabaseId:Vs,_DocumentKey:X,_EmptyAppCheckTokenProvider:zF,_EmptyAuthCredentialsProvider:Nb,_FieldPath:Xe,_TestingHooks:q6,_cast:Re,_debugAssert:qF,_internalAggregationQueryToProtoRunAggregationQueryRequest:$4,_internalQueryToProtoQueryTarget:H4,_isBase64Available:NU,_logWarn:bn,_validateIsNotUsedTogether:Vb,addDoc:V6,aggregateFieldEqual:i6,aggregateQuerySnapshotEqual:o6,and:Q4,arrayRemove:B4,arrayUnion:U4,average:s6,clearIndexedDbPersistence:S4,collection:I4,collectionGroup:E4,connectFirestoreEmulator:QS,count:dP,deleteAllPersistentCacheIndexes:j6,deleteDoc:D6,deleteField:M4,disableNetwork:k4,disablePersistentCacheIndexAutoCreation:B6,doc:Uc,documentId:D4,documentSnapshotFromJSON:I6,enableIndexedDbPersistence:b4,enableMultiTabIndexedDbPersistence:R4,enableNetwork:C4,enablePersistentCacheIndexAutoCreation:U6,endAt:n6,endBefore:t6,ensureFirestoreConfigured:ot,executeWrite:Oa,getAggregateFromServer:fP,getCountFromServer:a6,getDoc:Qp,getDocFromCache:R6,getDocFromServer:S6,getDocs:P6,getDocsFromCache:C6,getDocsFromServer:k6,getFirestore:A4,getPersistentCacheIndexManager:F6,increment:j4,initializeFirestore:v4,limit:Y4,limitToLast:X4,loadBundle:zp,memoryEagerGarbageCollector:d6,memoryLocalCache:p6,memoryLruGarbageCollector:f6,namedQuery:ZS,onSnapshot:Jp,onSnapshotResume:x6,onSnapshotsInSync:O6,or:z4,orderBy:J4,persistentLocalCache:m6,persistentMultipleTabManager:y6,persistentSingleTabManager:pP,query:K4,queryEqual:Wg,querySnapshotFromJSON:E6,refEqual:T4,runTransaction:b6,serverTimestamp:F4,setDoc:yP,setIndexConfiguration:M6,setLogLevel:jF,snapshotEqual:w6,startAfter:e6,startAt:Z4,sum:r6,terminate:N4,updateDoc:N6,vector:q4,waitForPendingWrites:P4,where:W4,writeBatch:L6},Symbol.toStringTag,{value:"Module"})),Ml=iD("tarot",{state:()=>({ipt_birth8:"",ipt_birth4:"",ipt_year:"",result:null,calc:["","",""],y_calc:["","",""],picked:"r1",isReading:!1,radio:[{text:"",id:"r1"},{text:"",id:"r2"}],user:null,userGrade:null,isLoggedIn:!1,token:null,authLoading:!1,authChecked:!1,pendingVerificationEmail:null,alertData:{isVisible:!1,title:"",message:"",icon:"",confirmText:""},confirmData:{isVisible:!1,title:"",message:"",icon:"",confirmText:"",cancelText:"",onConfirm:null,onCancel:null},loader:{isAppLoading:!0,isPdfLoading:!1}}),actions:{setReading(t){this.isReading=t},fnGo(t){t=="result"?this.setReading(!1):this.setReading(!0)},fnBirthCalc(){if(this.calc=["","",""],/[^0-9]/.test(this.ipt_birth8)){this.showAlert({message:" !",icon:""}),this.ipt_birth8="";return}if(this.ipt_birth8.length!==8){this.showAlert({message:" 8   (: 19900219)",icon:""});return}const t=this.ipt_birth8.split("");let e=t.reduce((n,r)=>n+Number(r),0);if(this.calc[0]=t.join(" + "),e>21){this.calc[1]=e;const n=e.toString().split("");e=n.reduce((r,s)=>r+Number(s),0),this.calc[2]=n.join(" + ")}this.result=e},fnComingSoon(){this.showAlert({message:"   .",icon:""})},fnYearCalc(){if(this.calc=["","",""],/[^0-9]/.test(this.ipt_year)||/[^0-9]/.test(this.ipt_birth4)){this.showAlert({message:" !",icon:""}),/[^0-9]/.test(this.ipt_year)&&(this.ipt_year=""),/[^0-9]/.test(this.ipt_birth4)&&(this.ipt_birth4="");return}if(this.ipt_year.length!==4){this.showAlert({message:" 4   (: 1999)",icon:""}),this.ipt_year="";return}if(this.ipt_birth4.length!==4){this.showAlert({message:" 4   (: 0130)",icon:""}),this.ipt_birth4="";return}const t=Number(this.ipt_year),e=Number(this.ipt_birth4.substring(0,2)),n=Number(this.ipt_birth4.substring(2,4)),r=t+e+n;this.y_calc[0]=`${t} + ${e} + ${n} = ${r}`;const s=r.toString().split("");let i=s.reduce((o,a)=>o+Number(a),0);if(this.y_calc[1]=s.join(" + "),i>21){this.y_calc[1]=i;const o=i.toString().split("");i=o.reduce((a,c)=>a+Number(c),0),this.y_calc[2]=o.join(" + "),i==22&&(i=0)}this.result=i},fnReset(){this.ipt_birth8="",this.ipt_birth4="",this.ipt_year="",this.result=null,this.calc=["","",""],this.y_calc=["","",""]},fnClose(){this.fnReset()},async fnSignUp(t,e,n,r){const{$auth:s,$db:i}=ze();this.authLoading=!0,this.pendingVerificationEmail=t;try{const a=(await YA(s,t,e)).user;return await yp(a),await yP(Uc(i,"users",a.uid),{email:t,name:n,phone:r,isApproved:!1,grade:"",createdAt:new Date}),await ui(s),{success:!0}}catch(o){return console.error("  :",o.code),this.pendingVerificationEmail=null,{success:!1,error:this.getFirebaseErrorMessage(o.code)}}finally{this.authLoading=!1}},clearPendingVerification(){this.pendingVerificationEmail=null},async fnResendVerification(){const{$auth:t}=ze(),e=t.currentUser;if(e&&!e.emailVerified)try{return await yp(e),{success:!0}}catch(n){return{success:!1,error:this.getFirebaseErrorMessage(n.code)}}return{success:!1,error:"  ."}},async fnResetPassword(t){const{$auth:e}=ze();this.authLoading=!0;try{return await QA(e,t),this.authLoading=!1,{success:!0}}catch(n){return this.authLoading=!1,{success:!1,error:this.getFirebaseErrorMessage(n.code)}}},async fnLogin(t,e){const{$auth:n,$db:r}=ze();this.authLoading=!0;try{const i=(await XA(n,t,e)).user;if(!i.emailVerified)return await ui(n),this.authLoading=!1,{success:!1,needVerification:!0,error:"  .  ."};const o=await Qp(Uc(r,"users",i.uid));if(!o.exists())return await ui(n),this.authLoading=!1,{success:!1,error:"    ."};const a=o.data();return a.isApproved?(this.user={uid:i.uid,email:i.email,name:a.name||"",emailVerified:i.emailVerified,loginAt:new Date().toLocaleString()},this.userGrade=a.grade||"",this.token=await i.getIdToken(),this.isLoggedIn=!0,Yt.set("user_token",this.token,{expires:1}),Yt.set("user_info",JSON.stringify(this.user),{expires:1}),Yt.set("user_grade",this.userGrade,{expires:1}),this.setAppLoading(!0),setTimeout(()=>{this.setAppLoading(!1)},600),this.authLoading=!1,{success:!0}):(await ui(n),this.authLoading=!1,{success:!1,needApproval:!0,error:"   .    ."})}catch(s){return this.authLoading=!1,{success:!1,error:this.getFirebaseErrorMessage(s.code)}}},async fnLogout(){const{$auth:t}=ze();try{await ui(t)}catch(e){console.error(" :",e)}this.user=null,this.userGrade=null,this.token=null,this.isLoggedIn=!1,Yt.remove("user_token"),Yt.remove("user_info"),Yt.remove("user_grade")},checkAuth(){const{$auth:t,$db:e}=ze(),n=Yt.get("user_token"),r=Yt.get("user_info"),s=Yt.get("user_grade"),i=o=>o&&o!=="undefined"&&o!=="false"&&o!=="null";if(console.group(" [Auth]   "),console.log(" :",{savedToken:!!n,savedUserInfo:!!r,savedGrade:s}),i(n)||i(r))try{i(r)&&(this.user=JSON.parse(r)),this.userGrade=i(s)?s:"",this.token=n,this.isLoggedIn=!0,this.authChecked=!0,console.log(" [Step 1]     ")}catch(o){console.error("    :",o)}else console.log("   : Firebase   ...");console.groupEnd(),rb(t,async o=>{if(!this.pendingVerificationEmail){if(o){if(!o.emailVerified){this.resetAndClear();return}try{const a=await Qp(Uc(e,"users",o.uid));if(a.exists()){const c=a.data();if(!c.isApproved){await ui(t),this.resetAndClear();return}this.user={uid:o.uid,email:o.email,name:c.name||"",emailVerified:o.emailVerified,loginAt:new Date().toLocaleString()},this.userGrade=c.grade||"",this.token=await o.getIdToken(),this.isLoggedIn=!0;const u={expires:1,path:"/"};Yt.set("user_token",this.token,u),Yt.set("user_info",JSON.stringify(this.user),u),Yt.set("user_grade",this.userGrade,u),console.log(" [Step 2] Firebase     ")}}catch(a){console.error("Firestore  :",a)}}else console.log(" Firebase:   "),this.isLoggedIn||this.resetAndClear();this.authChecked=!0}})},getFirebaseErrorMessage(t){return{"auth/email-already-in-use":"   .","auth/invalid-email":"   .","auth/operation-not-allowed":"/   .","auth/weak-password":" 6  .","auth/user-disabled":" .","auth/user-not-found":"  .","auth/wrong-password":"  .","auth/invalid-credential":"    .","auth/too-many-requests":"   .    ."}[t]||"  ."},showAlert(t={}){this.alertData={isVisible:!0,title:t.title||"",message:t.message||"",icon:t.icon||"",confirmText:t.confirmText||""}},closeAlert(){this.alertData.isVisible=!1},showConfirm(t={}){this.confirmData={isVisible:!0,title:t.title||"",message:t.message||"",icon:t.icon||"",confirmText:t.confirmText||"",cancelText:t.cancelText||"",onConfirm:t.onConfirm||null,onCancel:t.onCancel||null}},handleConfirm(){this.confirmData.onConfirm&&this.confirmData.onConfirm(),this.closeConfirm()},handleCancel(){this.confirmData.onCancel&&this.confirmData.onCancel(),this.closeConfirm()},closeConfirm(){this.confirmData.isVisible=!1},resetAndClear(){this.user=null,this.userGrade=null,this.token=null,this.isLoggedIn=!1,Yt.remove("user_token"),Yt.remove("user_info"),Yt.remove("user_grade")},setAppLoading(t){this.loader.isAppLoading=t},setPdfLoading(t){this.loader.isPdfLoading=t},async downloadPDF(t){const{pdfContent:e,html2canvas:n,jsPDF:r,filename:s}=t;if(e)try{this.setPdfLoading(!0);const i=e;i.classList.add("pdf_print");const o=new r("p","mm","a4"),a=210,c=[".pdf_section1",".pdf_section2",".pdf_section3",".pdf_section4",".pdf_section5"],u=async f=>{const m=await n(f,{scale:3,useCORS:!0,backgroundColor:"#ffffff",logging:!1});return{data:m.toDataURL("image/jpeg",1),height:m.height*a/m.width}},h=i.querySelector(".pdf_only_header");h.style.display="block";const d=await u(h);h.style.display="none";for(let f=0;f<c.length;f++){const m=i.querySelector(c[f]);if(!m)continue;const I=m.style.display;m.style.display="block";const T=await u(m);m.style.display=I,f>0&&o.addPage();const k=20,V=a-k*2,N=T.height*V/a;let _=0;f===0?(o.addImage(d.data,"JPEG",0,0,a,d.height),_=d.height+5):_=15,o.addImage(T.data,"JPEG",k,_,V,N),o.setFontSize(10),o.setTextColor(150),o.text("- "+String(f+1)+" -",105,287,{align:"center"})}o.save(s),i.classList.remove("pdf_print"),this.setPdfLoading(!1)}catch(i){console.error("PDF  :",i),element.classList.remove("pdf_print"),this.setPdfLoading(!1),alert("PDF    .")}},goToWiki(t=null,e="majors"){const n=t??this.result;if(n==null)return;const r=`/wiki/${e}/${n}`;window.open(r,"_blank")},goToWikiMain(){window.open("/wiki","_blank")}}}),TP=(t,e)=>{const n=t.__vccOpts||t;for(const[r,s]of e)n[r]=s;return n},$6={class:"loader-content"},G6={class:"mystic-icon"},K6={class:"title"},W6={class:"subtitle"},z6={__name:"GlobalLoader",setup(t){const e=Ml(),n=Kt(()=>e.loader.isPdfLoading?{icon:"",title:"   ",subtitle:"  ..."}:{icon:"",title:"   ",subtitle:"  ..."});return(r,s)=>(De(),In(jo,{name:"ifade"},{default:ks(()=>[me(e).loader.isAppLoading||me(e).loader.isPdfLoading?(De(),yt("div",{key:0,class:Pi(["global-loader",{"pdf-mode":me(e).loader.isPdfLoading}])},[_e("div",$6,[_e("div",G6,Mn(n.value.icon),1),_e("h1",K6,Mn(n.value.title),1),s[0]||(s[0]=_e("div",{class:"progress-bar"},[_e("div",{class:"progress-inner"})],-1)),_e("p",W6,Mn(n.value.subtitle),1)])],2)):Fn("",!0)]),_:1}))}},Q6=TP(z6,[["__scopeId","data-v-03bbbc9a"]]),wP=(t="RouteProvider")=>js({name:t,props:{route:{type:Object,required:!0},vnode:Object,vnodeRef:Object,renderKey:String,trackRootNodes:Boolean},setup(e){const n=e.renderKey,r=e.route,s={};for(const i in e.route)Object.defineProperty(s,i,{get:()=>n===e.renderKey?e.route[i]:r[i],enumerable:!0});return Is(Ni,er(s)),()=>e.vnode?Wt(e.vnode,{ref:e.vnodeRef}):e.vnode}}),J6=wP(),RT=new WeakMap,Y6=js({name:"NuxtPage",inheritAttrs:!1,props:{name:{type:String},transition:{type:[Boolean,Object],default:void 0},keepalive:{type:[Boolean,Object],default:void 0},route:{type:Object},pageKey:{type:[Function,String],default:null}},setup(t,{attrs:e,slots:n,expose:r}){const s=ze(),i=ft(),o=Vt(Ni,null);let a;r({pageRef:i});const c=Vt(yv,null);let u;const h=s.deferHydration();if(s.isHydrating){const f=s.hooks.hookOnce("app:error",h);An().beforeEach(f)}t.pageKey&&kr(()=>t.pageKey,(f,m)=>{f!==m&&s.callHook("page:loading:start")});let d=!1;{const f=An().beforeResolve(()=>{d=!1});ml(()=>{f()})}return()=>Wt($v,{name:t.name,route:t.route,...e},{default:f=>{const m=Z6(o,f.route,f.Component),I=o&&o.matched.length===f.route.matched.length;if(!f.Component){if(u&&!I)return u;h();return}if(u&&c&&!c.isCurrent(f.route))return u;if(m&&o&&(!c||c?.isCurrent(o)))return I?u:null;const T=up(f,t.pageKey),k=ej(o,f.route,f.Component);!s.isHydrating&&a===T&&!k&&Cs(()=>{d=!0,s.callHook("page:loading:end")}),a=T;const V=!!(t.transition??f.route.meta.pageTransition??qy),N=V&&X6([t.transition,f.route.meta.pageTransition,qy,{onAfterLeave(){delete s._runningTransition,s.callHook("page:transition:finish",f.Component)}}]),_=t.keepalive??f.route.meta.keepalive??VN;return u=Kv(V&&N,sx(_,Wt(_m,{suspensible:!0,onPending:()=>{V&&(s._runningTransition=!0),s.callHook("page:start",f.Component)},onResolve:async()=>{await Cs();try{s._route.sync?.(),await s.callHook("page:finish",f.Component),delete s._runningTransition,!d&&!k&&(d=!0,await s.callHook("page:loading:end"))}finally{h()}}},{default:()=>{const C={key:T||void 0,vnode:n.default?tj(n.default,f):f.Component,route:f.route,renderKey:T||void 0,trackRootNodes:V,vnodeRef:i};if(!_)return Wt(J6,C);const x=f.Component.type,U=x;let v=RT.get(U);return v||(v=wP(x.name||x.__name),RT.set(U,v)),Wt(v,C)}}))).default(),u}})}});function X6(t){const e=[];for(const n of t)n&&e.push({...n,onAfterLeave:n.onAfterLeave?Sm(n.onAfterLeave):void 0});return gv(...e)}function Z6(t,e,n){if(!t)return!1;const r=e.matched.findIndex(s=>s.components?.default===n?.type);return!r||r===-1?!1:e.matched.slice(0,r).some((s,i)=>s.components?.default!==t.matched[i]?.components?.default)||n&&up({route:e,Component:n})!==up({route:t,Component:n})}function ej(t,e,n){return t?e.matched.findIndex(s=>s.components?.default===n?.type)<e.matched.length-1:!1}function tj(t,e){const n=t(e);return n.length===1?Wt(n[0]):Wt(sn,void 0,n)}const nj=js({name:"LayoutLoader",inheritAttrs:!1,props:{name:String,layoutProps:Object},setup(t,e){return()=>Wt(ms[t.name],t.layoutProps,e.slots)}}),rj={name:{type:[String,Boolean,Object],default:null},fallback:{type:[String,Object],default:null}},sj=js({name:"NuxtLayout",inheritAttrs:!1,props:rj,setup(t,e){const n=ze(),r=Vt(Ni),i=!r||r===qh()?Gv():r,o=Kt(()=>{let h=me(t.name)??i?.meta.layout??"default";return h&&!(h in ms)&&t.fallback&&(h=me(t.fallback)),h}),a=Lo();e.expose({layoutRef:a});const c=n.deferHydration();if(n.isHydrating){const h=n.hooks.hookOnce("app:error",c);An().beforeEach(h)}let u;return()=>{const h=o.value&&o.value in ms,d=i?.meta.layoutTransition??DN,f=u;return u=o.value,Kv(h&&d,{default:()=>Wt(_m,{suspensible:!0,onResolve:()=>{Cs(c)}},{default:()=>Wt(ij,{layoutProps:Gw(e.attrs,{ref:a}),key:o.value||void 0,name:o.value,shouldProvide:!t.name,isRenderingNewLayout:m=>m!==f&&m===o.value,hasTransition:!!d},e.slots)})}).default()}}}),ij=js({name:"NuxtLayoutProvider",inheritAttrs:!1,props:{name:{type:[String,Boolean]},layoutProps:{type:Object},hasTransition:{type:Boolean},shouldProvide:{type:Boolean},isRenderingNewLayout:{type:Function,required:!0}},setup(t,e){const n=t.name;t.shouldProvide&&Is(yv,{isCurrent:i=>n===(i.meta.layout??"default")});const r=Vt(Ni);if(r&&r===qh()){const i=Gv(),o={};for(const a in i){const c=a;Object.defineProperty(o,c,{enumerable:!0,get:()=>t.isRenderingNewLayout(t.name)?i[c]:r[c]})}Is(Ni,er(o))}return()=>!n||typeof n=="string"&&!(n in ms)?e.slots.default?.():Wt(nj,{key:n,layoutProps:t.layoutProps,name:n},e.slots)}}),oj={class:"login"},aj={class:"l_wrap"},cj={class:"verification_notice",key:"verification"},lj={class:"txt_notice"},uj={key:"forgot"},hj={class:"l_form"},dj=["disabled"],fj={class:"l_form"},pj={class:"ipt_pw_wrap"},mj=["type"],gj={key:0,class:"ipt_pw_wrap"},_j=["type"],yj=["disabled"],Ij={key:0,class:"bx_member"},Ej={key:1,class:"bx_member"},Tj={__name:"Login",setup(t){const e=Ml(),n=ft(""),r=ft(""),s=ft(""),i=ft(""),o=ft(""),a=ft(!1),c=ft(!1),u=ft(!1),h=ft(!1),d=Kt(()=>c.value?"forgot":a.value?"signup":"login"),f=Kt(()=>c.value?"Reset Password":a.value?"Join":"Login"),m=()=>{a.value=!a.value,r.value="",s.value="",i.value="",o.value="",u.value=!1,h.value=!1},I=()=>{e.clearPendingVerification(),a.value=!1,c.value=!1,r.value="",s.value="",i.value="",o.value="",u.value=!1,h.value=!1},T=()=>{c.value=!0,r.value="",s.value=""},k=async()=>{if(!n.value){e.showAlert({title:"",message:" .",icon:""});return}const N=await e.fnResetPassword(n.value);N.success?(e.showAlert({title:"  ",message:"    .",icon:""}),I()):e.showAlert({title:" ",message:N.error,icon:""})},V=async()=>{if(!n.value||!r.value){e.showAlert({title:"",message:"  .",icon:""});return}if(a.value){if(!i.value||!o.value){e.showAlert({title:"",message:"  .",icon:""});return}if(!/^01[0-9]-[0-9]{4}-[0-9]{4}$/.test(o.value)){e.showAlert({title:"",message:"  . (010-0000-0000)",icon:""});return}if(r.value!==s.value){e.showAlert({title:"",message:"  .",icon:""});return}const _=await e.fnSignUp(n.value,r.value,i.value,o.value);_.success||e.showAlert({title:" ",message:_.error,icon:""})}else{const N=await e.fnLogin(n.value,r.value);if(!N.success){let _=" ",C="";N.needVerification?(_="  ",C=""):N.needApproval&&(_=" ",C=""),e.showAlert({title:_,message:N.error,icon:C}),r.value=""}}};return(N,_)=>(De(),yt("div",oj,[_e("div",aj,[_[16]||(_[16]=_e("div",{class:"icon"},"",-1)),_[17]||(_[17]=_e("p",{class:"l_logo"},"numerologyTarot",-1)),Ze(jo,{name:"l_fade",mode:"out-in"},{default:ks(()=>[(De(),yt("h2",{class:"tit",key:d.value},Mn(f.value),1))]),_:1}),Ze(jo,{name:"l_fade",mode:"out-in"},{default:ks(()=>[me(e).pendingVerificationEmail?(De(),yt("div",cj,[_[8]||(_[8]=_e("p",{class:"notice_icon"},"",-1)),_[9]||(_[9]=_e("p",{class:"notice_tit"},"  ",-1)),_e("p",lj,Mn(me(e).pendingVerificationEmail)+"    .",1),_[10]||(_[10]=_e("p",{class:"txt_alert"},"    .",-1)),_e("button",{class:"btn",onClick:I}," ")])):c.value?(De(),yt("div",uj,[_e("div",hj,[ai(_e("input",{class:"ipt","onUpdate:modelValue":_[0]||(_[0]=C=>n.value=C),type:"email",placeholder:"",onKeyup:io(k,["enter"])},null,544),[[To,n.value]]),_e("button",{class:"btn",onClick:k,disabled:me(e).authLoading},Mn(me(e).authLoading?" ...":"   "),9,dj)]),_e("div",{class:"bx_member"},[_e("button",{class:"link_member",onClick:I}," ")])])):(De(),yt("div",{key:a.value?"signup":"login"},[_e("div",fj,[ai(_e("input",{class:"ipt","onUpdate:modelValue":_[1]||(_[1]=C=>n.value=C),type:"email",placeholder:"",onKeyup:io(V,["enter"])},null,544),[[To,n.value]]),_e("div",pj,[ai(_e("input",{class:"ipt","onUpdate:modelValue":_[2]||(_[2]=C=>r.value=C),type:u.value?"text":"password",placeholder:"",onKeyup:io(V,["enter"])},null,40,mj),[[Oy,r.value]]),_e("button",{type:"button",class:Pi(["btn_eye",{on:u.value}]),onClick:_[3]||(_[3]=C=>u.value=!u.value),tabindex:"-1"},null,2)]),a.value?(De(),yt("div",gj,[ai(_e("input",{class:"ipt","onUpdate:modelValue":_[4]||(_[4]=C=>s.value=C),type:h.value?"text":"password",placeholder:" ",onKeyup:io(V,["enter"])},null,40,_j),[[Oy,s.value]]),_e("button",{type:"button",class:Pi(["btn_eye",{on:h.value}]),onClick:_[5]||(_[5]=C=>h.value=!h.value),tabindex:"-1"},null,2)])):Fn("",!0),a.value?ai((De(),yt("input",{key:1,class:"ipt","onUpdate:modelValue":_[6]||(_[6]=C=>i.value=C),type:"text",placeholder:"",onKeyup:io(V,["enter"])},null,544)),[[To,i.value]]):Fn("",!0),a.value?ai((De(),yt("input",{key:2,class:"ipt","onUpdate:modelValue":_[7]||(_[7]=C=>o.value=C),type:"tel",placeholder:" (010-0000-0000)",onKeyup:io(V,["enter"])},null,544)),[[To,o.value]]):Fn("",!0),_e("button",{class:"btn",onClick:V,disabled:me(e).authLoading},Mn(me(e).authLoading?" ...":a.value?"":" "),9,yj)]),a.value?(De(),yt("div",Ij,[_[11]||(_[11]=_e("span",null,"  ?",-1)),_[12]||(_[12]=zu()),_e("button",{class:"link_member",onClick:m},"")])):(De(),yt("div",Ej,[_[13]||(_[13]=_e("span",null," ?",-1)),_[14]||(_[14]=zu()),_e("button",{class:"link_member",onClick:m},""),_[15]||(_[15]=_e("span",{class:"divider"},"|",-1)),_e("button",{class:"link_member",onClick:T}," ")]))]))]),_:1})])]))}},wj=["innerHTML"],vj=["innerHTML"],Aj=["innerHTML"],bj={class:"m_buttons"},Rj={__name:"AlertModal",setup(t){const e=Ml(),n=()=>{e.closeAlert()},r=s=>{e.alertData.isVisible&&(s.key==="Enter"||s.key==="Escape")&&(s.preventDefault(),n())};return kr(()=>e.alertData.isVisible,s=>{s?window.addEventListener("keydown",r):window.removeEventListener("keydown",r)}),Fh(()=>{window.removeEventListener("keydown",r)}),(s,i)=>(De(),In(jo,{name:"m_fade"},{default:ks(()=>[me(e).alertData.isVisible?(De(),yt("div",{key:0,class:"modal",onClick:n},[_e("div",{class:"m_container",onClick:i[0]||(i[0]=Xw(()=>{},["stop"]))},[me(e).alertData.icon!==""?(De(),yt("div",{key:0,class:"m_icon",innerHTML:me(e).alertData.icon},null,8,wj)):Fn("",!0),me(e).alertData.title!==""?(De(),yt("h2",{key:1,class:"m_title",innerHTML:me(e).alertData.title},null,8,vj)):Fn("",!0),me(e).alertData.message!==""?(De(),yt("p",{key:2,class:"m_message",innerHTML:me(e).alertData.message},null,8,Aj)):Fn("",!0),_e("div",bj,[_e("button",{class:"btn-confirm",onClick:n},Mn(me(e).alertData.confirmText),1)])])])):Fn("",!0)]),_:1}))}},Sj=["innerHTML"],Pj=["innerHTML"],Cj=["innerHTML"],kj={class:"m_buttons"},Nj={__name:"ConfirmModal",setup(t){const e=Ml(),n=()=>{e.handleConfirm()},r=()=>{e.handleCancel()},s=i=>{e.confirmData.isVisible&&(i.key==="Enter"?(i.preventDefault(),n()):i.key==="Escape"&&(i.preventDefault(),r()))};return kr(()=>e.confirmData.isVisible,i=>{i?window.addEventListener("keydown",s):window.removeEventListener("keydown",s)}),Fh(()=>{window.removeEventListener("keydown",s)}),(i,o)=>(De(),In(jo,{name:"m_fade"},{default:ks(()=>[me(e).confirmData.isVisible?(De(),yt("div",{key:0,class:"modal",onClick:r},[_e("div",{class:"m_container",onClick:o[0]||(o[0]=Xw(()=>{},["stop"]))},[_e("div",{class:"m_icon",innerHTML:me(e).confirmData.icon},null,8,Sj),_e("h2",{class:"m_title",innerHTML:me(e).confirmData.title},null,8,Pj),me(e).confirmData.message!==""?(De(),yt("p",{key:0,class:"m_message",innerHTML:me(e).confirmData.message},null,8,Cj)):Fn("",!0),_e("div",kj,[_e("button",{class:"btn-cancel",onClick:r},Mn(me(e).confirmData.cancelText),1),_e("button",{class:"btn-confirm",onClick:n},Mn(me(e).confirmData.confirmText),1)])])])):Fn("",!0)]),_:1}))}},Dj=TP(Nj,[["__scopeId","data-v-19db4dd1"]]),Vj={key:0,id:"initial-loader"},xj={__name:"app",setup(t){const e=Ml(),n=ft(!0);return Mh(()=>{e.checkAuth(),n.value=!1,setTimeout(()=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{e.setAppLoading(!1)})})},600)}),(r,s)=>{const i=Q6,o=Y6,a=sj,c=Tj,u=Rj,h=Dj;return De(),yt("div",null,[(De(),In(qC,{to:"body"},[n.value?(De(),yt("div",Vj,[...s[0]||(s[0]=[_e("div",{class:"loader-content"},[_e("div",{class:"mystic-icon"},""),_e("h1",{class:"title"},"   "),_e("div",{class:"progress-bar"},[_e("div",{class:"progress-inner"})]),_e("p",{class:"subtitle"},"  ...")],-1)])])):Fn("",!0)])),Ze(i),ai(_e("div",null,[me(e).isLoggedIn?(De(),In(a,{key:0},{default:ks(()=>[Ze(o)]),_:1})):(De(),In(c,{key:1}))],512),[[nk,!me(e).loader.isAppLoading&&me(e).authChecked]]),Ze(u),Ze(h)])}}},Oj={__name:"nuxt-error-page",props:{error:Object},setup(t){const n=t.error,r=Number(n.statusCode||500),s=r===404,i=n.statusMessage??(s?"Page Not Found":"Internal Server Error"),o=n.message||n.toString(),a=void 0,h=s?oy(()=>ws(()=>import("./D4NhJ5Vi.js"),__vite__mapDeps([5,6,7]),import.meta.url)):oy(()=>ws(()=>import("./CPph8gNw.js"),__vite__mapDeps([8,6,9]),import.meta.url));return(d,f)=>(De(),In(me(h),eC($w({statusCode:me(r),statusMessage:me(i),description:me(o),stack:me(a)})),null,16))}},Lj={key:0},ST={__name:"nuxt-root",setup(t){const e=()=>null,n=ze(),r=n.deferHydration();if(n.isHydrating){const u=n.hooks.hookOnce("app:error",r);An().beforeEach(u)}const s=!1;Is(Ni,qh()),n.hooks.callHookWith(u=>u.map(h=>h()),"vue:setup");const i=Hh(),o=!1,a=/bot\b|chrome-lighthouse|facebookexternalhit|google\b/i;Iw((u,h,d)=>{if(n.hooks.callHook("vue:error",u,h,d).catch(f=>console.error("[nuxt] Error in `vue:error` hook",f)),a.test(navigator.userAgent))return n.hooks.callHook("app:error",u),console.error(`[nuxt] Not rendering error page for bot with user agent \`${navigator.userAgent}\`:`,u),!1;if(Ev(u)&&(u.fatal||u.unhandled))return n.runWithContext(()=>ci(u)),!1});const c=!1;return(u,h)=>(De(),In(_m,{onResolve:me(r)},{default:ks(()=>[me(o)?(De(),yt("div",Lj)):me(i)?(De(),In(me(Oj),{key:1,error:me(i)},null,8,["error"])):me(c)?(De(),In(me(e),{key:2,context:me(c)},null,8,["context"])):me(s)?(De(),In(i0(me(s)),{key:3})):(De(),In(me(xj),{key:4}))]),_:1},8,["onResolve"]))}};let PT;{let t;PT=async function(){if(t)return t;const n=!!(window.__NUXT__?.serverRendered??document.getElementById("__NUXT_DATA__")?.dataset.ssr==="true"),r=n?Sk(ST):Rk(ST),s=MN({vueApp:r});async function i(o){await s.callHook("app:error",o),s.payload.error||=vi(o)}r.config.errorHandler=i,s.hook("app:suspense:resolve",()=>{r.config.errorHandler===i&&(r.config.errorHandler=void 0)}),!n&&Hy.id&&s.hook("app:suspense:resolve",()=>{document.getElementById(Hy.id)?.remove()});try{await BN(s,Cx)}catch(o){i(o)}try{await s.hooks.callHook("app:created",r),await s.hooks.callHook("app:beforeMount",r),r.mount(xN),await s.hooks.callHook("app:mounted",r),await Cs()}catch(o){i(o)}return r},t=PT().catch(e=>{throw console.error("Error while mounting app:",e),e})}export{Zk as $,De as A,TP as B,_e as C,ih as D,Mn as E,Hr as F,js as G,An as H,Lo as I,ft as J,Mh as K,Pm as L,wI as M,ml as N,Kj as O,Wt as P,Mj as Q,nv as R,Ia as S,YN as T,Ax as U,Kt as V,$i as W,Em as X,gl as Y,Hj as Z,kI as _,Wj as a,Zu as a0,Bj as a1,ks as a2,zu as a3,Fn as a4,sn as a5,Fj as a6,Pi as a7,ai as a8,nk as a9,In as aA,Uj as aB,jo as aa,Dh as ab,Ml as ac,kr as ad,Gv as ae,Gj as af,bC as ag,jj as ah,Hi as ai,e0 as aj,Fh as ak,sC as al,rm as am,kC as an,Cs as ao,vi as ap,me as aq,Ff as ar,jr as as,qj as at,NT as au,yk as av,_k as aw,To as ax,Xw as ay,ws as az,Vi as b,zj as c,zc as d,yl as e,lA as f,at as g,ZO as h,Ko as i,XO as j,Wc as k,r1 as l,hA as m,Jj as n,n1 as o,Qj as p,Yj as q,As as r,Xj as s,ze as t,$j as u,Oh as v,Vt as w,Sv as x,yt as y,Ze as z};
