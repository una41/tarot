import{y as c,A as i,C as s,B as z,a4 as F,a5 as $,a6 as T,a7 as k,z as h,E as _,a2 as O,a8 as K,a9 as Q,aa as U,ab as V,ac as A,J as y,V as b,ad as q,K as D,ae as H,af as J}from"./BkW72OBJ.js";import{u as R}from"./2Gm8E0y3.js";const Y={class:"header"},P={__name:"WikiHeader",setup(a){const f=()=>{location.href="/wiki"},n=()=>{window.open("/","_blank")};return(l,d)=>(i(),c("header",Y,[s("h1",null,[s("button",{class:"logo",onClick:f},"íƒ€ë¡œ Wiki")]),s("button",{class:"btn_back",onClick:n},"numerologyTarotâ†’")]))}},X={class:"search"},Z=["value"],ee={class:"nav"},te=["onClick"],se={class:"nav_category"},ae={class:"nav_category_arrow"},oe={class:"nav_list"},ne=["onClick"],le={key:0,class:"nav_empty"},re={__name:"WikiSidebar",props:{filteredGroupedList:{type:Object,required:!0},selectedItem:{type:Object,default:null},openCategories:{type:Set,required:!0},searchQuery:{type:String,default:""},isMenuOpen:{type:Boolean,default:!1}},emits:["update:search-query","select-item","toggle-category","toggle-menu","close-menu"],setup(a){const f=n=>({basic:"íƒ€ë¡œ ê¸°ì´ˆ",majors:"ë©”ì´ì € ì•„ë¥´ì¹´ë‚˜",wands:"ë§ˆì´ë„ˆ - ì™„ë“œ",cups:"ë§ˆì´ë„ˆ - ì»µ",swords:"ë§ˆì´ë„ˆ - ì†Œë“œ",pentacles:"ë§ˆì´ë„ˆ - ë™ì „ or íœíƒ€í´"})[n]||n;return(n,l)=>(i(),c("aside",{class:k(["sidebar",{on:a.isMenuOpen}])},[s("button",{class:"btn_toggle",onClick:l[0]||(l[0]=d=>n.$emit("toggle-menu"))}),s("div",X,[s("input",{type:"text",value:a.searchQuery,onInput:l[1]||(l[1]=d=>n.$emit("update:search-query",d.target.value)),placeholder:"ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”",class:"ipt_search"},null,40,Z)]),s("nav",ee,[(i(!0),c($,null,T(a.filteredGroupedList,(d,o)=>(i(),c("div",{key:o,class:"nav_group"},[s("div",{class:"nav_category_header",onClick:g=>n.$emit("toggle-category",o)},[s("span",se,_(f(o)),1),s("span",ae,_(a.openCategories.has(o)?"â–¼":"â–¶"),1)],8,te),h(U,{name:"slide"},{default:O(()=>[K(s("ul",oe,[(i(!0),c($,null,T(d,g=>(i(),c("li",{key:g.id,class:k({active:a.selectedItem?.id===g.id}),onClick:p=>n.$emit("select-item",g)},_(g.title),11,ne))),128))],512),[[Q,a.openCategories.has(o)]])]),_:2},1024)]))),128)),Object.keys(a.filteredGroupedList).length===0?(i(),c("p",le," ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤. ")):F("",!0)])],2))}},ce=z(re,[["__scopeId","data-v-82677130"]]),ie={class:"bx_navigation"},ue={class:"txt_cate"},de={class:"contents"},ge=["innerHTML"],ve={key:1,class:"contents empty"},me={__name:"WikiContent",props:{selectedItem:{type:Object,default:null},formatContent:{type:Function,required:!0}},setup(a){const f=n=>({basic:"íƒ€ë¡œ ê¸°ì´ˆ",majors:"ë©”ì´ì € ì•„ë¥´ì¹´ë‚˜",wands:"ë§ˆì´ë„ˆ - ì™„ë“œ",cups:"ë§ˆì´ë„ˆ - ì»µ",swords:"ë§ˆì´ë„ˆ - ì†Œë“œ",pentacles:"ë§ˆì´ë„ˆ - ë™ì „ or íœíƒ€í´"})[n]||n;return(n,l)=>(i(),c("main",{class:k("wrap_wiki "+(a.selectedItem?.category||""))},[h(U,{name:"fade",mode:"out-in"},{default:O(()=>[a.selectedItem?(i(),c("div",{key:a.selectedItem.id,class:"container"},[s("div",ie,[s("span",ue,_(f(a.selectedItem.category)),1)]),s("h2",null,_(a.selectedItem.title),1),s("div",de,[a.selectedItem.card_num!==-1?(i(),c("div",{key:0,class:"bx_img",style:V({background:"url('/img/card/"+(a.selectedItem?.category||"")+"/"+a.selectedItem.card_num+".jpg') no-repeat 50% -4px"})},null,4)):F("",!0),s("div",{class:"content",innerHTML:a.formatContent(a.selectedItem.content)},null,8,ge)])])):(i(),c("div",ve,[...l[0]||(l[0]=[s("p",{class:"icon"},"ğŸ“–",-1),s("p",{class:"txt"},"ì™¼ìª½ ëª©ë¡ì—ì„œ í•­ëª©ì„ ì„ íƒí•´ì£¼ì„¸ìš”",-1)])]))]),_:1})],2))}},fe={class:"wiki"},pe={key:0,class:"denied"},ye={class:"body"},ke={__name:"index",setup(a){const f=A(),n=H(),l=J(),d=y([]),o=y(null),g=y(""),p=y(!1),u=y(new Set),L=b(()=>f.userGrade==="ë§ˆìŠ¤í„°"),M=b(()=>{const e={};return d.value.forEach(t=>{e[t.category]||(e[t.category]=[]),e[t.category].push(t)}),e}),x=b(()=>{if(!g.value.trim())return M.value;const e=g.value.toLowerCase(),t={};return Object.entries(M.value).forEach(([r,v])=>{const m=v.filter(I=>I.title.toLowerCase().includes(e)||I.content.toLowerCase().includes(e)||I.category.toLowerCase().includes(e));m.length>0&&(t[r]=m)}),t}),j=()=>{const e=n.params.slug;if(console.log("getItemFromUrl - slug:",e),!e||!Array.isArray(e)||e.length<2)return console.log("getItemFromUrl - slug ê¸¸ì´ ë¶€ì¡± ë˜ëŠ” ì—†ìŒ"),null;const t=e[0],r=parseInt(e[1],10);if(console.log("getItemFromUrl - category:",t,"identifier:",r),!t||isNaN(r))return console.log("getItemFromUrl - category ì—†ê±°ë‚˜ identifier NaN"),null;let v;return t.toLowerCase()==="basic"?v=d.value.find(m=>m.category.toLowerCase()===t.toLowerCase()&&m.id===r):v=d.value.find(m=>m.category.toLowerCase()===t.toLowerCase()&&m.card_num===r),console.log("getItemFromUrl - foundItem:",v),v},C=e=>{e&&(console.log("updateUrl - item:",e),e.category.toLowerCase()==="basic"?l.push(`/wiki/${e.category.toLowerCase()}/${e.id}`):e.card_num===-1?l.push("/wiki"):l.push(`/wiki/${e.category.toLowerCase()}/${e.card_num}`))},B=e=>{o.value=e,C(e),e&&e.category&&u.value.add(e.category),w()},N=e=>{u.value.has(e)?u.value.delete(e):u.value.add(e)},W=()=>{p.value=!p.value},w=()=>{p.value=!1},E=e=>e.replace(/\n/g,"<br>"),S=()=>{l.push("/")},G=async()=>{if(L.value)try{const{data:e}=await R("/data/wiki.json","$4qzYT1EKJc");if(e.value){d.value=e.value;const t=j();if(t)o.value=t;else{const r=e.value.find(v=>v.id===1);r?(o.value=r,C(r)):e.value.length>0&&(o.value=e.value[0],C(e.value[0]))}o.value&&u.value.add(o.value.category)}}catch(e){console.error("ìœ„í‚¤ ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:",e)}};return q(()=>n.params,()=>{if(d.value.length>0){const e=j();e&&e.id!==o.value?.id&&(o.value=e,e&&e.category&&u.value.add(e.category))}}),q(g,e=>{if(e.trim()){const t=Object.keys(x.value);u.value.clear(),t.forEach(r=>{u.value.add(r)})}else if(o.value&&o.value.category){const t=o.value.category;u.value.clear(),u.value.add(t)}else u.value.clear()}),D(()=>{G()}),(e,t)=>(i(),c("div",fe,[L.value?(i(),c($,{key:1},[h(P,{onGoBack:S}),s("div",ye,[s("div",{class:k(["overlay",{on:p.value}]),onClick:w},null,2),h(ce,{"filtered-grouped-list":x.value,"selected-item":o.value,"open-categories":u.value,"search-query":g.value,"is-menu-open":p.value,"onUpdate:searchQuery":t[0]||(t[0]=r=>g.value=r),onSelectItem:B,onToggleCategory:N,onToggleMenu:W,onCloseMenu:w},null,8,["filtered-grouped-list","selected-item","open-categories","search-query","is-menu-open"]),h(me,{"selected-item":o.value,"format-content":E},null,8,["selected-item"])])],64)):(i(),c("div",pe,[t[1]||(t[1]=s("p",{class:"icon"},"ğŸ”’",-1)),t[2]||(t[2]=s("p",{class:"tit"},"ì ‘ê·¼ ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤",-1)),t[3]||(t[3]=s("p",{class:"txt"},"ì´ í˜ì´ì§€ëŠ” ë§ˆìŠ¤í„° íšŒì›ë§Œ ì—´ëŒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.",-1)),s("button",{class:"btn_back",onClick:S},"ëŒì•„ê°€ê¸°")]))]))}};export{ke as default};
